import{r as p,u as z,a as O,j as a}from"./react-vendor-CyGCsUQe.js";import{s as u,K as m,C as A,d as I,e as T,f as B,B as h,g as L,L as d,S as j,h as F,i as y,j as f,k as b,I as x,O as P,n as D}from"./admin-core-C5HeYDRO.js";import{ax as M,J as R,aG as K}from"./ui-components-e6olwfkV.js";import"./vendor-CiERdGdy.js";import"./aws-sdk-8GCwQI0Y.js";import"./supabase-BCSnXqhr.js";const Q=()=>{const[t,V]=p.useState({vendor_name:"",contact_person:"",email:"",phone:"",address:"",category:"",payment_terms:"",is_active:!0,station:""}),[S,l]=p.useState(!1),[n,N]=p.useState(!1),[i,g]=p.useState(""),v=z(),{id:c}=O(),C=["Fuel Supplier","Food & Beverages","Automotive","Maintenance","Office Supplies","Technology","Cleaning Services","Security Services","Other"],_=["Net 30","Net 15","Payment on Delivery","Prepaid","2/10 Net 30","Custom Terms"],k=["MOBIL","AMOCO ROSEDALE","AMOCO BROOKLYN"];p.useEffect(()=>{c&&(N(!0),w(parseInt(c)))},[c]);const w=async e=>{try{l(!0);const{data:s,error:r}=await u.from("vendors").select("*").eq("id",e).single();if(r)throw r;s&&(V({vendor_name:s.vendor_name||"",contact_person:s.contact_person||"",email:s.email||"",phone:s.phone||"",address:s.address||"",category:s.category||"",payment_terms:s.payment_terms||"",is_active:s.is_active!==!1,station:s.station||""}),g(s.station||""))}catch(s){console.error("Error loading vendor:",s),m({title:"Error",description:"Failed to load vendor details",variant:"destructive"})}finally{l(!1)}},q=async e=>{e.preventDefault();try{l(!0);const s={...t,station:i,created_by:1};if(n&&c){const{error:r}=await u.from("vendors").update(s).eq("id",parseInt(c));if(r)throw r;m({title:"Success",description:"Vendor updated successfully"})}else{const{error:r}=await u.from("vendors").insert([s]);if(r)throw r;m({title:"Success",description:"Vendor created successfully"})}v("/vendors")}catch(s){console.error("Error saving vendor:",s),m({title:"Error",description:`Failed to ${n?"update":"create"} vendor`,variant:"destructive"})}finally{l(!1)}},o=(e,s)=>{V(r=>({...r,[e]:s}))},E=e=>{g(e),V(s=>({...s,station:e}))};return a.jsx("div",{className:"space-y-6","data-id":"2w9w0ie3m","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsxs(A,{"data-id":"u92ybbjr1","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(I,{"data-id":"s8341u6fd","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"yyw5vejf6","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsxs("div",{"data-id":"ev0vfxymk","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsxs(T,{className:"flex items-center space-x-2","data-id":"08bfvda04","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(M,{className:"w-6 h-6","data-id":"0clsb3u9t","data-path":"src/pages/Vendors/VendorForm.tsx"}),a.jsx("span",{"data-id":"6tjj5n0jk","data-path":"src/pages/Vendors/VendorForm.tsx",children:n?"Edit Vendor":"Add New Vendor"})]}),a.jsx(B,{"data-id":"sm0c6svar","data-path":"src/pages/Vendors/VendorForm.tsx",children:n?"Update vendor information":"Add a new vendor to your contacts"})]}),a.jsxs(h,{variant:"outline",onClick:()=>v("/vendors"),"data-id":"ux2b0t48o","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(R,{className:"w-4 h-4 mr-2","data-id":"vb47p75yn","data-path":"src/pages/Vendors/VendorForm.tsx"}),"Back to Vendors"]})]})}),a.jsx(L,{"data-id":"1aauotzv3","data-path":"src/pages/Vendors/VendorForm.tsx",children:!i&&!n?a.jsxs("div",{className:"space-y-6","data-id":"59k8of4qv","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsxs("div",{className:"text-center space-y-4","data-id":"9fjk7gf6k","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx("h3",{className:"text-lg font-semibold","data-id":"mx5ipbxd6","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Select Station First"}),a.jsx("p",{className:"text-gray-600","data-id":"5uvreq4zk","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Please select a station before creating a vendor."})]}),a.jsxs("div",{className:"max-w-md mx-auto space-y-4","data-id":"jyc5mbay0","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"station","data-id":"3n3z724vf","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Station *"}),a.jsxs(j,{value:i,onValueChange:E,"data-id":"6ndbfufr7","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(F,{"data-id":"09vrw0453","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsx(y,{placeholder:"Select a station","data-id":"r3jv6eej9","data-path":"src/pages/Vendors/VendorForm.tsx"})}),a.jsx(f,{"data-id":"wysv0k2uo","data-path":"src/pages/Vendors/VendorForm.tsx",children:k.map(e=>a.jsx(b,{value:e,"data-id":"tz1igse0i","data-path":"src/pages/Vendors/VendorForm.tsx",children:e},e))})]})]})]}):a.jsxs("form",{onSubmit:q,className:"space-y-6","data-id":"0p6uv9atr","data-path":"src/pages/Vendors/VendorForm.tsx",children:[i&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6","data-id":"g1ezcq9i7","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"0hhj943nv","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsxs("div",{"data-id":"3ps9n35b4","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx("h4",{className:"font-medium text-blue-900","data-id":"ts5qkbam9","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Selected Station"}),a.jsx("p",{className:"text-blue-700","data-id":"a05hk127r","data-path":"src/pages/Vendors/VendorForm.tsx",children:i})]}),!n&&a.jsx(h,{type:"button",variant:"outline",size:"sm",onClick:()=>g(""),"data-id":"q4faa3po5","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Change Station"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"e3b0gpvp9","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"8yqmc129j","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"vendor_name","data-id":"vobse7vlx","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Vendor Name *"}),a.jsx(x,{id:"vendor_name",value:t.vendor_name,onChange:e=>o("vendor_name",e.target.value),placeholder:"Enter vendor company name",required:!0,"data-id":"isf47otkl","data-path":"src/pages/Vendors/VendorForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"ed3s2hg8o","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"contact_person","data-id":"baabf5xru","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Contact Person *"}),a.jsx(x,{id:"contact_person",value:t.contact_person,onChange:e=>o("contact_person",e.target.value),placeholder:"Enter primary contact name",required:!0,"data-id":"pa2962rko","data-path":"src/pages/Vendors/VendorForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"zo1ejfl08","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"email","data-id":"o6iftxzhh","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Email Address"}),a.jsx(x,{id:"email",type:"email",value:t.email,onChange:e=>o("email",e.target.value),placeholder:"Enter email address","data-id":"658lw18im","data-path":"src/pages/Vendors/VendorForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"8zj8o3cig","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"phone","data-id":"gol5ruinf","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Phone Number"}),a.jsx(x,{id:"phone",value:t.phone,onChange:e=>o("phone",e.target.value),placeholder:"Enter phone number","data-id":"e2svn4reb","data-path":"src/pages/Vendors/VendorForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"gcl8n0cya","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"category","data-id":"iee7yf4uc","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Category *"}),a.jsxs(j,{value:t.category,onValueChange:e=>o("category",e),"data-id":"dpk05vaoq","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(F,{"data-id":"xnz7lc8sb","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsx(y,{placeholder:"Select vendor category","data-id":"kl1ptz7ih","data-path":"src/pages/Vendors/VendorForm.tsx"})}),a.jsx(f,{"data-id":"p6de13mta","data-path":"src/pages/Vendors/VendorForm.tsx",children:C.map(e=>a.jsx(b,{value:e,"data-id":"kz349t2q3","data-path":"src/pages/Vendors/VendorForm.tsx",children:e},e))})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"x4hvgsrqj","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"payment_terms","data-id":"qflhxi9dw","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Payment Terms"}),a.jsxs(j,{value:t.payment_terms,onValueChange:e=>o("payment_terms",e),"data-id":"nyv09ifgq","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(F,{"data-id":"wfbk3ktue","data-path":"src/pages/Vendors/VendorForm.tsx",children:a.jsx(y,{placeholder:"Select payment terms","data-id":"kpn4p993i","data-path":"src/pages/Vendors/VendorForm.tsx"})}),a.jsx(f,{"data-id":"5qtd6ipbp","data-path":"src/pages/Vendors/VendorForm.tsx",children:_.map(e=>a.jsx(b,{value:e,"data-id":"5lldzxc60","data-path":"src/pages/Vendors/VendorForm.tsx",children:e},e))})]})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"3td80c7pn","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"address","data-id":"mx6j44ifg","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Address"}),a.jsx(P,{id:"address",value:t.address,onChange:e=>o("address",e.target.value),placeholder:"Enter full business address",rows:3,"data-id":"8yvhuyrxe","data-path":"src/pages/Vendors/VendorForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"b4ei1lhzc","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(d,{htmlFor:"is_active","data-id":"xrmb0876n","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Active Status"}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"qb3heg9iv","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(D,{id:"is_active",checked:t.is_active,onCheckedChange:e=>o("is_active",e),"data-id":"1bb7t3tbd","data-path":"src/pages/Vendors/VendorForm.tsx"}),a.jsx("span",{className:"text-sm text-gray-600","data-id":"s0ef3kxp4","data-path":"src/pages/Vendors/VendorForm.tsx",children:t.is_active?"Active vendor":"Inactive vendor"})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4","data-id":"mdj8qi9uy","data-path":"src/pages/Vendors/VendorForm.tsx",children:[a.jsx(h,{type:"button",variant:"outline",onClick:()=>v("/vendors"),"data-id":"8cc83c10p","data-path":"src/pages/Vendors/VendorForm.tsx",children:"Cancel"}),a.jsx(h,{type:"submit",disabled:S,"data-id":"owev6r2tt","data-path":"src/pages/Vendors/VendorForm.tsx",children:S?"Saving...":a.jsxs(a.Fragment,{children:[a.jsx(K,{className:"w-4 h-4 mr-2","data-id":"1mkpbhdp1","data-path":"src/pages/Vendors/VendorForm.tsx"}),n?"Update Vendor":"Create Vendor"]})})]})]})})]})})};export{Q as default};
