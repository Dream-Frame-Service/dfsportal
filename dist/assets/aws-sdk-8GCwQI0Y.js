var Ii=Object.defineProperty;var Oi=(e,s,t)=>s in e?Ii(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var v=(e,s,t)=>Oi(e,typeof s!="symbol"?s+"":s,t);import{H as Se,b as Ys,n as Ue,S as Ns,m as Di,d as Mi,i as Ni,e as Qs,f as Ti,g as Hi,h as Ui,A as Bi,j as Li,k as zi,l as Fi,o as $i,p as Rt,N as _a,q as Ts,r as Ki,s as Js,u as ji,v as qi,w as Wi,x as Vi,y as ka,E as Gi,z as Zi,B as Xi,C as Yi,D as pe,F as H,G as ne,I as Ye,J as Re,K as xa,L as Hs,M as G,O as Pe,P as Ke,Q as Qi,R as he,T as Ot,U as en,V as je,W as Ji,X as eo,Y as Qe,Z as Je,_ as et,$ as to,a0 as so,a1 as no,a2 as ro,a3 as ao,a4 as io,a5 as oo,a6 as co,a7 as lo,a8 as uo,a9 as po,aa as ho,ab as mo,ac as go,ad as So,ae as fo,af as Eo,ag as yo,ah as wo,ai as bo,aj as Co,ak as Ro,al as Ao,am as _o,an as ko,ao as xo,ap as vo,aq as Po,ar as Io,as as Oo,at as Do,au as Mo,av as No,aw as To,ax as Ho,ay as Uo,az as Bo,aA as Lo,aB as zo}from"./vendor-CiERdGdy.js";function Fo(e){return s=>async t=>{var i,d;const{request:n}=t;return Se.isInstance(n)&&n.body&&e.runtime==="node"&&((d=(i=e.requestHandler)==null?void 0:i.constructor)==null?void 0:d.name)!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),s({...t,request:n})}}const $o={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Ko=e=>({applyToStack:s=>{s.add(Fo(e),$o)}}),Be={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},jo=Be.WHEN_SUPPORTED,Wt={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},qo=Be.WHEN_SUPPORTED;var L;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.CRC64NVME="CRC64NVME",e.SHA1="SHA1",e.SHA256="SHA256"})(L||(L={}));var Fn;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Fn||(Fn={}));const Us=L.CRC32;var $n;(function(e){e.ENV="env",e.CONFIG="shared config entry"})($n||($n={}));function Wo(e,s,t){return e.$source||(e.$source={}),e.$source[s]=t,e}function V(e,s,t){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[s]=t}const Kn=e=>{var s,t;return Ys.isInstance(e)?((s=e.headers)==null?void 0:s.date)??((t=e.headers)==null?void 0:t.Date):void 0},tn=e=>new Date(Date.now()+e),Vo=(e,s)=>Math.abs(tn(s).getTime()-e)>=3e5,jn=(e,s)=>{const t=Date.parse(e);return Vo(t,s)?t-Date.now():s},qe=(e,s)=>{if(!s)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return s},va=async e=>{var S,C,A;const s=qe("context",e.context),t=qe("config",e.config),n=(A=(C=(S=s.endpointV2)==null?void 0:S.properties)==null?void 0:C.authSchemes)==null?void 0:A[0],d=await qe("signer",t.signer)(n),u=e==null?void 0:e.signingRegion,l=e==null?void 0:e.signingRegionSet,m=e==null?void 0:e.signingName;return{config:t,signer:d,signingRegion:u,signingRegionSet:l,signingName:m}};class Pa{async sign(s,t,n){var A;if(!Se.isInstance(s))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const i=await va(n),{config:d,signer:u}=i;let{signingRegion:l,signingName:m}=i;const S=n.context;if(((A=S==null?void 0:S.authSchemes)==null?void 0:A.length)??!1){const[R,_]=S.authSchemes;(R==null?void 0:R.name)==="sigv4a"&&(_==null?void 0:_.name)==="sigv4"&&(l=(_==null?void 0:_.signingRegion)??l,m=(_==null?void 0:_.signingName)??m)}return await u.sign(s,{signingDate:tn(d.systemClockOffset),signingRegion:l,signingService:m})}errorHandler(s){return t=>{const n=t.ServerTime??Kn(t.$response);if(n){const i=qe("config",s.config),d=i.systemClockOffset;i.systemClockOffset=jn(n,i.systemClockOffset),i.systemClockOffset!==d&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(s,t){const n=Kn(s);if(n){const i=qe("config",t.config);i.systemClockOffset=jn(n,i.systemClockOffset)}}}class Go extends Pa{async sign(s,t,n){var R;if(!Se.isInstance(s))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:i,signer:d,signingRegion:u,signingRegionSet:l,signingName:m}=await va(n),C=(await((R=i.sigv4aSigningRegionSet)==null?void 0:R.call(i))??l??[u]).join(",");return await d.sign(s,{signingDate:tn(i.systemClockOffset),signingRegion:C,signingService:m})}}const Zo=e=>(e.sigv4aSigningRegionSet=Ue(e.sigv4aSigningRegionSet),e),Xo=e=>{let s=e.credentials,t=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(S){S&&S!==s&&S!==n&&(t=!0),s=S;const C=Yo(e,{credentials:s,credentialDefaultProvider:e.credentialDefaultProvider}),A=Qo(e,C);t&&!A.attributed?(n=async R=>A(R).then(_=>Wo(_,"CREDENTIALS_CODE","e")),n.memoized=A.memoized,n.configBound=A.configBound,n.attributed=!0):n=A},get(){return n},enumerable:!0,configurable:!0}),e.credentials=s;const{signingEscapePath:i=!0,systemClockOffset:d=e.systemClockOffset||0,sha256:u}=e;let l;return e.signer?l=Ue(e.signer):e.regionInfoProvider?l=()=>Ue(e.region)().then(async S=>[await e.regionInfoProvider(S,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},S]).then(([S,C])=>{const{signingRegion:A,signingService:R}=S;e.signingRegion=e.signingRegion||A||C,e.signingName=e.signingName||R||e.serviceId;const _={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:i},F=e.signerConstructor||Ns;return new F(_)}):l=async S=>{S=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ue(e.region)(),properties:{}},S);const C=S.signingRegion,A=S.signingName;e.signingRegion=e.signingRegion||C,e.signingName=e.signingName||A||e.serviceId;const R={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:i},_=e.signerConstructor||Ns;return new _(R)},Object.assign(e,{systemClockOffset:d,signingEscapePath:i,signer:l})};function Yo(e,{credentials:s,credentialDefaultProvider:t}){let n;return s?s!=null&&s.memoized?n=s:n=Di(s,Ni,Mi):t?n=Ue(t(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function Qo(e,s){if(s.configBound)return s;const t=async n=>s({...n,callerClientConfig:e});return t.memoized=s.memoized,t.configBound=!0,t}const Jo=(e,s)=>Qs(e,s).then(t=>s.utf8Encoder(t)),sn=(e,s)=>Jo(e,s).then(t=>{if(t.length){const n=new Ti.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(m,S)=>S.trim()===""&&S.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i;try{i=n.parse(t,!0)}catch(m){throw m&&typeof m=="object"&&Object.defineProperty(m,"$responseBodyText",{value:t}),m}const d="#text",u=Object.keys(i)[0],l=i[u];return l[d]&&(l[u]=l[d],delete l[d]),Hi(l)}return{}}),ec=async(e,s)=>{const t=await sn(e,s);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},tc=(e,s)=>{var t;if(((t=s==null?void 0:s.Error)==null?void 0:t.Code)!==void 0)return s.Error.Code;if((s==null?void 0:s.Code)!==void 0)return s.Code;if(e.statusCode==404)return"NotFound"},Bs=[L.CRC32,L.CRC32C,L.CRC64NVME,L.SHA1,L.SHA256],sc=[L.SHA256,L.SHA1,L.CRC32,L.CRC32C,L.CRC64NVME],nc=(e,{requestChecksumRequired:s,requestAlgorithmMember:t,requestChecksumCalculation:n})=>{if(!t)return n===Be.WHEN_SUPPORTED||s?Us:void 0;if(!e[t])return;const i=e[t];if(!Bs.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${Bs}.`);return i},nn=e=>e===L.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,rc=(e,s)=>{const t=e.toLowerCase();for(const n of Object.keys(s))if(t===n.toLowerCase())return!0;return!1},ac=(e,s)=>{const t=e.toLowerCase();for(const n of Object.keys(s))if(n.toLowerCase().startsWith(t))return!0;return!1},Ia=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Ui(e),ic=()=>Bi,Oa=(e,s)=>{switch(e){case L.MD5:return s.md5;case L.CRC32:return ic();case L.CRC32C:return Li;case L.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case L.SHA1:return s.sha1;case L.SHA256:return s.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}},Da=(e,s)=>{const t=new e;return t.update(zi(s||"")),t.digest()},oc={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},cc=(e,s)=>(t,n)=>async i=>{if(!Se.isInstance(i.request)||ac("x-amz-checksum-",i.request.headers))return t(i);const{request:d,input:u}=i,{body:l,headers:m}=d,{base64Encoder:S,streamHasher:C}=e,{requestChecksumRequired:A,requestAlgorithmMember:R}=s,_=await e.requestChecksumCalculation(),F=R==null?void 0:R.name,N=R==null?void 0:R.httpHeader;F&&!u[F]&&(_===Be.WHEN_SUPPORTED||A)&&(u[F]=Us,N&&(m[N]=Us));const ce=nc(u,{requestChecksumRequired:A,requestAlgorithmMember:R==null?void 0:R.name,requestChecksumCalculation:_});let le=l,fe=m;if(ce){switch(ce){case L.CRC32:V(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case L.CRC32C:V(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case L.CRC64NVME:V(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case L.SHA1:V(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case L.SHA256:V(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const ct=nn(ce),zn=Oa(ce,e);if(Ia(l)){const{getAwsChunkedEncodingStream:qt,bodyLengthChecker:Pi}=e;le=qt(typeof e.requestStreamBufferSize=="number"&&e.requestStreamBufferSize>=8*1024?Fi(l,e.requestStreamBufferSize,n.logger):l,{base64Encoder:S,bodyLengthChecker:Pi,checksumLocationName:ct,checksumAlgorithmFn:zn,streamHasher:C}),fe={...m,"content-encoding":m["content-encoding"]?`${m["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":m["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":ct},delete fe["content-length"]}else if(!rc(ct,m)){const qt=await Da(zn,l);fe={...m,[ct]:S(qt)}}}return await t({...i,request:{...d,headers:fe,body:le}})},dc={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},lc=(e,s)=>(t,n)=>async i=>{const d=i.input,{requestValidationModeMember:u}=s,l=await e.requestChecksumCalculation(),m=await e.responseChecksumValidation();switch(l){case Be.WHEN_REQUIRED:V(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Be.WHEN_SUPPORTED:V(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(m){case Wt.WHEN_REQUIRED:V(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Wt.WHEN_SUPPORTED:V(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return u&&!d[u]&&m===Wt.WHEN_SUPPORTED&&(d[u]="ENABLED"),t(i)},Ma=(e=[])=>{const s=[];for(const t of sc)!e.includes(t)||!Bs.includes(t)||s.push(t);return s},uc=e=>{const s=e.lastIndexOf("-");if(s!==-1){const t=e.slice(s+1);if(!t.startsWith("0")){const n=parseInt(t,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},pc=async(e,{checksumAlgorithmFn:s,base64Encoder:t})=>t(await Da(s,e)),hc=async(e,{config:s,responseAlgorithms:t,logger:n})=>{const i=Ma(t),{body:d,headers:u}=e;for(const l of i){const m=nn(l),S=u[m];if(S){let C;try{C=Oa(l,s)}catch(_){if(l===L.CRC64NVME){n==null||n.warn(`Skipping ${L.CRC64NVME} checksum validation: ${_.message}`);continue}throw _}const{base64Encoder:A}=s;if(Ia(d)){e.body=$i({expectedChecksum:S,checksumSourceLocation:m,checksum:new C,source:d,base64Encoder:A});return}const R=await pc(d,{checksumAlgorithmFn:C,base64Encoder:A});if(R===S)break;throw new Error(`Checksum mismatch: expected "${R}" but received "${S}" in response header "${m}".`)}}},mc={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},gc=(e,s)=>(t,n)=>async i=>{if(!Se.isInstance(i.request))return t(i);const d=i.input,u=await t(i),l=u.response,{requestValidationModeMember:m,responseAlgorithms:S}=s;if(m&&d[m]==="ENABLED"){const{clientName:C,commandName:A}=n;if(C==="S3Client"&&A==="GetObjectCommand"&&Ma(S).every(_=>{const F=nn(_),N=l.headers[F];return!N||uc(N)}))return u;await hc(l,{config:e,responseAlgorithms:S,logger:n.logger})}return u},Na=(e,s)=>({applyToStack:t=>{t.add(cc(e,s),oc),t.addRelativeTo(lc(e,s),dc),t.addRelativeTo(gc(e,s),mc)}}),Sc=e=>{const{requestChecksumCalculation:s,responseChecksumValidation:t,requestStreamBufferSize:n}=e;return Object.assign(e,{requestChecksumCalculation:Rt(s??jo),responseChecksumValidation:Rt(t??qo),requestStreamBufferSize:Number(n??0)})};const fc=e=>s=>async t=>{if(!Se.isInstance(t.request))return s(t);const{request:n}=t,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let d=n.hostname;n.port!=null&&(d+=`:${n.port}`),n.headers.host=d}return s(t)},Ec={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},yc=e=>({applyToStack:s=>{s.add(fc(e),Ec)}}),wc=()=>(e,s)=>async t=>{var n,i;try{const d=await e(t),{clientName:u,commandName:l,logger:m,dynamoDbDocumentClientOptions:S={}}=s,{overrideInputFilterSensitiveLog:C,overrideOutputFilterSensitiveLog:A}=S,R=C??s.inputFilterSensitiveLog,_=A??s.outputFilterSensitiveLog,{$metadata:F,...N}=d.output;return(n=m==null?void 0:m.info)==null||n.call(m,{clientName:u,commandName:l,input:R(t.input),output:_(N),metadata:F}),d}catch(d){const{clientName:u,commandName:l,logger:m,dynamoDbDocumentClientOptions:S={}}=s,{overrideInputFilterSensitiveLog:C}=S,A=C??s.inputFilterSensitiveLog;throw(i=m==null?void 0:m.error)==null||i.call(m,{clientName:u,commandName:l,input:A(t.input),error:d,metadata:d.$metadata}),d}},bc={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Cc=e=>({applyToStack:s=>{s.add(wc(),bc)}});var qn={};const Vt="X-Amzn-Trace-Id",Rc="AWS_LAMBDA_FUNCTION_NAME",Ac="_X_AMZN_TRACE_ID",_c=e=>s=>async t=>{const{request:n}=t;if(!Se.isInstance(n)||e.runtime!=="node")return s(t);const i=Object.keys(n.headers??{}).find(m=>m.toLowerCase()===Vt.toLowerCase())??Vt;if(n.headers.hasOwnProperty(i))return s(t);const d=qn[Rc],u=qn[Ac],l=m=>typeof m=="string"&&m.length>0;return l(d)&&l(u)&&(n.headers[Vt]=u),s({...t,request:n})},kc={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},xc=e=>({applyToStack:s=>{s.add(_c(e),kc)}}),vc="content-length",Pc="x-amz-decoded-content-length";function Ic(){return(e,s)=>async t=>{var i;const{request:n}=t;if(Se.isInstance(n)&&!(vc in n.headers)&&!(Pc in n.headers)){const d="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((i=s==null?void 0:s.logger)==null?void 0:i.warn)=="function"&&!(s.logger instanceof _a)?s.logger.warn(d):console.warn(d)}return e({...t})}}const Oc={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Dc=e=>({applyToStack:s=>{s.add(Ic(),Oc)}}),Mc=e=>(s,t)=>async n=>{const i=await e.region(),d=e.region;let u=()=>{};t.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>t.__s3RegionRedirect}),u=()=>Object.defineProperty(e,"region",{writable:!0,value:d}));try{const l=await s(n);if(t.__s3RegionRedirect){u();const m=await e.region();if(i!==m)throw new Error("Region was not restored following S3 region redirect.")}return l}catch(l){throw u(),l}},Nc={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function Tc(e){return(s,t)=>async n=>{var i,d,u;try{return await s(n)}catch(l){if(e.followRegionRedirects&&(((i=l==null?void 0:l.$metadata)==null?void 0:i.httpStatusCode)===301||((d=l==null?void 0:l.$metadata)==null?void 0:d.httpStatusCode)===400&&(l==null?void 0:l.name)==="IllegalLocationConstraintException")){try{const m=l.$response.headers["x-amz-bucket-region"];(u=t.logger)==null||u.debug(`Redirecting from ${await e.region()} to ${m}`),t.__s3RegionRedirect=m}catch(m){throw new Error("Region redirect failed: "+m)}return s(n)}throw l}}}const Hc={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Uc=e=>({applyToStack:s=>{s.add(Tc(e),Hc),s.addRelativeTo(Mc(e),Nc)}}),Bc=e=>(s,t)=>async n=>{var u;const i=await s(n),{response:d}=i;if(Ys.isInstance(d)&&d.headers.expires){d.headers.expiresstring=d.headers.expires;try{Ts(d.headers.expires)}catch(l){(u=t.logger)==null||u.warn(`AWS SDK Warning for ${t.clientName}::${t.commandName} response parsing (${d.headers.expires}): ${l}`),delete d.headers.expires}}return i},Lc={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},zc=e=>({applyToStack:s=>{s.addRelativeTo(Bc(),Lc)}}),Pt=class Pt{constructor(s={}){v(this,"data");v(this,"lastPurgeTime",Date.now());this.data=s}get(s){const t=this.data[s];if(t)return t}set(s,t){return this.data[s]=t,t}delete(s){delete this.data[s]}async purgeExpired(){const s=Date.now();if(!(this.lastPurgeTime+Pt.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>s))for(const t in this.data){const n=this.data[t];if(!n.isRefreshing){const i=await n.identity;i.expiration&&i.expiration.getTime()<s&&delete this.data[t]}}}};v(Pt,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let Ls=Pt;class Gt{constructor(s,t=!1,n=Date.now()){v(this,"_identity");v(this,"isRefreshing");v(this,"accessed");this._identity=s,this.isRefreshing=t,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}const It=class It{constructor(s,t=new Ls){v(this,"createSessionFn");v(this,"cache");this.createSessionFn=s,this.cache=t}async getS3ExpressIdentity(s,t){const n=t.Bucket,{cache:i}=this,d=i.get(n);return d?d.identity.then(u=>{var S,C;return(((S=u.expiration)==null?void 0:S.getTime())??0)<Date.now()?i.set(n,new Gt(this.getIdentity(n))).identity:((((C=u.expiration)==null?void 0:C.getTime())??0)<Date.now()+It.REFRESH_WINDOW_MS&&!d.isRefreshing&&(d.isRefreshing=!0,this.getIdentity(n).then(A=>{i.set(n,new Gt(Promise.resolve(A)))})),u)}):i.set(n,new Gt(this.getIdentity(n))).identity}async getIdentity(s){var i,d;await this.cache.purgeExpired().catch(u=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+u)});const t=await this.createSessionFn(s);if(!((i=t.Credentials)!=null&&i.AccessKeyId)||!((d=t.Credentials)!=null&&d.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:t.Credentials.AccessKeyId,secretAccessKey:t.Credentials.SecretAccessKey,sessionToken:t.Credentials.SessionToken,expiration:t.Credentials.Expiration?new Date(t.Credentials.Expiration):void 0}}};v(It,"REFRESH_WINDOW_MS",6e4);let zs=It;const Fc="Directory",$c="S3Express",Kc="sigv4-s3express",Fs="X-Amz-S3session-Token",$s=Fs.toLowerCase();class jc extends Ns{async signWithCredentials(s,t,n){const i=Wn(t);s.headers[$s]=t.sessionToken;const d=this;return Vn(d,i),d.signRequest(s,n??{})}async presignWithCredentials(s,t,n){const i=Wn(t);return delete s.headers[$s],s.headers[Fs]=t.sessionToken,s.query=s.query??{},s.query[Fs]=t.sessionToken,Vn(this,i),this.presign(s,n)}}function Wn(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function Vn(e,s){const t=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,i=()=>(clearTimeout(t),e.credentialProvider=n,Promise.resolve(s));e.credentialProvider=i}const qc=e=>(s,t)=>async n=>{var i,d,u,l,m;if(t.endpointV2){const S=t.endpointV2,C=((u=(d=(i=S.properties)==null?void 0:i.authSchemes)==null?void 0:d[0])==null?void 0:u.name)===Kc;if((((l=S.properties)==null?void 0:l.backend)===$c||((m=S.properties)==null?void 0:m.bucketType)===Fc)&&(V(t,"S3_EXPRESS_BUCKET","J"),t.isS3ExpressBucket=!0),C){const R=n.input.Bucket;if(R){const _=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:R});t.s3ExpressIdentity=_,Se.isInstance(n.request)&&_.sessionToken&&(n.request.headers[$s]=_.sessionToken)}}}return s(n)},Wc={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Vc=e=>({applyToStack:s=>{s.add(qc(e),Wc)}}),Gc=async(e,s,t,n)=>{const i=await n.signWithCredentials(t,e,{});if(i.headers["X-Amz-Security-Token"]||i.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return i},Zc=e=>s=>{throw s},Xc=(e,s)=>{},Yc=e=>(s,t)=>async n=>{if(!Se.isInstance(n.request))return s(n);const d=Js(t).selectedHttpAuthScheme;if(!d)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:u={}},identity:l,signer:m}=d;let S;t.s3ExpressIdentity?S=await Gc(t.s3ExpressIdentity,u,n.request,await e.signer()):S=await m.sign(n.request,l,u);const C=await s({...n,request:S}).catch((m.errorHandler||Zc)(u));return(m.successHandler||Xc)(C.response,u),C},Qc=e=>({applyToStack:s=>{s.addRelativeTo(Yc(e),Ki)}}),Jc=(e,{session:s})=>{const[t,n]=s,{forcePathStyle:i,useAccelerateEndpoint:d,disableMultiregionAccessPoints:u,followRegionRedirects:l,s3ExpressIdentityProvider:m,bucketEndpoint:S}=e;return Object.assign(e,{forcePathStyle:i??!1,useAccelerateEndpoint:d??!1,disableMultiregionAccessPoints:u??!1,followRegionRedirects:l??!1,s3ExpressIdentityProvider:m??new zs(async C=>t().send(new n({Bucket:C}))),bucketEndpoint:S??!1})},ed={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},td=3e3,sd=e=>(s,t)=>async n=>{const i=await s(n),{response:d}=i;if(!Ys.isInstance(d))return i;const{statusCode:u,body:l}=d;if(u<200||u>=300||!(typeof(l==null?void 0:l.stream)=="function"||typeof(l==null?void 0:l.pipe)=="function"||typeof(l==null?void 0:l.tee)=="function"))return i;let S=l,C=l;l&&typeof l=="object"&&!(l instanceof Uint8Array)&&([S,C]=await ji(l)),d.body=C;const A=await nd(S,{streamCollector:async _=>qi(_,td)});typeof(S==null?void 0:S.destroy)=="function"&&S.destroy();const R=e.utf8Encoder(A.subarray(A.length-16));if(A.length===0&&ed[t.commandName]){const _=new Error("S3 aborted request");throw _.name="InternalError",_}return R&&R.endsWith("</Error>")&&(d.statusCode=400),i},nd=(e=new Uint8Array,s)=>e instanceof Uint8Array?Promise.resolve(e):s.streamCollector(e)||Promise.resolve(new Uint8Array),rd={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Dt=e=>({applyToStack:s=>{s.addRelativeTo(sd(e),rd)}}),ad=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function id(e){return(s,t)=>async n=>{var i,d,u,l;if(e.bucketEndpoint){const m=t.endpointV2;if(m){const S=n.input.Bucket;if(typeof S=="string")try{const C=new URL(S);t.endpointV2={...m,url:C}}catch(C){const A=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${S} could not be parsed as URL.`;throw((d=(i=t.logger)==null?void 0:i.constructor)==null?void 0:d.name)==="NoOpLogger"?console.warn(A):(l=(u=t.logger)==null?void 0:u.warn)==null||l.call(u,A),C}}}return s(n)}}const od={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function cd({bucketEndpoint:e}){return s=>async t=>{const{input:{Bucket:n}}=t;if(!e&&typeof n=="string"&&!ad(n)&&n.indexOf("/")>=0){const i=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw i.name="InvalidBucketName",i}return s({...t})}}const dd={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},ld=e=>({applyToStack:s=>{s.add(cd(e),dd),s.addRelativeTo(id(e),od)}}),ud=void 0;function pd(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function hd(e){const s=Ue(e.userAgentAppId??ud),{customUserAgent:t}=e;return Object.assign(e,{customUserAgent:typeof t=="string"?[[t]]:t,userAgentAppId:async()=>{var i,d;const n=await s();if(!pd(n)){const u=((d=(i=e.logger)==null?void 0:i.constructor)==null?void 0:d.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?u==null||u.warn("userAgentAppId must be a string or undefined."):n.length>50&&(u==null||u.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return n}})}const Ta=(e,s=!1)=>{if(s){for(const t of e.split("."))if(!Ta(t))return!1;return!0}return!(!Wi(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Vi(e))},Gn=":",md="/",gd=e=>{const s=e.split(Gn);if(s.length<6)return null;const[t,n,i,d,u,...l]=s;if(t!=="arn"||n===""||i===""||l.join(Gn)==="")return null;const m=l.map(S=>S.split(md)).flat();return{partition:n,service:i,region:d,accountId:u,resourceId:m}},Sd=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],fd={partitions:Sd};let Ed=fd;const yd=e=>{const{partitions:s}=Ed;for(const n of s){const{regions:i,outputs:d}=n;for(const[u,l]of Object.entries(i))if(u===e)return{...d,...l}}for(const n of s){const{regionRegex:i,outputs:d}=n;if(new RegExp(i).test(e))return{...d}}const t=s.find(n=>n.id==="aws");if(!t)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...t.outputs}},Ha={isVirtualHostableS3Bucket:Ta,parseArn:gd,partition:yd};ka.aws=Ha;const wd=/\d{12}\.ddb/;async function bd(e,s,t){var d,u,l,m,S,C,A;const n=t.request;if(((d=n==null?void 0:n.headers)==null?void 0:d["smithy-protocol"])==="rpc-v2-cbor"&&V(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof s.retryStrategy=="function"){const R=await s.retryStrategy();typeof R.acquireInitialRetryToken=="function"?(l=(u=R.constructor)==null?void 0:u.name)!=null&&l.includes("Adaptive")?V(e,"RETRY_MODE_ADAPTIVE","F"):V(e,"RETRY_MODE_STANDARD","E"):V(e,"RETRY_MODE_LEGACY","D")}if(typeof s.accountIdEndpointMode=="function"){const R=e.endpointV2;switch(String((m=R==null?void 0:R.url)==null?void 0:m.hostname).match(wd)&&V(e,"ACCOUNT_ID_ENDPOINT","O"),await((S=s.accountIdEndpointMode)==null?void 0:S.call(s))){case"disabled":V(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":V(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":V(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const i=(A=(C=e.__smithy_context)==null?void 0:C.selectedHttpAuthScheme)==null?void 0:A.identity;if(i!=null&&i.$source){const R=i;R.accountId&&V(e,"RESOLVED_ACCOUNT_ID","T");for(const[_,F]of Object.entries(R.$source??{}))V(e,_,F)}}const Zn="user-agent",Zt="x-amz-user-agent",Xn=" ",Xt="/",Cd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Rd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Yn="-",Ad=1024;function _d(e){let s="";for(const t in e){const n=e[t];if(s.length+n.length+1<=Ad){s.length?s+=","+n:s+=n;continue}break}return s}const kd=e=>(s,t)=>async n=>{var _,F,N,ce;const{request:i}=n;if(!Se.isInstance(i))return s(n);const{headers:d}=i,u=((_=t==null?void 0:t.userAgent)==null?void 0:_.map(dt))||[],l=(await e.defaultUserAgentProvider()).map(dt);await bd(t,e,n);const m=t;l.push(`m/${_d(Object.assign({},(F=t.__smithy_context)==null?void 0:F.features,(N=m.__aws_sdk_context)==null?void 0:N.features))}`);const S=((ce=e==null?void 0:e.customUserAgent)==null?void 0:ce.map(dt))||[],C=await e.userAgentAppId();C&&l.push(dt([`app/${C}`]));const A=[].concat([...l,...u,...S]).join(Xn),R=[...l.filter(le=>le.startsWith("aws-sdk-")),...S].join(Xn);return e.runtime!=="browser"?(R&&(d[Zt]=d[Zt]?`${d[Zn]} ${R}`:R),d[Zn]=A):d[Zt]=A,s({...n,request:i})},dt=e=>{var u;const s=e[0].split(Xt).map(l=>l.replace(Cd,Yn)).join(Xt),t=(u=e[1])==null?void 0:u.replace(Rd,Yn),n=s.indexOf(Xt),i=s.substring(0,n);let d=s.substring(n+1);return i==="api"&&(d=d.toLowerCase()),[i,d,t].filter(l=>l&&l.length>0).reduce((l,m,S)=>{switch(S){case 0:return m;case 1:return`${l}/${m}`;default:return`${l}#${m}`}},"")},xd={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},vd=e=>({applyToStack:s=>{s.add(kd(e),xd)}});class rn{constructor(s){v(this,"sigv4aSigner");v(this,"sigv4Signer");v(this,"signerOptions");this.sigv4Signer=new jc(s),this.signerOptions=s}static sigv4aDependency(){return"none"}async sign(s,t={}){return t.signingRegion==="*"?this.getSigv4aSigner().sign(s,t):this.sigv4Signer.sign(s,t)}async signWithCredentials(s,t,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(s,t,n)}async presign(s,t={}){if(t.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(s,t)}async presignWithCredentials(s,t,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(s,t,n)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const an="required",r="type",p="rules",a="conditions",o="fn",c="argv",b="ref",P="assign",E="url",y="properties",xe="backend",re="authSchemes",ee="disableDoubleEncoding",te="signingName",oe="signingRegion",w="headers",on="signingRegionSet",Pd=6,Id=!1,Ee=!0,ue="isSet",q="booleanEquals",f="error",At="aws.partition",T="stringEquals",$="getAttr",j="name",B="substring",Qn="bucketSuffix",cn="parseURL",g="endpoint",h="tree",_t="aws.isVirtualHostableS3Bucket",kt="{url#scheme}://{Bucket}.{url#authority}{url#path}",be="not",Jn="accessPointSuffix",gt="{url#scheme}://{url#authority}{url#path}",Ua="hardwareType",Ba="regionPrefix",er="bucketAliasSuffix",Ks="outpostId",Oe="isValidHostLabel",dn="sigv4a",Xe="s3-outposts",Le="s3",La="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",za="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",tr="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Fa="aws.parseArn",$a="bucketArn",Ka="arnType",xt="",ln="s3-object-lambda",ja="accesspoint",un="accessPointName",sr="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",nr="mrapPartition",rr="outpostType",ar="arnPrefix",qa="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",ir="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",or="https://s3.{partitionResult#dnsSuffix}",Me={[an]:!1,[r]:"String"},Ne={[an]:!0,default:!1,[r]:"Boolean"},ze={[an]:!1,[r]:"Boolean"},ge={[o]:q,[c]:[{[b]:"Accelerate"},!0]},z={[o]:q,[c]:[{[b]:"UseFIPS"},!0]},U={[o]:q,[c]:[{[b]:"UseDualStack"},!0]},K={[o]:ue,[c]:[{[b]:"Endpoint"}]},Wa={[o]:At,[c]:[{[b]:"Region"}],[P]:"partitionResult"},cr={[o]:T,[c]:[{[o]:$,[c]:[{[b]:"partitionResult"},j]},"aws-cn"]},We={[o]:ue,[c]:[{[b]:"Bucket"}]},M={[b]:"Bucket"},dr={[a]:[U],[f]:"S3Express does not support Dual-stack.",[r]:f},lr={[a]:[ge],[f]:"S3Express does not support S3 Accelerate.",[r]:f},ur={[a]:[K,{[o]:cn,[c]:[{[b]:"Endpoint"}],[P]:"url"}],[p]:[{[a]:[{[o]:ue,[c]:[{[b]:"DisableS3ExpressSessionAuth"}]},{[o]:q,[c]:[{[b]:"DisableS3ExpressSessionAuth"},!0]}],[p]:[{[a]:[{[o]:q,[c]:[{[o]:$,[c]:[{[b]:"url"},"isIp"]},!0]}],[p]:[{[a]:[{[o]:"uriEncode",[c]:[M],[P]:"uri_encoded_bucket"}],[p]:[{[g]:{[E]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g}],[r]:h}],[r]:h},{[a]:[{[o]:_t,[c]:[M,!1]}],[p]:[{[g]:{[E]:kt,[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g}],[r]:h},{[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f}],[r]:h},{[a]:[{[o]:q,[c]:[{[o]:$,[c]:[{[b]:"url"},"isIp"]},!0]}],[p]:[{[a]:[{[o]:"uriEncode",[c]:[M],[P]:"uri_encoded_bucket"}],[p]:[{[g]:{[E]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4-s3express",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g}],[r]:h}],[r]:h},{[a]:[{[o]:_t,[c]:[M,!1]}],[p]:[{[g]:{[E]:kt,[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4-s3express",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g}],[r]:h},{[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f}],[r]:h},ie={[o]:cn,[c]:[{[b]:"Endpoint"}],[P]:"url"},Yt={[o]:q,[c]:[{[o]:$,[c]:[{[b]:"url"},"isIp"]},!0]},Va={[b]:"url"},Ga={[o]:"uriEncode",[c]:[M],[P]:"uri_encoded_bucket"},ke={[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4",[te]:"s3express",[oe]:"{Region}"}]},k={},Za={[o]:_t,[c]:[M,!1]},pr={[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f},hr={[o]:ue,[c]:[{[b]:"UseS3ExpressControlEndpoint"}]},mr={[o]:q,[c]:[{[b]:"UseS3ExpressControlEndpoint"},!0]},x={[o]:be,[c]:[K]},lt={[f]:"Unrecognized S3Express bucket name format.",[r]:f},gr={[o]:be,[c]:[We]},Sr={[b]:Ua},fr={[a]:[x],[f]:"Expected a endpoint to be specified but no endpoint was found",[r]:f},ut={[re]:[{[ee]:!0,[j]:dn,[te]:Xe,[on]:["*"]},{[ee]:!0,[j]:"sigv4",[te]:Xe,[oe]:"{Region}"}]},Qt={[o]:q,[c]:[{[b]:"ForcePathStyle"},!1]},Od={[b]:"ForcePathStyle"},W={[o]:q,[c]:[{[b]:"Accelerate"},!1]},X={[o]:T,[c]:[{[b]:"Region"},"aws-global"]},Y={[re]:[{[ee]:!0,[j]:"sigv4",[te]:Le,[oe]:"us-east-1"}]},D={[o]:be,[c]:[X]},Q={[o]:q,[c]:[{[b]:"UseGlobalEndpoint"},!0]},Er={[E]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[y]:{[re]:[{[ee]:!0,[j]:"sigv4",[te]:Le,[oe]:"{Region}"}]},[w]:{}},Z={[re]:[{[ee]:!0,[j]:"sigv4",[te]:Le,[oe]:"{Region}"}]},J={[o]:q,[c]:[{[b]:"UseGlobalEndpoint"},!1]},O={[o]:q,[c]:[{[b]:"UseDualStack"},!1]},yr={[E]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},I={[o]:q,[c]:[{[b]:"UseFIPS"},!1]},wr={[E]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},br={[E]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},Jt={[o]:q,[c]:[{[o]:$,[c]:[Va,"isIp"]},!1]},es={[E]:La,[y]:Z,[w]:{}},js={[E]:kt,[y]:Z,[w]:{}},Cr={[g]:js,[r]:g},ts={[E]:za,[y]:Z,[w]:{}},Rr={[E]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},pt={[f]:"Invalid region: region was not a valid DNS name.",[r]:f},de={[b]:$a},Xa={[b]:Ka},ss={[o]:$,[c]:[de,"service"]},pn={[b]:un},Ar={[a]:[U],[f]:"S3 Object Lambda does not support Dual-stack",[r]:f},_r={[a]:[ge],[f]:"S3 Object Lambda does not support S3 Accelerate",[r]:f},kr={[a]:[{[o]:ue,[c]:[{[b]:"DisableAccessPoints"}]},{[o]:q,[c]:[{[b]:"DisableAccessPoints"},!0]}],[f]:"Access points are not supported for this operation",[r]:f},ns={[a]:[{[o]:ue,[c]:[{[b]:"UseArnRegion"}]},{[o]:q,[c]:[{[b]:"UseArnRegion"},!1]},{[o]:be,[c]:[{[o]:T,[c]:[{[o]:$,[c]:[de,"region"]},"{Region}"]}]}],[f]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[r]:f},Ya={[o]:$,[c]:[{[b]:"bucketPartition"},j]},Qa={[o]:$,[c]:[de,"accountId"]},rs={[re]:[{[ee]:!0,[j]:"sigv4",[te]:ln,[oe]:"{bucketArn#region}"}]},xr={[f]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[r]:f},as={[f]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[r]:f},is={[f]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[r]:f},os={[f]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[r]:f},vr={[f]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[r]:f},Pr={[f]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[r]:f},Fe={[re]:[{[ee]:!0,[j]:"sigv4",[te]:Le,[oe]:"{bucketArn#region}"}]},Ir={[re]:[{[ee]:!0,[j]:dn,[te]:Xe,[on]:["*"]},{[ee]:!0,[j]:"sigv4",[te]:Xe,[oe]:"{bucketArn#region}"}]},Or={[o]:Fa,[c]:[M]},Dr={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Z,[w]:{}},Mr={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Z,[w]:{}},Nr={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Z,[w]:{}},cs={[E]:qa,[y]:Z,[w]:{}},Tr={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Z,[w]:{}},Hr={[b]:"UseObjectLambdaEndpoint"},ds={[re]:[{[ee]:!0,[j]:"sigv4",[te]:ln,[oe]:"{Region}"}]},Ur={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},Br={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},Lr={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},ls={[E]:gt,[y]:Z,[w]:{}},zr={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[y]:Z,[w]:{}},us=[{[b]:"Region"}],Dd=[{[b]:"Endpoint"}],Md=[M],Fr=[U],ps=[ge],Te=[K,ie],$r=[{[o]:ue,[c]:[{[b]:"DisableS3ExpressSessionAuth"}]},{[o]:q,[c]:[{[b]:"DisableS3ExpressSessionAuth"},!0]}],Nd=[Ga],Kr=[Za],me=[Wa],He=[z],jr=[{[o]:B,[c]:[M,6,14,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,14,16,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],ye=[{[a]:[z],[g]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[y]:ke,[w]:{}},[r]:g},{[g]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[y]:ke,[w]:{}},[r]:g}],qr=[{[o]:B,[c]:[M,6,15,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,15,17,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Wr=[{[o]:B,[c]:[M,6,19,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,19,21,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Vr=[{[o]:B,[c]:[M,6,20,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,20,22,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Gr=[{[o]:B,[c]:[M,6,26,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,26,28,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],we=[{[a]:[z],[g]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4-s3express",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g},{[g]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[y]:{[xe]:"S3Express",[re]:[{[ee]:!0,[j]:"sigv4-s3express",[te]:"s3express",[oe]:"{Region}"}]},[w]:{}},[r]:g}],Zr=[M,0,7,!0],Xr=[{[o]:B,[c]:[M,7,15,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,15,17,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Yr=[{[o]:B,[c]:[M,7,16,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,16,18,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Qr=[{[o]:B,[c]:[M,7,20,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,20,22,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Jr=[{[o]:B,[c]:[M,7,21,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,21,23,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],ea=[{[o]:B,[c]:[M,7,27,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:B,[c]:[M,27,29,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:T,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Td=[We],ta=[{[o]:Oe,[c]:[{[b]:Ks},!1]}],sa=[{[o]:T,[c]:[{[b]:Ba},"beta"]}],Hd=["*"],na=[{[o]:Oe,[c]:[{[b]:"Region"},!1]}],Ce=[{[o]:T,[c]:[{[b]:"Region"},"us-east-1"]}],hs=[{[o]:T,[c]:[Xa,ja]}],ra=[{[o]:$,[c]:[de,"resourceId[1]"],[P]:un},{[o]:be,[c]:[{[o]:T,[c]:[pn,xt]}]}],Ud=[de,"resourceId[1]"],ms=[{[o]:be,[c]:[{[o]:T,[c]:[{[o]:$,[c]:[de,"region"]},xt]}]}],aa=[{[o]:be,[c]:[{[o]:ue,[c]:[{[o]:$,[c]:[de,"resourceId[2]"]}]}]}],Bd=[de,"resourceId[2]"],gs=[{[o]:At,[c]:[{[o]:$,[c]:[de,"region"]}],[P]:"bucketPartition"}],ia=[{[o]:T,[c]:[Ya,{[o]:$,[c]:[{[b]:"partitionResult"},j]}]}],Ss=[{[o]:Oe,[c]:[{[o]:$,[c]:[de,"region"]},!0]}],fs=[{[o]:Oe,[c]:[Qa,!1]}],oa=[{[o]:Oe,[c]:[pn,!1]}],ca=[{[o]:Oe,[c]:[{[b]:"Region"},!0]}],Ld={parameters:{Bucket:Me,Region:Me,UseFIPS:Ne,UseDualStack:Ne,Endpoint:Me,ForcePathStyle:Ne,Accelerate:Ne,UseGlobalEndpoint:Ne,UseObjectLambdaEndpoint:ze,Key:Me,Prefix:Me,CopySource:Me,DisableAccessPoints:ze,DisableMultiRegionAccessPoints:Ne,UseArnRegion:ze,UseS3ExpressControlEndpoint:ze,DisableS3ExpressSessionAuth:ze},[p]:[{[a]:[{[o]:ue,[c]:us}],[p]:[{[a]:[ge,z],error:"Accelerate cannot be used with FIPS",[r]:f},{[a]:[U,K],error:"Cannot set dual-stack in combination with a custom endpoint.",[r]:f},{[a]:[K,z],error:"A custom endpoint cannot be combined with FIPS",[r]:f},{[a]:[K,ge],error:"A custom endpoint cannot be combined with S3 Accelerate",[r]:f},{[a]:[z,Wa,cr],error:"Partition does not support FIPS",[r]:f},{[a]:[We,{[o]:B,[c]:[M,0,Pd,Ee],[P]:Qn},{[o]:T,[c]:[{[b]:Qn},"--x-s3"]}],[p]:[dr,lr,ur,{[a]:[hr,mr],[p]:[{[a]:me,[p]:[{[a]:[Ga,x],[p]:[{[a]:He,endpoint:{[E]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:ke,[w]:k},[r]:g},{endpoint:{[E]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:ke,[w]:k},[r]:g}],[r]:h}],[r]:h}],[r]:h},{[a]:Kr,[p]:[{[a]:me,[p]:[{[a]:$r,[p]:[{[a]:jr,[p]:ye,[r]:h},{[a]:qr,[p]:ye,[r]:h},{[a]:Wr,[p]:ye,[r]:h},{[a]:Vr,[p]:ye,[r]:h},{[a]:Gr,[p]:ye,[r]:h},lt],[r]:h},{[a]:jr,[p]:we,[r]:h},{[a]:qr,[p]:we,[r]:h},{[a]:Wr,[p]:we,[r]:h},{[a]:Vr,[p]:we,[r]:h},{[a]:Gr,[p]:we,[r]:h},lt],[r]:h}],[r]:h},pr],[r]:h},{[a]:[We,{[o]:B,[c]:Zr,[P]:Jn},{[o]:T,[c]:[{[b]:Jn},"--xa-s3"]}],[p]:[dr,lr,ur,{[a]:Kr,[p]:[{[a]:me,[p]:[{[a]:$r,[p]:[{[a]:Xr,[p]:ye,[r]:h},{[a]:Yr,[p]:ye,[r]:h},{[a]:Qr,[p]:ye,[r]:h},{[a]:Jr,[p]:ye,[r]:h},{[a]:ea,[p]:ye,[r]:h},lt],[r]:h},{[a]:Xr,[p]:we,[r]:h},{[a]:Yr,[p]:we,[r]:h},{[a]:Qr,[p]:we,[r]:h},{[a]:Jr,[p]:we,[r]:h},{[a]:ea,[p]:we,[r]:h},lt],[r]:h}],[r]:h},pr],[r]:h},{[a]:[gr,hr,mr],[p]:[{[a]:me,[p]:[{[a]:Te,endpoint:{[E]:gt,[y]:ke,[w]:k},[r]:g},{[a]:He,endpoint:{[E]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[y]:ke,[w]:k},[r]:g},{endpoint:{[E]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[y]:ke,[w]:k},[r]:g}],[r]:h}],[r]:h},{[a]:[We,{[o]:B,[c]:[M,49,50,Ee],[P]:Ua},{[o]:B,[c]:[M,8,12,Ee],[P]:Ba},{[o]:B,[c]:Zr,[P]:er},{[o]:B,[c]:[M,32,49,Ee],[P]:Ks},{[o]:At,[c]:us,[P]:"regionPartition"},{[o]:T,[c]:[{[b]:er},"--op-s3"]}],[p]:[{[a]:ta,[p]:[{[a]:[{[o]:T,[c]:[Sr,"e"]}],[p]:[{[a]:sa,[p]:[fr,{[a]:Te,endpoint:{[E]:"https://{Bucket}.ec2.{url#authority}",[y]:ut,[w]:k},[r]:g}],[r]:h},{endpoint:{[E]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[y]:ut,[w]:k},[r]:g}],[r]:h},{[a]:[{[o]:T,[c]:[Sr,"o"]}],[p]:[{[a]:sa,[p]:[fr,{[a]:Te,endpoint:{[E]:"https://{Bucket}.op-{outpostId}.{url#authority}",[y]:ut,[w]:k},[r]:g}],[r]:h},{endpoint:{[E]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[y]:ut,[w]:k},[r]:g}],[r]:h},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[r]:f}],[r]:h},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[r]:f}],[r]:h},{[a]:Td,[p]:[{[a]:[K,{[o]:be,[c]:[{[o]:ue,[c]:[{[o]:cn,[c]:Dd}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[r]:f},{[a]:[Qt,Za],[p]:[{[a]:me,[p]:[{[a]:na,[p]:[{[a]:[ge,cr],error:"S3 Accelerate cannot be used in this region",[r]:f},{[a]:[U,z,W,x,X],endpoint:{[E]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[U,z,W,x,D,Q],[p]:[{endpoint:Er,[r]:g}],[r]:h},{[a]:[U,z,W,x,D,J],endpoint:Er,[r]:g},{[a]:[O,z,W,x,X],endpoint:{[E]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[O,z,W,x,D,Q],[p]:[{endpoint:yr,[r]:g}],[r]:h},{[a]:[O,z,W,x,D,J],endpoint:yr,[r]:g},{[a]:[U,I,ge,x,X],endpoint:{[E]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[U,I,ge,x,D,Q],[p]:[{endpoint:wr,[r]:g}],[r]:h},{[a]:[U,I,ge,x,D,J],endpoint:wr,[r]:g},{[a]:[U,I,W,x,X],endpoint:{[E]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[U,I,W,x,D,Q],[p]:[{endpoint:br,[r]:g}],[r]:h},{[a]:[U,I,W,x,D,J],endpoint:br,[r]:g},{[a]:[O,I,W,K,ie,Yt,X],endpoint:{[E]:La,[y]:Y,[w]:k},[r]:g},{[a]:[O,I,W,K,ie,Jt,X],endpoint:{[E]:kt,[y]:Y,[w]:k},[r]:g},{[a]:[O,I,W,K,ie,Yt,D,Q],[p]:[{[a]:Ce,endpoint:es,[r]:g},{endpoint:es,[r]:g}],[r]:h},{[a]:[O,I,W,K,ie,Jt,D,Q],[p]:[{[a]:Ce,endpoint:js,[r]:g},Cr],[r]:h},{[a]:[O,I,W,K,ie,Yt,D,J],endpoint:es,[r]:g},{[a]:[O,I,W,K,ie,Jt,D,J],endpoint:js,[r]:g},{[a]:[O,I,ge,x,X],endpoint:{[E]:za,[y]:Y,[w]:k},[r]:g},{[a]:[O,I,ge,x,D,Q],[p]:[{[a]:Ce,endpoint:ts,[r]:g},{endpoint:ts,[r]:g}],[r]:h},{[a]:[O,I,ge,x,D,J],endpoint:ts,[r]:g},{[a]:[O,I,W,x,X],endpoint:{[E]:tr,[y]:Y,[w]:k},[r]:g},{[a]:[O,I,W,x,D,Q],[p]:[{[a]:Ce,endpoint:{[E]:tr,[y]:Z,[w]:k},[r]:g},{endpoint:Rr,[r]:g}],[r]:h},{[a]:[O,I,W,x,D,J],endpoint:Rr,[r]:g}],[r]:h},pt],[r]:h}],[r]:h},{[a]:[K,ie,{[o]:T,[c]:[{[o]:$,[c]:[Va,"scheme"]},"http"]},{[o]:_t,[c]:[M,Ee]},Qt,I,O,W],[p]:[{[a]:me,[p]:[{[a]:na,[p]:[Cr],[r]:h},pt],[r]:h}],[r]:h},{[a]:[Qt,{[o]:Fa,[c]:Md,[P]:$a}],[p]:[{[a]:[{[o]:$,[c]:[de,"resourceId[0]"],[P]:Ka},{[o]:be,[c]:[{[o]:T,[c]:[Xa,xt]}]}],[p]:[{[a]:[{[o]:T,[c]:[ss,ln]}],[p]:[{[a]:hs,[p]:[{[a]:ra,[p]:[Ar,_r,{[a]:ms,[p]:[kr,{[a]:aa,[p]:[ns,{[a]:gs,[p]:[{[a]:me,[p]:[{[a]:ia,[p]:[{[a]:Ss,[p]:[{[a]:[{[o]:T,[c]:[Qa,xt]}],error:"Invalid ARN: Missing account id",[r]:f},{[a]:fs,[p]:[{[a]:oa,[p]:[{[a]:Te,endpoint:{[E]:sr,[y]:rs,[w]:k},[r]:g},{[a]:He,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:rs,[w]:k},[r]:g},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:rs,[w]:k},[r]:g}],[r]:h},xr],[r]:h},as],[r]:h},is],[r]:h},os],[r]:h}],[r]:h}],[r]:h},vr],[r]:h},{error:"Invalid ARN: bucket ARN is missing a region",[r]:f}],[r]:h},Pr],[r]:h},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[r]:f}],[r]:h},{[a]:hs,[p]:[{[a]:ra,[p]:[{[a]:ms,[p]:[{[a]:hs,[p]:[{[a]:ms,[p]:[kr,{[a]:aa,[p]:[ns,{[a]:gs,[p]:[{[a]:me,[p]:[{[a]:[{[o]:T,[c]:[Ya,"{partitionResult#name}"]}],[p]:[{[a]:Ss,[p]:[{[a]:[{[o]:T,[c]:[ss,Le]}],[p]:[{[a]:fs,[p]:[{[a]:oa,[p]:[{[a]:ps,error:"Access Points do not support S3 Accelerate",[r]:f},{[a]:[z,U],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:Fe,[w]:k},[r]:g},{[a]:[z,O],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:Fe,[w]:k},[r]:g},{[a]:[I,U],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:Fe,[w]:k},[r]:g},{[a]:[I,O,K,ie],endpoint:{[E]:sr,[y]:Fe,[w]:k},[r]:g},{[a]:[I,O],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:Fe,[w]:k},[r]:g}],[r]:h},xr],[r]:h},as],[r]:h},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[r]:f}],[r]:h},is],[r]:h},os],[r]:h}],[r]:h}],[r]:h},vr],[r]:h}],[r]:h}],[r]:h},{[a]:[{[o]:Oe,[c]:[pn,Ee]}],[p]:[{[a]:Fr,error:"S3 MRAP does not support dual-stack",[r]:f},{[a]:He,error:"S3 MRAP does not support FIPS",[r]:f},{[a]:ps,error:"S3 MRAP does not support S3 Accelerate",[r]:f},{[a]:[{[o]:q,[c]:[{[b]:"DisableMultiRegionAccessPoints"},Ee]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[r]:f},{[a]:[{[o]:At,[c]:us,[P]:nr}],[p]:[{[a]:[{[o]:T,[c]:[{[o]:$,[c]:[{[b]:nr},j]},{[o]:$,[c]:[de,"partition"]}]}],[p]:[{endpoint:{[E]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[y]:{[re]:[{[ee]:Ee,name:dn,[te]:Le,[on]:Hd}]},[w]:k},[r]:g}],[r]:h},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[r]:f}],[r]:h}],[r]:h},{error:"Invalid Access Point Name",[r]:f}],[r]:h},Pr],[r]:h},{[a]:[{[o]:T,[c]:[ss,Xe]}],[p]:[{[a]:Fr,error:"S3 Outposts does not support Dual-stack",[r]:f},{[a]:He,error:"S3 Outposts does not support FIPS",[r]:f},{[a]:ps,error:"S3 Outposts does not support S3 Accelerate",[r]:f},{[a]:[{[o]:ue,[c]:[{[o]:$,[c]:[de,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[r]:f},{[a]:[{[o]:$,[c]:Ud,[P]:Ks}],[p]:[{[a]:ta,[p]:[ns,{[a]:gs,[p]:[{[a]:me,[p]:[{[a]:ia,[p]:[{[a]:Ss,[p]:[{[a]:fs,[p]:[{[a]:[{[o]:$,[c]:Bd,[P]:rr}],[p]:[{[a]:[{[o]:$,[c]:[de,"resourceId[3]"],[P]:un}],[p]:[{[a]:[{[o]:T,[c]:[{[b]:rr},ja]}],[p]:[{[a]:Te,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[y]:Ir,[w]:k},[r]:g},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[y]:Ir,[w]:k},[r]:g}],[r]:h},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[r]:f}],[r]:h},{error:"Invalid ARN: expected an access point name",[r]:f}],[r]:h},{error:"Invalid ARN: Expected a 4-component resource",[r]:f}],[r]:h},as],[r]:h},is],[r]:h},os],[r]:h}],[r]:h}],[r]:h},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[r]:f}],[r]:h},{error:"Invalid ARN: The Outpost Id was not set",[r]:f}],[r]:h},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[r]:f}],[r]:h},{error:"Invalid ARN: No ARN type specified",[r]:f}],[r]:h},{[a]:[{[o]:B,[c]:[M,0,4,Id],[P]:ar},{[o]:T,[c]:[{[b]:ar},"arn:"]},{[o]:be,[c]:[{[o]:ue,[c]:[Or]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[r]:f},{[a]:[{[o]:q,[c]:[Od,Ee]},Or],error:"Path-style addressing cannot be used with ARN buckets",[r]:f},{[a]:Nd,[p]:[{[a]:me,[p]:[{[a]:[W],[p]:[{[a]:[U,x,z,X],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Y,[w]:k},[r]:g},{[a]:[U,x,z,D,Q],[p]:[{endpoint:Dr,[r]:g}],[r]:h},{[a]:[U,x,z,D,J],endpoint:Dr,[r]:g},{[a]:[O,x,z,X],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Y,[w]:k},[r]:g},{[a]:[O,x,z,D,Q],[p]:[{endpoint:Mr,[r]:g}],[r]:h},{[a]:[O,x,z,D,J],endpoint:Mr,[r]:g},{[a]:[U,x,I,X],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[y]:Y,[w]:k},[r]:g},{[a]:[U,x,I,D,Q],[p]:[{endpoint:Nr,[r]:g}],[r]:h},{[a]:[U,x,I,D,J],endpoint:Nr,[r]:g},{[a]:[O,K,ie,I,X],endpoint:{[E]:qa,[y]:Y,[w]:k},[r]:g},{[a]:[O,K,ie,I,D,Q],[p]:[{[a]:Ce,endpoint:cs,[r]:g},{endpoint:cs,[r]:g}],[r]:h},{[a]:[O,K,ie,I,D,J],endpoint:cs,[r]:g},{[a]:[O,x,I,X],endpoint:{[E]:ir,[y]:Y,[w]:k},[r]:g},{[a]:[O,x,I,D,Q],[p]:[{[a]:Ce,endpoint:{[E]:ir,[y]:Z,[w]:k},[r]:g},{endpoint:Tr,[r]:g}],[r]:h},{[a]:[O,x,I,D,J],endpoint:Tr,[r]:g}],[r]:h},{error:"Path-style addressing cannot be used with S3 Accelerate",[r]:f}],[r]:h}],[r]:h}],[r]:h},{[a]:[{[o]:ue,[c]:[Hr]},{[o]:q,[c]:[Hr,Ee]}],[p]:[{[a]:me,[p]:[{[a]:ca,[p]:[Ar,_r,{[a]:Te,endpoint:{[E]:gt,[y]:ds,[w]:k},[r]:g},{[a]:He,endpoint:{[E]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[y]:ds,[w]:k},[r]:g},{endpoint:{[E]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[y]:ds,[w]:k},[r]:g}],[r]:h},pt],[r]:h}],[r]:h},{[a]:[gr],[p]:[{[a]:me,[p]:[{[a]:ca,[p]:[{[a]:[z,U,x,X],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[z,U,x,D,Q],[p]:[{endpoint:Ur,[r]:g}],[r]:h},{[a]:[z,U,x,D,J],endpoint:Ur,[r]:g},{[a]:[z,O,x,X],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[z,O,x,D,Q],[p]:[{endpoint:Br,[r]:g}],[r]:h},{[a]:[z,O,x,D,J],endpoint:Br,[r]:g},{[a]:[I,U,x,X],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[y]:Y,[w]:k},[r]:g},{[a]:[I,U,x,D,Q],[p]:[{endpoint:Lr,[r]:g}],[r]:h},{[a]:[I,U,x,D,J],endpoint:Lr,[r]:g},{[a]:[I,O,K,ie,X],endpoint:{[E]:gt,[y]:Y,[w]:k},[r]:g},{[a]:[I,O,K,ie,D,Q],[p]:[{[a]:Ce,endpoint:ls,[r]:g},{endpoint:ls,[r]:g}],[r]:h},{[a]:[I,O,K,ie,D,J],endpoint:ls,[r]:g},{[a]:[I,O,x,X],endpoint:{[E]:or,[y]:Y,[w]:k},[r]:g},{[a]:[I,O,x,D,Q],[p]:[{[a]:Ce,endpoint:{[E]:or,[y]:Z,[w]:k},[r]:g},{endpoint:zr,[r]:g}],[r]:h},{[a]:[I,O,x,D,J],endpoint:zr,[r]:g}],[r]:h},pt],[r]:h}],[r]:h}],[r]:h},{error:"A region must be set when sending requests to S3.",[r]:f}]},zd=Ld,Fd=new Gi({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Ja=(e,s={})=>Fd.get(e,()=>Zi(zd,{endpointParams:e,logger:s.logger}));ka.aws=Ha;const $d=e=>async(s,t,n)=>{var l,m,S;if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const i=await e(s,t,n),d=(S=(m=(l=Js(t))==null?void 0:l.commandInstance)==null?void 0:m.constructor)==null?void 0:S.getEndpointParameterInstructions;if(!d)throw new Error(`getEndpointParameterInstructions() is not defined on \`${t.commandName}\``);const u=await Xi(n,{getEndpointParameterInstructions:d},s);return Object.assign(i,u)},Kd=async(e,s,t)=>({operation:Js(s).operation,region:await Rt(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),jd=$d(Kd);function ei(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function ti(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}const qd=(e,s,t)=>i=>{var m;const u=(m=e(i).properties)==null?void 0:m.authSchemes;if(!u)return s(i);const l=[];for(const S of u){const{name:C,properties:A={},...R}=S,_=C.toLowerCase();C!==_&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${C}\` to \`${_}\``);let F;if(_==="sigv4a"){F="aws.auth#sigv4a";const le=u.find(fe=>{const De=fe.name.toLowerCase();return De!=="sigv4a"&&De.startsWith("sigv4")});if(rn.sigv4aDependency()==="none"&&le)continue}else if(_.startsWith("sigv4"))F="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${_}\``);const N=t[F];if(!N)throw new Error(`Could not find HttpAuthOption create function for \`${F}\``);const ce=N(i);ce.schemeId=F,ce.signingProperties={...ce.signingProperties||{},...R,...A},l.push(ce)}return l},Wd=e=>{const s=[];switch(e.operation){default:s.push(ei(e)),s.push(ti(e))}return s},Vd=qd(Ja,Wd,{"aws.auth#sigv4":ei,"aws.auth#sigv4a":ti}),Gd=e=>{const s=Xo(e),t=Zo(s);return Object.assign(t,{authSchemePreference:Rt(e.authSchemePreference??[])})},Zd=e=>Object.assign(e,{useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),tt={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class ae extends Yi{constructor(s){super(s),Object.setPrototypeOf(this,ae.prototype)}}class hn extends ae{constructor(t){super({name:"NoSuchUpload",$fault:"client",...t});v(this,"name","NoSuchUpload");v(this,"$fault","client");Object.setPrototypeOf(this,hn.prototype)}}class mn extends ae{constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t});v(this,"name","ObjectNotInActiveTierError");v(this,"$fault","client");Object.setPrototypeOf(this,mn.prototype)}}class gn extends ae{constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t});v(this,"name","BucketAlreadyExists");v(this,"$fault","client");Object.setPrototypeOf(this,gn.prototype)}}class Sn extends ae{constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t});v(this,"name","BucketAlreadyOwnedByYou");v(this,"$fault","client");Object.setPrototypeOf(this,Sn.prototype)}}class fn extends ae{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t});v(this,"name","NoSuchBucket");v(this,"$fault","client");Object.setPrototypeOf(this,fn.prototype)}}var da;(function(e){e.visit=(s,t)=>s.Prefix!==void 0?t.Prefix(s.Prefix):s.Tag!==void 0?t.Tag(s.Tag):s.And!==void 0?t.And(s.And):t._(s.$unknown[0],s.$unknown[1])})(da||(da={}));var la;(function(e){e.visit=(s,t)=>s.Prefix!==void 0?t.Prefix(s.Prefix):s.Tag!==void 0?t.Tag(s.Tag):s.AccessPointArn!==void 0?t.AccessPointArn(s.AccessPointArn):s.And!==void 0?t.And(s.And):t._(s.$unknown[0],s.$unknown[1])})(la||(la={}));class En extends ae{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t});v(this,"name","InvalidObjectState");v(this,"$fault","client");v(this,"StorageClass");v(this,"AccessTier");Object.setPrototypeOf(this,En.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}}class yn extends ae{constructor(t){super({name:"NoSuchKey",$fault:"client",...t});v(this,"name","NoSuchKey");v(this,"$fault","client");Object.setPrototypeOf(this,yn.prototype)}}class wn extends ae{constructor(t){super({name:"NotFound",$fault:"client",...t});v(this,"name","NotFound");v(this,"$fault","client");Object.setPrototypeOf(this,wn.prototype)}}const Xd=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:pe},...e.SessionToken&&{SessionToken:pe}}),Yd=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:pe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:pe},...e.Credentials&&{Credentials:Xd(e.Credentials)}}),Qd=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:pe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:pe}}),Jd=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:pe}}),el=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:pe}});class bn extends ae{constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t});v(this,"name","EncryptionTypeMismatch");v(this,"$fault","client");Object.setPrototypeOf(this,bn.prototype)}}class Cn extends ae{constructor(t){super({name:"InvalidRequest",$fault:"client",...t});v(this,"name","InvalidRequest");v(this,"$fault","client");Object.setPrototypeOf(this,Cn.prototype)}}class Rn extends ae{constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t});v(this,"name","InvalidWriteOffset");v(this,"$fault","client");Object.setPrototypeOf(this,Rn.prototype)}}class An extends ae{constructor(t){super({name:"TooManyParts",$fault:"client",...t});v(this,"name","TooManyParts");v(this,"$fault","client");Object.setPrototypeOf(this,An.prototype)}}class _n extends ae{constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t});v(this,"name","ObjectAlreadyInActiveTierError");v(this,"$fault","client");Object.setPrototypeOf(this,_n.prototype)}}var ua;(function(e){e.visit=(s,t)=>s.Records!==void 0?t.Records(s.Records):s.Stats!==void 0?t.Stats(s.Stats):s.Progress!==void 0?t.Progress(s.Progress):s.Cont!==void 0?t.Cont(s.Cont):s.End!==void 0?t.End(s.End):t._(s.$unknown[0],s.$unknown[1])})(ua||(ua={}));const tl=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:pe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:pe}}),sl=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:pe},...e.SSEKMSKeyId&&{SSEKMSKeyId:pe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:pe}}),nl=async(e,s)=>{const t=Ye(e,s),n=H({},ne,{[Nu]:e[au],[it]:e[nt],[ot]:e[rt],[$t]:e[Bt],[_e]:[()=>ne(e[Ie]),()=>e[Ie].toString()]});t.bp("/"),t.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const i=H({[Pu]:[,""]});return t.m("GET").h(n).q(i).b(void 0),t.build()},rl=async(e,s)=>{const t=Ye(e,s),n=H({},ne,{[Fu]:e[Wl],[Ft]:e[Tt],[Du]:[()=>ne(e[pa]),()=>e[pa].toString()],[Lt]:e[Mt],[Dn]:e[On],[Lu]:[()=>ne(e[ha]),()=>je(e[ha]).toString()],[zu]:[()=>ne(e[ma]),()=>e[ma].toString()]});t.bp("/{Key+}"),t.p("Bucket",()=>e.Bucket,"{Bucket}",!1),t.p("Key",()=>e.Key,"{Key+}",!0);const i=H({[Ln]:[,"DeleteObject"],[wi]:[,e[at]]});return t.m("DELETE").h(n).q(i).b(void 0),t.build()},al=async(e,s)=>{const t=Ye(e,s),n=H({},ne,{[Dn]:e[On],[Su]:[()=>ne(e[ga]),()=>je(e[ga]).toString()],[yi]:e[ci],[fu]:[()=>ne(e[Sa]),()=>je(e[Sa]).toString()],[Cu]:e[Xl],[Kt]:e[Ht],[ki]:e[ui],[jt]:e[Ut],[Ft]:e[Tt],[Lt]:e[Mt],[Mu]:e[Ul]});t.bp("/{Key+}"),t.p("Bucket",()=>e.Bucket,"{Bucket}",!1),t.p("Key",()=>e.Key,"{Key+}",!0);const i=H({[Ln]:[,"GetObject"],[Ru]:[,e[Yl]],[Au]:[,e[Ql]],[_u]:[,e[Jl]],[ku]:[,e[eu]],[xu]:[,e[tu]],[vu]:[()=>e.ResponseExpires!==void 0,()=>je(e[su]).toString()],[wi]:[,e[at]],[wu]:[()=>e.PartNumber!==void 0,()=>e[Zl].toString()]});return t.m("GET").h(n).q(i).b(void 0),t.build()},il=async(e,s)=>{const t=Ye(e,s),n=H({},ne,{[Ft]:e[Tt],[Lt]:e[Mt],[$u]:[()=>ne(e[fa]),()=>(e[fa]||[]).map(Ji).join(", ")]});t.bp("/"),t.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const i=H({[Eu]:[,"2"],[pu]:[,e[ft]],[hu]:[,e[Et]],[yu]:[()=>e.MaxKeys!==void 0,()=>e[wt].toString()],[bu]:[,e[ve]],[uu]:[,e[St]],[gu]:[()=>e.FetchOwner!==void 0,()=>e[Fl].toString()],[Iu]:[,e[bt]]});return t.m("GET").h(n).q(i).b(void 0),t.build()},ol=async(e,s)=>{const t=Ye(e,s),n=H({},ne,{...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((l,m)=>(l[`x-amz-meta-${m.toLowerCase()}`]=e.Metadata[m],l),{}),[fi]:e[ii]||"application/octet-stream",[Ou]:e[Tl],[hi]:e[si],[mi]:e[ni],[gi]:e[ri],[Si]:e[ai],[Gs]:[()=>ne(e[qs]),()=>e[qs].toString()],[du]:e[Bl],[qu]:e[$e],[Mn]:e[kn],[Nn]:e[xn],[Tn]:e[vn],[Hn]:e[Pn],[Un]:e[In],[Zs]:[()=>ne(e[Ws]),()=>je(e[Ws]).toString()],[Dn]:e[On],[yi]:e[ci],[Tu]:e[$l],[Hu]:e[Kl],[Uu]:e[jl],[Bu]:e[ql],[Vu]:[()=>ne(e[Ea]),()=>e[Ea].toString()],[it]:e[nt],[_i]:e[Ae],[xi]:e[pi],[Kt]:e[Ht],[ki]:e[ui],[jt]:e[Ut],[ot]:e[rt],[$t]:e[Bt],[_e]:[()=>ne(e[Ie]),()=>e[Ie].toString()],[Ft]:e[Tt],[Wu]:e[iu],[Ai]:e[li],[Xs]:[()=>ne(e[Vs]),()=>eo(e[Vs]).toString()],[Ri]:e[di],[Lt]:e[Mt]});t.bp("/{Key+}"),t.p("Bucket",()=>e.Bucket,"{Bucket}",!1),t.p("Key",()=>e.Key,"{Key+}",!0);const i=H({[Ln]:[,"PutObject"]});let d,u;return e.Body!==void 0&&(u=e.Body,d=u),t.m("PUT").h(n).q(i).b(d),t.build()},cl=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return st(e,s);const t=H({$metadata:se(e),[nt]:[,e.headers[it]],[rt]:[,e.headers[ot]],[Bt]:[,e.headers[$t]],[Ie]:[()=>e.headers[_e]!==void 0,()=>Pe(e.headers[_e])]}),n=Re(xa(await sn(e.body,s)),"body");return n[ws]!=null&&(t[ws]=Nl(n[ws])),t},dl=async(e,s)=>{if(e.statusCode!==204&&e.statusCode>=300)return st(e,s);const t=H({$metadata:se(e),[oi]:[()=>e.headers[vt]!==void 0,()=>Pe(e.headers[vt])],[at]:[,e.headers[Bn]],[Nt]:[,e.headers[zt]]});return await Qs(e.body,s),t},ll=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return st(e,s);const t=H({$metadata:se(e),[oi]:[()=>e.headers[vt]!==void 0,()=>Pe(e.headers[vt])],[Hl]:[,e.headers[cu]],[Ze]:[,e.headers[Ci]],[ru]:[,e.headers[Ku]],[yt]:[()=>e.headers[ya]!==void 0,()=>Re(Ts(e.headers[ya]))],[qs]:[()=>e.headers[Gs]!==void 0,()=>en(e.headers[Gs])],[Ge]:[,e.headers[Ei]],[kn]:[,e.headers[Mn]],[xn]:[,e.headers[Nn]],[vn]:[,e.headers[Tn]],[Pn]:[,e.headers[Hn]],[In]:[,e.headers[Un]],[Ve]:[,e.headers[bi]],[Vl]:[()=>e.headers[wa]!==void 0,()=>Ke(e.headers[wa])],[at]:[,e.headers[Bn]],[si]:[,e.headers[hi]],[ni]:[,e.headers[mi]],[ri]:[,e.headers[gi]],[ai]:[,e.headers[Si]],[Ll]:[,e.headers[lu]],[ii]:[,e.headers[fi]],[Ws]:[()=>e.headers[Zs]!==void 0,()=>Re(Ts(e.headers[Zs]))],[zl]:[,e.headers[mu]],[pi]:[,e.headers[xi]],[nt]:[,e.headers[it]],[Ht]:[,e.headers[Kt]],[Ut]:[,e.headers[jt]],[rt]:[,e.headers[ot]],[Ie]:[()=>e.headers[_e]!==void 0,()=>Pe(e.headers[_e])],[Ae]:[,e.headers[_i]],[Nt]:[,e.headers[zt]],[nu]:[,e.headers[ju]],[Gl]:[()=>e.headers[ba]!==void 0,()=>Ke(e.headers[ba])],[ou]:[()=>e.headers[Ra]!==void 0,()=>Ke(e.headers[Ra])],[li]:[,e.headers[Ai]],[Vs]:[()=>e.headers[Xs]!==void 0,()=>Re(Ot(e.headers[Xs]))],[di]:[,e.headers[Ri]],Metadata:[,Object.keys(e.headers).filter(i=>i.startsWith("x-amz-meta-")).reduce((i,d)=>(i[d.substring(11)]=e.headers[d],i),{})]}),n=e.body;return s.sdkStreamMixin(n),t.Body=n,t},ul=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return st(e,s);const t=H({$metadata:se(e),[Nt]:[,e.headers[zt]]}),n=Re(xa(await sn(e.body,s)),"body");return n.CommonPrefixes===""?t[ht]=[]:n[ht]!=null&&(t[ht]=Pl(Hs(n[ht]))),n.Contents===""?t[mt]=[]:n[mt]!=null&&(t[mt]=Ol(Hs(n[mt]))),n[St]!=null&&(t[St]=G(n[St])),n[ft]!=null&&(t[ft]=G(n[ft])),n[Et]!=null&&(t[Et]=G(n[Et])),n[As]!=null&&(t[As]=Pe(n[As])),n[ks]!=null&&(t[ks]=Ke(n[ks])),n[wt]!=null&&(t[wt]=Ke(n[wt])),n[xs]!=null&&(t[xs]=G(n[xs])),n[vs]!=null&&(t[vs]=G(n[vs])),n[ve]!=null&&(t[ve]=G(n[ve])),n[bt]!=null&&(t[bt]=G(n[bt])),t},pl=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return st(e,s);const t=H({$metadata:se(e),[Ze]:[,e.headers[Ci]],[Ge]:[,e.headers[Ei]],[kn]:[,e.headers[Mn]],[xn]:[,e.headers[Nn]],[vn]:[,e.headers[Tn]],[Pn]:[,e.headers[Hn]],[In]:[,e.headers[Un]],[Ve]:[,e.headers[bi]],[nt]:[,e.headers[it]],[at]:[,e.headers[Bn]],[Ht]:[,e.headers[Kt]],[Ut]:[,e.headers[jt]],[rt]:[,e.headers[ot]],[Bt]:[,e.headers[$t]],[Ie]:[()=>e.headers[_e]!==void 0,()=>Pe(e.headers[_e])],[Ct]:[()=>e.headers[Ca]!==void 0,()=>en(e.headers[Ca])],[Nt]:[,e.headers[zt]]});return await Qs(e.body,s),t},st=async(e,s)=>{const t={...e,body:await ec(e.body,s)},n=tc(e,t.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Cl(t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await _l(t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await ml(t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await gl(t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await wl(t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await fl(t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await bl(t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await Rl(t);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await Sl(t);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await El(t);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await yl(t);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await kl(t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await Al(t);default:const i=t.body;return hl({output:e,parsedBody:i,errorCode:n})}},hl=Qi(ae),ml=async(e,s)=>{const t=H({});e.body;const n=new gn({$metadata:se(e),...t});return he(n,e.body)},gl=async(e,s)=>{const t=H({});e.body;const n=new Sn({$metadata:se(e),...t});return he(n,e.body)},Sl=async(e,s)=>{const t=H({});e.body;const n=new bn({$metadata:se(e),...t});return he(n,e.body)},fl=async(e,s)=>{const t=H({}),n=e.body;n[ys]!=null&&(t[ys]=G(n[ys])),n[Ae]!=null&&(t[Ae]=G(n[Ae]));const i=new En({$metadata:se(e),...t});return he(i,e.body)},El=async(e,s)=>{const t=H({});e.body;const n=new Cn({$metadata:se(e),...t});return he(n,e.body)},yl=async(e,s)=>{const t=H({});e.body;const n=new Rn({$metadata:se(e),...t});return he(n,e.body)},wl=async(e,s)=>{const t=H({});e.body;const n=new fn({$metadata:se(e),...t});return he(n,e.body)},bl=async(e,s)=>{const t=H({});e.body;const n=new yn({$metadata:se(e),...t});return he(n,e.body)},Cl=async(e,s)=>{const t=H({});e.body;const n=new hn({$metadata:se(e),...t});return he(n,e.body)},Rl=async(e,s)=>{const t=H({});e.body;const n=new wn({$metadata:se(e),...t});return he(n,e.body)},Al=async(e,s)=>{const t=H({});e.body;const n=new _n({$metadata:se(e),...t});return he(n,e.body)},_l=async(e,s)=>{const t=H({});e.body;const n=new mn({$metadata:se(e),...t});return he(n,e.body)},kl=async(e,s)=>{const t=H({});e.body;const n=new An({$metadata:se(e),...t});return he(n,e.body)},xl=(e,s)=>(e||[]).filter(t=>t!=null).map(t=>G(t)),vl=(e,s)=>{const t={};return e[ve]!=null&&(t[ve]=G(e[ve])),t},Pl=(e,s)=>(e||[]).filter(t=>t!=null).map(t=>vl(t)),Il=(e,s)=>{const t={};return e[_s]!=null&&(t[_s]=G(e[_s])),e[yt]!=null&&(t[yt]=Re(Ot(e[yt]))),e[Ge]!=null&&(t[Ge]=G(e[Ge])),e.ChecksumAlgorithm===""?t[$e]=[]:e[$e]!=null&&(t[$e]=xl(Hs(e[$e]))),e[Ve]!=null&&(t[Ve]=G(e[Ve])),e[Ct]!=null&&(t[Ct]=en(e[Ct])),e[Ae]!=null&&(t[Ae]=G(e[Ae])),e[Ps]!=null&&(t[Ps]=Dl(e[Ps])),e[Os]!=null&&(t[Os]=Ml(e[Os])),t},Ol=(e,s)=>(e||[]).filter(t=>t!=null).map(t=>Il(t)),Dl=(e,s)=>{const t={};return e[bs]!=null&&(t[bs]=G(e[bs])),e[Cs]!=null&&(t[Cs]=G(e[Cs])),t},Ml=(e,s)=>{const t={};return e[Rs]!=null&&(t[Rs]=Pe(e[Rs])),e[Is]!=null&&(t[Is]=Re(Ot(e[Is]))),t},Nl=(e,s)=>{const t={};return e[Es]!=null&&(t[Es]=G(e[Es])),e[Ds]!=null&&(t[Ds]=G(e[Ds])),e[Ms]!=null&&(t[Ms]=G(e[Ms])),e[Ze]!=null&&(t[Ze]=Re(Ot(e[Ze]))),t},se=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Tl="ACL",Es="AccessKeyId",Hl="AcceptRanges",ys="AccessTier",pa="BypassGovernanceRetention",Ie="BucketKeyEnabled",ws="Credentials",$e="ChecksumAlgorithm",si="CacheControl",kn="ChecksumCRC32",xn="ChecksumCRC32C",vn="ChecksumCRC64NVME",ni="ContentDisposition",ri="ContentEncoding",ai="ContentLanguage",qs="ContentLength",Ul="ChecksumMode",Bl="ContentMD5",ht="CommonPrefixes",Ll="ContentRange",Pn="ChecksumSHA1",In="ChecksumSHA256",Ve="ChecksumType",ii="ContentType",St="ContinuationToken",mt="Contents",ft="Delimiter",oi="DeleteMarker",bs="DisplayName",Ws="Expires",Mt="ExpectedBucketOwner",zl="ExpiresString",Et="EncodingType",Ge="ETag",Ze="Expiration",Fl="FetchOwner",$l="GrantFullControl",Kl="GrantRead",jl="GrantReadACP",ql="GrantWriteACP",Cs="ID",On="IfMatch",ha="IfMatchLastModifiedTime",ma="IfMatchSize",ga="IfModifiedSince",ci="IfNoneMatch",Rs="IsRestoreInProgress",As="IsTruncated",Sa="IfUnmodifiedSince",_s="Key",ks="KeyCount",yt="LastModified",Wl="MFA",wt="MaxKeys",Vl="MissingMeta",xs="Name",vs="NextContinuationToken",Ps="Owner",di="ObjectLockLegalHoldStatus",li="ObjectLockMode",Vs="ObjectLockRetainUntilDate",fa="OptionalObjectAttributes",ve="Prefix",Gl="PartsCount",Zl="PartNumber",Xl="Range",Nt="RequestCharged",Yl="ResponseCacheControl",Ql="ResponseContentDisposition",Jl="ResponseContentEncoding",eu="ResponseContentLanguage",tu="ResponseContentType",su="ResponseExpires",Is="RestoreExpiryDate",Tt="RequestPayer",nu="ReplicationStatus",Os="RestoreStatus",ru="Restore",bt="StartAfter",Ds="SecretAccessKey",Ae="StorageClass",au="SessionMode",nt="ServerSideEncryption",Ht="SSECustomerAlgorithm",ui="SSECustomerKey",Ut="SSECustomerKeyMD5",Bt="SSEKMSEncryptionContext",rt="SSEKMSKeyId",Ms="SessionToken",Ct="Size",iu="Tagging",ou="TagCount",at="VersionId",Ea="WriteOffsetBytes",pi="WebsiteRedirectLocation",cu="accept-ranges",hi="cache-control",mi="content-disposition",gi="content-encoding",Si="content-language",Gs="content-length",du="content-md5",lu="content-range",fi="content-type",uu="continuation-token",pu="delimiter",Zs="expires",hu="encoding-type",Ei="etag",mu="expiresstring",gu="fetch-owner",Dn="if-match",Su="if-modified-since",yi="if-none-match",fu="if-unmodified-since",ya="last-modified",Eu="list-type",yu="max-keys",wu="partNumber",bu="prefix",Cu="range",Ru="response-cache-control",Au="response-content-disposition",_u="response-content-encoding",ku="response-content-language",xu="response-content-type",vu="response-expires",Pu="session",Iu="start-after",wi="versionId",Ou="x-amz-acl",Du="x-amz-bypass-governance-retention",Mn="x-amz-checksum-crc32",Nn="x-amz-checksum-crc32c",Tn="x-amz-checksum-crc64nvme",Mu="x-amz-checksum-mode",Hn="x-amz-checksum-sha1",Un="x-amz-checksum-sha256",Nu="x-amz-create-session-mode",bi="x-amz-checksum-type",vt="x-amz-delete-marker",Ci="x-amz-expiration",Lt="x-amz-expected-bucket-owner",Tu="x-amz-grant-full-control",Hu="x-amz-grant-read",Uu="x-amz-grant-read-acp",Bu="x-amz-grant-write-acp",Lu="x-amz-if-match-last-modified-time",zu="x-amz-if-match-size",Fu="x-amz-mfa",wa="x-amz-missing-meta",ba="x-amz-mp-parts-count",Ri="x-amz-object-lock-legal-hold",Ai="x-amz-object-lock-mode",Xs="x-amz-object-lock-retain-until-date",$u="x-amz-optional-object-attributes",Ca="x-amz-object-size",Ku="x-amz-restore",zt="x-amz-request-charged",Ft="x-amz-request-payer",ju="x-amz-replication-status",_i="x-amz-storage-class",qu="x-amz-sdk-checksum-algorithm",it="x-amz-server-side-encryption",ot="x-amz-server-side-encryption-aws-kms-key-id",_e="x-amz-server-side-encryption-bucket-key-enabled",$t="x-amz-server-side-encryption-context",Kt="x-amz-server-side-encryption-customer-algorithm",ki="x-amz-server-side-encryption-customer-key",jt="x-amz-server-side-encryption-customer-key-md5",Wu="x-amz-tagging",Ra="x-amz-tagging-count",Bn="x-amz-version-id",Vu="x-amz-write-offset-bytes",xi="x-amz-website-redirect-location",Ln="x-id";class Gu extends Qe.classBuilder().ep({...tt,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(s,t,n,i){return[Je(n,this.serialize,this.deserialize),et(n,s.getEndpointParameterInstructions()),Dt(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(Qd,Yd).ser(nl).de(cl).build(){}const Zu="3.826.0",Xu={version:Zu},Yu={};function mp(){return typeof window<"u"?window:typeof self<"u"?self:Yu}const Qu=({serviceId:e,clientVersion:s})=>async t=>{var u,l,m,S,C,A;const n=typeof window<"u"&&((u=window==null?void 0:window.navigator)!=null&&u.userAgent)?to.parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",s],["ua","2.1"],[`os/${((l=n==null?void 0:n.os)==null?void 0:l.name)||"other"}`,(m=n==null?void 0:n.os)==null?void 0:m.version],["lang/js"],["md/browser",`${((S=n==null?void 0:n.browser)==null?void 0:S.name)??"unknown"}_${((C=n==null?void 0:n.browser)==null?void 0:C.version)??"unknown"}`]];e&&i.push([`api/${e}`,s]);const d=await((A=t==null?void 0:t.userAgentAppId)==null?void 0:A.call(t));return d&&i.push([`app/${d}`]),i},Ju=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??co,base64Encoder:(e==null?void 0:e.base64Encoder)??oo,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Ja,extensions:(e==null?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??io,httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Vd,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new Pa},{schemeId:"aws.auth#sigv4a",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4a"),signer:new Go}],logger:(e==null?void 0:e.logger)??new _a,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??ao,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??rn,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??ro,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??no,utf8Encoder:(e==null?void 0:e.utf8Encoder)??so}),ep=e=>{const s=lo(e),t=()=>s().then(Ao),n=Ju(e);return{...n,...e,runtime:"browser",defaultsMode:s,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??bo,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(i=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Qu({serviceId:n.serviceId,clientVersion:Xu.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??wo,maxAttempts:(e==null?void 0:e.maxAttempts)??yo,md5:(e==null?void 0:e.md5)??Eo,region:(e==null?void 0:e.region)??fo("Region is missing"),requestHandler:So.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||go),sha1:(e==null?void 0:e.sha1)??mo,sha256:(e==null?void 0:e.sha256)??ho,streamCollector:(e==null?void 0:e.streamCollector)??po,streamHasher:(e==null?void 0:e.streamHasher)??uo,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Ro)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Co))}},tp=e=>({setRegion(s){e.region=s},region(){return e.region}}),sp=e=>({region:e.region()}),np=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(i){const d=s.findIndex(u=>u.schemeId===i.schemeId);d===-1?s.push(i):s.splice(d,1,i)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(i){t=i},httpAuthSchemeProvider(){return t},setCredentials(i){n=i},credentials(){return n}}},rp=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),ap=(e,s)=>{const t=Object.assign(tp(e),_o(e),ko(e),np(e));return s.forEach(n=>n.configure(t)),Object.assign(e,sp(t),xo(t),vo(t),rp(t))};class gp extends Po{constructor(...[t]){const n=ep(t||{});super(n);v(this,"config");this.initConfig=n;const i=Zd(n),d=hd(i),u=Sc(d),l=Io(u),m=Oo(l),S=m,C=Do(S),A=Mo(C),R=Gd(A),_=Jc(R,{session:[()=>this,Gu]}),F=ap(_,(t==null?void 0:t.extensions)||[]);this.config=F,this.middlewareStack.use(vd(this.config)),this.middlewareStack.use(No(this.config)),this.middlewareStack.use(To(this.config)),this.middlewareStack.use(yc(this.config)),this.middlewareStack.use(Cc(this.config)),this.middlewareStack.use(xc(this.config)),this.middlewareStack.use(Ho(this.config,{httpAuthSchemeParametersProvider:jd,identityProviderConfigProvider:async N=>new Bo({"aws.auth#sigv4":N.credentials,"aws.auth#sigv4a":N.credentials})})),this.middlewareStack.use(Uo(this.config)),this.middlewareStack.use(ld(this.config)),this.middlewareStack.use(Ko(this.config)),this.middlewareStack.use(Uc(this.config)),this.middlewareStack.use(Vc(this.config)),this.middlewareStack.use(Qc(this.config))}destroy(){super.destroy()}}function ip(e){return s=>async t=>{const n={...t.input},i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const d of i){const u=n[d.target];if(u){let l;typeof u=="string"?cp(u,e)?l=e.base64Decoder(u):(l=e.utf8Decoder(u),n[d.target]=e.base64Encoder(l)):(l=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u),n[d.target]=e.base64Encoder(l));const m=new e.md5;m.update(l),n[d.hash]=e.base64Encoder(await m.digest())}}return s({...t,input:n})}}const op={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},vi=e=>({applyToStack:s=>{s.add(ip(e),op)}});function cp(e,s){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return s.base64Decoder(e).length===32}catch{return!1}}class Sp extends Qe.classBuilder().ep({...tt,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(s,t,n,i){return[Je(n,this.serialize,this.deserialize),et(n,s.getEndpointParameterInstructions()),Dt(n)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").f(void 0,void 0).ser(rl).de(dl).build(){}class fp extends Qe.classBuilder().ep({...tt,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(s,t,n,i){return[Je(n,this.serialize,this.deserialize),et(n,s.getEndpointParameterInstructions()),Na(n,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),vi(n),zc()]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(el,Jd).ser(al).de(ll).build(){}class Ep extends Qe.classBuilder().ep({...tt,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(s,t,n,i){return[Je(n,this.serialize,this.deserialize),et(n,s.getEndpointParameterInstructions()),Dt(n)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(il).de(ul).build(){}class yp extends Qe.classBuilder().ep({...tt,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(s,t,n,i){return[Je(n,this.serialize,this.deserialize),et(n,s.getEndpointParameterInstructions()),Na(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Dc(),Dt(n),vi(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(sl,tl).ser(ol).de(pl).build(){}function dp(e){const{port:s,query:t}=e;let{protocol:n,path:i,hostname:d}=e;n&&n.slice(-1)!==":"&&(n+=":"),s&&(d+=`:${s}`),i&&i.charAt(0)!=="/"&&(i=`/${i}`);let u=t?Lo(t):"";u&&u[0]!=="?"&&(u=`?${u}`);let l="";if(e.username!=null||e.password!=null){const S=e.username??"",C=e.password??"";l=`${S}:${C}@`}let m="";return e.fragment&&(m=`#${e.fragment}`),`${n}//${l}${d}${i}${u}${m}`}const lp="UNSIGNED-PAYLOAD",up="X-Amz-Content-Sha256";class Aa{constructor(s){v(this,"signer");const t={service:s.signingName||s.service||"s3",uriEscapePath:s.uriEscapePath||!1,applyChecksum:s.applyChecksum||!1,...s};this.signer=new rn(t)}presign(s,{unsignableHeaders:t=new Set,hoistableHeaders:n=new Set,unhoistableHeaders:i=new Set,...d}={}){return this.prepareRequest(s,{unsignableHeaders:t,unhoistableHeaders:i,hoistableHeaders:n}),this.signer.presign(s,{expiresIn:900,unsignableHeaders:t,unhoistableHeaders:i,...d})}presignWithCredentials(s,t,{unsignableHeaders:n=new Set,hoistableHeaders:i=new Set,unhoistableHeaders:d=new Set,...u}={}){return this.prepareRequest(s,{unsignableHeaders:n,unhoistableHeaders:d,hoistableHeaders:i}),this.signer.presignWithCredentials(s,t,{expiresIn:900,unsignableHeaders:n,unhoistableHeaders:d,...u})}prepareRequest(s,{unsignableHeaders:t=new Set,unhoistableHeaders:n=new Set,hoistableHeaders:i=new Set}={}){t.add("content-type"),Object.keys(s.headers).map(m=>m.toLowerCase()).filter(m=>m.startsWith("x-amz-server-side-encryption")).forEach(m=>{i.has(m)||n.add(m)}),s.headers[up]=lp;const d=s.headers.host,u=s.port,l=`${s.hostname}${s.port!=null?":"+u:""}`;(!d||d===s.hostname&&s.port!=null)&&(s.headers.host=l)}}const wp=async(e,s,t={})=>{var A,R,_;let n,i;if(typeof e.config.endpointProvider=="function"){const N=(R=(A=(await zo(s.input,s.constructor,e.config)).properties)==null?void 0:A.authSchemes)==null?void 0:R[0];(N==null?void 0:N.name)==="sigv4a"?i=(_=N==null?void 0:N.signingRegionSet)==null?void 0:_.join(","):i=N==null?void 0:N.signingRegion,n=new Aa({...e.config,signingName:N==null?void 0:N.signingName,region:async()=>i})}else n=new Aa(e.config);const d=(F,N)=>async ce=>{const{request:le}=ce;if(!Se.isInstance(le))throw new Error("Request to be presigned is not an valid HTTP request.");delete le.headers["amz-sdk-invocation-id"],delete le.headers["amz-sdk-request"],delete le.headers["x-amz-user-agent"];let fe;const De={...t,signingRegion:t.signingRegion??N.signing_region??i,signingService:t.signingService??N.signing_service};return N.s3ExpressIdentity?fe=await n.presignWithCredentials(le,N.s3ExpressIdentity,De):fe=await n.presign(le,De),{response:{},output:{$metadata:{httpStatusCode:200},presigned:fe}}},u="presignInterceptMiddleware",l=e.middlewareStack.clone();l.addRelativeTo(d,{name:u,relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});const m=s.resolveMiddleware(l,e.config,{}),{output:S}=await m({input:s.input}),{presigned:C}=S;return dp(C)};export{Sp as D,fp as G,Ep as L,yp as P,gp as S,wp as g,mp as l};
