import"./ui-D8yO-OxE.js";import{r as f}from"./vendor-XhsmhKu1.js";import{m as c}from"./index-DRBMqcxT.js";function $(e){return typeof e=="symbol"?String(e):e}async function k(e,o){const r=$(e);try{const{data:t,error:a}=await c.from(e).insert(o).select().single();return a?(console.error(`Error creating ${r}:`,a),null):t}catch(t){return console.error(`Error creating ${r}:`,t),null}}async function x(e,o={}){try{const{page:r=1,pageSize:t=10,orderBy:a="id",ascending:s=!1,filters:i=[],select:p="*"}=o;let n=c.from(e).select(p,{count:"exact"});i.forEach(w=>{const{column:l,operator:b,value:u}=w;switch(b.toLowerCase()){case"eq":n=n.eq(l,u);break;case"neq":n=n.neq(l,u);break;case"gt":n=n.gt(l,u);break;case"gte":n=n.gte(l,u);break;case"lt":n=n.lt(l,u);break;case"lte":n=n.lte(l,u);break;case"like":n=n.like(l,`%${u}%`);break;case"ilike":n=n.ilike(l,`%${u}%`);break;default:n=n.eq(l,u)}}),n=n.order(a,{ascending:s});const g=(r-1)*t,h=g+t-1;n=n.range(g,h);const{data:E,count:y,error:d}=await n;return d?(console.error(`Error reading ${e}:`,d),{data:null,count:null,error:d.message}):{data:E,count:y,error:null}}catch(r){return console.error(`Error reading ${e}:`,r),{data:null,count:null,error:"An unexpected error occurred"}}}async function m(e,o,r){try{const{data:t,error:a}=await c.from(e).update(r).eq("id",o).select().single();return a?(console.error(`Error updating ${e}:`,a),{data:null,error:a.message}):{data:t,error:null}}catch(t){return console.error(`Error updating ${e}:`,t),{data:null,error:"An unexpected error occurred"}}}async function A(e,o){try{const{error:r}=await c.from(e).delete().eq("id",o);return r?(console.error(`Error deleting from ${e}:`,r),{error:r.message}):{error:null}}catch(r){return console.error(`Error deleting from ${e}:`,r),{error:"An unexpected error occurred"}}}async function U(e,o){try{const{data:r,error:t}=await c.from(e).insert(o).select();return t?(console.error(`Error batch creating ${e}:`,t),{data:null,error:t.message}):{data:r,error:null}}catch(r){return console.error(`Error batch creating ${e}:`,r),{data:null,error:"An unexpected error occurred"}}}async function C(e,o){try{const r=await Promise.all(o.map(({id:s,data:i})=>m(e,s,i))),t=r.filter(s=>s.error).map(s=>s.error);return t.length>0?{data:null,error:t.join(", ")}:{data:r.map(s=>s.data).filter(Boolean),error:null}}catch(r){return console.error(`Error batch updating ${e}:`,r),{data:null,error:"An unexpected error occurred"}}}async function q(e,o){try{const{error:r}=await c.from(e).delete().in("id",o);return r?(console.error(`Error batch deleting from ${e}:`,r),{error:r.message}):{error:null}}catch(r){return console.error(`Error batch deleting from ${e}:`,r),{error:"An unexpected error occurred"}}}async function v(e,o,r){try{const{data:t,error:a}=await c.storage.from(e).upload(o,r,{cacheControl:"3600",upsert:!1});return a?(console.error("Error uploading file:",a),{data:null,error:a.message}):{data:t,error:null}}catch(t){return console.error("Error uploading file:",t),{data:null,error:"An unexpected error occurred"}}}function S(e,o){const{data:r}=c.storage.from(e).getPublicUrl(o);return r.publicUrl}class P{static async sendEmail(o){try{return console.log("ðŸ“§ Email would be sent:",{from:o.from,to:o.to,subject:o.subject,preview:`${o.html.substring(0,100)}...`}),{data:{message:"Email logged successfully (development mode)",emailData:o},error:null}}catch(r){return console.error("Error in sendEmail:",r),{error:r instanceof Error?r.message:"Unknown error"}}}}class B{static async getCurrentUser(){try{const{data:{user:o},error:r}=await c.auth.getUser();if(r||!o)return{data:null,error:(r==null?void 0:r.message)||"User not authenticated"};const{data:t,error:a}=await c.from("user_profiles").select("*").eq("user_id",o.id).single();return a?{data:{id:o.id,email:o.email,role:"Employee",created_at:o.created_at},error:null}:{data:{id:o.id,email:o.email,...t},error:null}}catch(o){return console.error("Error in getCurrentUser:",o),{data:null,error:o instanceof Error?o.message:"Unknown error"}}}static async register(o){try{const{data:r,error:t}=await c.auth.signUp({email:o.email,password:o.password});return t?(console.error("Supabase registration error:",t),{data:null,error:t.message}):{data:r,error:null}}catch(r){return console.error("Error in register:",r),{data:null,error:r instanceof Error?r.message:"Unknown error"}}}}const N={createRecord:k,readRecords:x,updateRecord:m,deleteRecord:A,batchCreate:U,batchUpdate:C,batchDelete:q,uploadFile:v,getFileUrl:S,deleteFile,subscribeToChanges,unsubscribeFromChanges,executeRpc,searchRecords},R=f.createContext(void 0),T=()=>{const e=f.useContext(R);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};export{R as A,P as E,N as S,B as a,T as u};
//# sourceMappingURL=AuthContext-Bo8HSNc2.js.map
