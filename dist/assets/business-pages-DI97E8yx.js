import{r as i,j as a,u as ba,a as rt,L as Za}from"./react-vendor-CyGCsUQe.js";import{K as ea,D as wa,t as Na,v as _a,w as Pa,x as Wa,z as Ia,E as ka,F as xa,G as A,H as Ca,J as z,l as H,X as dt,C as $,d as X,e as aa,B as k,g as M,y as Ya,s as ra,f as ua,I as oa,u as ya,r as nt,L as G,S as ia,h as la,i as pa,j as ha,k as Z,Y as Ua,O as ct,N as Nt,Z as _t}from"./admin-core-C5HeYDRO.js";import{aA as ga,bq as Pt,ak as ja,az as Sa,aL as Aa,a4 as fa,aD as Ba,aG as $a,ao as Ra,aC as va,a1 as Ma,X as Fa,br as qa,J as Va,bs as Xa,aa as vt,bt as ht,aB as Qa,ai as yt,an as Ja,aS as xt,aO as at,a5 as It,l as kt,aE as Ct,bu as Rt,bv as jt,aM as tt,bw as Da,ac as Ha,ax as Ft,aT as Ot,bx as La,by as Dt,bz as Lt,a0 as Ka,bp as St,Y as ft,bA as qt,a2 as zt,H as Et,aJ as Gt,ay as mt}from"./ui-components-e6olwfkV.js";import{E as At,C as $t,F as Mt}from"./admin-security-BgDlM9IF.js";import{A as Tt,m as et}from"./animations-DO42yb9N.js";const Oa=768,Ga=1024;function Ut(){const[e,r]=i.useState(()=>{if(typeof window>"u")return{isMobile:!1,isTablet:!1,isDesktop:!0,screenWidth:1920,orientation:"landscape",touchDevice:!1};const t=window.innerWidth;return{isMobile:t<Oa,isTablet:t>=Oa&&t<Ga,isDesktop:t>=Ga,screenWidth:t,orientation:window.innerHeight>window.innerWidth?"portrait":"landscape",touchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0}});return i.useEffect(()=>{const t=()=>{const m=window.innerWidth,j=window.innerHeight;r({isMobile:m<Oa,isTablet:m>=Oa&&m<Ga,isDesktop:m>=Ga,screenWidth:m,orientation:j>m?"portrait":"landscape",touchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0})},o=window.matchMedia(`(max-width: ${Oa-1}px)`),d=window.matchMedia(`(min-width: ${Oa}px) and (max-width: ${Ga-1}px)`),h=window.matchMedia("(orientation: portrait)");return o.addEventListener("change",t),d.addEventListener("change",t),h.addEventListener("change",t),window.addEventListener("resize",t),t(),()=>{o.removeEventListener("change",t),d.removeEventListener("change",t),h.removeEventListener("change",t),window.removeEventListener("resize",t)}},[]),e}function ot(){const e=Ut();return{...e,showSidebar:e.isDesktop,showBottomNav:e.isMobile,compactHeader:e.isMobile||e.isTablet,stackedLayout:e.isMobile,columnsCount:e.isMobile?1:e.isTablet?2:3,tableMode:e.isMobile?"cards":"table",sidebarMode:e.isMobile?"overlay":e.isTablet?"mini":"full"}}const Bt=({isOpen:e,onClose:r,productId:t,productName:o})=>{const[d,h]=i.useState([]),[m,j]=i.useState(!1);i.useEffect(()=>{e&&t&&w()},[e,t]);const w=async()=>{try{j(!0),console.log("Loading product logs for product ID:",t);const{data:p,error:y}=await window.ezsite.apis.tablePage("11756",{PageNo:1,PageSize:100,OrderByField:"change_date",IsAsc:!1,Filters:[{name:"product_id",op:"Equal",value:t}]});if(y)throw console.error("API error loading logs:",y),y;console.log("Loaded logs:",(p==null?void 0:p.List)||[]),h((p==null?void 0:p.List)||[])}catch(p){console.error("Error loading product logs:",p),ea({title:"Error",description:`Failed to load product change logs: ${p}`,variant:"destructive"})}finally{j(!1)}},x=p=>{if(!p)return"-";try{return new Date(p).toLocaleString()}catch{return"-"}},I=(p,y)=>{if(!y||y==="")return"-";if(p.includes("price")||p==="profit_margin"){const v=parseFloat(y);if(!isNaN(v))return`$${v.toFixed(2)}`}if(p.includes("date"))try{return new Date(y).toLocaleDateString()}catch{return y}return y},l=p=>{switch(p){case"last_shopping_date":return a.jsx(Aa,{className:"w-4 h-4","data-id":"hc2kwpyda","data-path":"src/components/ProductLogs.tsx"});case"case_price":case"unit_price":case"retail_price":return a.jsx(Sa,{className:"w-4 h-4","data-id":"cl9g91i3q","data-path":"src/components/ProductLogs.tsx"});case"unit_per_case":return a.jsx(ga,{className:"w-4 h-4","data-id":"4znreyhu3","data-path":"src/components/ProductLogs.tsx"});case"profit_margin":return a.jsx(ja,{className:"w-4 h-4","data-id":"xeuod0e31","data-path":"src/components/ProductLogs.tsx"});default:return null}},D=p=>{switch(p){case"last_shopping_date":return"Last Shopping Date";case"case_price":return"Case Price";case"unit_per_case":return"Unit Per Case";case"unit_price":return"Unit Price";case"retail_price":return"Retail Price";case"profit_margin":return"Profit Margin";default:return p.replace("_"," ").replace(/\b\w/g,y=>y.toUpperCase())}},F=p=>{switch(p){case"last_shopping_date":return"bg-blue-100 text-blue-800";case"case_price":return"bg-green-100 text-green-800";case"unit_per_case":return"bg-purple-100 text-purple-800";case"unit_price":return"bg-orange-100 text-orange-800";case"retail_price":return"bg-red-100 text-red-800";case"profit_margin":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return a.jsx(wa,{open:e,onOpenChange:r,"data-id":"riru1v0g2","data-path":"src/components/ProductLogs.tsx",children:a.jsxs(Na,{className:"max-w-4xl max-h-[80vh] overflow-y-auto","data-id":"t07tjcdcm","data-path":"src/components/ProductLogs.tsx",children:[a.jsxs(_a,{"data-id":"zecicbo1p","data-path":"src/components/ProductLogs.tsx",children:[a.jsxs(Pa,{className:"flex items-center space-x-2","data-id":"2kw0lyje1","data-path":"src/components/ProductLogs.tsx",children:[a.jsx(ga,{className:"w-5 h-5","data-id":"0tqm973z6","data-path":"src/components/ProductLogs.tsx"}),a.jsx("span",{"data-id":"6s0lx11jg","data-path":"src/components/ProductLogs.tsx",children:"Product Change Logs"})]}),a.jsxs(Wa,{"data-id":"n6ihqul3s","data-path":"src/components/ProductLogs.tsx",children:["Change history for: ",a.jsx("span",{className:"font-medium","data-id":"cleq4da3a","data-path":"src/components/ProductLogs.tsx",children:o})]})]}),a.jsx("div",{className:"mt-4","data-id":"sw9xfs0so","data-path":"src/components/ProductLogs.tsx",children:m?a.jsx("div",{className:"space-y-4","data-id":"5jcpjg805","data-path":"src/components/ProductLogs.tsx",children:[...Array(5)].map((p,y)=>a.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse","data-id":"g970bd1vj","data-path":"src/components/ProductLogs.tsx"},y))}):d.length===0?a.jsxs("div",{className:"text-center py-8","data-id":"7yugrxnu6","data-path":"src/components/ProductLogs.tsx",children:[a.jsx(ga,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"cdb8qxkju","data-path":"src/components/ProductLogs.tsx"}),a.jsx("p",{className:"text-gray-500","data-id":"u8sg253u8","data-path":"src/components/ProductLogs.tsx",children:"No change logs found for this product"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2","data-id":"jq8ddkkhp","data-path":"src/components/ProductLogs.tsx",children:"Changes will appear here when product information is updated"})]}):a.jsx("div",{className:"border rounded-lg overflow-hidden","data-id":"v396cnny9","data-path":"src/components/ProductLogs.tsx",children:a.jsxs(Ia,{"data-id":"i7eusq3he","data-path":"src/components/ProductLogs.tsx",children:[a.jsx(ka,{"data-id":"0irube5by","data-path":"src/components/ProductLogs.tsx",children:a.jsxs(xa,{"data-id":"8z8htwwqs","data-path":"src/components/ProductLogs.tsx",children:[a.jsx(A,{"data-id":"3p0gnpe49","data-path":"src/components/ProductLogs.tsx",children:"Field"}),a.jsx(A,{"data-id":"jre7lj1as","data-path":"src/components/ProductLogs.tsx",children:"Change Date"}),a.jsx(A,{"data-id":"go1ih1wcq","data-path":"src/components/ProductLogs.tsx",children:"Old Value"}),a.jsx(A,{className:"text-center","data-id":"o6h79kyqt","data-path":"src/components/ProductLogs.tsx",children:"→"}),a.jsx(A,{"data-id":"sqxw0lg6q","data-path":"src/components/ProductLogs.tsx",children:"New Value"})]})}),a.jsx(Ca,{"data-id":"710opnlq5","data-path":"src/components/ProductLogs.tsx",children:d.map(p=>a.jsxs(xa,{"data-id":"iigia2ugp","data-path":"src/components/ProductLogs.tsx",children:[a.jsx(z,{"data-id":"th8b3xny0","data-path":"src/components/ProductLogs.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"j14l1bm8r","data-path":"src/components/ProductLogs.tsx",children:[l(p.field_name),a.jsx(H,{className:F(p.field_name),"data-id":"6muz1l9ue","data-path":"src/components/ProductLogs.tsx",children:D(p.field_name)})]})}),a.jsx(z,{className:"text-sm text-gray-600","data-id":"dvj4xrm9w","data-path":"src/components/ProductLogs.tsx",children:x(p.change_date)}),a.jsx(z,{"data-id":"azykl7sv0","data-path":"src/components/ProductLogs.tsx",children:a.jsx("span",{className:"px-2 py-1 bg-red-50 text-red-700 rounded text-sm","data-id":"sdqmonw28","data-path":"src/components/ProductLogs.tsx",children:I(p.field_name,p.old_value)})}),a.jsx(z,{className:"text-center","data-id":"ahuzhn6l6","data-path":"src/components/ProductLogs.tsx",children:a.jsx(Pt,{className:"w-4 h-4 text-gray-400","data-id":"3c6qzx23v","data-path":"src/components/ProductLogs.tsx"})}),a.jsx(z,{"data-id":"t449z8zqe","data-path":"src/components/ProductLogs.tsx",children:a.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-sm","data-id":"8v0patywo","data-path":"src/components/ProductLogs.tsx",children:I(p.field_name,p.new_value)})})]},p.ID))})]})})})]})})},bt=({text:e,searchTerms:r,allMatch:t})=>{if(!r.length||!e)return a.jsx(a.Fragment,{children:e});const o=r.map(m=>m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),d=new RegExp(`(${o.join("|")})`,"gi"),h=e.split(d);return a.jsx(a.Fragment,{children:h.map((m,j)=>r.some(x=>m.toLowerCase()===x.toLowerCase())?a.jsx("span",{className:`font-semibold ${t?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"}`,"data-id":"tao96ib2x","data-path":"src/components/HighlightText.tsx",children:m},j):m)})},Vt=({children:e,className:r="",fallbackComponent:t})=>{const o=ot();return o.isMobile&&t?a.jsx(a.Fragment,{children:t}):a.jsx("div",{className:dt("overflow-x-auto",o.isMobile&&"overflow-x-scroll",r),"data-id":"9t60y0r9q","data-path":"src/components/ResponsiveWrapper.tsx",children:e})},Ht=({children:e,className:r="",spacing:t="md"})=>{const o=ot(),d={sm:"space-y-2 sm:space-y-3",md:"space-y-4 sm:space-y-6",lg:"space-y-6 sm:space-y-8"}[t],h=dt("flex flex-col",d,o.isMobile&&"px-1",r);return a.jsx("div",{className:h,"data-id":"t161ssjzg","data-path":"src/components/ResponsiveWrapper.tsx",children:e})},Kt=({products:e,searchTerm:r,onViewLogs:t,onSaveProduct:o,onDeleteProduct:d,savingProductId:h})=>{const m=x=>{if(!x)return"-";try{return new Date(x).toLocaleDateString()}catch{return"-"}},j=x=>{if(!r||!x)return{keywords:[],allMatch:!1,highlightComponent:x};const I=r.toLowerCase().trim().split(/\s+/).filter(F=>F.length>0),l=x.toLowerCase(),D=I.every(F=>l.includes(F));return{keywords:I,allMatch:D,highlightComponent:a.jsx(bt,{text:x,searchTerms:I,allMatch:D,"data-id":"58g0bt74c","data-path":"src/components/ProductCards.tsx"})}},w=x=>{if(x.unit_price&&x.retail_price&&x.retail_price>0){const I=(x.retail_price-x.unit_price)/x.retail_price*100;return{value:I,variant:I>20?"default":I>10?"secondary":"destructive"}}return null};return a.jsx("div",{className:"grid grid-cols-1 gap-4","data-id":"vcoqocbmv","data-path":"src/components/ProductCards.tsx",children:e.map(x=>{const I=w(x);return a.jsxs($,{className:"hover:shadow-md transition-shadow","data-id":"tkdth0ury","data-path":"src/components/ProductCards.tsx",children:[a.jsxs(X,{className:"pb-3","data-id":"uq7z5v57b","data-path":"src/components/ProductCards.tsx",children:[a.jsxs("div",{className:"flex items-start justify-between","data-id":"ngqjwvfws","data-path":"src/components/ProductCards.tsx",children:[a.jsxs("div",{className:"flex-1 min-w-0","data-id":"yui8uv297","data-path":"src/components/ProductCards.tsx",children:[a.jsx(aa,{className:"text-lg leading-tight","data-id":"4gefxa46g","data-path":"src/components/ProductCards.tsx",children:r?j(x.product_name).highlightComponent:x.product_name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1","data-id":"07m0b3qxb","data-path":"src/components/ProductCards.tsx",children:[a.jsxs(H,{variant:"outline",className:"text-xs","data-id":"6igwrok4a","data-path":"src/components/ProductCards.tsx",children:["#",x.serial_number||"-"]}),a.jsx(H,{variant:"outline",className:"text-xs","data-id":"qv4tmx4tv","data-path":"src/components/ProductCards.tsx",children:r?j(x.department||"Convenience Store").highlightComponent:x.department||"Convenience Store"})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 ml-2","data-id":"dkhe03wrp","data-path":"src/components/ProductCards.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>t(x.ID,x.product_name),className:"p-2",title:"View logs","data-id":"eo88gx6p9","data-path":"src/components/ProductCards.tsx",children:a.jsx(fa,{className:"w-4 h-4","data-id":"23l7w9v0h","data-path":"src/components/ProductCards.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>o(x.ID),disabled:h===x.ID,className:"p-2",title:"Save product","data-id":"wy9upx6j1","data-path":"src/components/ProductCards.tsx",children:h===x.ID?a.jsx(Ba,{className:"w-4 h-4 animate-spin","data-id":"cpi13a2im","data-path":"src/components/ProductCards.tsx"}):a.jsx($a,{className:"w-4 h-4","data-id":"56qwhn9hs","data-path":"src/components/ProductCards.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>d(x.ID),className:"p-2 text-red-600 hover:text-red-700",title:"Delete product","data-id":"ll1ytnsax","data-path":"src/components/ProductCards.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"znbcibmod","data-path":"src/components/ProductCards.tsx"})})]})]}),x.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2","data-id":"8mdo5s8fb","data-path":"src/components/ProductCards.tsx",children:r?j(x.description).highlightComponent:x.description})]}),a.jsxs(M,{className:"space-y-3","data-id":"w5zeaa2gx","data-path":"src/components/ProductCards.tsx",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm","data-id":"zjkp7xddy","data-path":"src/components/ProductCards.tsx",children:[a.jsxs("div",{"data-id":"i32gsz0q6","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"0h7r2acdd","data-path":"src/components/ProductCards.tsx",children:"Unit Price:"}),a.jsx("div",{className:"font-medium","data-id":"cr4jora7q","data-path":"src/components/ProductCards.tsx",children:x.unit_price?`$${x.unit_price.toFixed(2)}`:"-"})]}),a.jsxs("div",{"data-id":"fb7oysbqc","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"lo8tua9hv","data-path":"src/components/ProductCards.tsx",children:"Retail Price:"}),a.jsx("div",{className:"font-medium","data-id":"9u6yh2lg0","data-path":"src/components/ProductCards.tsx",children:x.retail_price?`$${x.retail_price.toFixed(2)}`:"-"})]}),a.jsxs("div",{"data-id":"z8oswopfk","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"64ozply7o","data-path":"src/components/ProductCards.tsx",children:"Case Price:"}),a.jsx("div",{className:"font-medium","data-id":"jy4ue1prr","data-path":"src/components/ProductCards.tsx",children:x.case_price?`$${x.case_price.toFixed(2)}`:"-"})]}),a.jsxs("div",{"data-id":"4sl3z79p4","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"d846ca4wm","data-path":"src/components/ProductCards.tsx",children:"Profit Margin:"}),a.jsx("div",{className:"font-medium","data-id":"s7kltybae","data-path":"src/components/ProductCards.tsx",children:I?a.jsxs(H,{variant:I.variant,className:"text-xs","data-id":"st1wcyk5n","data-path":"src/components/ProductCards.tsx",children:[I.value.toFixed(1),"%"]}):"-"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm border-t pt-3","data-id":"8ughceoru","data-path":"src/components/ProductCards.tsx",children:[a.jsxs("div",{className:"flex justify-between","data-id":"o55w5fzun","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"9t7nnwi4o","data-path":"src/components/ProductCards.tsx",children:"Weight:"}),a.jsx("span",{className:"font-medium","data-id":"x66bd4ci2","data-path":"src/components/ProductCards.tsx",children:x.weight&&x.weight>0?`${x.weight} ${x.weight_unit||"lb"}`:"-"})]}),a.jsxs("div",{className:"flex justify-between","data-id":"9e15p2e4z","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"osmo02jsp","data-path":"src/components/ProductCards.tsx",children:"Supplier:"}),a.jsx("span",{className:"font-medium truncate ml-2","data-id":"pd3k5olyc","data-path":"src/components/ProductCards.tsx",children:r?j(x.supplier||"-").highlightComponent:x.supplier||"-"})]}),a.jsxs("div",{className:"flex justify-between","data-id":"o39vnn1ce","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"utyht6qtb","data-path":"src/components/ProductCards.tsx",children:"Unit per Case:"}),a.jsx("span",{className:"font-medium","data-id":"3f91uaoh8","data-path":"src/components/ProductCards.tsx",children:x.unit_per_case||"-"})]}),a.jsxs("div",{className:"flex justify-between","data-id":"161xfgys0","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"2tbhaxvf4","data-path":"src/components/ProductCards.tsx",children:"Last Updated:"}),a.jsx("span",{className:"font-medium","data-id":"o9pd996us","data-path":"src/components/ProductCards.tsx",children:m(x.last_updated_date)})]}),a.jsxs("div",{className:"flex justify-between","data-id":"bxtiv50ng","data-path":"src/components/ProductCards.tsx",children:[a.jsx("span",{className:"text-gray-500","data-id":"ikluthn8r","data-path":"src/components/ProductCards.tsx",children:"Last Shopping:"}),a.jsx("span",{className:"font-medium","data-id":"oqm9cafl6","data-path":"src/components/ProductCards.tsx",children:m(x.last_shopping_date)})]})]})]})]},x.ID)})})},Wt=()=>{const e=ba(),{userProfile:r}=Ya(),t=ot(),[o,d]=i.useState([]),[h,m]=i.useState([]),[j,w]=i.useState(!0),[x,I]=i.useState(""),[l,D]=i.useState(0),[F,p]=i.useState(!1),[y,v]=i.useState(null),[n,S]=i.useState(""),[U,E]=i.useState(!1),[J,na]=i.useState(!0),[Q,K]=i.useState(!1),[ta,C]=i.useState(null),B=50,[R,_]=i.useState(B),g=i.useRef(null);i.useEffect(()=>{const c=setTimeout(()=>{S(x),_(B)},300);return()=>clearTimeout(c)},[x,B]),i.useEffect(()=>{T()},[]),i.useEffect(()=>{b()},[n,R,h]);const T=async()=>{try{w(!0);const{data:c,error:O}=await ra.from("products").select("*").order("id",{ascending:!1}).limit(1e3);if(O)throw O;m(c||[])}catch(c){console.error("Error loading products:",c),ea({title:"Error",description:"Failed to load products",variant:"destructive"})}finally{w(!1)}},b=()=>{E(!!n);let c=h;if(n){const Y=n.toLowerCase().trim().split(/\s+/).filter(L=>L.length>0);c=h.filter(L=>{var ca;const V=[L.product_name,L.description,L.category,L.supplier,L.department,L.bar_code_case,L.bar_code_unit,(ca=L.serial_number)==null?void 0:ca.toString()].join(" ").toLowerCase();return Y.every(da=>V.includes(da))})}n||(c=c.sort((Y,L)=>{const V=Y.serial_number||0,ca=L.serial_number||0;return V-ca}));const O=c.slice(0,R);d(O),D(c.length),na(R<c.length)},W=async c=>{console.log("handleDelete called for product ID:",c);const O=confirm("Are you sure you want to delete this product? This action cannot be undone.");if(console.log("User confirmed deletion:",O),!O){console.log("Deletion cancelled by user");return}try{console.log("Attempting to delete product with ID:",c);const{error:Y}=await ra.from("products").delete().eq("id",c);if(Y)throw console.error("API returned error:",Y),Y;console.log("Product deleted successfully"),ea({title:"Success",description:"Product deleted successfully"}),T()}catch(Y){console.error("Error deleting product:",Y),ea({title:"Error",description:`Failed to delete product: ${Y}`,variant:"destructive"})}},u=async(c=null)=>{var Y;console.log("handleSaveProduct called for product ID:",c);const O=c===null;C(c||-1);try{if(O){if(!confirm("Create a new product entry? This will add a new product with default values that you can edit.")){console.log("Product creation cancelled by user"),C(null);return}const{data:V}=await ra.from("products").select("serial_number").order("serial_number",{ascending:!1}).limit(1),da=(((Y=V==null?void 0:V[0])==null?void 0:Y.serial_number)||0)+1,za={serial_number:da,product_name:`New Product ${da}`,category:"General",quantity_in_stock:0,minimum_stock:0,supplier:"",description:"Please update this product information",weight:0,weight_unit:"lb",department:"Convenience Store",merchant_id:null,bar_code_case:"",bar_code_unit:"",last_updated_date:new Date().toISOString(),last_shopping_date:null,case_price:0,unit_per_case:1,unit_price:0,retail_price:0,overdue:!1,created_by:(r==null?void 0:r.user_id)||null};console.log("Creating new product with data:",za);const{error:Ea}=await ra.from("products").insert([za]);if(Ea)throw console.error("API returned error:",Ea),Ea;console.log("New product created successfully with serial:",da),ea({title:"Success",description:`New product created with serial #${da}. Please edit it to add complete information.`,duration:5e3})}else{const L=o.find(za=>za.ID===c);if(!L)throw new Error("Product not found");if(!confirm(`Save updates to "${L.product_name}"? This will update the product information with current values.`)){console.log("Product update cancelled by user"),C(null);return}console.log("Updating product:",L);const ca={ID:L.ID,product_name:L.product_name,category:L.category||"",quantity_in_stock:L.quantity_in_stock||0,minimum_stock:L.minimum_stock||0,supplier:L.supplier||"",description:L.description||"",serial_number:L.serial_number||0,weight:L.weight||0,weight_unit:L.weight_unit||"lb",department:L.department||"Convenience Store",merchant_id:L.merchant_id||null,bar_code_case:L.bar_code_case||"",bar_code_unit:L.bar_code_unit||"",last_updated_date:new Date().toISOString(),last_shopping_date:L.last_shopping_date||null,case_price:L.case_price||0,unit_per_case:L.unit_per_case||1,unit_price:L.unit_price||0,retail_price:L.retail_price||0,overdue:L.overdue||!1,created_by:L.created_by||(r==null?void 0:r.user_id)||null};console.log("Updating product with data:",ca);const{error:da}=await ra.from("products").update(ca).eq("ID",L.ID);if(da)throw console.error("API returned error:",da),da;console.log("Product updated successfully with ID:",L.ID),ea({title:"Success",description:`"${L.product_name}" updated successfully`,duration:3e3})}T()}catch(L){console.error("Error saving product:",L),ea({title:"Error",description:`Failed to ${O?"create":"update"} product: ${L}`,variant:"destructive"})}finally{C(null)}},q=i.useCallback(()=>{Q||!J||(K(!0),setTimeout(()=>{_(c=>c+B),K(!1)},300))},[Q,J,B]);i.useEffect(()=>{const c=new IntersectionObserver(Y=>{Y[0].isIntersecting&&J&&!Q&&q()},{threshold:.1,rootMargin:"100px"}),O=g.current;return O&&c.observe(O),()=>{O&&c.unobserve(O)}},[q,J,Q]);const s=(c,O)=>{console.log("handleViewLogs called for:",{productId:c,productName:O}),v({id:c,name:O}),p(!0),console.log("Logs modal should now be open")},P=()=>{if(l===0)return"";const c=Math.min(o.length,l);return n?`Showing ${c} of ${l} products matching "${n}"`:J?`Showing ${c} of ${l} products - Scroll down to load more`:`Showing all ${l} products`},f=c=>{if(!n||!c)return{keywords:[],allMatch:!1,highlightComponent:c};const O=n.toLowerCase().trim().split(/\s+/).filter(V=>V.length>0),Y=c.toLowerCase(),L=O.every(V=>Y.includes(V));return{keywords:O,allMatch:L,highlightComponent:a.jsx(bt,{text:c,searchTerms:O,allMatch:L,"data-id":"1wt725buf","data-path":"src/pages/Products/ProductList.tsx"})}},N=()=>{I(""),_(B)};return a.jsxs(Ht,{spacing:"lg","data-id":"btwya3lp5","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs($,{"data-id":"6w9ert8jz","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(X,{"data-id":"5m1mzk7vo","data-path":"src/pages/Products/ProductList.tsx",children:a.jsxs("div",{className:`flex items-center ${t.isMobile?"flex-col space-y-4":"justify-between"}`,"data-id":"bowlpcor5","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs("div",{className:t.isMobile?"text-center":"","data-id":"y8tl5mqr0","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs(aa,{className:"flex items-center space-x-2","data-id":"dv5p6okn6","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(ga,{className:"w-6 h-6","data-id":"mpvi5de9f","data-path":"src/pages/Products/ProductList.tsx"}),a.jsx("span",{"data-id":"lssx8ks5s","data-path":"src/pages/Products/ProductList.tsx",children:"Products"})]}),a.jsx(ua,{className:t.isMobile?"text-center mt-2":"","data-id":"60hg960xc","data-path":"src/pages/Products/ProductList.tsx",children:"Manage your product inventory - Search across all product fields for similar items"})]}),a.jsxs(k,{onClick:()=>e("/products/new"),className:`bg-brand-600 hover:bg-brand-700 text-white ${t.isMobile?"w-full":""}`,"data-id":"yrss8uwf7","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(va,{className:"w-4 h-4 mr-2","data-id":"8mt4ozszr","data-path":"src/pages/Products/ProductList.tsx"}),"Add Product"]})]})}),a.jsxs(M,{"data-id":"cgvu9f3kp","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs("div",{className:`flex items-center mb-6 ${t.isMobile?"flex-col space-y-3":"space-x-2"}`,"data-id":"xhu140fsq","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs("div",{className:`relative ${t.isMobile?"w-full":"flex-1 max-w-sm"}`,"data-id":"obkwojs7a","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(Ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4","data-id":"i4u0f0oyn","data-path":"src/pages/Products/ProductList.tsx"}),x&&a.jsx("button",{onClick:N,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 w-4 h-4 flex items-center justify-center",title:"Clear search","data-id":"dkfof42co","data-path":"src/pages/Products/ProductList.tsx",children:a.jsx(Fa,{className:"w-4 h-4","data-id":"umphay4wr","data-path":"src/pages/Products/ProductList.tsx"})}),a.jsx(oa,{placeholder:t.isMobile?"Search products...":"Search products by name, description, category, supplier, barcode...",value:x,onChange:c=>I(c.target.value),className:`pl-10 ${x?"pr-10":"pr-3"}`,"data-id":"fokk0lrml","data-path":"src/pages/Products/ProductList.tsx"})]}),n&&a.jsxs("div",{className:`flex items-center space-x-2 ${t.isMobile?"w-full justify-center":""}`,"data-id":"vhlhajtb4","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsxs(H,{variant:"secondary","data-id":"lx9c47e6v","data-path":"src/pages/Products/ProductList.tsx",children:[l," result",l!==1?"s":""," found"]}),a.jsx(k,{variant:"outline",size:"sm",onClick:N,"data-id":"0gw3ch1r5","data-path":"src/pages/Products/ProductList.tsx",children:"Clear"})]})]}),j?a.jsx("div",{className:"space-y-4","data-id":"sizuuqbx0","data-path":"src/pages/Products/ProductList.tsx",children:[...Array(5)].map((c,O)=>a.jsx("div",{className:`bg-gray-100 rounded animate-pulse ${t.isMobile?"h-32":"h-16"}`,"data-id":"iu3nnrhc1","data-path":"src/pages/Products/ProductList.tsx"},O))}):o.length===0?a.jsxs("div",{className:"text-center py-8","data-id":"5to45rrj4","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(ga,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"1pfqp05jo","data-path":"src/pages/Products/ProductList.tsx"}),a.jsx("p",{className:"text-gray-500","data-id":"pdsgjn99d","data-path":"src/pages/Products/ProductList.tsx",children:n?`No products found matching "${n}"`:"No products found"}),a.jsx(k,{variant:"outline",className:"mt-4",onClick:()=>n?N():e("/products/new"),"data-id":"81ceuepen","data-path":"src/pages/Products/ProductList.tsx",children:n?"Clear Search":"Add Your First Product"})]}):t.isMobile?a.jsx(Kt,{products:o,searchTerm:n,onViewLogs:s,onSaveProduct:u,onDeleteProduct:W,savingProductId:ta,"data-id":"rxz6bntu1","data-path":"src/pages/Products/ProductList.tsx"}):a.jsx(Vt,{className:"border rounded-lg overflow-hidden","data-id":"9u668xl6m","data-path":"src/pages/Products/ProductList.tsx",children:a.jsxs(Ia,{"data-id":"parxcetjj","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(ka,{"data-id":"sywj330th","data-path":"src/pages/Products/ProductList.tsx",children:a.jsxs(xa,{"data-id":"reg1nxz9g","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(A,{"data-id":"wr0rdxj7u","data-path":"src/pages/Products/ProductList.tsx",children:"Serial"}),a.jsx(A,{"data-id":"xguj479aq","data-path":"src/pages/Products/ProductList.tsx",children:"Product Name"}),a.jsx(A,{"data-id":"7h0kv6j17","data-path":"src/pages/Products/ProductList.tsx",children:"Weight"}),a.jsx(A,{"data-id":"m0mjuvv7q","data-path":"src/pages/Products/ProductList.tsx",children:"Department"}),a.jsx(A,{"data-id":"y38xdhyn7","data-path":"src/pages/Products/ProductList.tsx",children:"Merchant"}),a.jsx(A,{"data-id":"hyjsoza3w","data-path":"src/pages/Products/ProductList.tsx",children:"Last Updated Date"}),a.jsx(A,{"data-id":"035hbg930","data-path":"src/pages/Products/ProductList.tsx",children:"Last Shopping Date"}),a.jsx(A,{"data-id":"th1z3z9u8","data-path":"src/pages/Products/ProductList.tsx",children:"Case Price"}),a.jsx(A,{"data-id":"238n5lgcq","data-path":"src/pages/Products/ProductList.tsx",children:"Unit Per Case"}),a.jsx(A,{"data-id":"1z9kj96eq","data-path":"src/pages/Products/ProductList.tsx",children:"Unit Price"}),a.jsx(A,{"data-id":"yhlio4zkh","data-path":"src/pages/Products/ProductList.tsx",children:"Retail Price"}),a.jsx(A,{"data-id":"uqhntcdih","data-path":"src/pages/Products/ProductList.tsx",children:"Profit Margin"}),a.jsx(A,{"data-id":"bezh8xz0h","data-path":"src/pages/Products/ProductList.tsx",children:"Actions"})]})}),a.jsx(Ca,{"data-id":"tku466zwk","data-path":"src/pages/Products/ProductList.tsx",children:o.map(c=>{const O=Y=>{if(!Y)return"-";try{return new Date(Y).toLocaleDateString()}catch{return"-"}};return a.jsxs(xa,{"data-id":"v193smj46","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(z,{className:"font-medium","data-id":"sdowsi684","data-path":"src/pages/Products/ProductList.tsx",children:c.serial_number||"-"}),a.jsx(z,{"data-id":"e8rd7c27x","data-path":"src/pages/Products/ProductList.tsx",children:a.jsxs("div",{"data-id":"rg0lp6ej4","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx("p",{className:"font-medium","data-id":"gwy9p1va6","data-path":"src/pages/Products/ProductList.tsx",children:n?f(c.product_name).highlightComponent:c.product_name}),c.description&&a.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs","data-id":"hgubcoamt","data-path":"src/pages/Products/ProductList.tsx",children:n?f(c.description).highlightComponent:c.description})]})}),a.jsx(z,{"data-id":"6ktazokh3","data-path":"src/pages/Products/ProductList.tsx",children:c.weight&&c.weight>0?`${c.weight} ${c.weight_unit||"lb"}`:"-"}),a.jsx(z,{"data-id":"jzswq8w77","data-path":"src/pages/Products/ProductList.tsx",children:a.jsx(H,{variant:"outline","data-id":"hon8kpyv4","data-path":"src/pages/Products/ProductList.tsx",children:n?f(c.department||"Convenience Store").highlightComponent:c.department||"Convenience Store"})}),a.jsx(z,{"data-id":"tja925sjn","data-path":"src/pages/Products/ProductList.tsx",children:n?f(c.supplier||"-").highlightComponent:c.supplier||"-"}),a.jsx(z,{"data-id":"2ed5zq0bu","data-path":"src/pages/Products/ProductList.tsx",children:O(c.last_updated_date)}),a.jsx(z,{"data-id":"ilzlzxc8k","data-path":"src/pages/Products/ProductList.tsx",children:O(c.last_shopping_date)}),a.jsx(z,{"data-id":"h9o5wgj8v","data-path":"src/pages/Products/ProductList.tsx",children:c.case_price?`$${c.case_price.toFixed(2)}`:"-"}),a.jsx(z,{"data-id":"de1cqfqco","data-path":"src/pages/Products/ProductList.tsx",children:c.unit_per_case||"-"}),a.jsx(z,{"data-id":"8xxfe4zj9","data-path":"src/pages/Products/ProductList.tsx",children:c.unit_price?`$${c.unit_price.toFixed(2)}`:"-"}),a.jsx(z,{"data-id":"gvcfe406h","data-path":"src/pages/Products/ProductList.tsx",children:c.retail_price?`$${c.retail_price.toFixed(2)}`:"-"}),a.jsx(z,{"data-id":"7pq6gl3td","data-path":"src/pages/Products/ProductList.tsx",children:(()=>{if(c.unit_price&&c.retail_price&&c.retail_price>0){const Y=(c.retail_price-c.unit_price)/c.retail_price*100;return a.jsxs(H,{variant:Y>20?"default":Y>10?"secondary":"destructive",className:"text-xs","data-id":"93py8n7ws","data-path":"src/pages/Products/ProductList.tsx",children:[Y.toFixed(1),"%"]})}return"-"})()}),a.jsx(z,{"data-id":"l9c1abv6q","data-path":"src/pages/Products/ProductList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"wu5kfr14z","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>{console.log("Viewing logs for product:",c.ID,c.product_name),s(c.ID,c.product_name)},title:"View change logs","data-id":"1gq3ylslg","data-path":"src/pages/Products/ProductList.tsx",children:a.jsx(fa,{className:"w-4 h-4","data-id":"coqqs1v3x","data-path":"src/pages/Products/ProductList.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>{console.log("Saving product:",c.ID),u(c.ID)},disabled:ta===c.ID,title:"Save product","data-id":"d6aiaoqcp","data-path":"src/pages/Products/ProductList.tsx",children:ta===c.ID?a.jsx(Ba,{className:"w-4 h-4 animate-spin","data-id":"86whprmfp","data-path":"src/pages/Products/ProductList.tsx"}):a.jsx($a,{className:"w-4 h-4","data-id":"lkm8ei34z","data-path":"src/pages/Products/ProductList.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>{console.log("Deleting product:",c.ID),W(c.ID)},className:"text-red-600 hover:text-red-700",title:"Delete product","data-id":"8q1xzfud0","data-path":"src/pages/Products/ProductList.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"k497aogsp","data-path":"src/pages/Products/ProductList.tsx"})})]})})]},c.ID)})})]})}),o.length>0&&a.jsxs("div",{className:"mt-6","data-id":"m4aa6rld5","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx("p",{className:"text-sm text-gray-700 text-center mb-4","data-id":"er7e69bp3","data-path":"src/pages/Products/ProductList.tsx",children:P()}),J&&a.jsx("div",{ref:g,className:"flex items-center justify-center py-8","data-id":"hkg96gs2v","data-path":"src/pages/Products/ProductList.tsx",children:Q?a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500","data-id":"9u8xoflva","data-path":"src/pages/Products/ProductList.tsx",children:[a.jsx(Ba,{className:"w-5 h-5 animate-spin","data-id":"kbxlmbr8a","data-path":"src/pages/Products/ProductList.tsx"}),a.jsx("span",{"data-id":"vi9t8n6nh","data-path":"src/pages/Products/ProductList.tsx",children:"Loading more products..."})]}):a.jsx("div",{className:"text-gray-400 text-sm","data-id":"agnv83oox","data-path":"src/pages/Products/ProductList.tsx",children:"Scroll down to load more products"})}),!J&&l>B&&a.jsxs("div",{className:"text-center py-4 text-sm text-gray-500","data-id":"txy8dbwem","data-path":"src/pages/Products/ProductList.tsx",children:["You've reached the end - all ",l," products loaded"]})]})]})]}),y&&a.jsx(Bt,{isOpen:F,onClose:()=>{p(!1),v(null)},productId:y.id,productName:y.name,"data-id":"ec6cb0czv","data-path":"src/pages/Products/ProductList.tsx"})]})},De=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Yt=(e=0)=>{const[r,t]=i.useState(String(e||0)),[o,d]=i.useState(!1),[h,m]=i.useState(!1),j=i.useCallback(()=>{d(!0),r==="0"&&!h&&t("")},[r,h]),w=i.useCallback(()=>{d(!1),r.trim()||(t("0"),m(!1))},[r]),x=i.useCallback(D=>{t(D),m(!0)},[]),I=i.useCallback(()=>parseFloat(r)||0,[r]),l=i.useCallback((D=0)=>{t(String(D||0)),m(D!==0)},[]);return{value:r,isFocused:o,handleFocus:j,handleBlur:w,handleChange:x,getNumericValue:I,resetValue:l,displayValue:o&&r===""?"":r}},sa=i.forwardRef(({className:e,type:r="number",value:t,onChange:o,onValueChange:d,...h},m)=>{const j=Yt(t);i.useEffect(()=>{t!==void 0&&t!==j.getNumericValue()&&j.resetValue(t)},[t]);const w=x=>{const I=x.target.value;if(j.handleChange(I),o){const l=parseFloat(I)||0;o(l)}d&&d(I)};return a.jsx("input",{type:r,className:dt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:m,value:j.displayValue,onChange:w,onFocus:j.handleFocus,onBlur:j.handleBlur,...h})});sa.displayName="NumberInput";const Qt=(e={})=>{const{toast:r}=ya(),t=At.getInstance(),{component:o="Unknown Component",showToast:d=!0,logError:h=!0,severity:m="medium"}=e,j=i.useCallback((I,l,D)=>{const F=typeof I=="string"?new Error(I):I;h&&t.log(F,m,o,void 0,D),d&&r({variant:"destructive",title:"Error",description:l||F.message||"An unexpected error occurred"})},[o,d,h,m,r,t]),w=i.useCallback(async(I,l,D)=>{try{return await I()}catch(F){return j(F instanceof Error?F:new Error(String(F)),l,D),null}},[j]),x=i.useCallback(async(I,l,D)=>{try{const F=await I();if(F.error)throw new Error(F.error);return F.data||null}catch(F){return j(F instanceof Error?F:new Error(String(F)),l,D),null}},[j]);return{handleError:j,handleAsync:w,handleApiCall:x}},ut=({onScan:e,triggerText:r="Scan Barcode",disabled:t=!1})=>{const o=i.useRef(null),d=i.useRef(null),[h,m]=i.useState(!1),[j,w]=i.useState(null),[x,I]=i.useState(!1),{toast:l}=ya(),D=async()=>{try{const y=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});o.current&&(o.current.srcObject=y,w(y),I(!0))}catch(y){console.error("Error accessing camera:",y),l({variant:"destructive",title:"Camera Error",description:"Unable to access camera. Please check permissions."})}},F=()=>{j&&(j.getTracks().forEach(y=>y.stop()),w(null),I(!1))},p=()=>{if(o.current&&d.current){const y=o.current,v=d.current,n=v.getContext("2d");if(n){v.width=y.videoWidth,v.height=y.videoHeight,n.drawImage(y,0,0);const S=Math.random().toString(36).substr(2,12).toUpperCase();e(S),m(!1),F(),l({title:"Barcode Scanned",description:`Detected barcode: ${S}`})}}};return i.useEffect(()=>(h?D():F(),()=>{F()}),[h]),a.jsx($t,{componentName:"BarcodeScanner",severity:"medium",minHeight:"200px","data-id":"3pibg6ms7","data-path":"src/components/BarcodeScanner.tsx",children:a.jsxs(wa,{open:h,onOpenChange:m,"data-id":"39q67l96m","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(nt,{asChild:!0,"data-id":"avk5syt1n","data-path":"src/components/BarcodeScanner.tsx",children:a.jsxs(k,{type:"button",variant:"outline",size:"sm",disabled:t,"data-id":"y6ol20tpr","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(qa,{className:"w-4 h-4 mr-2","data-id":"st0einn3s","data-path":"src/components/BarcodeScanner.tsx"}),r]})}),a.jsxs(Na,{className:"sm:max-w-md","data-id":"3crr5yoy5","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(_a,{"data-id":"pcs34g8fb","data-path":"src/components/BarcodeScanner.tsx",children:a.jsx(Pa,{"data-id":"vr2r4ah79","data-path":"src/components/BarcodeScanner.tsx",children:"Scan Barcode"})}),a.jsxs("div",{className:"flex flex-col items-center space-y-4","data-id":"m2yxl59b5","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsxs("div",{className:"relative w-full max-w-sm aspect-video bg-black rounded-lg overflow-hidden","data-id":"jv41adqnn","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover","data-id":"umo9yuczd","data-path":"src/components/BarcodeScanner.tsx"}),a.jsx("canvas",{ref:d,className:"hidden","data-id":"1zqrqnpg4","data-path":"src/components/BarcodeScanner.tsx"}),!x&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white","data-id":"4n61y3quc","data-path":"src/components/BarcodeScanner.tsx",children:a.jsxs("div",{className:"text-center","data-id":"0yw8fuk6s","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(qa,{className:"w-12 h-12 mx-auto mb-2","data-id":"blxgzp25x","data-path":"src/components/BarcodeScanner.tsx"}),a.jsx("p",{"data-id":"ebyr1flvg","data-path":"src/components/BarcodeScanner.tsx",children:"Initializing camera..."})]})})]}),a.jsxs("div",{className:"flex space-x-2","data-id":"ga2zy4vyi","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(k,{onClick:p,disabled:!x,"data-id":"gdiold53r","data-path":"src/components/BarcodeScanner.tsx",children:"Capture"}),a.jsxs(k,{variant:"outline",onClick:()=>m(!1),"data-id":"6hay25d0q","data-path":"src/components/BarcodeScanner.tsx",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2","data-id":"62fns4deb","data-path":"src/components/BarcodeScanner.tsx"}),"Cancel"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground text-center","data-id":"ypqys8ed6","data-path":"src/components/BarcodeScanner.tsx",children:"Position the barcode within the camera view and click Capture"})]})]})]})})},Jt=()=>{const e=ba(),{id:r}=rt(),{toast:t}=ya(),{userProfile:o}=Ya();Qt({component:"ProductForm",severity:"high"});const d=!!r,[h,m]=i.useState(!1),[j,w]=i.useState([]),[x,I]=i.useState([]),[l,D]=i.useState([]),[F,p]=i.useState(!1),[y,v]=i.useState(!1),[n,S]=i.useState({product_name:"",weight:0,weight_unit:"lb",department:"Convenience Store",merchant_id:"",last_updated_date:new Date().toISOString().split("T")[0],last_shopping_date:"",case_price:0,unit_per_case:1,unit_price:0,retail_price:0,profit_margin:0,category:"",supplier:"",quantity_in_stock:0,minimum_stock:0,description:"",bar_code_case:"",bar_code_unit:"",serial_number:0,overdue:!1}),[U,E]=i.useState(null),J=[{value:"lb",label:"Pounds (lb)"},{value:"oz",label:"Ounces (oz)"},{value:"ton",label:"Tons"},{value:"fl_oz",label:"Fluid Ounces (fl oz)"},{value:"gal",label:"Gallons (gal)"},{value:"qt",label:"Quarts (qt)"},{value:"pt",label:"Pints (pt)"},{value:"cup",label:"Cups"},{value:"tbsp",label:"Tablespoons (tbsp)"},{value:"tsp",label:"Teaspoons (tsp)"}],na=["Convenience Store","Fuel & Oil","Automotive","Food & Beverages","Tobacco Products","Lottery & Gaming","Health & Personal Care","Electronics & Accessories","Cleaning Supplies","Office Supplies","Snacks & Candy","Hot Foods & Coffee","Cold Beverages","Energy Drinks","Beer & Wine","Ice & Frozen","Phone Cards & Prepaid","Car Accessories","Gift Cards","Pharmacy & Medicine"];i.useEffect(()=>{Q(),K(),d?C():ta()},[r]),i.useEffect(()=>{if(n.case_price>0&&n.unit_per_case>0){const s=n.case_price/n.unit_per_case;S(P=>({...P,unit_price:Math.round(s*100)/100}))}},[n.case_price,n.unit_per_case]),i.useEffect(()=>{if(n.unit_price>0){const s=B(n.unit_price);n.retail_price===0&&S(P=>({...P,retail_price:s}))}else n.unit_price===0&&S(s=>({...s,retail_price:0}))},[n.unit_price]),i.useEffect(()=>{if(n.unit_price>0&&n.retail_price>0){const s=(n.retail_price-n.unit_price)/n.retail_price*100;S(P=>({...P,profit_margin:Math.round(s*100)/100}))}else S(s=>({...s,profit_margin:0}))},[n.unit_price,n.retail_price]);const Q=async()=>{try{const{data:s,error:P}=await ra.from("vendors").select("*").eq("is_active",!0).order("vendor_name",{ascending:!0}).limit(100);if(P)throw P;w(s||[])}catch(s){console.error("Error fetching vendors:",s)}},K=async()=>{try{const{data:s,error:P}=await ra.from("product_categories").select("*").eq("is_active",!0).order("category_name",{ascending:!0}).limit(100);if(P)throw P;I(s||[])}catch(s){console.error("Error fetching categories:",s)}},ta=async()=>{var s;try{const{data:P,error:f}=await ra.from("products").select("serial_number").order("serial_number",{ascending:!1}).limit(1);if(f)throw f;const N=((s=P==null?void 0:P[0])==null?void 0:s.serial_number)||0;S(c=>({...c,serial_number:N+1}))}catch(P){console.error("Error generating serial number:",P),S(f=>({...f,serial_number:1}))}},C=async()=>{var s;if(r){m(!0);try{const{data:P,error:f}=await ra.from("products").select("*").eq("id",r).limit(1).single();if(f)throw f;if(P){const N=P,c={product_name:N.product_name||"",weight:N.weight||0,weight_unit:N.weight_unit||"lb",department:N.department||"Convenience Store",merchant_id:((s=N.merchant_id)==null?void 0:s.toString())||"",last_updated_date:N.last_updated_date?N.last_updated_date.split("T")[0]:"",last_shopping_date:N.last_shopping_date?N.last_shopping_date.split("T")[0]:"",case_price:N.case_price||0,unit_per_case:N.unit_per_case||1,unit_price:N.unit_price||0,retail_price:N.retail_price||0,profit_margin:0,category:N.category||"",supplier:N.supplier||"",quantity_in_stock:N.quantity_in_stock||0,minimum_stock:N.minimum_stock||0,description:N.description||"",bar_code_case:N.bar_code_case||"",bar_code_unit:N.bar_code_unit||"",serial_number:N.serial_number||0,overdue:N.overdue||!1};S(c),E(c)}}catch(P){console.error("Error fetching product:",P),t({variant:"destructive",title:"Error",description:"Failed to load product data."})}finally{m(!1)}}},B=s=>{if(s===0)return 0;let P=0;s<4?P=65:s>=4&&s<6?P=55:s>=6&&s<8?P=45:s>=8&&s<10?P=35:P=25;const f=s*(1+P/100),N=[.25,.49,.75,.99],c=Math.floor(f),O=f-c;let Y=.99,L=Math.abs(O-.99);return N.forEach(V=>{const ca=Math.abs(O-V);ca<L&&(L=ca,Y=V)}),c+Y},R=(s,P)=>{S(f=>({...f,[s]:P}))},_=(s,P)=>{S(f=>({...f,[s]:P})),t({title:"Barcode Scanned",description:`Barcode ${P} added to ${s.replace("_"," ")}`})},g=s=>{var N;const P=(N=s.target.files)==null?void 0:N[0];if(!P)return;const f=new FileReader;f.onload=c=>{var O;try{const L=((O=c.target)==null?void 0:O.result).split(`
`).filter(da=>da.trim()),V=L[0].split(",").map(da=>da.trim().toLowerCase()),ca=L.slice(1).map((da,za)=>{const Ea=da.split(","),ma={};return V.forEach((it,wt)=>{var pt;let Ta=((pt=Ea[wt])==null?void 0:pt.trim())||"";const lt={"product name":"product_name",product_name:"product_name",weight:"weight","weight unit":"weight_unit",weight_unit:"weight_unit",department:"department",merchant:"merchant_id",merchant_id:"merchant_id","last shopping date":"last_shopping_date",last_shopping_date:"last_shopping_date","case price":"case_price",case_price:"case_price","unit per case":"unit_per_case",unit_per_case:"unit_per_case","unit price":"unit_price",unit_price:"unit_price","retail price":"retail_price",retail_price:"retail_price",category:"category",supplier:"supplier",description:"description"}[it]||it;["weight","case_price","unit_per_case","unit_price","retail_price","merchant_id"].includes(lt)&&(Ta=Ta&&parseFloat(Ta)||0),ma[lt]=Ta}),ma.case_price>0&&ma.unit_per_case>0&&!ma.unit_price&&(ma.unit_price=Math.round(ma.case_price/ma.unit_per_case*100)/100),ma.unit_price>0&&!ma.retail_price&&(ma.retail_price=B(ma.unit_price)),ma});D(ca),p(!0)}catch{t({variant:"destructive",title:"Error",description:"Failed to parse CSV file. Please check the format."})}},f.readAsText(P)},T=async()=>{var s,P,f;if(!o){t({variant:"destructive",title:"Error",description:"User profile not found."});return}v(!0);try{let N=0,c=0;const O=[],L=((P=(s=(await ra.from("products").select("serial_number").order("serial_number",{ascending:!1}).limit(1)).data)==null?void 0:s[0])==null?void 0:P.serial_number)||0;for(const V of l)try{if(!((f=V.product_name)!=null&&f.trim())){O.push(`Row ${N+c+1}: Product name is required`),c++;continue}const ca={serial_number:L+N+1,product_name:V.product_name.trim(),last_updated_date:new Date().toISOString(),overdue:!1,weight:V.weight||0,weight_unit:V.weight_unit||"lb",department:V.department||"Convenience Store",case_price:V.case_price||0,unit_per_case:V.unit_per_case||1,unit_price:V.unit_price||0,retail_price:V.retail_price||0,category:V.category||"",supplier:V.supplier||"",description:V.description||"",quantity_in_stock:0,minimum_stock:0,bar_code_case:"",bar_code_unit:"",created_by:o.user_id};V.merchant_id&&(ca.merchant_id=parseInt(V.merchant_id)),V.last_shopping_date&&(ca.last_shopping_date=new Date(V.last_shopping_date).toISOString());const{error:da}=await ra.from("products").insert(ca);da?(O.push(`${V.product_name}: ${da}`),c++):N++}catch(ca){const da=ca instanceof Error?ca.message:"Unknown error";O.push(`${V.product_name||"Unknown"}: ${da}`),c++}N>0?t({title:"Import Complete",description:`Successfully imported ${N} products. ${c>0?`${c} errors occurred.`:""}`}):t({variant:"destructive",title:"Import Failed",description:`No products were imported. ${c} errors occurred.`}),O.length>0&&console.error("Import errors:",O),N>0&&(p(!1),D([]),e("/products"))}catch(N){console.error("Bulk import error:",N),t({variant:"destructive",title:"Import Failed",description:N instanceof Error?N.message:"Failed to import product data."})}finally{v(!1)}},b=async(s,P,f,N,c)=>{try{const{error:O}=await ra.from("product_field_changes").insert({product_id:s,field_name:P,old_value:(f==null?void 0:f.toString())||"",new_value:(N==null?void 0:N.toString())||"",change_date:new Date().toISOString(),changed_by:c});O&&console.error("Error logging field change:",O)}catch(O){console.error("Error logging field change:",O)}},W=async s=>{if(s.preventDefault(),!n.product_name.trim()){t({variant:"destructive",title:"Validation Error",description:"Product name is required."});return}if(!o){t({variant:"destructive",title:"Error",description:"User profile not found."});return}m(!0);try{const P={...n,last_updated_date:new Date().toISOString(),last_shopping_date:n.last_shopping_date?new Date(n.last_shopping_date).toISOString():null,merchant_id:n.merchant_id?parseInt(n.merchant_id):null,created_by:o.user_id},{error:f}=d?await ra.from("products").update(P).eq("id",parseInt(r)):await ra.from("products").insert(P);if(f)throw f;if(d&&U&&o){const N=["last_shopping_date","case_price","unit_per_case","unit_price","retail_price"];for(const Y of N){const L=U[Y],V=n[Y];L!==V&&await b(parseInt(r),Y,L,V,o.user_id)}const c=U.unit_price>0&&U.retail_price>0?(U.retail_price-U.unit_price)/U.retail_price*100:0,O=n.profit_margin;Math.abs(c-O)>.01&&await b(parseInt(r),"profit_margin",c.toFixed(2),O.toFixed(2),o.user_id)}t({title:"Success",description:`Product ${d?"updated":"created"} successfully.`}),e("/products")}catch(P){console.error("Error saving product:",P),t({variant:"destructive",title:"Error",description:`Failed to ${d?"update":"create"} product.`})}finally{m(!1)}},u=B(n.unit_price),q=()=>{const s=["Product Name,Weight,Weight Unit,Department,Merchant,Case Price,Unit Per Case,Unit Price,Retail Price,Category,Supplier,Description","Example Product,12,oz,Food & Beverages,,24.00,24,1.00,1.99,Soft Drinks,Example Supplier,Example description"].join(`
`),P=new Blob([s],{type:"text/csv"}),f=window.URL.createObjectURL(P),N=document.createElement("a");N.style.display="none",N.href=f,N.download="product_import_template.csv",document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(f),document.body.removeChild(N)};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6","data-id":"bx12wklbd","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"q5k5t85tc","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-4","data-id":"wlu98sixy","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs(k,{variant:"outline",size:"sm",onClick:()=>e("/products"),"data-id":"bdw35t5fy","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(Va,{className:"w-4 h-4 mr-2","data-id":"rtvwkpjqu","data-path":"src/pages/Products/ProductForm.tsx"}),"Back to Products"]}),a.jsxs("div",{"data-id":"q5m983vey","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h1",{className:"text-2xl font-bold","data-id":"41gy26pq3","data-path":"src/pages/Products/ProductForm.tsx",children:d?"Edit Product":"Add New Product"}),a.jsx("p",{className:"text-muted-foreground","data-id":"h07pjygjz","data-path":"src/pages/Products/ProductForm.tsx",children:d?"Update product information":"Add a new product to your inventory"})]})]}),a.jsxs(wa,{open:F,onOpenChange:p,"data-id":"hi7kexvnf","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(nt,{asChild:!0,"data-id":"93g6amn9o","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsxs(k,{variant:"outline","data-id":"uy4lxewlc","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(Xa,{className:"w-4 h-4 mr-2","data-id":"h92678uku","data-path":"src/pages/Products/ProductForm.tsx"}),"Bulk Upload"]})}),a.jsxs(Na,{className:"max-w-6xl max-h-[80vh] overflow-auto","data-id":"0nz2kj64x","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs(_a,{"data-id":"rmb9repv9","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(Pa,{"data-id":"s0xq7459l","data-path":"src/pages/Products/ProductForm.tsx",children:"Bulk Product Upload"}),a.jsx(Wa,{"data-id":"hlbqg641c","data-path":"src/pages/Products/ProductForm.tsx",children:'Upload a CSV file with product data. Click "Download Template" for the correct format.'})]}),l.length===0?a.jsxs("div",{className:"space-y-4","data-id":"otrmnjarm","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex justify-between items-center","data-id":"jnbayeohh","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h3",{className:"text-lg font-medium","data-id":"iflfxutqr","data-path":"src/pages/Products/ProductForm.tsx",children:"Upload CSV File"}),a.jsxs(k,{variant:"outline",onClick:q,"data-id":"7citiads7","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(vt,{className:"w-4 h-4 mr-2","data-id":"6gsm7c3h7","data-path":"src/pages/Products/ProductForm.tsx"}),"Download Template"]})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center","data-id":"l6duwtega","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(Xa,{className:"w-12 h-12 mx-auto text-gray-400 mb-4","data-id":"bvz7kpd58","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsxs("div",{className:"space-y-2","data-id":"xqwub2p94","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h3",{className:"text-lg font-medium","data-id":"kjou9apny","data-path":"src/pages/Products/ProductForm.tsx",children:"Upload CSV File"}),a.jsx("p",{className:"text-sm text-gray-500","data-id":"3xwvpr12u","data-path":"src/pages/Products/ProductForm.tsx",children:"Select a CSV file containing product data"}),a.jsx(oa,{type:"file",accept:".csv",onChange:g,className:"max-w-xs mx-auto","data-id":"r8qynfi9q","data-path":"src/pages/Products/ProductForm.tsx"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4","data-id":"3dwp5fzxb","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2","data-id":"u2zoncman","data-path":"src/pages/Products/ProductForm.tsx",children:"Required Columns:"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1","data-id":"rhkwpjqrw","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("li",{"data-id":"guya2pqun","data-path":"src/pages/Products/ProductForm.tsx",children:"• Product Name (required)"}),a.jsx("li",{"data-id":"tgq6dgo04","data-path":"src/pages/Products/ProductForm.tsx",children:"• Weight, Weight Unit, Department, Merchant"}),a.jsx("li",{"data-id":"jvpyf8maa","data-path":"src/pages/Products/ProductForm.tsx",children:"• Case Price, Unit Per Case, Unit Price, Retail Price"}),a.jsx("li",{"data-id":"44pem9vcv","data-path":"src/pages/Products/ProductForm.tsx",children:"• Category, Supplier, Description"})]})]})]}):a.jsxs("div",{className:"space-y-4","data-id":"13jnbnr6s","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"vl7z3re82","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("h3",{className:"text-lg font-medium","data-id":"x7eodbrud","data-path":"src/pages/Products/ProductForm.tsx",children:["Preview Import Data (",l.length," products)"]}),a.jsxs("div",{className:"space-x-2","data-id":"spwy9543p","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(k,{variant:"outline",onClick:()=>{D([]),p(!1)},"data-id":"nf798ix7z","data-path":"src/pages/Products/ProductForm.tsx",children:"Cancel"}),a.jsx(k,{onClick:T,disabled:y,"data-id":"s0l90qs0w","data-path":"src/pages/Products/ProductForm.tsx",children:y?"Importing...":"Import Products"})]})]}),a.jsx("div",{className:"border rounded-lg max-h-96 overflow-auto","data-id":"8knn1mgms","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsxs(Ia,{"data-id":"p9k1dq6d0","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(ka,{"data-id":"1d31nj8tz","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsxs(xa,{"data-id":"7ay0v18xb","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(A,{"data-id":"3aba6dsmt","data-path":"src/pages/Products/ProductForm.tsx",children:"Product Name"}),a.jsx(A,{"data-id":"h7safkm9m","data-path":"src/pages/Products/ProductForm.tsx",children:"Weight"}),a.jsx(A,{"data-id":"fnhhv5m54","data-path":"src/pages/Products/ProductForm.tsx",children:"Department"}),a.jsx(A,{"data-id":"eoxwo0so8","data-path":"src/pages/Products/ProductForm.tsx",children:"Case Price"}),a.jsx(A,{"data-id":"lietay58u","data-path":"src/pages/Products/ProductForm.tsx",children:"Unit Price"}),a.jsx(A,{"data-id":"vob1mrzrz","data-path":"src/pages/Products/ProductForm.tsx",children:"Retail Price"}),a.jsx(A,{"data-id":"9qxs82bs8","data-path":"src/pages/Products/ProductForm.tsx",children:"Profit %"})]})}),a.jsx(Ca,{"data-id":"nyr9xf477","data-path":"src/pages/Products/ProductForm.tsx",children:l.map((s,P)=>{var N,c,O;const f=s.unit_price>0&&s.retail_price>0?((s.retail_price-s.unit_price)/s.retail_price*100).toFixed(1):"0";return a.jsxs(xa,{"data-id":"0w8qpnjpw","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(z,{className:"font-medium","data-id":"ztfzojfdy","data-path":"src/pages/Products/ProductForm.tsx",children:s.product_name}),a.jsxs(z,{"data-id":"qxwlle97c","data-path":"src/pages/Products/ProductForm.tsx",children:[s.weight," ",s.weight_unit]}),a.jsx(z,{"data-id":"nawb7vr9m","data-path":"src/pages/Products/ProductForm.tsx",children:s.department}),a.jsxs(z,{"data-id":"6ackpc71i","data-path":"src/pages/Products/ProductForm.tsx",children:["$",((N=s.case_price)==null?void 0:N.toFixed(2))||"0.00"]}),a.jsxs(z,{"data-id":"ag0ksahtm","data-path":"src/pages/Products/ProductForm.tsx",children:["$",((c=s.unit_price)==null?void 0:c.toFixed(2))||"0.00"]}),a.jsxs(z,{"data-id":"4yr04zme5","data-path":"src/pages/Products/ProductForm.tsx",children:["$",((O=s.retail_price)==null?void 0:O.toFixed(2))||"0.00"]}),a.jsx(z,{"data-id":"iecxknd33","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsxs(H,{variant:parseFloat(f)>20?"default":"secondary","data-id":"kbs73ub5d","data-path":"src/pages/Products/ProductForm.tsx",children:[f,"%"]})})]},P)})})]})})]})]})]})]}),a.jsxs($,{"data-id":"ybi5y9x0t","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs(X,{"data-id":"c0sro9agp","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(aa,{"data-id":"yblpzeajq","data-path":"src/pages/Products/ProductForm.tsx",children:d?"Edit Product":"New Product"}),a.jsx(ua,{"data-id":"4snm2u3bc","data-path":"src/pages/Products/ProductForm.tsx",children:d?"Update the product information below":"Enter the product details below"})]}),a.jsx(M,{"data-id":"9gdcuh4ed","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsx(Mt,{formName:"Product Form",showDataRecovery:!0,onFormReset:()=>{d?C():(S({product_name:"",weight:0,weight_unit:"lb",department:"Convenience Store",merchant_id:"",last_updated_date:new Date().toISOString().split("T")[0],last_shopping_date:"",case_price:0,unit_per_case:1,unit_price:0,retail_price:0,profit_margin:0,category:"",supplier:"",quantity_in_stock:0,minimum_stock:0,description:"",bar_code_case:"",bar_code_unit:"",serial_number:0,overdue:!1}),ta())},"data-id":"cktkquzxl","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsxs("form",{onSubmit:W,className:"space-y-6","data-id":"b47e9aqag","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"xjmwfhyiz","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"kglmcicue","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"product_name","data-id":"phoq35hdt","data-path":"src/pages/Products/ProductForm.tsx",children:"Product Name *"}),a.jsx(oa,{id:"product_name",placeholder:"Enter product name",value:n.product_name,onChange:s=>R("product_name",s.target.value),required:!0,"data-id":"rjrlm6qa7","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"5wnmbfxgz","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"category","data-id":"4rvslpa8b","data-path":"src/pages/Products/ProductForm.tsx",children:"Category"}),a.jsxs(ia,{value:n.category,onValueChange:s=>R("category",s),"data-id":"cj8kg9x7v","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(la,{"data-id":"h53ofq07e","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsx(pa,{placeholder:"Select category","data-id":"lt19useuz","data-path":"src/pages/Products/ProductForm.tsx"})}),a.jsx(ha,{"data-id":"tu1fli4s7","data-path":"src/pages/Products/ProductForm.tsx",children:x.map(s=>a.jsx(Z,{value:s.category_name,"data-id":"dxg4exzsk","data-path":"src/pages/Products/ProductForm.tsx",children:s.category_name},s.id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6","data-id":"kcclizqrd","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"rbfly9jkc","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"weight","data-id":"5kewfxhrq","data-path":"src/pages/Products/ProductForm.tsx",children:"Weight"}),a.jsx(sa,{id:"weight",step:.01,min:0,value:n.weight,onChange:s=>R("weight",s),"data-id":"ntm2991pu","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"dpy100zkt","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"weight_unit","data-id":"lmhazo1o2","data-path":"src/pages/Products/ProductForm.tsx",children:"Weight Unit (USA Measurements)"}),a.jsxs(ia,{value:n.weight_unit,onValueChange:s=>R("weight_unit",s),"data-id":"ykhzxj6ot","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(la,{"data-id":"ibo0fui0o","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsx(pa,{placeholder:"Select unit","data-id":"wikid8ydq","data-path":"src/pages/Products/ProductForm.tsx"})}),a.jsx(ha,{"data-id":"o46bsqe2q","data-path":"src/pages/Products/ProductForm.tsx",children:J.map(s=>a.jsx(Z,{value:s.value,"data-id":"vr3gmqpg9","data-path":"src/pages/Products/ProductForm.tsx",children:s.label},s.value))})]}),a.jsxs("p",{className:"text-xs text-muted-foreground","data-id":"ilqscfzlv","data-path":"src/pages/Products/ProductForm.tsx",children:["Combined: ",n.weight," ",n.weight_unit]})]}),a.jsxs("div",{className:"space-y-2","data-id":"qsxt1su8b","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"department","data-id":"ui00cry10","data-path":"src/pages/Products/ProductForm.tsx",children:"Department"}),a.jsxs(ia,{value:n.department,onValueChange:s=>R("department",s),"data-id":"9e5cpkg0a","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(la,{"data-id":"o17mjjiz5","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsx(pa,{placeholder:"Select department","data-id":"onct4n5nl","data-path":"src/pages/Products/ProductForm.tsx"})}),a.jsx(ha,{"data-id":"5w12yqkd7","data-path":"src/pages/Products/ProductForm.tsx",children:na.map(s=>a.jsx(Z,{value:s,"data-id":"f42auxyjl","data-path":"src/pages/Products/ProductForm.tsx",children:s},s))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6","data-id":"8ev602vbv","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"2a4vpkma2","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"merchant_id","data-id":"lyuaqm4jk","data-path":"src/pages/Products/ProductForm.tsx",children:"Merchant"}),a.jsxs(ia,{value:n.merchant_id,onValueChange:s=>R("merchant_id",s),"data-id":"07ewjpxem","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(la,{"data-id":"r6bhwqo6v","data-path":"src/pages/Products/ProductForm.tsx",children:a.jsx(pa,{placeholder:"Select merchant","data-id":"gcgdwhskz","data-path":"src/pages/Products/ProductForm.tsx"})}),a.jsx(ha,{"data-id":"stxcuz9bv","data-path":"src/pages/Products/ProductForm.tsx",children:j.map(s=>a.jsx(Z,{value:s.id.toString(),"data-id":"8t00h2uci","data-path":"src/pages/Products/ProductForm.tsx",children:s.vendor_name},s.id))})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"7xotykfm4","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"last_updated_date","data-id":"d4wo4tj5g","data-path":"src/pages/Products/ProductForm.tsx",children:"Last Updated Date"}),a.jsx(oa,{id:"last_updated_date",type:"date",value:n.last_updated_date,onChange:s=>R("last_updated_date",s.target.value),"data-id":"afigj8q8r","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"joc9bnqgp","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"last_shopping_date","data-id":"nfkbcc485","data-path":"src/pages/Products/ProductForm.tsx",children:"Last Shopping Date"}),a.jsx(oa,{id:"last_shopping_date",type:"date",value:n.last_shopping_date,onChange:s=>R("last_shopping_date",s.target.value),"data-id":"4brvqnedm","data-path":"src/pages/Products/ProductForm.tsx"})]})]}),a.jsx(Ua,{"data-id":"9o0gwbwwq","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsxs("div",{className:"space-y-4","data-id":"wbwknuhfy","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h3",{className:"text-lg font-medium","data-id":"yu7bdekm3","data-path":"src/pages/Products/ProductForm.tsx",children:"Pricing Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6","data-id":"iwqed2cq2","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"h13mzseq5","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"case_price","data-id":"3yq7lv3rt","data-path":"src/pages/Products/ProductForm.tsx",children:"Case Price ($)"}),a.jsx(sa,{id:"case_price",step:.01,min:0,value:n.case_price,onChange:s=>R("case_price",s),"data-id":"8lif39lep","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"8ilbz7re9","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"unit_per_case","data-id":"lu93lxaue","data-path":"src/pages/Products/ProductForm.tsx",children:"Unit Per Case"}),a.jsx(sa,{id:"unit_per_case",min:1,value:n.unit_per_case,onChange:s=>R("unit_per_case",s),"data-id":"xpreug7g1","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"sqleu9w7o","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"unit_price","data-id":"bw3hnk8lw","data-path":"src/pages/Products/ProductForm.tsx",children:"Unit Price ($)"}),a.jsx(sa,{id:"unit_price",step:.01,min:0,value:n.unit_price,onChange:s=>R("unit_price",s),"data-id":"bhjy2741g","data-path":"src/pages/Products/ProductForm.tsx"}),n.case_price>0&&n.unit_per_case>0&&a.jsxs("p",{className:"text-xs text-green-600 flex items-center","data-id":"mig3drq7h","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(ht,{className:"w-3 h-3 mr-1","data-id":"9wwkfvxsf","data-path":"src/pages/Products/ProductForm.tsx"}),"Auto-calculated from case price"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"7szavq7wt","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"s44v0bd4c","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"retail_price","data-id":"sw3slkr61","data-path":"src/pages/Products/ProductForm.tsx",children:"Retail Price ($)"}),a.jsx(sa,{id:"retail_price",step:.01,min:0,value:n.retail_price,onChange:s=>R("retail_price",s),"data-id":"nhp6pvirq","data-path":"src/pages/Products/ProductForm.tsx"}),n.unit_price>0&&Math.abs(n.retail_price-u)<.01&&a.jsxs("p",{className:"text-xs text-green-600 flex items-center","data-id":"c6694zlow","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(ht,{className:"w-3 h-3 mr-1","data-id":"7j2ylnx8a","data-path":"src/pages/Products/ProductForm.tsx"}),"Auto-calculated from unit price"]}),n.unit_price>0&&Math.abs(n.retail_price-u)>=.01&&a.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg","data-id":"7ggtw6coy","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"ggamngcao","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"1l6080zer","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(Sa,{className:"w-4 h-4 text-red-600","data-id":"r1rmqer56","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsxs("span",{className:"text-sm font-medium text-red-800","data-id":"hs4p8lfhn","data-path":"src/pages/Products/ProductForm.tsx",children:["Suggested: $",u.toFixed(2)]})]}),a.jsx(k,{type:"button",size:"sm",variant:"outline",onClick:()=>R("retail_price",u),className:"text-xs h-6 px-2","data-id":"rhpckr8hc","data-path":"src/pages/Products/ProductForm.tsx",children:"Apply"})]}),a.jsxs("p",{className:"text-xs text-red-700 mt-1","data-id":"on56s08f2","data-path":"src/pages/Products/ProductForm.tsx",children:[n.unit_price<4?"+65%":n.unit_price<6?"+55%":n.unit_price<8?"+45%":n.unit_price<10?"+35%":"+25%"," markup, rounded to .25/.49/.75/.99"]})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"orczwe7jq","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"profit_margin","data-id":"sq9xzux3z","data-path":"src/pages/Products/ProductForm.tsx",children:"Profit Margin (%)"}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"jf7rutm1u","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(sa,{id:"profit_margin",step:.01,value:n.profit_margin,disabled:!0,className:"bg-muted","data-id":"uiwlfbodg","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsx(H,{variant:n.profit_margin>20?"default":"secondary","data-id":"3fkohoku4","data-path":"src/pages/Products/ProductForm.tsx",children:n.profit_margin>20?"Good":"Low"})]}),a.jsx("p",{className:"text-xs text-muted-foreground","data-id":"p6l0gv7lg","data-path":"src/pages/Products/ProductForm.tsx",children:"Auto-calculated from unit and retail price"})]})]})]}),a.jsx(Ua,{"data-id":"rqx6u6vw5","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsxs("div",{className:"space-y-4","data-id":"rpa5p141o","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx("h3",{className:"text-lg font-medium","data-id":"kkeqlckhp","data-path":"src/pages/Products/ProductForm.tsx",children:"Additional Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"t1uth5etf","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"br0f51o36","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"supplier","data-id":"nwezqijbs","data-path":"src/pages/Products/ProductForm.tsx",children:"Supplier"}),a.jsx(oa,{id:"supplier",placeholder:"Enter supplier name",value:n.supplier,onChange:s=>R("supplier",s.target.value),"data-id":"txymx9tx5","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"9x4r9yo2t","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{"data-id":"2f1u5b9f8","data-path":"src/pages/Products/ProductForm.tsx",children:"Stock Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2","data-id":"qa7poz02u","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(sa,{placeholder:"Current Stock",value:n.quantity_in_stock,onChange:s=>R("quantity_in_stock",s),min:0,"data-id":"aizhy7ulb","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsx(sa,{placeholder:"Min Stock",value:n.minimum_stock,onChange:s=>R("minimum_stock",s),min:0,"data-id":"dckcsjdop","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsx("p",{className:"text-xs text-muted-foreground","data-id":"hbdkhswsk","data-path":"src/pages/Products/ProductForm.tsx",children:"Current stock / Minimum stock level"})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"i6cs0n1a2","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"description","data-id":"vr0yez4f7","data-path":"src/pages/Products/ProductForm.tsx",children:"Description"}),a.jsx(ct,{id:"description",placeholder:"Enter product description",rows:4,value:n.description,onChange:s=>R("description",s.target.value),"data-id":"pi8xzw20m","data-path":"src/pages/Products/ProductForm.tsx"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"bcdeqdoq5","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"00ykzf331","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"bar_code_case","data-id":"sx2pox7kt","data-path":"src/pages/Products/ProductForm.tsx",children:"Barcode (Case)"}),a.jsxs("div",{className:"flex space-x-2","data-id":"6ri7xrix9","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(oa,{id:"bar_code_case",placeholder:"Scan or enter case barcode",value:n.bar_code_case,onChange:s=>R("bar_code_case",s.target.value),"data-id":"bzbisylmd","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsx(ut,{onScanned:s=>_("bar_code_case",s),"data-id":"98bp73w7a","data-path":"src/pages/Products/ProductForm.tsx"})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"x7tmyo56s","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(G,{htmlFor:"bar_code_unit","data-id":"hdxeaxie5","data-path":"src/pages/Products/ProductForm.tsx",children:"Barcode (Unit)"}),a.jsxs("div",{className:"flex space-x-2","data-id":"s3j3g1f3f","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(oa,{id:"bar_code_unit",placeholder:"Scan or enter unit barcode",value:n.bar_code_unit,onChange:s=>R("bar_code_unit",s.target.value),"data-id":"5irm9j9k9","data-path":"src/pages/Products/ProductForm.tsx"}),a.jsx(ut,{onScanned:s=>_("bar_code_unit",s),"data-id":"eshdnhw4l","data-path":"src/pages/Products/ProductForm.tsx"})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6","data-id":"2pgb4f3ov","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx(k,{type:"button",variant:"outline",onClick:()=>e("/products"),"data-id":"t2fbqbrwk","data-path":"src/pages/Products/ProductForm.tsx",children:"Cancel"}),a.jsxs(k,{type:"submit",disabled:h,"data-id":"fp7m4hvvp","data-path":"src/pages/Products/ProductForm.tsx",children:[a.jsx($a,{className:"w-4 h-4 mr-2","data-id":"e2dbj22gs","data-path":"src/pages/Products/ProductForm.tsx"}),h?"Saving...":d?"Update Product":"Create Product"]})]})]})})})]})]})},Le=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"})),Zt=({isOpen:e,onClose:r,title:t,data:o,fields:d,onEdit:h,onDelete:m,onExport:j,canEdit:w=!0,canDelete:x=!0,canExport:I=!0,loading:l=!1,subtitle:D})=>{const F=v=>{const{value:n,type:S}=v;if(n==null||n==="")return a.jsx("span",{className:"text-gray-400","data-id":"eg4d7pspi","data-path":"src/components/ViewModal.tsx",children:"N/A"});switch(S){case"date":return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);case"badge":return a.jsx(H,{className:`${v.badgeColor||"bg-gray-500"} text-white`,"data-id":"x906u9mra","data-path":"src/components/ViewModal.tsx",children:n});case"email":return a.jsxs("a",{href:`mailto:${n}`,className:"text-blue-600 hover:underline flex items-center space-x-1","data-id":"a6iub5ee0","data-path":"src/components/ViewModal.tsx",children:[a.jsx(at,{className:"w-3 h-3","data-id":"dc7d4hhek","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"q2mydccuf","data-path":"src/components/ViewModal.tsx",children:n})]});case"phone":return a.jsxs("a",{href:`tel:${n}`,className:"text-blue-600 hover:underline flex items-center space-x-1","data-id":"nuhsy37sj","data-path":"src/components/ViewModal.tsx",children:[a.jsx(xt,{className:"w-3 h-3","data-id":"qb6guqeq8","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"kuqiof57c","data-path":"src/components/ViewModal.tsx",children:n})]});case"boolean":return a.jsx(H,{variant:n?"default":"secondary","data-id":"gegcyesci","data-path":"src/components/ViewModal.tsx",children:n?"Yes":"No"});case"number":return typeof n=="number"?n.toLocaleString():n;default:return String(n)}},p=v=>{if(v.icon){const n=v.icon;return a.jsx(n,{className:"w-4 h-4 text-gray-500","data-id":"pxwmzj6nq","data-path":"src/components/ViewModal.tsx"})}switch(v.type){case"date":return a.jsx(Aa,{className:"w-4 h-4 text-gray-500","data-id":"dx5da2ui8","data-path":"src/components/ViewModal.tsx"});case"currency":return a.jsx(Sa,{className:"w-4 h-4 text-gray-500","data-id":"jzu89y4zl","data-path":"src/components/ViewModal.tsx"});case"email":return a.jsx(at,{className:"w-4 h-4 text-gray-500","data-id":"0i8lnaxzb","data-path":"src/components/ViewModal.tsx"});case"phone":return a.jsx(xt,{className:"w-4 h-4 text-gray-500","data-id":"xyddvflg4","data-path":"src/components/ViewModal.tsx"});default:return a.jsx(fa,{className:"w-4 h-4 text-gray-500","data-id":"pqgnw3oti","data-path":"src/components/ViewModal.tsx"})}},y=d.filter(v=>!v.hidden);return a.jsx(wa,{open:e,onOpenChange:r,"data-id":"1spnnfehd","data-path":"src/components/ViewModal.tsx",children:a.jsx(Na,{className:"max-w-2xl max-h-[90vh] overflow-hidden","data-id":"r1s13gxmf","data-path":"src/components/ViewModal.tsx",children:a.jsx(Tt,{"data-id":"wjg0rodt6","data-path":"src/components/ViewModal.tsx",children:e&&a.jsxs(et.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},"data-id":"n2suiat6z","data-path":"src/components/ViewModal.tsx",children:[a.jsx(_a,{className:"border-b pb-4","data-id":"wfsnqaelc","data-path":"src/components/ViewModal.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"40v0f6g4j","data-path":"src/components/ViewModal.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"xf7xssves","data-path":"src/components/ViewModal.tsx",children:[a.jsx(Qa,{className:"w-6 h-6 text-blue-600","data-id":"7p8dsmser","data-path":"src/components/ViewModal.tsx"}),a.jsxs("div",{"data-id":"ffnn5txeq","data-path":"src/components/ViewModal.tsx",children:[a.jsx(Pa,{className:"text-xl font-bold","data-id":"z10ds52c0","data-path":"src/components/ViewModal.tsx",children:t}),D&&a.jsx(Wa,{className:"mt-1","data-id":"7h176hhe6","data-path":"src/components/ViewModal.tsx",children:D})]})]}),a.jsx(k,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-500 hover:text-gray-700","data-id":"1kk88evz3","data-path":"src/components/ViewModal.tsx",children:a.jsx(Fa,{className:"w-4 h-4","data-id":"l153o3qwv","data-path":"src/components/ViewModal.tsx"})})]})}),a.jsx(Nt,{className:"max-h-[60vh] pr-4","data-id":"dovhg5kd3","data-path":"src/components/ViewModal.tsx",children:a.jsx("div",{className:"space-y-6 py-6","data-id":"pzk5e66gg","data-path":"src/components/ViewModal.tsx",children:l?a.jsx("div",{className:"space-y-4","data-id":"xoc9k096b","data-path":"src/components/ViewModal.tsx",children:[...Array(6)].map((v,n)=>a.jsxs("div",{className:"flex items-center space-x-3","data-id":"waffhsdc4","data-path":"src/components/ViewModal.tsx",children:[a.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse","data-id":"jze120wre","data-path":"src/components/ViewModal.tsx"}),a.jsxs("div",{className:"flex-1 space-y-2","data-id":"zx7j8jama","data-path":"src/components/ViewModal.tsx",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse","data-id":"pgiq21q7q","data-path":"src/components/ViewModal.tsx"}),a.jsx("div",{className:"h-4 bg-gray-100 rounded w-32 animate-pulse","data-id":"onb16hh3y","data-path":"src/components/ViewModal.tsx"})]})]},n))}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"bus93rbed","data-path":"src/components/ViewModal.tsx",children:y.map((v,n)=>a.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.05},className:"space-y-2","data-id":"e8kod921q","data-path":"src/components/ViewModal.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"c55w3f9sk","data-path":"src/components/ViewModal.tsx",children:[p(v),a.jsx("span",{className:"text-sm font-medium text-gray-700","data-id":"i51xxegnw","data-path":"src/components/ViewModal.tsx",children:v.label})]}),a.jsx("div",{className:"pl-6","data-id":"mmioapncn","data-path":"src/components/ViewModal.tsx",children:a.jsx("div",{className:"text-sm text-gray-900 font-medium","data-id":"q8epzn863","data-path":"src/components/ViewModal.tsx",children:F(v)})})]},v.key))})})}),a.jsx(Ua,{"data-id":"8en97nf9r","data-path":"src/components/ViewModal.tsx"}),a.jsxs("div",{className:"flex items-center justify-between pt-4","data-id":"zj0zae8gw","data-path":"src/components/ViewModal.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500","data-id":"60mtn8uht","data-path":"src/components/ViewModal.tsx",children:[a.jsx(yt,{className:"w-3 h-3","data-id":"2iydpgvpt","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"rnxol4sol","data-path":"src/components/ViewModal.tsx",children:"Press V to view, E to edit, D to delete"})]}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"hz3keznwy","data-path":"src/components/ViewModal.tsx",children:[I&&j&&a.jsxs(k,{variant:"outline",size:"sm",onClick:j,className:"flex items-center space-x-1","data-id":"tdzl6c1z6","data-path":"src/components/ViewModal.tsx",children:[a.jsx(vt,{className:"w-4 h-4","data-id":"iiabd4w3u","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"pmwmm87qj","data-path":"src/components/ViewModal.tsx",children:"Export"})]}),x&&m&&a.jsxs(k,{variant:"outline",size:"sm",onClick:m,className:"text-red-600 hover:text-red-700 flex items-center space-x-1","data-id":"zo2fpqdnl","data-path":"src/components/ViewModal.tsx",children:[a.jsx(Ra,{className:"w-4 h-4","data-id":"30b0dyce0","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"e7h8yctkf","data-path":"src/components/ViewModal.tsx",children:"Delete"})]}),w&&h&&a.jsxs(k,{size:"sm",onClick:h,className:"flex items-center space-x-1","data-id":"wx4xo3akr","data-path":"src/components/ViewModal.tsx",children:[a.jsx(Ja,{className:"w-4 h-4","data-id":"rx53i1y98","data-path":"src/components/ViewModal.tsx"}),a.jsx("span",{"data-id":"m4yvovp8c","data-path":"src/components/ViewModal.tsx",children:"Edit"})]})]})]})]})})})})},Xt=e=>{const r=i.useCallback(t=>{const o=t.target;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.isContentEditable)return;const d=e.find(h=>h.disabled?!1:t.key.toLowerCase()===h.key.toLowerCase()&&!!t.ctrlKey==!!h.ctrlKey&&!!t.altKey==!!h.altKey&&!!t.shiftKey==!!h.shiftKey);d&&(t.preventDefault(),d.callback())},[e]);i.useEffect(()=>(document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}),[r])},ae=(e,r,t,o,d)=>{Xt([{key:"v",callback:()=>e&&r(e),disabled:!e},{key:"e",callback:()=>e&&t(e),disabled:!e},{key:"d",callback:()=>e&&o(e),disabled:!e},{key:"n",ctrlKey:!0,callback:d}])},st=e=>e.type.startsWith("image/"),gt=e=>{if(e===0)return"0 Bytes";const r=1024,t=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(r));return`${parseFloat((e/Math.pow(r,o)).toFixed(2))} ${t[o]}`},te=(e,r)=>{const t=document.createElement("canvas");return t.width=e,t.height=r,t},ee=(e,r,t)=>{if(!t||e<=t&&r<=t)return{width:e,height:r};const o=e/r;return e>r?{width:t,height:Math.round(t/o)}:{width:Math.round(t*o),height:t}},se=e=>new Promise((r,t)=>{const o=new Image;o.onload=()=>r(o),o.onerror=()=>t(new Error("Failed to load image")),o.src=URL.createObjectURL(e)}),re=(e,r)=>new Promise((t,o)=>{const{width:d,height:h}=ee(e.naturalWidth,e.naturalHeight,r.maxWidthOrHeight),m=te(d,h),j=m.getContext("2d");if(!j){o(new Error("Could not get canvas context"));return}j.imageSmoothingEnabled=!0,j.imageSmoothingQuality="high",j.drawImage(e,0,0,d,h),m.toBlob(w=>{w?t(w):o(new Error("Failed to compress image"))},"image/jpeg",r.quality||.8)}),de=async(e,r,t)=>{let o=t.initialQuality||.8,d,h=0;const m=10,j=r*1024*1024;do{if(d=await re(e,{...t,quality:o}),d.size<=j||h>=m)break;o=Math.max(.1,o-.1),h++}while(h<m);return d},ne=()=>{try{const e=localStorage.getItem("imageCompressionSettings");if(e){const r=JSON.parse(e);return{maxSizeMB:r.maxSizeMB||1,maxWidthOrHeight:r.maxResolution||1920,quality:r.quality||.8,initialQuality:r.quality||.8,useWebWorker:!1,alwaysKeepResolution:!1}}}catch(e){console.error("Failed to load compression settings:",e)}return{maxSizeMB:1,maxWidthOrHeight:1920,quality:.8,initialQuality:.8,useWebWorker:!1,alwaysKeepResolution:!1}},ce=()=>{try{const e=localStorage.getItem("imageCompressionSettings");if(e)return JSON.parse(e).enabled!==!1}catch(e){console.error("Failed to load compression settings:",e)}return!0},oe=async(e,r)=>{const o={...ne(),...r},d=e.size,h=o.maxSizeMB,m=h*1024*1024;if(!ce())return{file:e,originalSize:d,compressedSize:d,compressionRatio:1,wasCompressed:!1};if(!st(e))return{file:e,originalSize:d,compressedSize:d,compressionRatio:1,wasCompressed:!1};if(!(()=>{try{const w=localStorage.getItem("imageCompressionSettings");return w?JSON.parse(w).autoCompress:!1}catch{return!1}})()&&d<=m)return{file:e,originalSize:d,compressedSize:d,compressionRatio:1,wasCompressed:!1};try{const w=await se(e),x=await de(w,h,o),I=new File([x],e.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()}),l=I.size,D=d/l;return URL.revokeObjectURL(w.src),{file:I,originalSize:d,compressedSize:l,compressionRatio:D,wasCompressed:!0}}catch(w){return console.error("Image compression failed:",w),{file:e,originalSize:d,compressedSize:d,compressionRatio:1,wasCompressed:!1}}},ie=({onFileSelect:e,accept:r="image/*",label:t="Upload File",currentFile:o,maxSize:d=10,className:h="",disabled:m=!1,allowCamera:j=!0})=>{const[w,x]=i.useState(!1),[I,l]=i.useState(!1),[D,F]=i.useState(null),[p,y]=i.useState(null),[v,n]=i.useState(!1),[S,U]=i.useState(!1),[E,J]=i.useState(null),na=i.useRef(null),Q=i.useRef(null),K=i.useRef(null),{toast:ta}=ya(),C=r.includes("image"),B=j&&C,R=f=>f.size>d*1024*1024?(ta({title:"File too large",description:`File size must be less than ${d}MB`,variant:"destructive"}),!1):r&&r!=="*/*"&&!r.split(",").map(O=>O.trim()).some(O=>{if(O.startsWith("."))return f.name.toLowerCase().endsWith(O.toLowerCase());if(O.includes("*")){const Y=O.split("/")[0];return f.type.startsWith(Y)}else return f.type===O})?(ta({title:"Invalid file type",description:`Please select a file of type: ${r}`,variant:"destructive"}),!1):!0,_=async f=>{if(st(f)&&f.size>1048576){U(!0);try{const c=await oe(f,{maxSizeMB:1,maxWidthOrHeight:1920,quality:.8,initialQuality:.8});J(c),c.wasCompressed&&ta({title:"Image compressed",description:`File size reduced from ${gt(c.originalSize)} to ${gt(c.compressedSize)} (${c.compressionRatio.toFixed(1)}x smaller)`,duration:5e3}),e(c.file),x(!1)}catch(c){console.error("Compression failed:",c),ta({title:"Compression failed",description:"Using original file instead",variant:"destructive"}),e(f),x(!1)}finally{U(!1)}}else e(f),x(!1),ta({title:"File selected",description:`${f.name} has been selected successfully`})},g=async f=>{var c;const N=(c=f.target.files)==null?void 0:c[0];N&&R(N)&&await _(N),na.current&&(na.current.value="")},T=async()=>{n(!0);try{const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080},facingMode:"environment"}});F(f),l(!0),Q.current&&(Q.current.srcObject=f)}catch(f){console.error("Error accessing camera:",f),ta({title:"Camera access denied",description:"Please allow camera access to take photos",variant:"destructive"})}finally{n(!1)}},b=()=>{D&&(D.getTracks().forEach(f=>f.stop()),F(null)),l(!1),y(null)},W=()=>{if(Q.current&&K.current){const f=Q.current,N=K.current,c=N.getContext("2d");if(c){N.width=f.videoWidth,N.height=f.videoHeight,c.drawImage(f,0,0);const O=N.toDataURL("image/jpeg",.8);y(O)}}},u=async()=>{p&&K.current&&K.current.toBlob(async f=>{if(f){const N=new File([f],`captured-${Date.now()}.jpg`,{type:"image/jpeg"});R(N)&&(b(),await _(N),ta({title:"Photo captured",description:"Photo has been captured successfully"}))}},"image/jpeg",.8)},q=()=>{y(null)},s=()=>{b(),x(!1)},P=()=>C?a.jsx(Rt,{className:"h-4 w-4","data-id":"s00ni63sv","data-path":"src/components/EnhancedFileUpload.tsx"}):a.jsx(fa,{className:"h-4 w-4","data-id":"qshbpzxgb","data-path":"src/components/EnhancedFileUpload.tsx"});return a.jsxs("div",{className:h,"data-id":"28a897lqr","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsxs(wa,{open:w,onOpenChange:x,"data-id":"bepxqjckf","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(nt,{asChild:!0,"data-id":"z3faij0d2","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs(k,{variant:"outline",disabled:m,className:"w-full flex items-center gap-2","data-id":"t1rspq6qi","data-path":"src/components/EnhancedFileUpload.tsx",children:[P(),t]})}),a.jsxs(Na,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","data-id":"9mn6e0kph","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(_a,{"data-id":"bt6bnsl33","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs(Pa,{className:"flex items-center gap-2","data-id":"t8cim5qfq","data-path":"src/components/EnhancedFileUpload.tsx",children:[P(),t]})}),I?a.jsxs("div",{className:"space-y-4","data-id":"e9h50j0qb","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"yjfg4olcu","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("h3",{className:"text-lg font-semibold","data-id":"wavuww0ah","data-path":"src/components/EnhancedFileUpload.tsx",children:"Camera"}),a.jsx(k,{variant:"ghost",size:"sm",onClick:s,"data-id":"2pefry38n","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(Fa,{className:"h-4 w-4","data-id":"4lgdm8ags","data-path":"src/components/EnhancedFileUpload.tsx"})})]}),a.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden","data-id":"l1bwqp81w","data-path":"src/components/EnhancedFileUpload.tsx",children:[p?a.jsx("img",{src:p,alt:"Captured",className:"w-full h-64 md:h-96 object-cover","data-id":"5if3pxpxy","data-path":"src/components/EnhancedFileUpload.tsx"}):a.jsx("video",{ref:Q,autoPlay:!0,playsInline:!0,className:"w-full h-64 md:h-96 object-cover","data-id":"v9u3clu7c","data-path":"src/components/EnhancedFileUpload.tsx"}),a.jsx("canvas",{ref:K,className:"hidden","data-id":"tlhxi398w","data-path":"src/components/EnhancedFileUpload.tsx"})]}),a.jsx("div",{className:"flex justify-center gap-4","data-id":"6yfmmbhry","data-path":"src/components/EnhancedFileUpload.tsx",children:p?a.jsxs(a.Fragment,{children:[a.jsxs(k,{onClick:u,className:"flex items-center gap-2","data-id":"ayvxnzku1","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(kt,{className:"h-4 w-4","data-id":"tfsxgolu8","data-path":"src/components/EnhancedFileUpload.tsx"}),"Use This Photo"]}),a.jsxs(k,{variant:"outline",onClick:q,className:"flex items-center gap-2","data-id":"dbatyj76m","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(Ct,{className:"h-4 w-4","data-id":"3u9t16jif","data-path":"src/components/EnhancedFileUpload.tsx"}),"Retake"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(k,{onClick:W,className:"flex items-center gap-2","data-id":"2ei8u6uhx","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(qa,{className:"h-4 w-4","data-id":"gy6hdxk3j","data-path":"src/components/EnhancedFileUpload.tsx"}),"Capture"]}),a.jsx(k,{variant:"outline",onClick:b,"data-id":"18j6yyzci","data-path":"src/components/EnhancedFileUpload.tsx",children:"Cancel"})]})})]}):a.jsxs("div",{className:"space-y-4","data-id":"ajndwulj2","data-path":"src/components/EnhancedFileUpload.tsx",children:[o&&a.jsx($,{"data-id":"6a3smxs3r","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(M,{className:"p-4","data-id":"pd6aksu51","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"i6hki4rpq","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("span",{className:"text-sm text-gray-600","data-id":"szbtuxohh","data-path":"src/components/EnhancedFileUpload.tsx",children:"Current file:"}),a.jsx(H,{variant:"secondary","data-id":"iae45fgy2","data-path":"src/components/EnhancedFileUpload.tsx",children:o})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"r9vlqzkb6","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx($,{className:"cursor-pointer hover:bg-gray-50 transition-colors","data-id":"h91w96m2g","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(M,{className:"p-6","data-id":"otelxb92x","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs(k,{variant:"ghost",className:"w-full h-auto p-0 flex flex-col items-center gap-3",onClick:()=>{var f;return(f=na.current)==null?void 0:f.click()},"data-id":"ge5fl7cm8","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full","data-id":"beki9ayfi","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(Xa,{className:"h-8 w-8 text-blue-600","data-id":"uovt8mj4f","data-path":"src/components/EnhancedFileUpload.tsx"})}),a.jsxs("div",{className:"text-center","data-id":"vjfu6smw8","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("h3",{className:"font-semibold","data-id":"25bza49x8","data-path":"src/components/EnhancedFileUpload.tsx",children:"Upload From File"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1","data-id":"escx2h8bs","data-path":"src/components/EnhancedFileUpload.tsx",children:"Choose a file from your device"})]})]})})}),B&&a.jsx($,{className:"cursor-pointer hover:bg-gray-50 transition-colors","data-id":"afan0j4jm","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(M,{className:"p-6","data-id":"imwm0gy0s","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs(k,{variant:"ghost",className:"w-full h-auto p-0 flex flex-col items-center gap-3",onClick:T,disabled:v,"data-id":"b85cnn2vi","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("div",{className:"p-4 bg-green-100 rounded-full","data-id":"lnix4ai1o","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(qa,{className:"h-8 w-8 text-green-600","data-id":"tncve2dth","data-path":"src/components/EnhancedFileUpload.tsx"})}),a.jsxs("div",{className:"text-center","data-id":"ebsr6zrgi","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("h3",{className:"font-semibold","data-id":"kzmlckl5i","data-path":"src/components/EnhancedFileUpload.tsx",children:"Take A Picture"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1","data-id":"54zw6iu52","data-path":"src/components/EnhancedFileUpload.tsx",children:v?"Loading camera...":"Use your camera to capture"})]})]})})})]}),S&&a.jsx($,{className:"border-blue-200 bg-blue-50","data-id":"orgi2knzb","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsx(M,{className:"p-4","data-id":"u3nhnobw1","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs("div",{className:"flex items-center gap-3","data-id":"w58roef90","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(Ba,{className:"h-5 w-5 animate-spin text-blue-600","data-id":"3bbqg8m6o","data-path":"src/components/EnhancedFileUpload.tsx"}),a.jsxs("div",{"data-id":"lzgckt22h","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx("p",{className:"font-medium text-blue-800","data-id":"jbnh98nc2","data-path":"src/components/EnhancedFileUpload.tsx",children:"Compressing image..."}),a.jsx("p",{className:"text-sm text-blue-600","data-id":"jjwtng8jt","data-path":"src/components/EnhancedFileUpload.tsx",children:"Optimizing file size for better performance"})]})]})})}),a.jsxs("div",{className:"text-center text-sm text-gray-500","data-id":"72b9ko7qb","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsxs("p",{"data-id":"j5om62lms","data-path":"src/components/EnhancedFileUpload.tsx",children:["Accepted file types: ",r]}),a.jsxs("p",{"data-id":"frapsjolz","data-path":"src/components/EnhancedFileUpload.tsx",children:["Maximum file size: ",d,"MB"]}),st({type:r})&&a.jsx("div",{className:"mt-2 p-2 bg-green-50 rounded-lg border border-green-200","data-id":"d6e1rbnh5","data-path":"src/components/EnhancedFileUpload.tsx",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700","data-id":"58uwv7s4q","data-path":"src/components/EnhancedFileUpload.tsx",children:[a.jsx(It,{className:"h-4 w-4","data-id":"eowz576wz","data-path":"src/components/EnhancedFileUpload.tsx"}),a.jsx("span",{className:"text-xs font-medium","data-id":"b7ml71nrw","data-path":"src/components/EnhancedFileUpload.tsx",children:"Auto-compression enabled for images >1MB"})]})})]})]})]})]}),a.jsx("input",{ref:na,type:"file",accept:r,onChange:g,className:"hidden","data-id":"y897ysif0","data-path":"src/components/EnhancedFileUpload.tsx"})]})},le=({open:e,onOpenChange:r,report:t})=>{if(!t)return null;const o=v=>v?new Date(v).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A",d=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v||0),h=v=>(v||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),m=v=>{switch(v.toUpperCase()){case"MOBIL":return"bg-red-500 text-white";case"AMOCO ROSEDALE":return"bg-blue-500 text-white";case"AMOCO BROOKLYN":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},j=t.expenses_data?JSON.parse(t.expenses_data):[],w=j.reduce((v,n)=>v+n.amount,0),x=j.filter(v=>v.paymentType==="Cash").reduce((v,n)=>v+n.amount,0),I=j.filter(v=>v.paymentType==="Credit Card").reduce((v,n)=>v+n.amount,0),l=j.filter(v=>v.paymentType==="Cheque").reduce((v,n)=>v+n.amount,0),D=t.credit_card_amount+t.debit_card_amount+t.mobile_amount+t.cash_amount;t.regular_gallons+t.super_gallons+t.diesel_gallons;const F=Math.abs(D-t.total_sales)<=.01,p=Math.abs(t.total_short_over)<=1,y=()=>{const v=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Enhanced Sales Report - ${t.station} - ${o(t.report_date)}</title>
          <style>
            @page {
              size: A4;
              margin: 0.5in;
            }
            body {
              font-family: 'Arial', sans-serif;
              margin: 0;
              padding: 0;
              color: #333;
              line-height: 1.4;
            }
            .header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 3px solid #2563eb;
              padding-bottom: 20px;
            }
            .company-logo {
              font-size: 28px;
              font-weight: bold;
              color: #1e40af;
              margin-bottom: 5px;
            }
            .report-title {
              font-size: 20px;
              color: #374151;
              margin-bottom: 10px;
            }
            .report-meta {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 20px;
              background: #f8fafc;
              padding: 15px;
              border-radius: 8px;
              margin-bottom: 25px;
            }
            .meta-item {
              text-align: center;
            }
            .meta-label {
              font-size: 12px;
              color: #6b7280;
              text-transform: uppercase;
              font-weight: 600;
            }
            .meta-value {
              font-size: 14px;
              font-weight: bold;
              margin-top: 5px;
            }
            .station-badge {
              display: inline-block;
              padding: 4px 12px;
              border-radius: 20px;
              color: white;
              font-size: 12px;
              font-weight: 600;
            }
            .section {
              margin-bottom: 25px;
              break-inside: avoid;
            }
            .section-header {
              display: flex;
              align-items: center;
              margin-bottom: 15px;
              padding-bottom: 10px;
              border-bottom: 2px solid #e5e7eb;
            }
            .section-icon {
              margin-right: 10px;
              color: #2563eb;
            }
            .section-title {
              font-size: 18px;
              font-weight: bold;
              color: #1f2937;
            }
            .data-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 15px;
            }
            .data-card {
              border: 1px solid #e5e7eb;
              border-radius: 8px;
              padding: 15px;
              background: #ffffff;
            }
            .data-label {
              font-size: 12px;
              color: #6b7280;
              text-transform: uppercase;
              font-weight: 600;
              margin-bottom: 5px;
            }
            .data-value {
              font-size: 16px;
              font-weight: bold;
              color: #1f2937;
            }
            .currency {
              color: #059669;
            }
            .gallons {
              color: #2563eb;
            }
            .summary-card {
              background: linear-gradient(135deg, #3b82f6, #1d4ed8);
              color: white;
              padding: 20px;
              border-radius: 10px;
              margin: 20px 0;
            }
            .summary-grid {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 20px;
              text-align: center;
            }
            .summary-amount {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .summary-label {
              font-size: 12px;
              opacity: 0.9;
            }
            .expenses-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 10px;
            }
            .expenses-table th,
            .expenses-table td {
              padding: 10px;
              text-align: left;
              border-bottom: 1px solid #e5e7eb;
            }
            .expenses-table th {
              background: #f3f4f6;
              font-weight: 600;
              font-size: 12px;
              text-transform: uppercase;
            }
            .verification-section {
              background: #f0fdf4;
              border: 2px solid #10b981;
              border-radius: 8px;
              padding: 20px;
              margin: 20px 0;
            }
            .verification-failed {
              background: #fef2f2;
              border-color: #ef4444;
            }
            .verification-item {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 10px;
            }
            .check-passed {
              color: #059669;
              font-weight: bold;
            }
            .check-failed {
              color: #dc2626;
              font-weight: bold;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 11px;
              color: #6b7280;
              border-top: 1px solid #e5e7eb;
              padding-top: 20px;
            }
            .notes-section {
              background: #fffbeb;
              border-left: 4px solid #f59e0b;
              padding: 15px;
              margin: 20px 0;
            }
            @media print {
              body { font-size: 11pt; }
              .section { page-break-inside: avoid; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-logo">DFS Manager Portal</div>
            <div class="report-title">Daily Sales Report - Enhanced</div>
          </div>

          <div class="report-meta">
            <div class="meta-item">
              <div class="meta-label">Report Date</div>
              <div class="meta-value">${o(t.report_date)}</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Station</div>
              <div class="meta-value">
                <span class="station-badge" style="background: ${t.station==="MOBIL"?"#ef4444":t.station==="AMOCO ROSEDALE"?"#3b82f6":"#10b981"}">${t.station}</span>
              </div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Employee</div>
              <div class="meta-value">${t.employee_name}</div>
            </div>
          </div>

          <div class="summary-card">
            <div class="summary-grid">
              <div>
                <div class="summary-amount">${d(t.total_sales)}</div>
                <div class="summary-label">Total Sales</div>
              </div>
              <div>
                <div class="summary-amount">${h(t.total_gallons)} gal</div>
                <div class="summary-label">Total Gallons</div>
              </div>
              <div>
                <div class="summary-amount">${d(t.lottery_total_cash)}</div>
                <div class="summary-label">Lottery Sales</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-header">
              <span class="section-icon">💰</span>
              <span class="section-title">Cash Collection & Balance</span>
            </div>
            <div class="data-grid">
              <div class="data-card">
                <div class="data-label">Cash on Hand</div>
                <div class="data-value currency">${d(t.cash_collection_on_hand)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Short/Over</div>
                <div class="data-value ${t.total_short_over>=0?"check-passed":"check-failed"}">${d(t.total_short_over)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Cash Sales</div>
                <div class="data-value currency">${d(t.cash_amount)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Cash Expenses</div>
                <div class="data-value currency">${d(x)}</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-header">
              <span class="section-icon">💳</span>
              <span class="section-title">Payment Methods</span>
            </div>
            <div class="data-grid">
              <div class="data-card">
                <div class="data-label">Credit Card</div>
                <div class="data-value currency">${d(t.credit_card_amount)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Debit Card</div>
                <div class="data-value currency">${d(t.debit_card_amount)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Mobile Payments</div>
                <div class="data-value currency">${d(t.mobile_amount)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Cash Payments</div>
                <div class="data-value currency">${d(t.cash_amount)}</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-header">
              <span class="section-icon">⛽</span>
              <span class="section-title">Fuel Sales</span>
            </div>
            <div class="data-grid">
              <div class="data-card">
                <div class="data-label">Regular Gallons</div>
                <div class="data-value gallons">${h(t.regular_gallons)} gal</div>
              </div>
              <div class="data-card">
                <div class="data-label">Super Gallons</div>
                <div class="data-value gallons">${h(t.super_gallons)} gal</div>
              </div>
              <div class="data-card">
                <div class="data-label">Diesel Gallons</div>
                <div class="data-value gallons">${h(t.diesel_gallons)} gal</div>
              </div>
              <div class="data-card">
                <div class="data-label">Total Gallons</div>
                <div class="data-value gallons">${h(t.total_gallons)} gal</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-header">
              <span class="section-icon">🛒</span>
              <span class="section-title">Store Sales</span>
            </div>
            <div class="data-grid">
              <div class="data-card">
                <div class="data-label">Grocery Sales</div>
                <div class="data-value currency">${d(t.grocery_sales)}</div>
              </div>
              ${t.station==="MOBIL"?`
              <div class="data-card">
                <div class="data-label">EBT Sales</div>
                <div class="data-value currency">${d(t.ebt_sales)}</div>
              </div>
              `:""}
              <div class="data-card">
                <div class="data-label">Lottery Net Sales</div>
                <div class="data-value currency">${d(t.lottery_net_sales)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Scratch-off Sales</div>
                <div class="data-value currency">${d(t.scratch_off_sales)}</div>
              </div>
            </div>
          </div>

          ${j.length>0?`
          <div class="section">
            <div class="section-header">
              <span class="section-icon">📋</span>
              <span class="section-title">Expenses (${j.length} items)</span>
            </div>
            <table class="expenses-table">
              <thead>
                <tr>
                  <th>Vendor</th>
                  <th>Amount</th>
                  <th>Payment Method</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody>
                ${j.map(S=>`
                <tr>
                  <td>${S.vendorName}</td>
                  <td>${d(S.amount)}</td>
                  <td>${S.paymentType}${S.chequeNo?` (#${S.chequeNo})`:""}</td>
                  <td>${S.notes||"-"}</td>
                </tr>
                `).join("")}
              </tbody>
            </table>
            <div class="data-grid" style="margin-top: 15px;">
              <div class="data-card">
                <div class="data-label">Total Expenses</div>
                <div class="data-value currency">${d(w)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Cash Expenses</div>
                <div class="data-value currency">${d(x)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Card Expenses</div>
                <div class="data-value currency">${d(I)}</div>
              </div>
              <div class="data-card">
                <div class="data-label">Cheque Expenses</div>
                <div class="data-value currency">${d(l)}</div>
              </div>
            </div>
          </div>
          `:""}

          <div class="verification-section ${F&&p?"":"verification-failed"}">
            <div class="section-header">
              <span class="section-icon">✓</span>
              <span class="section-title">Report Verification</span>
            </div>
            <div class="verification-item">
              <span>Payment Methods Balance:</span>
              <span class="${F?"check-passed":"check-failed"}">
                ${F?"✓ Balanced":`⚠️ Discrepancy: ${d(Math.abs(D-t.total_sales))}`}
              </span>
            </div>
            <div class="verification-item">
              <span>Cash Balance (Short/Over):</span>
              <span class="${p?"check-passed":"check-failed"}">
                ${p?"✓ Within tolerance":"⚠️ Outside tolerance"}
              </span>
            </div>
            <div class="verification-item">
              <span>Documents Uploaded:</span>
              <span class="check-passed">✓ All Required</span>
            </div>
          </div>

          ${t.notes?`
          <div class="notes-section">
            <div class="section-header">
              <span class="section-icon">📝</span>
              <span class="section-title">Additional Notes</span>
            </div>
            <p style="margin: 0; white-space: pre-wrap;">${t.notes}</p>
          </div>
          `:""}

          <div class="footer">
            <div>Report ID: #${t.ID} | Generated on ${new Date().toLocaleString()}</div>
            <div>Created by User #${t.created_by} | DFS Manager Portal v2.0</div>
            <div style="margin-top: 10px; font-style: italic;">
              This is an official business document. Please retain for your records.
            </div>
          </div>
        </body>
      </html>
    `,n=window.open("","_blank");n&&(n.document.write(v),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close()},500))};return a.jsx(wa,{open:e,onOpenChange:r,"data-id":"nfj0bspmm","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs(Na,{className:"max-w-7xl max-h-[95vh] overflow-y-auto","data-id":"pju3yrhmm","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(_a,{"data-id":"vpu48sxl6","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"k4vwk334t","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs(Pa,{className:"flex items-center gap-2","data-id":"ru8r52y45","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(jt,{className:"h-5 w-5 text-blue-600","data-id":"ily78v8qn","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),"Enhanced Sales Report - ",t.station]}),a.jsxs(k,{onClick:y,variant:"outline",size:"sm",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50","data-id":"knargsigk","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(tt,{className:"h-4 w-4","data-id":"zci1fq4z3","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),"Print Full Report"]})]})}),a.jsxs("div",{className:"space-y-6","data-id":"0cftv8qde","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx($,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200","data-id":"wafqznfno","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx(X,{"data-id":"n2puxr7rb","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"wqp9vhh1u","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs("div",{"data-id":"v3rl3w8bo","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(aa,{className:"text-blue-800","data-id":"jq4c5c71y","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:o(t.report_date)}),a.jsxs("div",{className:"flex items-center gap-2 mt-2","data-id":"geuzwol9x","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(H,{className:m(t.station),"data-id":"u8s6xxnkx","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:t.station}),a.jsxs("span",{className:"text-sm text-gray-600","data-id":"gbpj1fde4","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:["Employee: ",t.employee_name]})]})]}),a.jsxs("div",{className:"text-right","data-id":"ku6flmdww","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-800","data-id":"a5quco9ty","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.total_sales)}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"9h66fakkx","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Total Sales"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"ipp9ha9ym","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx($,{"data-id":"ve5ee45n4","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs(M,{className:"p-4 text-center","data-id":"epp3wvo1k","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(Sa,{className:"h-8 w-8 mx-auto text-green-600 mb-2","data-id":"quyh8i9vf","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),a.jsx("div",{className:"text-2xl font-bold text-green-600","data-id":"ztahfbnjv","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.total_sales)}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"hd6lhsbbq","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Total Sales"})]})}),a.jsx($,{"data-id":"6l9eceytc","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs(M,{className:"p-4 text-center","data-id":"jqgxhgdsy","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(Da,{className:"h-8 w-8 mx-auto text-blue-600 mb-2","data-id":"7cwhbzkvx","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),a.jsx("div",{className:"text-2xl font-bold text-blue-600","data-id":"f3mbsg5p8","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:h(t.total_gallons)}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"pxrx3ujd9","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Total Gallons"})]})}),a.jsx($,{"data-id":"7ml55fuhf","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs(M,{className:"p-4 text-center","data-id":"fp2rkckpa","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(ja,{className:"h-8 w-8 mx-auto text-purple-600 mb-2","data-id":"t3tj5ah3c","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600","data-id":"qztmkcdzn","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.lottery_total_cash)}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"xkhhehqu5","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Lottery Sales"})]})})]}),a.jsxs($,{className:`border-2 ${F&&p?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,"data-id":"yonatv9o0","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(X,{"data-id":"ph413d7va","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx(aa,{className:"flex items-center gap-2","data-id":"g44n89d25","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:F&&p?a.jsx("div",{className:"text-green-600","data-id":"evujsuleq","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"✓ Report Verified"}):a.jsxs("div",{className:"text-red-600 flex items-center gap-2","data-id":"ezfpec1at","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(Ha,{className:"h-5 w-5","data-id":"k8np7ku99","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),"Discrepancies Found"]})})}),a.jsx(M,{"data-id":"bxrtcl1bt","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"uggeiu1ua","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs("div",{className:"flex justify-between","data-id":"xun580ajb","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"lb1djuicf","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Payment Balance:"}),a.jsx("span",{className:F?"text-green-600 font-medium":"text-red-600 font-medium","data-id":"jyzbc4wsa","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:F?"✓ Balanced":`⚠️ ${d(Math.abs(D-t.total_sales))} difference`})]}),a.jsxs("div",{className:"flex justify-between","data-id":"3htawnd8a","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"c5wrnmb96","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Cash Balance:"}),a.jsx("span",{className:p?"text-green-600 font-medium":"text-red-600 font-medium","data-id":"s27d5hiua","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:p?"✓ Within tolerance":`⚠️ ${d(Math.abs(t.total_short_over))}`})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-id":"zm6phqnq5","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs($,{"data-id":"6vjvntzmi","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(X,{"data-id":"yd2hay199","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx(aa,{className:"text-sm","data-id":"mdncwt5bg","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Payment Methods"})}),a.jsxs(M,{className:"space-y-2","data-id":"rnlkfky6t","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs("div",{className:"flex justify-between text-sm","data-id":"5kiw0cffh","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"uq7yftxit","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Credit Card:"}),a.jsx("span",{className:"font-medium","data-id":"m1w2bucdj","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.credit_card_amount)})]}),a.jsxs("div",{className:"flex justify-between text-sm","data-id":"7pfl0pad1","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"vrowmjj96","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Debit Card:"}),a.jsx("span",{className:"font-medium","data-id":"e9384xopw","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.debit_card_amount)})]}),a.jsxs("div",{className:"flex justify-between text-sm","data-id":"hgo5jgcpp","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"b3cmlzlen","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Mobile:"}),a.jsx("span",{className:"font-medium","data-id":"hcxmxwq92","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.mobile_amount)})]}),a.jsxs("div",{className:"flex justify-between text-sm","data-id":"u8davm9nb","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"mdp95mn7b","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Cash:"}),a.jsx("span",{className:"font-medium","data-id":"imzy6eti5","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:d(t.cash_amount)})]})]})]}),a.jsxs($,{"data-id":"995ium6hf","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(X,{"data-id":"95azghl4t","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx(aa,{className:"text-sm","data-id":"1drzyvdrx","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Fuel Sales"})}),a.jsxs(M,{className:"space-y-2","data-id":"cxk952tzb","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs("div",{className:"flex justify-between text-sm","data-id":"ixgho7yu2","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"t04ygl85d","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Regular:"}),a.jsxs("span",{className:"font-medium","data-id":"0r9obj3kd","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[h(t.regular_gallons)," gal"]})]}),a.jsxs("div",{className:"flex justify-between text-sm","data-id":"ygxm5n5o0","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"qq1hay5mi","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Super:"}),a.jsxs("span",{className:"font-medium","data-id":"iok2uxfh3","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[h(t.super_gallons)," gal"]})]}),a.jsxs("div",{className:"flex justify-between text-sm","data-id":"9qvy027aq","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"csry1th5t","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Diesel:"}),a.jsxs("span",{className:"font-medium","data-id":"jhguveiaf","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[h(t.diesel_gallons)," gal"]})]}),a.jsx(Ua,{"data-id":"1wwyi9zs3","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),a.jsxs("div",{className:"flex justify-between text-sm font-semibold","data-id":"pnkruv9no","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx("span",{"data-id":"tdz95txu0","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Total:"}),a.jsxs("span",{"data-id":"okq4sa0hd","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[h(t.total_gallons)," gal"]})]})]})]})]}),j.length>0&&a.jsxs($,{"data-id":"jo0zxphib","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(X,{"data-id":"mhekh4qxd","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs(aa,{className:"text-sm","data-id":"m1dglqmbt","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:["Expenses (",j.length," items) - Total: ",d(w)]})}),a.jsx(M,{"data-id":"zqfo7t6vc","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsxs("div",{className:"text-sm text-gray-600","data-id":"452isskjj","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:["Cash: ",d(x)," | Card: ",d(I)," | Cheque: ",d(l)]})})]}),t.notes&&a.jsxs($,{"data-id":"6ozt88tiq","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(X,{"data-id":"pax6f5d1c","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx(aa,{className:"text-sm","data-id":"5ubnz8k8x","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:"Notes"})}),a.jsx(M,{"data-id":"4innb06fb","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap","data-id":"pze0mggyz","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:t.notes})})]})]}),a.jsxs(_t,{className:"flex justify-end space-x-2","data-id":"z0cn5ze7j","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsxs(k,{variant:"outline",onClick:()=>r(!1),"data-id":"mc7j3xzqp","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2","data-id":"1zpfwaice","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),"Close"]}),a.jsxs(k,{onClick:y,className:"bg-blue-600 hover:bg-blue-700","data-id":"h0261p2to","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx",children:[a.jsx(tt,{className:"w-4 h-4 mr-2","data-id":"y6xoebs66","data-path":"src/components/EnhancedSalesReportPrintDialog.tsx"}),"Print Full Report"]})]})]})})},pe=()=>{const[e,r]=i.useState([]),[t,o]=i.useState(!0),[d,h]=i.useState(""),[m,j]=i.useState(1),[w,x]=i.useState(0),[I,l]=i.useState(!1),[D,F]=i.useState(null),p=ba(),{userProfile:y}=Ya(),v=10;i.useEffect(()=>{n()},[m,d]);const n=async()=>{try{o(!0);let _=ra.from("daily_sales_reports_enhanced").select("*",{count:"exact"}).order("report_date",{ascending:!1});d&&(_=_.ilike("station",`%${d}%`));const g=(m-1)*v,T=g+v-1;_=_.range(g,T);const{data:b,count:W,error:u}=await _;if(u)throw u;r(b||[]),x(W||0)}catch(_){console.error("Error loading sales reports:",_),ea({title:"Error",description:"Failed to load sales reports",variant:"destructive"})}finally{o(!1)}},S=async _=>{if(confirm("Are you sure you want to delete this sales report?"))try{const{error:g}=await ra.from("daily_sales_reports_enhanced").delete().eq("id",_);if(g)throw g;ea({title:"Success",description:"Sales report deleted successfully"}),n()}catch(g){console.error("Error deleting sales report:",g),ea({title:"Error",description:"Failed to delete sales report",variant:"destructive"})}},U=_=>{F(_),l(!0)},E=(y==null?void 0:y.role)==="Administrator",J=(y==null?void 0:y.role)==="Employee"||(y==null?void 0:y.role)==="Administrator",na=_=>{switch(_.toUpperCase()){case"MOBIL":return"bg-blue-500";case"AMOCO ROSEDALE":return"bg-green-500";case"AMOCO BROOKLYN":return"bg-purple-500";default:return"bg-gray-500"}},Q=_=>_?new Date(_).toLocaleDateString():"N/A",K=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),ta=Math.ceil(w/v),C=e.reduce((_,g)=>{const T=g.total_sales||0,b=g.cash_amount||0,W=g.credit_card_amount||0,u=g.debit_card_amount||0,q=g.mobile_amount||0,s=g.grocery_sales||0,P=g.total_gallons||0,f=g.lottery_total_cash||0,N=b+W+u+q;return Math.abs(N+s-T)>.01&&console.warn(`Report ID ${g.ID}: Payment methods + grocery (${N+s}) don't match total (${T})`),{total_sales:_.total_sales+T,cash_amount:_.cash_amount+b,credit_card_amount:_.credit_card_amount+W,debit_card_amount:_.debit_card_amount+u,mobile_amount:_.mobile_amount+q,grocery_sales:_.grocery_sales+s,total_gallons:_.total_gallons+P,lottery_total_cash:_.lottery_total_cash+f}},{total_sales:0,cash_amount:0,credit_card_amount:0,debit_card_amount:0,mobile_amount:0,grocery_sales:0,total_gallons:0,lottery_total_cash:0}),B=C.cash_amount+C.credit_card_amount+C.debit_card_amount+C.mobile_amount,R=B+C.grocery_sales;return console.log("Summary calculations:",{total_sales:C.total_sales,payment_total:B,with_grocery:R,payment_matches:Math.abs(R-C.total_sales)<=.01}),a.jsxs("div",{className:"space-y-6","data-id":"s5u1kk052","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4","data-id":"qhmyaexfo","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx($,{"data-id":"scn6up0zx","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(M,{className:"p-6","data-id":"87t2gaaif","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"3xj99lvdk","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(Sa,{className:"w-8 h-8 text-green-600","data-id":"9aa0i27p0","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsxs("div",{"data-id":"twcfmv49t","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"sbtcrnf8m","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Total Sales"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"592ufcqd6","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(C.total_sales)})]})]})})}),a.jsx($,{"data-id":"7nd82zbx4","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(M,{className:"p-6","data-id":"667v9mtfl","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"v8g5si2tf","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(ja,{className:"w-8 h-8 text-blue-600","data-id":"r2vv9bv12","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsxs("div",{"data-id":"ocbavfrn5","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"4j9zbsskh","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Total Gallons"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"146pnef7x","data-path":"src/pages/Sales/SalesReportList.tsx",children:C.total_gallons.toFixed(2)})]})]})})}),a.jsx($,{"data-id":"5zi37se7w","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(M,{className:"p-6","data-id":"hesdv1g92","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"4z7s1ym0k","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(Sa,{className:"w-8 h-8 text-purple-600","data-id":"9ag2hnusd","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsxs("div",{"data-id":"dlablt0wf","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"axoky002i","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Grocery Sales"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"1dqgizwu8","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(C.grocery_sales)})]})]})})}),a.jsx($,{"data-id":"je80z1cro","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(M,{className:"p-6","data-id":"uu7pawc68","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"9796tjll9","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(Aa,{className:"w-8 h-8 text-orange-600","data-id":"ysx5bcmy0","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsxs("div",{"data-id":"r73woml87","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"p1qq0csze","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Reports"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"zi459xupw","data-path":"src/pages/Sales/SalesReportList.tsx",children:w})]})]})})})]}),a.jsxs($,{"data-id":"32cx6pk95","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(X,{"data-id":"04cc4ooyq","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"6wminfuht","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs("div",{"data-id":"pv9fk1tjx","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs(aa,{className:"flex items-center space-x-2","data-id":"unwia1h0r","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(ja,{className:"w-6 h-6","data-id":"xhkhx1r5u","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsx("span",{"data-id":"6d3fhtgo2","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Daily Sales Reports"})]}),a.jsx(ua,{"data-id":"gp5k9lo5r","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Track daily sales performance across all stations"})]}),J&&a.jsxs(k,{onClick:()=>p("/sales/new"),className:"flex items-center space-x-2","data-id":"pht7kseoz","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(va,{className:"w-4 h-4","data-id":"pftbd4tf9","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsx("span",{"data-id":"dnnqy57ls","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Add Report"})]})]})}),a.jsxs(M,{"data-id":"pow67ybyx","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-6","data-id":"yrrfk8331","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"relative flex-1 max-w-sm","data-id":"hkkkhtrow","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(Ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4","data-id":"uv7p5m56x","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsx(oa,{placeholder:"Search by station...",value:d,onChange:_=>h(_.target.value),className:"pl-10","data-id":"wmgbkyjb5","data-path":"src/pages/Sales/SalesReportList.tsx"})]})}),t?a.jsx("div",{className:"space-y-4","data-id":"2xyu4lboq","data-path":"src/pages/Sales/SalesReportList.tsx",children:[...Array(5)].map((_,g)=>a.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse","data-id":"476u6o1nn","data-path":"src/pages/Sales/SalesReportList.tsx"},g))}):e.length===0?a.jsxs("div",{className:"text-center py-8","data-id":"0hxymx7ub","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(ja,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"1pzr8c80m","data-path":"src/pages/Sales/SalesReportList.tsx"}),a.jsx("p",{className:"text-gray-500","data-id":"yf7nl72kh","data-path":"src/pages/Sales/SalesReportList.tsx",children:"No sales reports found"}),J&&a.jsx(k,{variant:"outline",className:"mt-4",onClick:()=>p("/sales/new"),"data-id":"szxh6ni1x","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Add Your First Sales Report"})]}):a.jsx("div",{className:"border rounded-lg overflow-hidden","data-id":"wqs58113r","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs(Ia,{"data-id":"ufobs1uih","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(ka,{"data-id":"y6qi5ku5q","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs(xa,{"data-id":"r5fgbhpxt","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(A,{"data-id":"3mh4ydd8m","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Date"}),a.jsx(A,{"data-id":"2jmevvzkr","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Station"}),a.jsx(A,{"data-id":"8z76o578g","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Shift"}),a.jsx(A,{"data-id":"gx2j5u8ai","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Total Sales"}),a.jsx(A,{"data-id":"l8eb3s5ms","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Gallons"}),a.jsx(A,{"data-id":"eokb4eub4","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Grocery"}),a.jsx(A,{"data-id":"0ynqnn2xm","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Payment Methods"}),a.jsx(A,{"data-id":"w3dlyggdn","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Employee"}),a.jsx(A,{"data-id":"ccdq3tnxc","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Actions"})]})}),a.jsxs(Ca,{"data-id":"4uit7uusw","data-path":"src/pages/Sales/SalesReportList.tsx",children:[e.map(_=>a.jsxs(xa,{"data-id":"1xig3o9au","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(z,{className:"font-medium","data-id":"z6mr8m4c6","data-path":"src/pages/Sales/SalesReportList.tsx",children:Q(_.report_date)}),a.jsx(z,{"data-id":"pa6fvyglv","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(H,{className:`text-white ${na(_.station)}`,"data-id":"9b5s4fdjx","data-path":"src/pages/Sales/SalesReportList.tsx",children:_.station})}),a.jsx(z,{"data-id":"vx923wpqk","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(H,{variant:_.shift==="DAY"?"default":"secondary","data-id":"ybhw0zoup","data-path":"src/pages/Sales/SalesReportList.tsx",children:_.shift||"DAY"})}),a.jsx(z,{className:"font-medium","data-id":"tznbwjn1m","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"o6lmw26e1","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("span",{"data-id":"6g5smdd5u","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(_.total_sales)}),(()=>{const g=_.total_sales||0,T=_.cash_amount||0,b=_.credit_card_amount||0,W=_.debit_card_amount||0,u=_.mobile_amount||0,q=_.grocery_sales||0,s=T+b+W+u+q;return Math.abs(s-g)<=.01?a.jsx("span",{className:"text-green-600 text-xs","data-id":"agqa1bafc","data-path":"src/pages/Sales/SalesReportList.tsx",children:"✓"}):a.jsx("span",{className:"text-red-600 text-xs",title:`Payment total: ${K(s)}`,"data-id":"qyd4z8kx6","data-path":"src/pages/Sales/SalesReportList.tsx",children:"⚠️"})})()]})}),a.jsx(z,{"data-id":"8f6fxcj56","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx("div",{className:"flex items-center space-x-2","data-id":"tdylbfoiz","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx("span",{"data-id":"7kkdzpoti","data-path":"src/pages/Sales/SalesReportList.tsx",children:(_.total_gallons||0).toFixed(2)})})}),a.jsx(z,{"data-id":"qi55yv2zj","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx("div",{className:"flex items-center space-x-2","data-id":"4hf2o1etg","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx("span",{"data-id":"avohx0haa","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(_.grocery_sales)})})}),a.jsx(z,{"data-id":"zjh9zkjy1","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"space-y-1 text-xs","data-id":"1754eno96","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs("div",{"data-id":"vhgk8tk9l","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Cash: ",K(_.cash_amount)]}),a.jsxs("div",{"data-id":"anarega25","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Credit: ",K(_.credit_card_amount)]}),a.jsxs("div",{"data-id":"jggo3ytwq","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Debit: ",K(_.debit_card_amount)]}),a.jsxs("div",{"data-id":"7nr82o2gz","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Mobile: ",K(_.mobile_amount)]})]})}),a.jsx(z,{"data-id":"ynwaqtax1","data-path":"src/pages/Sales/SalesReportList.tsx",children:_.employee_name}),a.jsx(z,{"data-id":"r2vymdorf","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"8yhtt2u1o","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>U(_),title:"Document Print","data-id":"dht8tyoo6","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(tt,{className:"w-4 h-4","data-id":"dzvhe8g2t","data-path":"src/pages/Sales/SalesReportList.tsx"})}),E&&a.jsxs(a.Fragment,{children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>p(`/sales/edit/${_.ID}`),title:"Edit Report","data-id":"l7ti8a6yh","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(Ja,{className:"w-4 h-4","data-id":"vbjym211y","data-path":"src/pages/Sales/SalesReportList.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>S(_.ID),className:"text-red-600 hover:text-red-700",title:"Delete Report","data-id":"6rxu2g1rj","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"69nisn1dy","data-path":"src/pages/Sales/SalesReportList.tsx"})})]})]})})]},_.ID)),e.length>0&&a.jsxs(xa,{className:"bg-gray-50 font-semibold border-t-2","data-id":"hwt1t6mo3","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(z,{className:"font-bold","data-id":"13xu8wdw2","data-path":"src/pages/Sales/SalesReportList.tsx",children:"TOTALS"}),a.jsx(z,{"data-id":"fevjht7ea","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs(H,{variant:"outline",className:"text-xs","data-id":"s47z4mlud","data-path":"src/pages/Sales/SalesReportList.tsx",children:[e.length," reports"]})}),a.jsx(z,{className:"text-gray-500","data-id":"ylqdsmrt8","data-path":"src/pages/Sales/SalesReportList.tsx",children:"-"}),a.jsx(z,{className:"font-bold text-green-600","data-id":"rwacl78b7","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"4phdcmjga","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx("span",{"data-id":"41fk6g02u","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(C.total_sales)}),Math.abs(R-C.total_sales)<=.01?a.jsx("span",{className:"text-green-600 text-xs","data-id":"ozmy4ve9q","data-path":"src/pages/Sales/SalesReportList.tsx",children:"✓"}):a.jsx("span",{className:"text-red-600 text-xs","data-id":"ng2f07tub","data-path":"src/pages/Sales/SalesReportList.tsx",children:"⚠️"})]})}),a.jsx(z,{className:"font-bold text-blue-600","data-id":"3efpkwfz4","data-path":"src/pages/Sales/SalesReportList.tsx",children:C.total_gallons.toFixed(2)}),a.jsx(z,{className:"font-bold text-purple-600","data-id":"gg5wqoq96","data-path":"src/pages/Sales/SalesReportList.tsx",children:K(C.grocery_sales)}),a.jsx(z,{"data-id":"uku5v8r73","data-path":"src/pages/Sales/SalesReportList.tsx",children:a.jsxs("div",{className:"space-y-1 text-xs","data-id":"yk3tm42az","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs("div",{className:"font-medium","data-id":"l9x4ihss6","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Cash: ",K(C.cash_amount)]}),a.jsxs("div",{className:"font-medium","data-id":"lta79l341","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Credit: ",K(C.credit_card_amount)]}),a.jsxs("div",{className:"font-medium","data-id":"lamqbtca6","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Debit: ",K(C.debit_card_amount)]}),a.jsxs("div",{className:"font-medium","data-id":"3w9dn37d2","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Mobile: ",K(C.mobile_amount)]})]})}),a.jsx(z,{className:"text-gray-500","data-id":"6sdod4a9s","data-path":"src/pages/Sales/SalesReportList.tsx",children:"-"}),a.jsx(z,{className:"text-gray-500","data-id":"6s921ucne","data-path":"src/pages/Sales/SalesReportList.tsx",children:"-"})]})]})]})}),ta>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6","data-id":"olodcsrpp","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsxs("p",{className:"text-sm text-gray-700","data-id":"3e59g74zn","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Showing ",(m-1)*v+1," to ",Math.min(m*v,w)," of ",w," reports"]}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"j231ia14b","data-path":"src/pages/Sales/SalesReportList.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(_=>Math.max(_-1,1)),disabled:m===1,"data-id":"sutaj09af","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Previous"}),a.jsxs("span",{className:"text-sm","data-id":"s9uewymzw","data-path":"src/pages/Sales/SalesReportList.tsx",children:["Page ",m," of ",ta]}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(_=>Math.min(_+1,ta)),disabled:m===ta,"data-id":"7nilrpyru","data-path":"src/pages/Sales/SalesReportList.tsx",children:"Next"})]})]})]})]}),a.jsx(le,{open:I,onOpenChange:l,report:D,"data-id":"83o0ak1kp","data-path":"src/pages/Sales/SalesReportList.tsx"})]})},qe=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),he=[{id:"MOBIL",name:"MOBIL",location:"Far Rockaway",description:"Gas station with convenience store",color:"bg-blue-50 border-blue-200 hover:bg-blue-100"},{id:"AMOCO ROSEDALE",name:"AMOCO",location:"Rosedale",description:"Full service gas station",color:"bg-green-50 border-green-200 hover:bg-green-100"},{id:"AMOCO BROOKLYN",name:"AMOCO",location:"Brooklyn",description:"Full service gas station",color:"bg-purple-50 border-purple-200 hover:bg-purple-100"}],xe=({onStationSelect:e})=>a.jsxs($,{"data-id":"irusfxzsh","data-path":"src/components/StationSelector.tsx",children:[a.jsxs(X,{className:"text-center","data-id":"p10v19tal","data-path":"src/components/StationSelector.tsx",children:[a.jsxs(aa,{className:"flex items-center justify-center space-x-2","data-id":"511h91uuu","data-path":"src/components/StationSelector.tsx",children:[a.jsx(Ft,{className:"w-6 h-6","data-id":"06foisws4","data-path":"src/components/StationSelector.tsx"}),a.jsx("span",{"data-id":"0ljlq0fp7","data-path":"src/components/StationSelector.tsx",children:"Select Station"})]}),a.jsx(ua,{"data-id":"hy1pfwcbu","data-path":"src/components/StationSelector.tsx",children:"Choose the station to create a daily sales report for"})]}),a.jsx(M,{"data-id":"c7k8k06b0","data-path":"src/components/StationSelector.tsx",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"cgf5rbft6","data-path":"src/components/StationSelector.tsx",children:he.map(r=>a.jsxs(k,{variant:"outline",className:`h-auto p-6 flex flex-col items-center space-y-3 ${r.color} transition-all duration-200`,onClick:()=>e(r.id),"data-id":"mr4v38vsu","data-path":"src/components/StationSelector.tsx",children:[a.jsx(Ot,{className:"w-8 h-8","data-id":"4h8cuvkxj","data-path":"src/components/StationSelector.tsx"}),a.jsxs("div",{className:"text-center","data-id":"5wz2tqz9n","data-path":"src/components/StationSelector.tsx",children:[a.jsx("div",{className:"font-semibold text-lg","data-id":"uwcv5f80d","data-path":"src/components/StationSelector.tsx",children:r.name}),a.jsx("div",{className:"text-sm text-muted-foreground","data-id":"pazyvv5ll","data-path":"src/components/StationSelector.tsx",children:r.location}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1","data-id":"bav564feg","data-path":"src/components/StationSelector.tsx",children:r.description})]})]},r.id))})})]}),me=({station:e,values:r,onChange:t})=>{const o=e==="MOBIL",d=r.creditCardAmount+r.debitCardAmount+r.mobileAmount+r.cashAmount+r.grocerySales;return a.jsxs("div",{className:"space-y-6","data-id":"diai4nlv0","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs($,{className:"bg-blue-50 border-blue-200","data-id":"xl0j83sgl","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(X,{"data-id":"73mseup0u","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:a.jsxs(aa,{className:"text-blue-800 flex items-center space-x-2","data-id":"83t5xflpy","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(Da,{className:"w-5 h-5","data-id":"nltvye4g1","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"}),a.jsx("span",{"data-id":"l9l0a6256","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Gas & Grocery Sales"})]})}),a.jsxs(M,{className:"space-y-4","data-id":"mul7bdst7","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"2dzkiqrob","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"rl37ip09o","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"creditCard","data-id":"cs9oarj8q","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Credit Card Amount ($) *"}),a.jsx(sa,{id:"creditCard",value:r.creditCardAmount,onChange:h=>t("creditCardAmount",h||0),min:0,step:.01,required:!0,"data-id":"id7oxqbna","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"28w1eo7oe","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"debitCard","data-id":"3mdnam8zt","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Debit Card Amount ($) *"}),a.jsx(sa,{id:"debitCard",value:r.debitCardAmount,onChange:h=>t("debitCardAmount",h||0),min:0,step:.01,required:!0,"data-id":"s5kq5937e","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"7sz0hhfkf","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"mobile","data-id":"5pe3lezuv","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Mobile Payment Amount ($) *"}),a.jsx(sa,{id:"mobile",value:r.mobileAmount,onChange:h=>t("mobileAmount",h||0),min:0,step:.01,required:!0,"data-id":"jah41v0h8","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"nc6hio325","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"cash","data-id":"kmm0g0q66","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Cash Amount ($) *"}),a.jsx(sa,{id:"cash",value:r.cashAmount,onChange:h=>t("cashAmount",h||0),min:0,step:.01,required:!0,"data-id":"u6m1wq00p","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"iokmvbgxb","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"grocery","data-id":"r6a83mdew","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Grocery Sales ($) *"}),a.jsx(sa,{id:"grocery",value:r.grocerySales,onChange:h=>t("grocerySales",h||0),min:0,step:.01,required:!0,"data-id":"0pfy1hl3d","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-blue-200","data-id":"odcpj8dfu","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"kcq6hqjo9","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{className:"text-lg font-semibold","data-id":"z5mkrc2r1","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Total Sales (Auto-calculated)"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-800","data-id":"nm5p9ebr0","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:["$",d.toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1","data-id":"n6kzq86zq","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:["Credit + Debit + Mobile + Cash + Grocery = $",d.toFixed(2)]})]})]})]}),o&&a.jsxs($,{className:"bg-green-50 border-green-200","data-id":"af1hgre6e","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(X,{"data-id":"ngs2alqqt","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:a.jsxs(aa,{className:"text-green-800 flex items-center space-x-2","data-id":"9bt5ed51f","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(La,{className:"w-5 h-5","data-id":"yy2ls5h14","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"}),a.jsx("span",{"data-id":"olkvhqykl","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Grocery Sales Breakdown"})]})}),a.jsxs(M,{className:"space-y-4","data-id":"5nu41vjfk","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"v77tpkd6n","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"aqi4b36xo","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"groceryCash","data-id":"cn75xmcuu","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Cash Sales ($) *"}),a.jsx(sa,{id:"groceryCash",value:r.groceryCashSales||0,onChange:h=>t("groceryCashSales",h||0),min:0,step:.01,required:!0,"data-id":"ft2eat9ur","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"3cdjltecn","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"groceryCreditDebit","data-id":"8i1k82e60","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Credit/Debit Card ($) *"}),a.jsx(sa,{id:"groceryCreditDebit",value:r.groceryCreditDebitSales||0,onChange:h=>t("groceryCreditDebitSales",h||0),min:0,step:.01,required:!0,"data-id":"y1ke7r6fz","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"3xwu01mhr","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{htmlFor:"ebt","data-id":"19centwhu","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"EBT ($) *"}),a.jsx(sa,{id:"ebt",value:r.ebtSales||0,onChange:h=>t("ebtSales",h||0),min:0,step:.01,required:!0,"data-id":"ppzkvble8","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-green-200","data-id":"eqnvuqd8n","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"tk4k9upj6","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:[a.jsx(G,{className:"text-lg font-semibold","data-id":"m0gi6t14t","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:"Total Grocery Sales"}),a.jsxs("div",{className:"text-2xl font-bold text-green-800","data-id":"rhlvg4yh8","data-path":"src/components/SalesReportSections/GasGrocerySalesSection.tsx",children:["$",((r.groceryCashSales||0)+(r.groceryCreditDebitSales||0)+(r.ebtSales||0)).toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Grocery Cash + Credit/Debit + EBT = $",((r.groceryCashSales||0)+(r.groceryCreditDebitSales||0)+(r.ebtSales||0)).toFixed(2)]})]})]})]})]})},ue=({values:e,onChange:r})=>{const t=e.lotteryNetSales+e.scratchOffSales;return a.jsxs($,{className:"bg-yellow-50 border-yellow-200","data-id":"md0s2nm2h","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsx(X,{"data-id":"rrnmqui74","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:a.jsxs(aa,{className:"text-yellow-800 flex items-center space-x-2","data-id":"un5p0qj6t","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsx(Dt,{className:"w-5 h-5","data-id":"evpwd8u2a","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx"}),a.jsx("span",{"data-id":"d4drohryy","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:"NY Lottery Sales"})]})}),a.jsxs(M,{className:"space-y-4","data-id":"rwmoopcet","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"ku24slxcz","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"3fxu82yz5","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsx(G,{htmlFor:"lotteryNet","data-id":"oycl6vj6e","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:"Net Sales ($) *"}),a.jsx(sa,{id:"lotteryNet",value:e.lotteryNetSales,onChange:o=>r("lotteryNetSales",o||0),min:0,step:.01,required:!0,"data-id":"krk3kmmwz","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"bg9viufpm","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsx(G,{htmlFor:"scratchOff","data-id":"wccdzh8el","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:"Scratch Off Sales ($) *"}),a.jsx(sa,{id:"scratchOff",value:e.scratchOffSales,onChange:o=>r("scratchOffSales",o||0),min:0,step:.01,required:!0,"data-id":"sipyopeo2","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-yellow-200","data-id":"bbmw5hzjd","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"2i1945lo8","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:[a.jsx(G,{className:"text-lg font-semibold","data-id":"ob0z8k2ai","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:"Total Sales Cash (Auto-calculated)"}),a.jsxs("div",{className:"text-2xl font-bold text-yellow-800","data-id":"mvab1n4d7","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:["$",t.toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1","data-id":"6zp1re2ek","data-path":"src/components/SalesReportSections/LotterySalesSection.tsx",children:["Net Sales + Scratch Off = $",t.toFixed(2)]})]})]})]})},ge=({values:e,onChange:r})=>{const t=e.regularGallons+e.superGallons+e.dieselGallons;return a.jsxs($,{className:"bg-red-50 border-red-200","data-id":"puq5bgwl9","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(X,{"data-id":"gqed43qpz","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:a.jsxs(aa,{className:"text-red-800 flex items-center space-x-2","data-id":"qat72qfwp","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(Lt,{className:"w-5 h-5","data-id":"oqlmw5tzc","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx"}),a.jsx("span",{"data-id":"tceex993p","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:"Gas Tank Report"})]})}),a.jsxs(M,{className:"space-y-4","data-id":"diljp6f7l","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"2cyfwq3wm","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"od5pc9akg","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(G,{htmlFor:"regular","data-id":"lc987qu7n","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:"Regular (Gallons) *"}),a.jsx(sa,{id:"regular",value:e.regularGallons,onChange:o=>r("regularGallons",o||0),min:0,step:.01,required:!0,"data-id":"u6tif438z","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"k3rap7fq7","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(G,{htmlFor:"super","data-id":"fygnqnwil","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:"Super (Gallons) *"}),a.jsx(sa,{id:"super",value:e.superGallons,onChange:o=>r("superGallons",o||0),min:0,step:.01,required:!0,"data-id":"fjp8n70ad","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"c7tgyaffh","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(G,{htmlFor:"diesel","data-id":"gl01iiaml","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:"Diesel (Gallons) *"}),a.jsx(sa,{id:"diesel",value:e.dieselGallons,onChange:o=>r("dieselGallons",o||0),min:0,step:.01,required:!0,"data-id":"pt98u4vwk","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-red-200","data-id":"lxwfw7ile","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"rkxbkowzr","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[a.jsx(G,{className:"text-lg font-semibold","data-id":"ov1wi7ykc","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:"Total Gallons Sold (Auto-calculated)"}),a.jsxs("div",{className:"text-2xl font-bold text-red-800","data-id":"ek6hf9mxg","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:[t.toFixed(2)," gal"]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1","data-id":"8vl0ixxvy","data-path":"src/components/SalesReportSections/GasTankReportSection.tsx",children:["Regular + Super + Diesel = ",t.toFixed(2)," gallons"]})]})]})]})},ve=({expenses:e,onChange:r})=>{const[t,o]=i.useState([]),[d,h]=i.useState(!0),{toast:m}=ya();i.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:p,error:y}=await window.ezsite.apis.tablePage(11729,{PageNo:1,PageSize:100,OrderByField:"vendor_name",IsAsc:!0,Filters:[{name:"is_active",op:"Equal",value:!0}]});if(y)throw y;o((p==null?void 0:p.List)||[])}catch(p){console.error("Error loading vendors:",p),m({title:"Error",description:"Failed to load vendors",variant:"destructive"})}finally{h(!1)}},w=()=>{const p={id:Date.now().toString(),vendorId:"",vendorName:"",amount:0,paymentType:"Cash",notes:""};r([...e,p])},x=(p,y,v)=>{const n=[...e];if(n[p]={...n[p],[y]:v},y==="vendorId"){const S=t.find(U=>U.id.toString()===v);n[p].vendorName=(S==null?void 0:S.vendor_name)||""}r(n)},I=p=>{const y=e.filter((v,n)=>n!==p);r(y)},l=async(p,y)=>{try{const{data:v,error:n}=await window.ezsite.apis.upload({filename:y.name,file:y});if(n)throw n;x(p,"invoiceFileId",v),m({title:"Success",description:"Invoice uploaded successfully"})}catch(v){console.error("Error uploading invoice:",v),m({title:"Error",description:"Failed to upload invoice",variant:"destructive"})}},D=e.reduce((p,y)=>p+y.amount,0),F=e.filter(p=>p.paymentType==="Cash").reduce((p,y)=>p+y.amount,0);return a.jsxs($,{className:"bg-orange-50 border-orange-200","data-id":"8s4jyz0ye","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(X,{"data-id":"9q6fpwuhf","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:a.jsxs(aa,{className:"text-orange-800 flex items-center justify-between","data-id":"e8612nboz","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"f3tgruxa3","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(jt,{className:"w-5 h-5","data-id":"0b0ei6kw1","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"}),a.jsx("span",{"data-id":"0r7l9c2um","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Expenses"})]}),a.jsxs(k,{type:"button",variant:"outline",size:"sm",onClick:w,className:"bg-white hover:bg-orange-100","data-id":"xd7m103a4","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(va,{className:"w-4 h-4 mr-2","data-id":"ymcugiivr","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"}),"Add Expense"]})]})}),a.jsxs(M,{className:"space-y-4","data-id":"d6qd6ntr5","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[e.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500","data-id":"slelzjhkg","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:'No expenses recorded. Click "Add Expense" to get started.'}):a.jsx("div",{className:"space-y-4","data-id":"5veqkm2cc","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:e.map((p,y)=>a.jsxs("div",{className:"border border-orange-200 rounded-lg p-4 bg-white","data-id":"y7c1ov1eb","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4","data-id":"2uuz45n3a","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsxs(H,{variant:"outline",className:"text-orange-700","data-id":"e7p29gkbq","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:["Expense #",y+1]}),a.jsx(k,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(y),className:"text-red-600 hover:text-red-800 hover:bg-red-50","data-id":"f2lyywjc6","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"pwp137tvd","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"xbuew8w28","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"ypnu70e3j","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"qvu2fvneb","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Vendor *"}),a.jsxs(ia,{value:p.vendorId,onValueChange:v=>x(y,"vendorId",v),"data-id":"qp7r0ya4x","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(la,{"data-id":"ezrj9ri0j","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:a.jsx(pa,{placeholder:"Select vendor","data-id":"pdzv3bgrl","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})}),a.jsx(ha,{"data-id":"2hlzy69gn","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:t.map(v=>a.jsx(Z,{value:v.id.toString(),"data-id":"4kr3q80pb","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:v.vendor_name},v.id))})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"cam123ne1","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"0r5xsph9q","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Amount ($) *"}),a.jsx(sa,{value:p.amount,onChange:v=>x(y,"amount",v||0),min:0,step:.01,required:!0,"data-id":"34gmn3xeb","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"i4n8pesca","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"u6mtm3uqb","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Payment Type *"}),a.jsxs(ia,{value:p.paymentType,onValueChange:v=>x(y,"paymentType",v),"data-id":"4v18561t7","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(la,{"data-id":"8q1gee677","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:a.jsx(pa,{"data-id":"hvczwac5s","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})}),a.jsxs(ha,{"data-id":"9cr91sv8g","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(Z,{value:"Cash","data-id":"pwehtns07","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Cash"}),a.jsx(Z,{value:"Credit Card","data-id":"8sahhhgrq","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Credit Card"}),a.jsx(Z,{value:"Cheque","data-id":"25755f0aj","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Cheque"})]})]})]}),p.paymentType==="Cheque"&&a.jsxs("div",{className:"space-y-2","data-id":"xuklz1qb3","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"nj2inloa4","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Cheque Number *"}),a.jsx(oa,{value:p.chequeNo||"",onChange:v=>x(y,"chequeNo",v.target.value),placeholder:"Enter cheque number",required:!0,"data-id":"s6700220n","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2","data-id":"fdicvsdtd","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"y7ibsrsc8","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Upload Invoice * (Mandatory)"}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"exwggg5w6","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(oa,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:v=>{var S;const n=(S=v.target.files)==null?void 0:S[0];n&&l(y,n)},className:"flex-1","data-id":"w0v0v781x","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"}),p.invoiceFileId&&a.jsx(H,{variant:"default",className:"bg-green-100 text-green-800","data-id":"i3a0r7ud3","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"✓ Uploaded"})]})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2","data-id":"7j1a92ra6","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{"data-id":"bw9gs3gd7","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Notes"}),a.jsx(ct,{value:p.notes,onChange:v=>x(y,"notes",v.target.value),placeholder:"Additional notes about this expense...",rows:2,"data-id":"qfrklgc31","data-path":"src/components/SalesReportSections/ExpensesSection.tsx"})]})]})]},p.id))}),e.length>0&&a.jsx("div",{className:"pt-4 border-t border-orange-200 bg-orange-100 rounded-lg p-4","data-id":"gq5v4elnv","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"2cgi84vxt","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"frpbg1gq5","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{className:"font-semibold","data-id":"75swav90q","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Total Expenses:"}),a.jsxs("div",{className:"text-xl font-bold text-orange-800","data-id":"1z1ki8c4t","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:["$",D.toFixed(2)]})]}),a.jsxs("div",{className:"flex items-center justify-between","data-id":"wb35hkczm","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:[a.jsx(G,{className:"font-semibold","data-id":"qni7lr8i7","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:"Cash Expenses:"}),a.jsxs("div",{className:"text-xl font-bold text-orange-800","data-id":"fvv1xtsnf","data-path":"src/components/SalesReportSections/ExpensesSection.tsx",children:["$",F.toFixed(2)]})]})]})})]})]})},ye=({documents:e,onChange:r})=>{const{toast:t}=ya(),o=[{name:"Day Report",field:"dayReportFileId",fileId:e.dayReportFileId,required:!0},{name:"Veeder Root Report",field:"veederRootFileId",fileId:e.veederRootFileId,required:!0},{name:"Lotto Report",field:"lottoReportFileId",fileId:e.lottoReportFileId,required:!0},{name:"Scratch Off Report",field:"scratchOffReportFileId",fileId:e.scratchOffReportFileId,required:!0}],d=async(w,x)=>{try{const{data:I,error:l}=await window.ezsite.apis.upload({filename:x.name,file:x});if(l)throw l;r(w,I),t({title:"Success",description:`${w.replace("FileId","").replace(/([A-Z])/g," $1").replace(/^./,D=>D.toUpperCase())} uploaded successfully`})}catch(I){console.error("Error uploading document:",I),t({title:"Error",description:"Failed to upload document",variant:"destructive"})}},h=w=>w.fileId?{icon:a.jsx(Ka,{className:"w-4 h-4","data-id":"sks67egpd","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),text:"Submitted",color:"bg-green-100 text-green-800 border-green-200"}:{icon:a.jsx(Ha,{className:"w-4 h-4","data-id":"8s2y4ovqb","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),text:"Not Submitted",color:"bg-red-100 text-red-800 border-red-200"},m=o.filter(w=>w.fileId).length,j=o.length;return a.jsxs($,{className:"bg-purple-50 border-purple-200","data-id":"da6aamhvp","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx(X,{"data-id":"04f953vf2","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:a.jsxs(aa,{className:"text-purple-800 flex items-center justify-between","data-id":"eov3p51ho","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"xkmyszizx","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx(fa,{className:"w-5 h-5","data-id":"gpnj8pian","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),a.jsx("span",{"data-id":"fgfncjakl","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:"Documents Upload"})]}),a.jsxs(H,{variant:"outline",className:m===j?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","data-id":"1oyappxv4","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[m,"/",j," Submitted"]})]})}),a.jsxs(M,{className:"space-y-4","data-id":"b1v0lp0ox","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4","data-id":"ejrimpm70","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"9gf12xieo","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx(Ha,{className:"w-5 h-5 text-yellow-600","data-id":"lcdowj33j","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),a.jsx("span",{className:"text-sm font-medium text-yellow-800","data-id":"qkgnkiln4","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:"Mandatory Submission Required"})]}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1","data-id":"5umjhai04","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:"All documents must be uploaded before submitting the sales report."})]}),a.jsx("div",{className:"space-y-4","data-id":"c3b1nfead","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:o.map(w=>{const x=h(w);return a.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-white","data-id":"s0vf8sp06","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3","data-id":"0ranf1d2m","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-3","data-id":"8d7hog8p6","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx(fa,{className:"w-5 h-5 text-purple-600","data-id":"937z7hqa6","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),a.jsx("span",{className:"font-medium","data-id":"eg054l9zf","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:w.name}),w.required&&a.jsx(H,{variant:"destructive",className:"text-xs","data-id":"jvkob4m8d","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:"Required"})]}),a.jsx(H,{className:x.color,"data-id":"x1vf9s4lc","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:a.jsxs("div",{className:"flex items-center space-x-1","data-id":"xp8646eiz","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[x.icon,a.jsx("span",{"data-id":"yrum97r6j","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:x.text})]})})]}),a.jsx("div",{className:"space-y-2","data-id":"p5q0gbeh9","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:a.jsx(ie,{onFileSelect:I=>d(w.field,I),accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,image/*",label:w.fileId?"Re-upload Document":"Upload Document",maxSize:15,allowCamera:!0,className:"w-full","data-id":"2p4b12zre","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"})}),w.fileId&&a.jsxs("div",{className:"mt-2 text-xs text-green-600 flex items-center space-x-1","data-id":"amy0jlo5g","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx(Ka,{className:"w-3 h-3","data-id":"hckse27xo","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"}),a.jsxs("span",{"data-id":"844ntkc2s","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:["File uploaded successfully (ID: ",w.fileId,")"]})]})]},w.field)})}),a.jsx("div",{className:"pt-4 border-t border-purple-200","data-id":"a072ppect","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:a.jsxs("div",{className:"flex items-center justify-between text-sm","data-id":"nj50gh2gq","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx("span",{className:"text-gray-600","data-id":"8m2fenubm","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:"Submission Progress:"}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"fsrr66fo2","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[a.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2","data-id":"q9p0jj421","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:a.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${m/j*100}%`},"data-id":"od4i770z4","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx"})}),a.jsxs("span",{className:"font-medium text-purple-800","data-id":"oc9hls9kc","data-path":"src/components/SalesReportSections/DocumentsUploadSection.tsx",children:[Math.round(m/j*100),"%"]})]})]})})]})]})},je=({values:e,onChange:r})=>{const t=e.totalCashFromSales-e.totalCashFromExpenses,o=e.cashCollectionOnHand-t,d=o<0,h=o>0;return a.jsxs($,{className:"bg-gray-50 border-gray-200","data-id":"b8zsgc17l","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx(X,{"data-id":"02w8t5auq","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:a.jsxs(aa,{className:"text-gray-800 flex items-center space-x-2","data-id":"hhqvcw364","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx(Sa,{className:"w-5 h-5","data-id":"xd3g6tv50","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx"}),a.jsx("span",{"data-id":"iae9et2kd","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Cash Collection"})]})}),a.jsxs(M,{className:"space-y-4","data-id":"q8y6trpde","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"gohpm80qi","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"iekcjvesy","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx(G,{htmlFor:"cashOnHand","data-id":"wq4t4tfd4","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Cash Collection on Hand ($) *"}),a.jsx(sa,{id:"cashOnHand",value:e.cashCollectionOnHand,onChange:m=>r("cashCollectionOnHand",m||0),min:0,step:.01,required:!0,"data-id":"56xnb4q1a","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx"}),a.jsx("div",{className:"text-xs text-gray-600","data-id":"af8w7pm07","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Physical cash counted at end of shift"})]}),a.jsxs("div",{className:"space-y-2","data-id":"9kcg690fi","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx(G,{"data-id":"jzbejnd0v","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Expected Cash ($)"}),a.jsx("div",{className:"h-10 px-3 py-2 border border-gray-200 rounded-md bg-gray-100 flex items-center","data-id":"kamq1z5k9","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:a.jsxs("span",{className:"text-gray-700 font-medium","data-id":"3hqtt6enp","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["$",t.toFixed(2)]})}),a.jsx("div",{className:"text-xs text-gray-600","data-id":"6dhtfxg7m","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Cash sales - Cash expenses"})]}),a.jsxs("div",{className:"space-y-2","data-id":"azrus5mli","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx(G,{"data-id":"ufx835pcj","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Total (+/-) Short/Over"}),a.jsxs("div",{className:"h-10 px-3 py-2 border rounded-md flex items-center justify-between bg-white","data-id":"iyxho6guo","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsxs("span",{className:`font-bold text-lg ${d?"text-red-600":h?"text-green-600":"text-gray-700"}`,"data-id":"c96gox6fv","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["$",Math.abs(o).toFixed(2)]}),d&&a.jsx(St,{className:"w-5 h-5 text-red-600","data-id":"gdth30qoo","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx"}),h&&a.jsx(ja,{className:"w-5 h-5 text-green-600","data-id":"72chsswmc","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx"})]}),a.jsxs("div",{className:"flex items-center space-x-1","data-id":"dsc0xmsym","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[d&&a.jsx(H,{variant:"destructive",className:"text-xs","data-id":"24vmulrxa","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Short"}),h&&a.jsx(H,{className:"bg-green-100 text-green-800 text-xs","data-id":"9weqlvere","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Over"}),!d&&!h&&a.jsx(H,{variant:"outline",className:"text-xs","data-id":"mo372y04t","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Exact"})]})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 bg-blue-50 rounded-lg p-4","data-id":"ympokidez","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:a.jsxs("div",{className:"text-sm text-blue-800 space-y-2","data-id":"pbb2nttqe","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsxs("div",{className:"flex justify-between","data-id":"b0vzcouye","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx("span",{"data-id":"ylpybcqdv","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Cash Sales:"}),a.jsxs("span",{className:"font-medium","data-id":"qakitw5qn","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["$",e.totalCashFromSales.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between","data-id":"r3j32iex8","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx("span",{"data-id":"uvpqcnil2","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Cash Expenses:"}),a.jsxs("span",{className:"font-medium","data-id":"qs3dz0wzm","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["-$",e.totalCashFromExpenses.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between border-t border-blue-200 pt-2 font-semibold","data-id":"rlbrp814k","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx("span",{"data-id":"byi0b7jzg","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Expected Cash:"}),a.jsxs("span",{"data-id":"6df1hrwj0","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["$",t.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between","data-id":"v9190wohq","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx("span",{"data-id":"vi7rxiek8","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Actual Cash on Hand:"}),a.jsxs("span",{className:"font-medium","data-id":"g1y326ojh","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:["$",e.cashCollectionOnHand.toFixed(2)]})]}),a.jsxs("div",{className:`flex justify-between border-t border-blue-200 pt-2 font-bold ${d?"text-red-600":h?"text-green-600":"text-blue-800"}`,"data-id":"htux0asjd","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[a.jsx("span",{"data-id":"8wwbazsn7","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:"Difference:"}),a.jsxs("span",{"data-id":"09n355m2s","data-path":"src/components/SalesReportSections/CashCollectionSection.tsx",children:[d?"-":"+","$",Math.abs(o).toFixed(2)]})]})]})})]})]})};function Se(){const e=ba(),{id:r}=rt(),{toast:t}=ya(),{user:o}=Ya(),d=!!r,[h,m]=i.useState(""),[j,w]=i.useState([]),[x,I]=i.useState(!1),[l,D]=i.useState({report_date:new Date().toISOString().split("T")[0],station:"",shift:"DAY",employee_name:"",employee_id:"",cashCollectionOnHand:0,creditCardAmount:0,debitCardAmount:0,mobileAmount:0,cashAmount:0,grocerySales:0,ebtSales:0,groceryCashSales:0,groceryCreditDebitSales:0,lotteryNetSales:0,scratchOffSales:0,regularGallons:0,superGallons:0,dieselGallons:0,dayReportFileId:void 0,veederRootFileId:void 0,lottoReportFileId:void 0,scratchOffReportFileId:void 0,notes:""}),[F,p]=i.useState([]);i.useEffect(()=>{h&&(D(C=>({...C,station:h})),v(h))},[h]),i.useEffect(()=>{d&&r&&y()},[d,r]);const y=async()=>{try{const{data:C,error:B}=await ra.from("daily_sales_reports_enhanced").select("*").eq("id",parseInt(r)).limit(1).single();if(B)throw B;if(C){const R=C;if(m(R.station),D({report_date:R.report_date.split("T")[0],station:R.station,shift:R.shift||"DAY",employee_name:R.employee_name,employee_id:R.employee_id||"",cashCollectionOnHand:R.cash_collection_on_hand,creditCardAmount:R.credit_card_amount,debitCardAmount:R.debit_card_amount,mobileAmount:R.mobile_amount,cashAmount:R.cash_amount,grocerySales:R.grocery_sales,ebtSales:R.ebt_sales,groceryCashSales:R.grocery_cash_sales||0,groceryCreditDebitSales:R.grocery_credit_debit_sales||0,lotteryNetSales:R.lottery_net_sales,scratchOffSales:R.scratch_off_sales,regularGallons:R.regular_gallons,superGallons:R.super_gallons,dieselGallons:R.diesel_gallons,dayReportFileId:R.day_report_file_id,veederRootFileId:R.veeder_root_file_id,lottoReportFileId:R.lotto_report_file_id,scratchOffReportFileId:R.scratch_off_report_file_id,notes:R.notes}),R.expenses_data)try{p(JSON.parse(R.expenses_data))}catch(_){console.error("Error parsing expenses data:",_)}}}catch(C){console.error("Error loading report:",C),t({title:"Error",description:"Failed to load existing report",variant:"destructive"})}},v=async C=>{I(!0);try{const{data:B,error:R}=await ra.from("employees").select("*").eq("station",C).eq("is_active",!0).order("first_name",{ascending:!0}).limit(100);if(R)throw R;w(B||[])}catch(B){console.error("Error loading employees:",B),t({title:"Error",description:"Failed to load employees",variant:"destructive"})}finally{I(!1)}},n=l.creditCardAmount+l.debitCardAmount+l.mobileAmount+l.cashAmount+l.grocerySales,S=l.regularGallons+l.superGallons+l.dieselGallons,U=l.lotteryNetSales+l.scratchOffSales,E=l.cashAmount+l.grocerySales+l.lotteryNetSales+l.scratchOffSales,J=F.filter(C=>C.paymentType==="Cash").reduce((C,B)=>C+B.amount,0),na=async C=>{if(C.preventDefault(),["dayReportFileId","veederRootFileId","lottoReportFileId","scratchOffReportFileId"].filter(T=>!l[T]).length>0){t({title:"Missing Documents",description:"Please upload all required documents before submitting.",variant:"destructive"});return}if(F.filter(T=>!T.invoiceFileId).length>0){t({title:"Missing Invoices",description:"Please upload invoices for all expenses.",variant:"destructive"});return}const g={report_date:l.report_date,station:l.station,shift:l.shift,employee_name:l.employee_name,employee_id:l.employee_id,cash_collection_on_hand:l.cashCollectionOnHand,total_short_over:l.cashCollectionOnHand-(E-J),credit_card_amount:l.creditCardAmount,debit_card_amount:l.debitCardAmount,mobile_amount:l.mobileAmount,cash_amount:l.cashAmount,grocery_sales:l.grocerySales,ebt_sales:l.ebtSales,grocery_cash_sales:l.groceryCashSales,grocery_credit_debit_sales:l.groceryCreditDebitSales,lottery_net_sales:l.lotteryNetSales,scratch_off_sales:l.scratchOffSales,lottery_total_cash:U,regular_gallons:l.regularGallons,super_gallons:l.superGallons,diesel_gallons:l.dieselGallons,total_gallons:S,expenses_data:JSON.stringify(F),day_report_file_id:l.dayReportFileId,veeder_root_file_id:l.veederRootFileId,lotto_report_file_id:l.lottoReportFileId,scratch_off_report_file_id:l.scratchOffReportFileId,total_sales:n,notes:l.notes,created_by:(o==null?void 0:o.ID)||0};try{let T;if(d?T=await ra.from("daily_sales_reports_enhanced").update(g).eq("id",parseInt(r)):T=await ra.from("daily_sales_reports_enhanced").insert(g),T.error)throw new Error(T.error.message);t({title:d?"Report Updated":"Report Created",description:`Sales report has been ${d?"updated":"created"} successfully.`}),e("/dashboard")}catch(T){console.error("Error saving report:",T),t({title:"Error",description:T instanceof Error?T.message:"Failed to save report",variant:"destructive"})}},Q=(C,B)=>{D(R=>({...R,[C]:B}))},K=C=>{p(C)},ta=(C,B)=>{D(R=>({...R,[C]:B}))};return h?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4","data-id":"m7nm6l53p","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsxs("div",{className:"max-w-6xl mx-auto","data-id":"5qpv8vavd","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"mb-6","data-id":"y8n71nuuj","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs(k,{variant:"outline",onClick:()=>m(""),className:"mb-4","data-id":"po9lifn3h","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(Va,{className:"w-4 h-4 mr-2","data-id":"c6zowg5yd","data-path":"src/pages/Sales/SalesReportForm.tsx"}),"Change Station"]}),a.jsxs("div",{"data-id":"2v555ol5c","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900","data-id":"9cdzibt1d","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[d?"Edit":"Create"," Daily Sales Report"]}),a.jsxs("p",{className:"text-gray-600 mt-2","data-id":"dtwr1sknr","data-path":"src/pages/Sales/SalesReportForm.tsx",children:["Station: ",a.jsx("span",{className:"font-semibold","data-id":"myzyy8d0s","data-path":"src/pages/Sales/SalesReportForm.tsx",children:h})]})]})]}),a.jsxs("form",{onSubmit:na,className:"space-y-6","data-id":"r0ffml9nv","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs($,{"data-id":"vix9niv3v","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(X,{"data-id":"0movlh0ur","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx(aa,{className:"text-lg","data-id":"ly7wzb4l7","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Basic Information"})}),a.jsx(M,{"data-id":"p3n0b2yq6","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6","data-id":"wvm9onl7p","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"lrga58nld","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(G,{htmlFor:"report_date","data-id":"banmg5c89","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Report Date *"}),a.jsx(oa,{type:"date",id:"report_date",value:l.report_date,onChange:C=>Q("report_date",C.target.value),required:!0,"data-id":"i8sgiah32","data-path":"src/pages/Sales/SalesReportForm.tsx"})]}),a.jsxs("div",{className:"space-y-2","data-id":"jfhtjka0j","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(G,{"data-id":"a1hzoaa7q","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Station"}),a.jsx("div",{className:"h-9 px-3 py-2 border border-gray-200 rounded-md bg-gray-100 flex items-center","data-id":"78x8zy248","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx("span",{className:"text-gray-700 font-medium","data-id":"fgubkl08c","data-path":"src/pages/Sales/SalesReportForm.tsx",children:h})})]}),a.jsxs("div",{className:"space-y-2","data-id":"c4xhoh3w0","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(G,{htmlFor:"shift","data-id":"5wzhywn5c","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Shift *"}),a.jsxs(ia,{value:l.shift,onValueChange:C=>Q("shift",C),"data-id":"3jt27s11c","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(la,{"data-id":"ukpmiw248","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx(pa,{placeholder:"Select shift","data-id":"7x905gyno","data-path":"src/pages/Sales/SalesReportForm.tsx"})}),a.jsxs(ha,{"data-id":"c45thqsal","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(Z,{value:"DAY","data-id":"9kzbwh9fw","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"DAY"}),a.jsx(Z,{value:"NIGHT","data-id":"m4ji8msys","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"NIGHT"})]})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"zypr5hqay","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(G,{htmlFor:"employee","data-id":"ijii3lo44","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Employee Name *"}),a.jsxs(ia,{value:l.employee_id,onValueChange:C=>{const B=j.find(R=>R.employee_id===C);B&&(Q("employee_id",C),Q("employee_name",`${B.first_name} ${B.last_name}`))},disabled:x,"data-id":"bef6k6k5c","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(la,{"data-id":"3zvu2xa3w","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx(pa,{placeholder:x?"Loading employees...":"Select employee","data-id":"zdaor99vr","data-path":"src/pages/Sales/SalesReportForm.tsx"})}),a.jsx(ha,{"data-id":"p4h3ka3tm","data-path":"src/pages/Sales/SalesReportForm.tsx",children:j.map(C=>a.jsxs(Z,{value:C.employee_id,"data-id":"jtjprmlro","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[C.first_name," ",C.last_name," (ID: ",C.employee_id,")"]},C.id))})]})]})]})})]}),a.jsx(je,{values:{cashCollectionOnHand:l.cashCollectionOnHand,totalCashFromSales:E,totalCashFromExpenses:J},onChange:Q,"data-id":"uxwy7v32k","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsx(me,{station:h,values:{creditCardAmount:l.creditCardAmount,debitCardAmount:l.debitCardAmount,mobileAmount:l.mobileAmount,cashAmount:l.cashAmount,grocerySales:l.grocerySales,ebtSales:l.ebtSales,groceryCashSales:l.groceryCashSales,groceryCreditDebitSales:l.groceryCreditDebitSales},onChange:Q,"data-id":"su4yecnsb","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsx(ue,{values:{lotteryNetSales:l.lotteryNetSales,scratchOffSales:l.scratchOffSales},onChange:Q,"data-id":"as7nxntuu","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsx(ge,{values:{regularGallons:l.regularGallons,superGallons:l.superGallons,dieselGallons:l.dieselGallons},onChange:Q,"data-id":"jzuwg6nf6","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsx(ve,{expenses:F,onChange:K,"data-id":"92wy5v4kp","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsx(ye,{documents:{dayReportFileId:l.dayReportFileId,veederRootFileId:l.veederRootFileId,lottoReportFileId:l.lottoReportFileId,scratchOffReportFileId:l.scratchOffReportFileId},onChange:ta,"data-id":"touqzwt68","data-path":"src/pages/Sales/SalesReportForm.tsx"}),a.jsxs($,{"data-id":"lzjrn4c1g","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(X,{"data-id":"nrxxc2jqk","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx(aa,{className:"text-lg","data-id":"6duge341e","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Additional Notes"})}),a.jsx(M,{"data-id":"21hj4k0li","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsxs("div",{className:"space-y-2","data-id":"6c1u5rtss","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(G,{htmlFor:"notes","data-id":"ndiaylsan","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Notes"}),a.jsx(ct,{id:"notes",value:l.notes,onChange:C=>Q("notes",C.target.value),placeholder:"Enter any additional notes about the day's operations...",rows:4,"data-id":"zhr37xift","data-path":"src/pages/Sales/SalesReportForm.tsx"})]})})]}),a.jsxs($,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200","data-id":"c2heb41n4","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(X,{"data-id":"i74zo007n","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsx(aa,{className:"text-blue-800","data-id":"72b0pfnyh","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Report Summary"})}),a.jsx(M,{"data-id":"ssy71e617","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6","data-id":"jkused2y4","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"text-center","data-id":"hnvz53fyb","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-800","data-id":"0yddfgqps","data-path":"src/pages/Sales/SalesReportForm.tsx",children:["$",n.toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"g5ijmhke7","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Total Sales"})]}),a.jsxs("div",{className:"text-center","data-id":"5a1xo5a2p","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx("div",{className:"text-2xl font-bold text-green-800","data-id":"w0dbzs1bn","data-path":"src/pages/Sales/SalesReportForm.tsx",children:S.toFixed(2)}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"z6k7tdfuk","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Total Gallons"})]}),a.jsxs("div",{className:"text-center","data-id":"b7hag1ylu","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-800","data-id":"1255hs8zm","data-path":"src/pages/Sales/SalesReportForm.tsx",children:["$",U.toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600","data-id":"649589f1a","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Lottery Sales"})]})]})})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6","data-id":"xlhvwoxkm","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(k,{type:"button",variant:"outline",onClick:()=>e("/dashboard"),"data-id":"eef649rx4","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Cancel"}),a.jsxs(k,{type:"submit",className:"bg-blue-600 hover:bg-blue-700","data-id":"ijhupfqu1","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx($a,{className:"w-4 h-4 mr-2","data-id":"7olp2zhiu","data-path":"src/pages/Sales/SalesReportForm.tsx"}),d?"Update":"Create"," Report"]})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4","data-id":"1992jutk5","data-path":"src/pages/Sales/SalesReportForm.tsx",children:a.jsxs("div",{className:"max-w-4xl mx-auto","data-id":"82dt9nypj","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs("div",{className:"mb-6","data-id":"jivcyb8vs","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsxs(k,{variant:"outline",onClick:()=>e("/dashboard"),className:"mb-4","data-id":"w52u7b3r0","data-path":"src/pages/Sales/SalesReportForm.tsx",children:[a.jsx(Va,{className:"w-4 h-4 mr-2","data-id":"ojxr86pdk","data-path":"src/pages/Sales/SalesReportForm.tsx"}),"Back to Reports"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900","data-id":"vb18xna1a","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Create Daily Sales Report"}),a.jsx("p",{className:"text-gray-600 mt-2","data-id":"sv6mr3t55","data-path":"src/pages/Sales/SalesReportForm.tsx",children:"Step 1: Select your station to begin"})]}),a.jsx(xe,{onStationSelect:m,"data-id":"tpjxqwze1","data-path":"src/pages/Sales/SalesReportForm.tsx"})]})})}const ze=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),fe=()=>{const[e,r]=i.useState([]),[t,o]=i.useState(!0),[d,h]=i.useState(""),[m,j]=i.useState(1),[w,x]=i.useState(0),[I,l]=i.useState(null),[D,F]=i.useState(!1),[p,y]=i.useState(null),v=ba(),n=10;i.useEffect(()=>{S()},[m,d]);const S=async()=>{try{o(!0);let g=ra.from("orders").select("*",{count:"exact"}).order("order_date",{ascending:!1});d&&(g=g.ilike("order_number",`%${d}%`));const T=(m-1)*n,b=T+n-1;g=g.range(T,b);const{data:W,count:u,error:q}=await g;if(q)throw q;r(W||[]),x(u||0)}catch(g){console.error("Error loading orders:",g),ea({title:"Error",description:"Failed to load orders",variant:"destructive"})}finally{o(!1)}},U=g=>{y(g),l(g.ID),F(!0)},E=g=>{v(`/orders/edit/${g}`)},J=async g=>{if(confirm("Are you sure you want to delete this order?"))try{const{error:T}=await ra.from("orders").delete().eq("id",g);if(T)throw T;ea({title:"Success",description:"Order deleted successfully"}),S(),F(!1)}catch(T){console.error("Error deleting order:",T),ea({title:"Error",description:"Failed to delete order",variant:"destructive"})}},na=()=>{if(!p)return;const g=["Field,Value",`Order Number,${p.order_number}`,`Vendor ID,${p.vendor_id}`,`Order Date,${p.order_date}`,`Expected Delivery,${p.expected_delivery}`,`Station,${p.station}`,`Total Amount,${p.total_amount}`,`Status,${p.status}`,`Notes,${p.notes}`].join(`
`),T=new Blob([g],{type:"text/csv"}),b=window.URL.createObjectURL(T),W=document.createElement("a");W.href=b,W.download=`order_${p.order_number}_details.csv`,W.click(),window.URL.revokeObjectURL(b),ea({title:"Success",description:"Order details exported successfully"})};ae(I,g=>{const T=e.find(b=>b.ID===g);T&&U(T)},E,J,()=>v("/orders/new"));const Q=g=>{switch(g.toLowerCase()){case"pending":return"bg-yellow-500";case"approved":return"bg-blue-500";case"shipped":return"bg-purple-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},K=g=>{switch(g.toUpperCase()){case"MOBIL":return"bg-blue-600";case"AMOCO ROSEDALE":return"bg-green-600";case"AMOCO BROOKLYN":return"bg-purple-600";default:return"bg-gray-600"}},ta=g=>g?new Date(g).toLocaleDateString():"N/A",C=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),B=Math.ceil(w/n),R=e.reduce((g,T)=>({total_amount:g.total_amount+(T.total_amount||0),pending_orders:g.pending_orders+(T.status.toLowerCase()==="pending"?1:0),delivered_orders:g.delivered_orders+(T.status.toLowerCase()==="delivered"?1:0)}),{total_amount:0,pending_orders:0,delivered_orders:0}),_=g=>[{key:"order_number",label:"Order Number",value:g.order_number,type:"text",icon:fa},{key:"vendor_id",label:"Vendor ID",value:g.vendor_id,type:"number"},{key:"order_date",label:"Order Date",value:g.order_date,type:"date"},{key:"expected_delivery",label:"Expected Delivery",value:g.expected_delivery,type:"date"},{key:"station",label:"Station",value:g.station,type:"badge",badgeColor:K(g.station)},{key:"total_amount",label:"Total Amount",value:g.total_amount,type:"currency"},{key:"status",label:"Status",value:g.status,type:"badge",badgeColor:Q(g.status)},{key:"notes",label:"Notes",value:g.notes,type:"text"}];return a.jsxs("div",{className:"space-y-6","data-id":"67r1zc9tj","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-id":"3cscsoext","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx($,{"data-id":"a3gj6bo4f","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(M,{className:"p-6","data-id":"sm65cnbop","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"gi9fg0bs6","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(Sa,{className:"w-8 h-8 text-green-600","data-id":"f6krppjbe","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsxs("div",{"data-id":"huhjtfmzn","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"o8yidfrvg","data-path":"src/pages/Orders/OrderList.tsx",children:"Total Order Value"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"nlbts1wbv","data-path":"src/pages/Orders/OrderList.tsx",children:C(R.total_amount)})]})]})})}),a.jsx($,{"data-id":"t6uwtmx4o","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(M,{className:"p-6","data-id":"331978kg6","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"3js950h40","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(Aa,{className:"w-8 h-8 text-yellow-600","data-id":"45sc5thi7","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsxs("div",{"data-id":"l0tr6sn1f","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"vf0daqftg","data-path":"src/pages/Orders/OrderList.tsx",children:"Pending Orders"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"majya5yey","data-path":"src/pages/Orders/OrderList.tsx",children:R.pending_orders})]})]})})}),a.jsx($,{"data-id":"o4yokkov9","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(M,{className:"p-6","data-id":"dnpqti81m","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"73ks6g49l","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(La,{className:"w-8 h-8 text-green-600","data-id":"kminb79gr","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsxs("div",{"data-id":"haywzfyua","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"m8tyoxu35","data-path":"src/pages/Orders/OrderList.tsx",children:"Delivered Orders"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"bl0233x3y","data-path":"src/pages/Orders/OrderList.tsx",children:R.delivered_orders})]})]})})})]}),a.jsxs($,{"data-id":"9w4zoozwx","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(X,{"data-id":"u5nqhobgv","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"bajj06erg","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsxs("div",{"data-id":"g4e1kans2","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsxs(aa,{className:"flex items-center space-x-2","data-id":"tn0i9t31w","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(La,{className:"w-6 h-6","data-id":"mb0q8vqyi","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsx("span",{"data-id":"xva3lr5us","data-path":"src/pages/Orders/OrderList.tsx",children:"Orders"})]}),a.jsx(ua,{"data-id":"33n0ohwcq","data-path":"src/pages/Orders/OrderList.tsx",children:"Manage your purchase orders and deliveries"})]}),a.jsxs(k,{onClick:()=>v("/orders/new"),className:"flex items-center space-x-2","data-id":"oois18u7s","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(va,{className:"w-4 h-4","data-id":"q4pqo4ih0","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsx("span",{"data-id":"uh1jjg8x1","data-path":"src/pages/Orders/OrderList.tsx",children:"Create Order"})]})]})}),a.jsxs(M,{"data-id":"kkqzkbzsp","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-6","data-id":"6ewdsk20j","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"relative flex-1 max-w-sm","data-id":"eetiqs9vq","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(Ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4","data-id":"j6k05o7xf","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsx(oa,{placeholder:"Search orders...",value:d,onChange:g=>h(g.target.value),className:"pl-10","data-id":"ebbq6bhr4","data-path":"src/pages/Orders/OrderList.tsx"})]})}),a.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg","data-id":"osw6fwg6j","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("p",{className:"text-sm text-blue-700","data-id":"2djz0fpuh","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx("strong",{"data-id":"0sdptbf8c","data-path":"src/pages/Orders/OrderList.tsx",children:"Keyboard shortcuts:"})," Select a row, then press ",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs","data-id":"00q3h59z2","data-path":"src/pages/Orders/OrderList.tsx",children:"V"})," to view,",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"ilv8gs0ol","data-path":"src/pages/Orders/OrderList.tsx",children:"E"})," to edit,",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"w5rqf67ic","data-path":"src/pages/Orders/OrderList.tsx",children:"D"})," to delete, or",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"48qskiazf","data-path":"src/pages/Orders/OrderList.tsx",children:"Ctrl+N"})," to create new"]})}),t?a.jsx("div",{className:"space-y-4","data-id":"nf8jutl77","data-path":"src/pages/Orders/OrderList.tsx",children:[...Array(5)].map((g,T)=>a.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse","data-id":"rs581dmoz","data-path":"src/pages/Orders/OrderList.tsx"},T))}):e.length===0?a.jsxs("div",{className:"text-center py-8","data-id":"b6dvt9xpz","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(La,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"h3mwa6k2m","data-path":"src/pages/Orders/OrderList.tsx"}),a.jsx("p",{className:"text-gray-500","data-id":"4q6cyxoe3","data-path":"src/pages/Orders/OrderList.tsx",children:"No orders found"}),a.jsx(k,{variant:"outline",className:"mt-4",onClick:()=>v("/orders/new"),"data-id":"3khn9oet9","data-path":"src/pages/Orders/OrderList.tsx",children:"Create Your First Order"})]}):a.jsx("div",{className:"border rounded-lg overflow-hidden","data-id":"nsa2rgbtv","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs(Ia,{"data-id":"hlif6kk59","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(ka,{"data-id":"fapyqz2ju","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs(xa,{"data-id":"9hzudae8s","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(A,{"data-id":"gmp0756bx","data-path":"src/pages/Orders/OrderList.tsx",children:"Order Number"}),a.jsx(A,{"data-id":"g5ahy226w","data-path":"src/pages/Orders/OrderList.tsx",children:"Order Date"}),a.jsx(A,{"data-id":"bq92vxafb","data-path":"src/pages/Orders/OrderList.tsx",children:"Station"}),a.jsx(A,{"data-id":"ifzmarrym","data-path":"src/pages/Orders/OrderList.tsx",children:"Total Amount"}),a.jsx(A,{"data-id":"254niljm7","data-path":"src/pages/Orders/OrderList.tsx",children:"Expected Delivery"}),a.jsx(A,{"data-id":"h00n713wf","data-path":"src/pages/Orders/OrderList.tsx",children:"Status"}),a.jsx(A,{"data-id":"nszm8emh9","data-path":"src/pages/Orders/OrderList.tsx",children:"Actions"})]})}),a.jsx(Ca,{"data-id":"ar4epdfvy","data-path":"src/pages/Orders/OrderList.tsx",children:e.map((g,T)=>a.jsxs(et.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:T*.05},className:`border-b hover:bg-gray-50 transition-colors cursor-pointer ${I===g.ID?"bg-blue-50 border-blue-200":""}`,onClick:()=>l(g.ID),"data-id":"jp7axzmmv","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsxs(z,{className:"font-medium","data-id":"j08vmzeid","data-path":"src/pages/Orders/OrderList.tsx",children:[g.order_number,g.notes&&a.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs mt-1","data-id":"ngucv7x8q","data-path":"src/pages/Orders/OrderList.tsx",children:g.notes})]}),a.jsx(z,{"data-id":"t0r1j2f9g","data-path":"src/pages/Orders/OrderList.tsx",children:ta(g.order_date)}),a.jsx(z,{"data-id":"t55237rv0","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(H,{className:`text-white ${K(g.station)}`,"data-id":"ovz9m8gg1","data-path":"src/pages/Orders/OrderList.tsx",children:g.station})}),a.jsx(z,{className:"font-medium","data-id":"dieptlvpb","data-path":"src/pages/Orders/OrderList.tsx",children:C(g.total_amount)}),a.jsx(z,{"data-id":"qukhjph7u","data-path":"src/pages/Orders/OrderList.tsx",children:ta(g.expected_delivery)}),a.jsx(z,{"data-id":"wmkor2out","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(H,{className:`text-white ${Q(g.status)}`,"data-id":"9bzkxu4ua","data-path":"src/pages/Orders/OrderList.tsx",children:g.status})}),a.jsx(z,{"data-id":"x1u09itp4","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"8at5ajkyu","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),U(g)},className:"text-blue-600 hover:text-blue-700","data-id":"ogkduhsv6","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(Qa,{className:"w-4 h-4","data-id":"8yqu3ji25","data-path":"src/pages/Orders/OrderList.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),E(g.ID)},"data-id":"q9k1s24bq","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(Ja,{className:"w-4 h-4","data-id":"adqp2h0je","data-path":"src/pages/Orders/OrderList.tsx"})}),a.jsx(k,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),J(g.ID)},className:"text-red-600 hover:text-red-700","data-id":"laps7j8v9","data-path":"src/pages/Orders/OrderList.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"ml8i88t9n","data-path":"src/pages/Orders/OrderList.tsx"})})]})})]},g.ID))})]})}),B>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6","data-id":"343lopjlo","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsxs("p",{className:"text-sm text-gray-700","data-id":"dil50xp8f","data-path":"src/pages/Orders/OrderList.tsx",children:["Showing ",(m-1)*n+1," to ",Math.min(m*n,w)," of ",w," orders"]}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"mog6zv672","data-path":"src/pages/Orders/OrderList.tsx",children:[a.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(g=>Math.max(g-1,1)),disabled:m===1,"data-id":"qicxpnd15","data-path":"src/pages/Orders/OrderList.tsx",children:"Previous"}),a.jsxs("span",{className:"text-sm","data-id":"g5rzac5h2","data-path":"src/pages/Orders/OrderList.tsx",children:["Page ",m," of ",B]}),a.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(g=>Math.min(g+1,B)),disabled:m===B,"data-id":"hw2f6u6nc","data-path":"src/pages/Orders/OrderList.tsx",children:"Next"})]})]})]})]}),p&&a.jsx(Zt,{isOpen:D,onClose:()=>{F(!1),y(null),l(null)},title:`Order #${p.order_number}`,subtitle:`${p.station} • ${C(p.total_amount)} • ${p.status}`,data:p,fields:_(p),onEdit:()=>{F(!1),E(p.ID)},onDelete:()=>J(p.ID),onExport:na,canEdit:!0,canDelete:!0,canExport:!0,"data-id":"exw24pupy","data-path":"src/pages/Orders/OrderList.tsx"})]})},Ee=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),be=({onProductSelect:e,placeholder:r="Search products by name, code, category, or supplier...",showAllProducts:t=!0})=>{const[o,d]=i.useState(""),[h,m]=i.useState([]),[j,w]=i.useState([]),[x,I]=i.useState(!1),[l,D]=i.useState(!1),F=i.useRef(null);i.useEffect(()=>{t&&p()},[t]),i.useEffect(()=>{if(o.trim()==="")w(t?h:[]),D(t&&h.length>0);else{const S=h.filter(U=>U.product_name.toLowerCase().includes(o.toLowerCase())||U.product_code.toLowerCase().includes(o.toLowerCase())||U.category.toLowerCase().includes(o.toLowerCase())||U.supplier.toLowerCase().includes(o.toLowerCase())||U.description.toLowerCase().includes(o.toLowerCase())||U.bar_code_case.toLowerCase().includes(o.toLowerCase())||U.bar_code_unit.toLowerCase().includes(o.toLowerCase()));w(S),D(S.length>0)}},[o,h,t]),i.useEffect(()=>{const S=U=>{F.current&&!F.current.contains(U.target)&&D(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const p=async()=>{try{I(!0),console.log("Loading all products from products table...");const{data:S,error:U}=await window.ezsite.apis.tablePage("11726",{PageNo:1,PageSize:1e3,OrderByField:"product_name",IsAsc:!0,Filters:[]});if(U)throw U;const E=(S==null?void 0:S.List)||[];console.log(`Loaded ${E.length} products:`,E),m(E),w(E),E.length===0&&ea({title:"No Products Found",description:"No products are available in the database.",variant:"default"})}catch(S){console.error("Error loading products:",S),ea({title:"Error Loading Products",description:"Failed to load products from database",variant:"destructive"})}finally{I(!1)}},y=()=>{p()},v=S=>{console.log("Product selected:",S),e(S),d(""),D(!1)},n=()=>{d(""),w(t?h:[]),D(t&&h.length>0)};return a.jsx($,{className:"border-2 border-dashed border-blue-300 hover:border-blue-500 transition-colors","data-id":"g5aapaj5l","data-path":"src/components/ProductSearchBar.tsx",children:a.jsx(M,{className:"p-6","data-id":"0dg4ig1c8","data-path":"src/components/ProductSearchBar.tsx",children:a.jsxs("div",{className:"text-center space-y-4","data-id":"pxnppmhjt","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-3","data-id":"k0udpw13l","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx(Ma,{className:"w-12 h-12 text-blue-600","data-id":"hua23f09o","data-path":"src/components/ProductSearchBar.tsx"}),a.jsxs(k,{onClick:y,variant:"outline",size:"sm",disabled:x,className:"flex items-center space-x-2","data-id":"4ozqzhpjo","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx(ft,{className:`w-4 h-4 ${x?"animate-spin":""}`,"data-id":"rp0mw1wm5","data-path":"src/components/ProductSearchBar.tsx"}),a.jsx("span",{"data-id":"a8rts4kzn","data-path":"src/components/ProductSearchBar.tsx",children:"Refresh"})]})]}),a.jsx("h3",{className:"text-lg font-semibold","data-id":"od3gwi05q","data-path":"src/components/ProductSearchBar.tsx",children:"Product Search & Browse"}),a.jsx("p",{className:"text-muted-foreground","data-id":"qenlo9hg0","data-path":"src/components/ProductSearchBar.tsx",children:"Search products by name, code, category, supplier, or browse all available products"}),h.length>0&&a.jsxs("p",{className:"text-sm text-green-600 font-medium","data-id":"glpqz0sf8","data-path":"src/components/ProductSearchBar.tsx",children:[j.length," of ",h.length," products shown"]}),a.jsxs("div",{ref:F,className:"relative w-full max-w-md mx-auto","data-id":"bj0557zwz","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("div",{className:"relative","data-id":"eau87h1pa","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx(oa,{type:"text",value:o,onChange:S=>d(S.target.value),placeholder:r,className:"pr-20",onFocus:()=>D(j.length>0),"data-id":"mrbvr6cc1","data-path":"src/components/ProductSearchBar.tsx"}),a.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1","data-id":"grm69ggch","data-path":"src/components/ProductSearchBar.tsx",children:[x&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600","data-id":"rrxeu6o98","data-path":"src/components/ProductSearchBar.tsx"}),o&&a.jsx(k,{type:"button",variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0","data-id":"u9ce05z8k","data-path":"src/components/ProductSearchBar.tsx",children:a.jsx(Fa,{className:"h-3 w-3","data-id":"7dcehphi5","data-path":"src/components/ProductSearchBar.tsx"})})]})]}),l&&j.length>0&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-96 overflow-y-auto","data-id":"g5qz9ufqj","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx("div",{className:"sticky top-0 bg-gray-50 px-3 py-2 border-b border-gray-200","data-id":"e9gus1pyx","data-path":"src/components/ProductSearchBar.tsx",children:a.jsxs("p",{className:"text-xs text-gray-600 font-medium","data-id":"nbmifyuja","data-path":"src/components/ProductSearchBar.tsx",children:[j.length," product",j.length!==1?"s":""," found"]})}),j.map(S=>{var U,E;return a.jsx("div",{className:"p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors",onClick:()=>v(S),"data-id":"zfwho4sf6","data-path":"src/components/ProductSearchBar.tsx",children:a.jsx("div",{className:"flex items-start justify-between","data-id":"4w0fdliip","data-path":"src/components/ProductSearchBar.tsx",children:a.jsxs("div",{className:"flex-1 min-w-0","data-id":"4x6e6knhi","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"i8o4rwa9j","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx(ga,{className:"w-4 h-4 text-blue-600 flex-shrink-0","data-id":"zdnae8a33","data-path":"src/components/ProductSearchBar.tsx"}),a.jsx("h4",{className:"font-medium text-sm truncate","data-id":"0duvr0t1s","data-path":"src/components/ProductSearchBar.tsx",children:S.product_name})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1","data-id":"z4b9a5stw","data-path":"src/components/ProductSearchBar.tsx",children:["Code: ",S.product_code," | Category: ",S.category," | Supplier: ",S.supplier]}),a.jsxs("div",{className:"flex items-center justify-between mt-2","data-id":"m9k4jgvl3","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"rz7slpafx","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("span",{className:"text-xs text-green-600 font-medium","data-id":"x7opkvdm1","data-path":"src/components/ProductSearchBar.tsx",children:["Cost: $",((U=S.price)==null?void 0:U.toFixed(2))||"0.00"]}),a.jsxs("span",{className:"text-xs text-blue-600 font-medium","data-id":"7tkk80rgz","data-path":"src/components/ProductSearchBar.tsx",children:["Retail: $",((E=S.retail_price)==null?void 0:E.toFixed(2))||"0.00"]})]}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"sib1smq5h","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("span",{className:`text-xs font-medium ${S.quantity_in_stock<=S.minimum_stock?"text-red-600":S.quantity_in_stock<=S.minimum_stock*2?"text-yellow-600":"text-green-600"}`,"data-id":"r2jxkwx9g","data-path":"src/components/ProductSearchBar.tsx",children:["Stock: ",S.quantity_in_stock]}),S.quantity_in_stock<=S.minimum_stock&&a.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-1 py-0.5 rounded","data-id":"i1sz59pam","data-path":"src/components/ProductSearchBar.tsx",children:"Low Stock"})]})]}),S.description&&a.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1","data-id":"oftd8j0pe","data-path":"src/components/ProductSearchBar.tsx",children:S.description})]})})},S.ID)})]}),o&&j.length===0&&!x&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-4 text-center","data-id":"63v26nytu","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"b7lj3vtpj","data-path":"src/components/ProductSearchBar.tsx",children:['No products found matching "',o,'"']}),a.jsx("p",{className:"text-xs text-gray-400 mt-1","data-id":"9zswd0xzv","data-path":"src/components/ProductSearchBar.tsx",children:"Try searching by product name, code, category, or supplier"})]}),x&&a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-4 text-center","data-id":"4tnsh86d6","data-path":"src/components/ProductSearchBar.tsx",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2","data-id":"1p1s4bk36","data-path":"src/components/ProductSearchBar.tsx",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600","data-id":"rm58ycfuk","data-path":"src/components/ProductSearchBar.tsx"}),a.jsx("p",{className:"text-sm text-muted-foreground","data-id":"ewdc5jwy3","data-path":"src/components/ProductSearchBar.tsx",children:"Loading products..."})]})})]})]})})})},we=({isOpen:e,onClose:r,product:t,onConfirm:o})=>{const[d,h]=i.useState(1),[m,j]=i.useState("pieces"),w=[{value:"pieces",label:"Pieces (Individual Units)"},{value:"cases",label:"Cases (Bulk Units)"},{value:"boxes",label:"Boxes"},{value:"packs",label:"Packs"},{value:"bottles",label:"Bottles"},{value:"cans",label:"Cans"},{value:"bags",label:"Bags"},{value:"cartons",label:"Cartons"},{value:"dozen",label:"Dozen"},{value:"gallons",label:"Gallons"},{value:"liters",label:"Liters"},{value:"pounds",label:"Pounds"},{value:"kilograms",label:"Kilograms"}],x=()=>{if(t){if(d<=0){ea({title:"Invalid Quantity",description:"Please enter a valid quantity greater than 0",variant:"destructive"});return}if(d>t.quantity_in_stock){ea({title:"Insufficient Stock",description:`Only ${t.quantity_in_stock} units available in stock`,variant:"destructive"});return}o(t,d,m),I()}},I=()=>{h(1),j("pieces"),r()},l=()=>{if(!t)return 0;let F=t.price;return m==="cases"&&t.unit_per_case>0&&(F=t.price*t.unit_per_case),F*d},D=()=>t&&m==="cases"&&t.unit_per_case>0?`(${t.unit_per_case} pieces per case)`:"";return t?a.jsx(wa,{open:e,onOpenChange:I,"data-id":"wozsi0j6k","data-path":"src/components/ProductSelectionDialog.tsx",children:a.jsxs(Na,{className:"sm:max-w-md","data-id":"vaniqh385","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs(_a,{"data-id":"nrv0rfzqt","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs(Pa,{className:"flex items-center space-x-2","data-id":"yqrhz6v2o","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(ga,{className:"w-5 h-5","data-id":"rlti0j0s2","data-path":"src/components/ProductSelectionDialog.tsx"}),a.jsx("span",{"data-id":"y5rxy7cqv","data-path":"src/components/ProductSelectionDialog.tsx",children:"Add Product to Order"})]}),a.jsx(Wa,{"data-id":"rfel3yq3d","data-path":"src/components/ProductSelectionDialog.tsx",children:"Configure the quantity and unit type for this product"})]}),a.jsxs("div",{className:"space-y-6","data-id":"exn9d468n","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg","data-id":"7wi5kxet7","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx("h3",{className:"font-semibold text-lg","data-id":"m6zuodu9s","data-path":"src/components/ProductSelectionDialog.tsx",children:t.product_name}),a.jsxs("div",{className:"mt-2 space-y-1","data-id":"mbvcabk1h","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"81g450ji4","data-path":"src/components/ProductSelectionDialog.tsx",children:["Product Code: ",a.jsx("span",{className:"font-medium","data-id":"jvx5wynrg","data-path":"src/components/ProductSelectionDialog.tsx",children:t.product_code})]}),a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"estw84xqc","data-path":"src/components/ProductSelectionDialog.tsx",children:["Category: ",a.jsx("span",{className:"font-medium","data-id":"tprh59y9y","data-path":"src/components/ProductSelectionDialog.tsx",children:t.category})]}),a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"um7vtm8e4","data-path":"src/components/ProductSelectionDialog.tsx",children:["Supplier: ",a.jsx("span",{className:"font-medium","data-id":"syzs4lhwe","data-path":"src/components/ProductSelectionDialog.tsx",children:t.supplier})]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2","data-id":"3cot7quul","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs(H,{variant:"secondary","data-id":"iag1jgb4x","data-path":"src/components/ProductSelectionDialog.tsx",children:["$",t.price.toFixed(2)," per unit"]}),a.jsxs(H,{variant:"outline","data-id":"xxlnbsypl","data-path":"src/components/ProductSelectionDialog.tsx",children:[t.quantity_in_stock," in stock"]})]})]})]}),a.jsxs("div",{className:"space-y-2","data-id":"qfieeo8yo","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(G,{htmlFor:"quantity","data-id":"ortv0ap21","data-path":"src/components/ProductSelectionDialog.tsx",children:"Quantity *"}),a.jsx(sa,{id:"quantity",value:d,onChange:h,min:1,max:t.quantity_in_stock,className:"w-full",placeholder:"Enter quantity","data-id":"pvjask3t9","data-path":"src/components/ProductSelectionDialog.tsx"}),a.jsxs("p",{className:"text-xs text-muted-foreground","data-id":"ycu6x3lv7","data-path":"src/components/ProductSelectionDialog.tsx",children:["Maximum available: ",t.quantity_in_stock," units"]})]}),a.jsxs("div",{className:"space-y-2","data-id":"t79brasrv","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(G,{htmlFor:"unitType","data-id":"cwvfld0wb","data-path":"src/components/ProductSelectionDialog.tsx",children:"Unit Type *"}),a.jsxs(ia,{value:m,onValueChange:j,"data-id":"qde6e5udp","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(la,{"data-id":"otav86nlm","data-path":"src/components/ProductSelectionDialog.tsx",children:a.jsx(pa,{placeholder:"Select unit type","data-id":"k7v4fyv42","data-path":"src/components/ProductSelectionDialog.tsx"})}),a.jsx(ha,{"data-id":"4eimc21qr","data-path":"src/components/ProductSelectionDialog.tsx",children:w.map(F=>a.jsx(Z,{value:F.value,"data-id":"g5aa23plr","data-path":"src/components/ProductSelectionDialog.tsx",children:F.label},F.value))})]}),D()&&a.jsx("p",{className:"text-xs text-muted-foreground","data-id":"fu8x64nja","data-path":"src/components/ProductSelectionDialog.tsx",children:D()})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg","data-id":"9ol2e44gq","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"dao767au7","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx("span",{className:"text-sm font-medium","data-id":"22ngjbnjf","data-path":"src/components/ProductSelectionDialog.tsx",children:"Total Price:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600","data-id":"s4qfglp8p","data-path":"src/components/ProductSelectionDialog.tsx",children:["$",l().toFixed(2)]})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1","data-id":"vjmali5pq","data-path":"src/components/ProductSelectionDialog.tsx",children:[d," ",m," × $",(l()/d).toFixed(2)," each"]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3","data-id":"cnvh952sf","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsxs(k,{variant:"outline",onClick:I,"data-id":"af63dsran","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2","data-id":"lwahkrou1","data-path":"src/components/ProductSelectionDialog.tsx"}),"Cancel"]}),a.jsxs(k,{onClick:x,"data-id":"s2ord991c","data-path":"src/components/ProductSelectionDialog.tsx",children:[a.jsx(va,{className:"w-4 h-4 mr-2","data-id":"hgy66ers7","data-path":"src/components/ProductSelectionDialog.tsx"}),"Add to Order"]})]})]})]})}):null},Ne=()=>{const[e,r]=i.useState(""),[t,o]=i.useState({order_number:"",station:"MOBIL",notes:"",items:[],total_amount:0}),[d,h]=i.useState(!1),[m,j]=i.useState(!1),[w,x]=i.useState([]),[I,l]=i.useState({}),[D,F]=i.useState(null),[p,y]=i.useState(!1),v=ba(),{id:n}=rt(),S=["MOBIL","AMOCO ROSEDALE","AMOCO BROOKLYN"],[U,E]=i.useState(null),[J,na]=i.useState(null),Q=async()=>{try{const u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});J&&(J.srcObject=u,E(u))}catch(u){console.error("Error accessing camera:",u),ea({variant:"destructive",title:"Camera Error",description:"Unable to access camera. Please check permissions."})}},K=()=>{U&&(U.getTracks().forEach(u=>u.stop()),E(null))},ta=async u=>{try{h(!0);const{data:q,error:s}=await ra.from("products").select("*").or(`bar_code_case.eq.${u},bar_code_unit.eq.${u}`).limit(10);if(s)throw s;const P=q||[];x(P),P.length===0?ea({title:"No Products Found",description:`No products found with barcode: ${u}`,variant:"destructive"}):ea({title:"Products Found",description:`Found ${P.length} product(s) matching barcode: ${u}`})}catch(q){console.error("Error searching products:",q),ea({title:"Search Error",description:"Failed to search for products",variant:"destructive"})}finally{h(!1)}},C=()=>{ta("123456789012"),j(!1),K()},B=(u,q=1,s="pieces")=>{let P=u.price;s==="cases"&&u.unit_per_case>0&&(P=u.price*u.unit_per_case);const f=P*q,N={product:u,quantity:q,unitType:s,subtotal:f},c=t.items.findIndex(L=>L.product.ID===u.ID&&L.unitType===s);let O;if(c>=0){O=[...t.items];const L=O[c].quantity+q;let V=O[c].product.price;s==="cases"&&u.unit_per_case>0&&(V=u.price*u.unit_per_case),O[c]={...O[c],quantity:L,subtotal:V*L}}else O=[...t.items,N];const Y=O.reduce((L,V)=>L+V.subtotal,0);o(L=>({...L,items:O,total_amount:Y})),x([]),l({}),ea({title:"Product Added",description:`${q} ${s} of ${u.product_name} added to order`})},R=(u,q)=>{if(q<=0){_(u);return}const s=[...t.items],P=s[u];let f=P.product.price;P.unitType==="cases"&&P.product.unit_per_case>0&&(f=P.product.price*P.product.unit_per_case),s[u]={...s[u],quantity:q,subtotal:f*q};const N=s.reduce((c,O)=>c+O.subtotal,0);o(c=>({...c,items:s,total_amount:N}))},_=u=>{const q=t.items.filter((P,f)=>f!==u),s=q.reduce((P,f)=>P+f.subtotal,0);o(P=>({...P,items:q,total_amount:s}))},g=u=>{F(u),y(!0)},T=(u,q,s)=>{B(u,q,s),y(!1),F(null)},b=()=>{const u=new Date,q=u.getTime().toString().slice(-6);return`ORD-${u.getFullYear()}${(u.getMonth()+1).toString().padStart(2,"0")}-${q}`},W=async u=>{if(u.preventDefault(),t.items.length===0){ea({title:"Error",description:"Please add at least one product to the order",variant:"destructive"});return}if(!t.station){ea({title:"Error",description:"Please select a delivery station",variant:"destructive"});return}try{h(!0);const s={order_number:t.order_number||b(),vendor_id:1,order_date:new Date().toISOString(),station:t.station,total_amount:t.total_amount,status:"Pending",notes:`${t.notes}

Items:
${t.items.map(f=>`- ${f.product.product_name} (${f.product.product_code}) x${f.quantity} ${f.unitType} = $${f.subtotal.toFixed(2)}`).join(`
`)}`,created_by:1},{error:P}=await ra.from("orders").insert(s);if(P)throw P;ea({title:"Success",description:"Order created successfully"}),v("/orders")}catch(q){console.error("Error creating order:",q),ea({title:"Error",description:"Failed to create order",variant:"destructive"})}finally{h(!1)}};return a.jsxs("div",{className:"space-y-6","data-id":"0pyrrmwh1","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs($,{className:"border-2 border-primary/20","data-id":"0eua6gv07","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"ixga767n8","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"4l0wcm9y4","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{"data-id":"dj3d5ikpw","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs(aa,{className:"flex items-center space-x-2","data-id":"ti14ij8pz","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(La,{className:"w-6 h-6","data-id":"ierrfj0ok","data-path":"src/pages/Orders/OrderForm.tsx"}),a.jsx("span",{"data-id":"gs8bnexoh","data-path":"src/pages/Orders/OrderForm.tsx",children:"Create Order - Station Selection"})]}),a.jsx(ua,{"data-id":"z3i1wlhaa","data-path":"src/pages/Orders/OrderForm.tsx",children:"First, select the station for this order, then add products"})]}),a.jsxs(k,{variant:"outline",onClick:()=>v("/orders"),"data-id":"xzmeawgtt","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(Va,{className:"w-4 h-4 mr-2","data-id":"p6rbs575a","data-path":"src/pages/Orders/OrderForm.tsx"}),"Back to Orders"]})]})}),a.jsx(M,{"data-id":"fcnauv34o","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"space-y-4","data-id":"1mcogms5m","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"9902e07dq","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(G,{htmlFor:"station-selector",className:"text-lg font-semibold","data-id":"frbpir74k","data-path":"src/pages/Orders/OrderForm.tsx",children:"Select Delivery Station *"}),a.jsxs(ia,{value:e,onValueChange:u=>{r(u),o(q=>({...q,station:u}))},"data-id":"x8h93mjsv","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(la,{className:"text-lg p-4 h-12","data-id":"ebi3pxc6g","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(pa,{placeholder:"Choose a station to begin creating your order","data-id":"bdldvv3s4","data-path":"src/pages/Orders/OrderForm.tsx"})}),a.jsx(ha,{"data-id":"608lb1o1o","data-path":"src/pages/Orders/OrderForm.tsx",children:S.map(u=>a.jsx(Z,{value:u,className:"text-lg p-3","data-id":"13wwub84t","data-path":"src/pages/Orders/OrderForm.tsx",children:u},u))})]})]}),e&&a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg","data-id":"q0iafqshg","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("p",{className:"text-green-800 font-medium","data-id":"sptj95zmk","data-path":"src/pages/Orders/OrderForm.tsx",children:["📍 Selected Station: ",a.jsx("span",{className:"font-bold","data-id":"6c08r5a2g","data-path":"src/pages/Orders/OrderForm.tsx",children:e})]}),a.jsx("p",{className:"text-green-600 text-sm mt-1","data-id":"dh54amp05","data-path":"src/pages/Orders/OrderForm.tsx",children:"You can now add products to your order for this station."})]})]})})]}),e&&a.jsxs($,{"data-id":"gs64qjgwg","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"fdb2u8uon","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx("div",{className:"flex items-center justify-between","data-id":"6mb3zf6to","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{"data-id":"35rik3idc","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs(aa,{className:"flex items-center space-x-2","data-id":"88bq5feiw","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(La,{className:"w-6 h-6","data-id":"spt9q9g4e","data-path":"src/pages/Orders/OrderForm.tsx"}),a.jsxs("span",{"data-id":"g8b2lq5qm","data-path":"src/pages/Orders/OrderForm.tsx",children:["Order for ",e]})]}),a.jsx(ua,{"data-id":"86yg1tsqo","data-path":"src/pages/Orders/OrderForm.tsx",children:"Scan product barcodes or search manually to add items to your order"})]})})}),a.jsx(M,{"data-id":"3l84ct1b4","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"space-y-6","data-id":"gbf0po2qr","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx($,{className:"border-2 border-dashed border-primary/30 hover:border-primary/50 transition-colors","data-id":"pmfipr63n","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(M,{className:"p-6","data-id":"35uckn5lp","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"text-center space-y-4","data-id":"rzp325dyw","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(qa,{className:"w-12 h-12 mx-auto text-primary","data-id":"i40nmaqmu","data-path":"src/pages/Orders/OrderForm.tsx"}),a.jsx("h3",{className:"text-lg font-semibold","data-id":"5fucoxh31","data-path":"src/pages/Orders/OrderForm.tsx",children:"Barcode Scanner"}),a.jsx("p",{className:"text-muted-foreground","data-id":"hn6q8pjgf","data-path":"src/pages/Orders/OrderForm.tsx",children:"Click to open camera and scan product barcodes"}),a.jsxs(k,{onClick:()=>{j(!0),setTimeout(Q,100)},className:"w-full sm:w-auto",disabled:d,"data-id":"qe6zp8q09","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(qa,{className:"w-4 h-4 mr-2","data-id":"s9gkv18b3","data-path":"src/pages/Orders/OrderForm.tsx"}),"Open Barcode Scanner"]})]})})}),a.jsx(be,{onProductSelect:g,"data-id":"y4jp3qfx2","data-path":"src/pages/Orders/OrderForm.tsx"}),m&&a.jsxs($,{className:"border-primary","data-id":"rxdhdr09r","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"1i1e8llr5","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(aa,{"data-id":"v3357qx1x","data-path":"src/pages/Orders/OrderForm.tsx",children:"Barcode Scanner"})}),a.jsx(M,{"data-id":"y3nk4kh3a","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"space-y-4","data-id":"xvfw2ekn5","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"relative w-full max-w-md mx-auto aspect-video bg-black rounded-lg overflow-hidden","data-id":"1aq9pqyt0","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx("video",{ref:u=>na(u),autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover","data-id":"mk5d0ekfc","data-path":"src/pages/Orders/OrderForm.tsx"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center","data-id":"cx3rg1y7z","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx("div",{className:"border-2 border-white border-dashed w-48 h-24 rounded-lg","data-id":"8edg4yx14","data-path":"src/pages/Orders/OrderForm.tsx"})})]}),a.jsxs("div",{className:"flex space-x-2 justify-center","data-id":"bvj4rx52t","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(k,{onClick:C,disabled:d,"data-id":"57yt7qwih","data-path":"src/pages/Orders/OrderForm.tsx",children:"Capture Barcode"}),a.jsx(k,{variant:"outline",onClick:()=>{j(!1),K()},"data-id":"81i3txece","data-path":"src/pages/Orders/OrderForm.tsx",children:"Cancel"})]}),a.jsx("p",{className:"text-sm text-muted-foreground text-center","data-id":"c3p3xgcgh","data-path":"src/pages/Orders/OrderForm.tsx",children:"Position the barcode within the frame and click Capture"})]})})]}),w.length>0&&a.jsxs($,{"data-id":"qiz7hez36","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"meazw3q06","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(aa,{"data-id":"vtgnpfvj6","data-path":"src/pages/Orders/OrderForm.tsx",children:"Found Products"})}),a.jsx(M,{"data-id":"hd99ymrsf","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx("div",{className:"space-y-3","data-id":"yq4submw8","data-path":"src/pages/Orders/OrderForm.tsx",children:w.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-id":"qdjjter6p","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"flex-1","data-id":"bma3fqudt","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx("h4",{className:"font-semibold","data-id":"pjk10i5l0","data-path":"src/pages/Orders/OrderForm.tsx",children:u.product_name}),a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"0mnrwflcz","data-path":"src/pages/Orders/OrderForm.tsx",children:["Code: ",u.product_code," | Category: ",u.category]}),a.jsxs("p",{className:"text-sm font-medium text-green-600","data-id":"0hjre35th","data-path":"src/pages/Orders/OrderForm.tsx",children:["Price: $",u.price.toFixed(2)," | Stock: ",u.quantity_in_stock]})]}),a.jsxs("div",{className:"flex items-center space-x-3","data-id":"j7jt65frc","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"29fprcx19","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(G,{htmlFor:`qty-${u.ID}`,className:"text-sm","data-id":"ko6m039zq","data-path":"src/pages/Orders/OrderForm.tsx",children:"Qty:"}),a.jsx(sa,{id:`qty-${u.ID}`,value:I[u.ID]||1,onChange:q=>l(s=>({...s,[u.ID]:q})),min:1,max:u.quantity_in_stock,className:"w-20","data-id":"9s6pygfvd","data-path":"src/pages/Orders/OrderForm.tsx"})]}),a.jsxs(k,{size:"sm",onClick:()=>B(u),className:"flex items-center space-x-1","data-id":"xx7ux3k6h","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(va,{className:"w-4 h-4","data-id":"yltx4a0x0","data-path":"src/pages/Orders/OrderForm.tsx"}),a.jsx("span",{"data-id":"ax25ekm2e","data-path":"src/pages/Orders/OrderForm.tsx",children:"Add"})]})]})]},u.ID))})})]}),t.items.length>0&&a.jsxs($,{"data-id":"56m4ay7k9","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"j6yg60m9","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs(aa,{"data-id":"zv94brus7","data-path":"src/pages/Orders/OrderForm.tsx",children:["Order Items (",t.items.length,")"]})}),a.jsx(M,{"data-id":"lulve2ryi","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"space-y-3","data-id":"zscfqc248","data-path":"src/pages/Orders/OrderForm.tsx",children:[t.items.map((u,q)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50","data-id":"j1g343t3m","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"flex-1","data-id":"qvm659s56","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx("h4",{className:"font-semibold","data-id":"g9a06cvwj","data-path":"src/pages/Orders/OrderForm.tsx",children:u.product.product_name}),a.jsxs("p",{className:"text-sm text-muted-foreground","data-id":"jiajez3tj","data-path":"src/pages/Orders/OrderForm.tsx",children:[u.product.product_code," | $",(u.subtotal/u.quantity).toFixed(2)," per ",u.unitType]}),a.jsxs("p",{className:"text-xs text-muted-foreground","data-id":"tggaq43q0","data-path":"src/pages/Orders/OrderForm.tsx",children:["Unit Type: ",u.unitType]})]}),a.jsxs("div",{className:"flex items-center space-x-3","data-id":"np1k3vibm","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"flex items-center space-x-2","data-id":"h52ds73ns","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(k,{size:"sm",variant:"outline",onClick:()=>R(q,u.quantity-1),"data-id":"hzt21ym38","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(qt,{className:"w-3 h-3","data-id":"evhhf6vat","data-path":"src/pages/Orders/OrderForm.tsx"})}),a.jsxs("span",{className:"w-8 text-center font-medium","data-id":"4lr74r9e3","data-path":"src/pages/Orders/OrderForm.tsx",children:[u.quantity," ",u.unitType]}),a.jsx(k,{size:"sm",variant:"outline",onClick:()=>R(q,u.quantity+1),"data-id":"3m5hwspgv","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(va,{className:"w-3 h-3","data-id":"62xm8hvpk","data-path":"src/pages/Orders/OrderForm.tsx"})})]}),a.jsx("div",{className:"text-right min-w-[80px]","data-id":"m4i77n0fj","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("p",{className:"font-semibold","data-id":"2veb9kffl","data-path":"src/pages/Orders/OrderForm.tsx",children:["$",u.subtotal.toFixed(2)]})}),a.jsx(k,{size:"sm",variant:"destructive",onClick:()=>_(q),"data-id":"r6r7xk4ii","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(Ra,{className:"w-4 h-4","data-id":"q9l29xqg3","data-path":"src/pages/Orders/OrderForm.tsx"})})]})]},`${u.product.ID}-${q}`)),a.jsx("div",{className:"border-t pt-3","data-id":"lddeeboj6","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"flex justify-between items-center text-lg font-bold","data-id":"reyrgo2dl","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx("span",{"data-id":"bdh4y3tge","data-path":"src/pages/Orders/OrderForm.tsx",children:"Total Amount:"}),a.jsxs("span",{"data-id":"gx23gl6cy","data-path":"src/pages/Orders/OrderForm.tsx",children:["$",t.total_amount.toFixed(2)]})]})})]})})]}),a.jsxs($,{"data-id":"f2le6exuv","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(X,{"data-id":"v8g87a07j","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsx(aa,{"data-id":"sh2g9qpmy","data-path":"src/pages/Orders/OrderForm.tsx",children:"Order Details"})}),a.jsx(M,{"data-id":"de6xb30d7","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("form",{onSubmit:W,className:"space-y-4","data-id":"uhnulbpiz","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-id":"e697mscou","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"uibwxus4z","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(G,{htmlFor:"order_number","data-id":"k2ucfu1ra","data-path":"src/pages/Orders/OrderForm.tsx",children:"Order Number"}),a.jsx(oa,{id:"order_number",value:t.order_number,onChange:u=>o(q=>({...q,order_number:u.target.value})),placeholder:"Auto-generated if left empty","data-id":"dvydn158k","data-path":"src/pages/Orders/OrderForm.tsx"})]}),a.jsx("div",{className:"space-y-2","data-id":"hfxlkwa1k","data-path":"src/pages/Orders/OrderForm.tsx",children:a.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg","data-id":"dmtec7m4l","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(G,{className:"text-blue-800 font-medium","data-id":"2u1odd6gb","data-path":"src/pages/Orders/OrderForm.tsx",children:"Delivery Station"}),a.jsx("p",{className:"text-blue-600 font-semibold text-lg","data-id":"mpgp9z7j9","data-path":"src/pages/Orders/OrderForm.tsx",children:e}),a.jsx("p",{className:"text-blue-500 text-sm","data-id":"tguzkhkzp","data-path":"src/pages/Orders/OrderForm.tsx",children:"Selected at the top of the page"})]})})]}),a.jsxs("div",{className:"space-y-2","data-id":"3q43pyzud","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(G,{htmlFor:"notes","data-id":"ptfthgsks","data-path":"src/pages/Orders/OrderForm.tsx",children:"Notes"}),a.jsx(oa,{id:"notes",value:t.notes,onChange:u=>o(q=>({...q,notes:u.target.value})),placeholder:"Enter any additional notes about this order...","data-id":"seqen17lb","data-path":"src/pages/Orders/OrderForm.tsx"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4","data-id":"v79ifklm9","data-path":"src/pages/Orders/OrderForm.tsx",children:[a.jsx(k,{type:"button",variant:"outline",onClick:()=>v("/orders"),"data-id":"g72qz7isz","data-path":"src/pages/Orders/OrderForm.tsx",children:"Cancel"}),a.jsx(k,{type:"submit",disabled:d||t.items.length===0,"data-id":"29q17f8kk","data-path":"src/pages/Orders/OrderForm.tsx",children:d?"Creating...":a.jsxs(a.Fragment,{children:[a.jsx($a,{className:"w-4 h-4 mr-2","data-id":"e2yz262dy","data-path":"src/pages/Orders/OrderForm.tsx"}),"Create Order"]})})]})]})})]})]})})]}),a.jsx(we,{isOpen:p,onClose:()=>{y(!1),F(null)},product:D,onConfirm:T,"data-id":"iy79s7n9i","data-path":"src/pages/Orders/OrderForm.tsx"})]})},Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"})),_e=()=>{const[e,r]=i.useState([]),[t,o]=i.useState([]),[d,h]=i.useState(!0),[m,j]=i.useState(!1),[w,x]=i.useState(""),[I,l]=i.useState("all"),[D,F]=i.useState("all"),[p,y]=i.useState(1),[v,n]=i.useState(0),[S,U]=i.useState({lowStockThreshold:10,criticalStockThreshold:5,emailNotifications:!0,autoReorderSuggestions:!0}),{toast:E}=ya(),J=20;i.useEffect(()=>{Q(),na()},[p,I,D,w]);const na=()=>{const b=localStorage.getItem("inventoryAlertSettings");b&&U(JSON.parse(b))},Q=async()=>{h(!0);try{let b=ra.from("products").select("*",{count:"exact"}).order("quantity_in_stock",{ascending:!0});I!=="all"&&(b=b.eq("category",I)),w&&(b=b.ilike("product_name",`%${w}%`));const W=(p-1)*J,u=W+J-1;b=b.range(W,u);const{data:q,error:s,count:P}=await b;if(s)throw s;const f=q||[];r(f),n(P||0);const N=f.filter(c=>{const O=c.quantity_in_stock/(c.minimum_stock||1);return D==="critical"?c.quantity_in_stock<=S.criticalStockThreshold:D==="low"?c.quantity_in_stock<=S.lowStockThreshold&&c.quantity_in_stock>S.criticalStockThreshold:D==="reorder"?c.quantity_in_stock<=c.minimum_stock:D==="overdue"?c.overdue:c.quantity_in_stock<=S.lowStockThreshold||c.quantity_in_stock<=c.minimum_stock||c.overdue});o(N)}catch(b){console.error("Error fetching products:",b),E({title:"Error",description:"Failed to fetch inventory data",variant:"destructive"})}finally{h(!1)}},K=async()=>{j(!0),await Q(),j(!1),E({title:"Data Refreshed",description:"Inventory data has been updated"})},ta=async()=>{if(t.length===0){E({title:"No Alerts to Send",description:"All products are adequately stocked"});return}try{const b=t.filter(q=>q.quantity_in_stock<=S.criticalStockThreshold),W=t.filter(q=>q.quantity_in_stock<=S.lowStockThreshold&&q.quantity_in_stock>S.criticalStockThreshold),u=`
        <h2>🚨 Inventory Alert Report</h2>
        <p>The following products require immediate attention:</p>
        
        ${b.length>0?`
        <h3 style="color: #dc2626;">⚠️ Critical Stock Levels (${b.length} items)</h3>
        <ul>
          ${b.map(q=>`
            <li><strong>${q.product_name}</strong> - Only ${q.quantity_in_stock} units remaining (Supplier: ${q.supplier})</li>
          `).join("")}
        </ul>
        `:""}
        
        ${W.length>0?`
        <h3 style="color: #ea580c;">📉 Low Stock Levels (${W.length} items)</h3>
        <ul>
          ${W.map(q=>`
            <li><strong>${q.product_name}</strong> - ${q.quantity_in_stock} units remaining (Min: ${q.minimum_stock})</li>
          `).join("")}
        </ul>
        `:""}
        
        <p><strong>Report generated:</strong> ${new Date().toLocaleString()}</p>
        <p>Please review and take appropriate action to restock these items.</p>
      `;console.log("Email alert would be sent:",{from:"support@gasstation.com",to:["manager@gasstation.com"],subject:`🚨 Inventory Alert: ${t.length} products need attention`,html:u}),E({title:"Alert Prepared",description:`Alert for ${t.length} products logged to console (email service needs implementation)`})}catch(b){console.error("Error preparing alert:",b),E({title:"Error",description:"Failed to prepare email alert",variant:"destructive"})}},C=b=>b.quantity_in_stock<=S.criticalStockThreshold?"critical":b.quantity_in_stock<=S.lowStockThreshold?"low":b.quantity_in_stock<=b.minimum_stock?"reorder":b.overdue?"overdue":"normal",B=b=>{switch(b){case"critical":return a.jsx(H,{variant:"destructive",className:"bg-red-100 text-red-800","data-id":"a30o0ocq8","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Critical"});case"low":return a.jsx(H,{variant:"secondary",className:"bg-orange-100 text-orange-800","data-id":"plnxseqpj","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Low Stock"});case"reorder":return a.jsx(H,{variant:"outline",className:"bg-yellow-100 text-yellow-800","data-id":"2xkyb7n6d","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Reorder"});case"overdue":return a.jsx(H,{variant:"destructive",className:"bg-purple-100 text-purple-800","data-id":"sg35tiovp","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Overdue"});default:return a.jsx(H,{variant:"default","data-id":"65l5w5afg","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Normal"})}},_=(()=>{const b=e.filter(s=>C(s)==="critical").length,W=e.filter(s=>C(s)==="low").length,u=e.filter(s=>C(s)==="reorder").length,q=e.filter(s=>C(s)==="overdue").length;return{critical:b,low:W,reorder:u,overdue:q,total:e.length}})(),g=Math.ceil(v/J),T=[...new Set(e.map(b=>b.category))];return a.jsxs("div",{className:"space-y-6","data-id":"foihocveu","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsxs("div",{className:"flex items-center justify-between","data-id":"463qvqka5","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsxs("div",{"data-id":"3kh3ogkcs","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("h1",{className:"text-3xl font-bold","data-id":"f9l6bbi0n","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Inventory Alerts"}),a.jsx("p",{className:"text-muted-foreground","data-id":"w91b6yag9","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Monitor stock levels and manage inventory alerts"})]}),a.jsxs("div",{className:"flex gap-2","data-id":"dvkomjnb9","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsxs(k,{variant:"outline",onClick:K,disabled:m,"data-id":"0h2gniaki","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(ft,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`,"data-id":"kbd88z3d1","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),"Refresh"]}),a.jsxs(k,{onClick:ta,disabled:t.length===0,"data-id":"5krtteca5","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(at,{className:"h-4 w-4 mr-2","data-id":"rkgfzqm2w","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),"Send Alert Email"]}),a.jsx(Za,{to:"/inventory/settings","data-id":"ljgtm9cay","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(k,{variant:"outline","data-id":"fpnantxry","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(zt,{className:"h-4 w-4 mr-2","data-id":"a242ndn54","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),"Settings"]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4","data-id":"cm8ov6o5p","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx($,{className:"border-red-200 bg-red-50","data-id":"at0zptqmw","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(M,{className:"flex items-center p-4","data-id":"ydl6ldsr2","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(Et,{className:"h-8 w-8 text-red-600 mr-3","data-id":"z6i34ubm9","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),a.jsxs("div",{"data-id":"1dnezbvwf","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-red-600","data-id":"0krhy0ifw","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Critical Stock"}),a.jsx("p",{className:"text-2xl font-bold text-red-700","data-id":"4gwumhf55","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:_.critical})]})]})}),a.jsx($,{className:"border-orange-200 bg-orange-50","data-id":"hy4d4rdlm","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(M,{className:"flex items-center p-4","data-id":"ybzal07b6","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(St,{className:"h-8 w-8 text-orange-600 mr-3","data-id":"4052m37v2","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),a.jsxs("div",{"data-id":"5x3kn7yub","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-orange-600","data-id":"rq0tfeyhb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Low Stock"}),a.jsx("p",{className:"text-2xl font-bold text-orange-700","data-id":"c5ixhlexa","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:_.low})]})]})}),a.jsx($,{className:"border-yellow-200 bg-yellow-50","data-id":"kmsd5lu7k","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(M,{className:"flex items-center p-4","data-id":"trfjcyywm","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(Gt,{className:"h-8 w-8 text-yellow-600 mr-3","data-id":"8zi0kheh2","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),a.jsxs("div",{"data-id":"bext11ys4","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-600","data-id":"2z3284zy3","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Reorder Point"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-700","data-id":"xx9hp3r2s","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:_.reorder})]})]})}),a.jsx($,{className:"border-purple-200 bg-purple-50","data-id":"2yldedjve","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(M,{className:"flex items-center p-4","data-id":"1mj7y4kpo","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(ga,{className:"h-8 w-8 text-purple-600 mr-3","data-id":"7iksjmo46","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),a.jsxs("div",{"data-id":"pwzu3a5t0","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-purple-600","data-id":"vlejnt7ct","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Overdue"}),a.jsx("p",{className:"text-2xl font-bold text-purple-700","data-id":"feywnn116","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:_.overdue})]})]})}),a.jsx($,{"data-id":"zdqqcwgaz","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(M,{className:"flex items-center p-4","data-id":"dicspmlad","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(ga,{className:"h-8 w-8 text-blue-600 mr-3","data-id":"qj1f1e9ti","data-path":"src/pages/Inventory/InventoryAlerts.tsx"}),a.jsxs("div",{"data-id":"wh47dkcf3","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground","data-id":"5k6l40bsr","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Total Products"}),a.jsx("p",{className:"text-2xl font-bold","data-id":"5fmsxzg8c","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:_.total})]})]})})]}),a.jsx($,{"data-id":"t8xi25xtp","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(M,{className:"p-4","data-id":"14910sqxi","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs("div",{className:"flex flex-wrap gap-4","data-id":"y7xesgmx3","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("div",{className:"flex-1 min-w-[200px]","data-id":"l6m27jdlb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(oa,{placeholder:"Search products...",value:w,onChange:b=>x(b.target.value),className:"w-full","data-id":"8o5wd8nh5","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})}),a.jsxs(ia,{value:I,onValueChange:l,"data-id":"vzw5m0q8w","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(la,{className:"w-[180px]","data-id":"m3mx21voi","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(pa,{placeholder:"Category","data-id":"eu2nw14q7","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})}),a.jsxs(ha,{"data-id":"sc5ug5fck","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(Z,{value:"all","data-id":"xwzb07wr6","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"All Categories"}),T.filter(b=>b&&b.trim()!=="").map(b=>a.jsx(Z,{value:b,"data-id":"zyep88opo","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b},b))]})]}),a.jsxs(ia,{value:D,onValueChange:F,"data-id":"jld9k7yx9","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(la,{className:"w-[150px]","data-id":"hv2esr0e9","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(pa,{placeholder:"Severity","data-id":"5hp5chdsu","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})}),a.jsxs(ha,{"data-id":"7jpzvb0i6","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(Z,{value:"all","data-id":"cz6jr63ud","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"All Items"}),a.jsx(Z,{value:"critical","data-id":"6jy95i4kg","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Critical Only"}),a.jsx(Z,{value:"low","data-id":"j209ciunq","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Low Stock"}),a.jsx(Z,{value:"reorder","data-id":"41023f2sm","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Reorder Point"}),a.jsx(Z,{value:"overdue","data-id":"chagw6kbt","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Overdue"})]})]})]})})}),a.jsxs($,{"data-id":"ssjwnyxtw","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsxs(X,{"data-id":"vhnkjyguh","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(aa,{"data-id":"m7v1hqvi6","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Inventory Status"}),a.jsxs(ua,{"data-id":"zva6k5y7g","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:["Showing ",e.length," products (",t.length," need attention)"]})]}),a.jsx(M,{"data-id":"f4o0hm09a","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:d?a.jsx("div",{className:"flex justify-center py-8","data-id":"251aiz8sf","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary","data-id":"4vlxqxc8a","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})}):a.jsxs("div",{className:"overflow-x-auto","data-id":"qy2si58gn","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsxs(Ia,{"data-id":"wlwlfd6co","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(ka,{"data-id":"hs2vgak5c","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs(xa,{"data-id":"cxprp9pvb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(A,{"data-id":"42t3fsf6m","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Product"}),a.jsx(A,{"data-id":"idlrfuxgi","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Category"}),a.jsx(A,{"data-id":"p6ge0ysk1","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Current Stock"}),a.jsx(A,{"data-id":"5ml0541lv","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Min Stock"}),a.jsx(A,{"data-id":"tdv8korso","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Status"}),a.jsx(A,{"data-id":"w9qprvr8c","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Supplier"}),a.jsx(A,{"data-id":"gqckiukqy","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Last Updated"}),a.jsx(A,{"data-id":"ozp5qpshs","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Actions"})]})}),a.jsx(Ca,{"data-id":"mx10g2oie","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:e.map(b=>{const W=C(b),u=b.quantity_in_stock/b.minimum_stock*100;return a.jsxs(xa,{className:W==="critical"?"bg-red-50":W==="low"?"bg-orange-50":"","data-id":"8ag4hd4qv","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(z,{className:"font-medium","data-id":"1s6jbyihi","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs("div",{"data-id":"vem91e1za","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("div",{className:"font-semibold","data-id":"wro8lw1fn","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.product_name}),a.jsx("div",{className:"text-sm text-muted-foreground","data-id":"1bnb3hqon","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.department})]})}),a.jsx(z,{"data-id":"6cpmviezs","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.category}),a.jsx(z,{"data-id":"3ssfzz95o","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs("div",{className:"flex items-center gap-2","data-id":"m1ynhombv","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx("span",{className:`font-medium ${W==="critical"?"text-red-600":W==="low"?"text-orange-600":""}`,"data-id":"5ewhf52zb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.quantity_in_stock}),W!=="normal"&&a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden","data-id":"j2twlvh2v","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx("div",{className:`h-full ${W==="critical"?"bg-red-500":"bg-orange-500"}`,style:{width:`${Math.min(u,100)}%`},"data-id":"4w6m19h9x","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})})]})}),a.jsx(z,{"data-id":"jm4qt4d89","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.minimum_stock}),a.jsx(z,{"data-id":"4hr9sd98g","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:B(W)}),a.jsx(z,{"data-id":"8tx11ig7v","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:b.supplier}),a.jsx(z,{"data-id":"qs23prziy","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:new Date(b.last_updated_date).toLocaleDateString()}),a.jsx(z,{"data-id":"brujwzxaz","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsxs("div",{className:"flex items-center gap-2","data-id":"1irc0uoqu","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(Za,{to:`/products/${b.id}`,"data-id":"371r15r41","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(k,{variant:"ghost",size:"sm","data-id":"462l5yswb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(Qa,{className:"h-4 w-4","data-id":"jni8he2j2","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})})}),a.jsx(Za,{to:`/products/${b.id}/edit`,"data-id":"l7kxy6rqp","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(k,{variant:"ghost",size:"sm","data-id":"m7yzn6rhg","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:a.jsx(va,{className:"h-4 w-4","data-id":"lydpmzfqc","data-path":"src/pages/Inventory/InventoryAlerts.tsx"})})})]})})]},b.id)})})]}),e.length===0&&a.jsx("div",{className:"text-center py-8 text-muted-foreground","data-id":"6x71p2lwm","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"No products found matching your criteria."})]})})]}),g>1&&a.jsxs("div",{className:"flex justify-center gap-2","data-id":"8xd0ggy4v","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:[a.jsx(k,{variant:"outline",onClick:()=>y(b=>Math.max(b-1,1)),disabled:p===1,"data-id":"cdkg607fw","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Previous"}),a.jsxs("span",{className:"flex items-center px-4","data-id":"8ksunlavb","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:["Page ",p," of ",g]}),a.jsx(k,{variant:"outline",onClick:()=>y(b=>Math.min(b+1,g)),disabled:p===g,"data-id":"58vpcd98p","data-path":"src/pages/Inventory/InventoryAlerts.tsx",children:"Next"})]})]})},Ae=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),Pe=()=>{const[e,r]=i.useState([]),[t,o]=i.useState(!0),[d,h]=i.useState(""),[m,j]=i.useState("all"),[w,x]=i.useState("all"),[I,l]=i.useState("all");ya();const D=ba(),F=[{id:1,delivery_date:"2024-01-15T10:30:00Z",station:"MOBIL",fuel_type:"Regular (87)",quantity_delivered:8500,unit_price:2.85,total_amount:24225,supplier:"ExxonMobil Supply",delivery_truck_number:"TRK-001",driver_name:"John Smith",status:"Delivered",tank_level_before:2500,tank_level_after:11e3,delivery_notes:"Delivery completed successfully. Tank capacity verified.",created_by:1},{id:2,delivery_date:"2024-01-15T14:15:00Z",station:"AMOCO ROSEDALE",fuel_type:"Premium (93)",quantity_delivered:6e3,unit_price:3.15,total_amount:18900,supplier:"BP Supply Chain",delivery_truck_number:"TRK-102",driver_name:"Mike Johnson",status:"In Transit",tank_level_before:1800,tank_level_after:0,delivery_notes:"Delivery scheduled for 2 PM. Tank inspection completed.",created_by:1},{id:3,delivery_date:"2024-01-16T09:00:00Z",station:"AMOCO BROOKLYN",fuel_type:"Diesel",quantity_delivered:7200,unit_price:3.05,total_amount:21960,supplier:"Shell Energy",delivery_truck_number:"TRK-205",driver_name:"Sarah Davis",status:"Pending",tank_level_before:3200,tank_level_after:0,delivery_notes:"Scheduled delivery. Awaiting truck arrival.",created_by:1}];i.useEffect(()=>{(()=>{o(!0),setTimeout(()=>{r(F),o(!1)},1e3)})()},[]);const p=E=>{switch(E){case"Delivered":return a.jsxs(H,{className:"bg-green-100 text-green-800","data-id":"lrokrw1w5","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Ka,{className:"w-3 h-3 mr-1","data-id":"43bebgs6a","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"Delivered"]});case"In Transit":return a.jsxs(H,{className:"bg-blue-100 text-blue-800","data-id":"c4t2222yy","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(mt,{className:"w-3 h-3 mr-1","data-id":"h223mivh6","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"In Transit"]});case"Pending":return a.jsxs(H,{className:"bg-yellow-100 text-yellow-800","data-id":"huin90x4z","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(yt,{className:"w-3 h-3 mr-1","data-id":"qiv3apomv","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"Pending"]});case"Cancelled":return a.jsxs(H,{className:"bg-red-100 text-red-800","data-id":"zcj5qohtl","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Ha,{className:"w-3 h-3 mr-1","data-id":"l115xu7y7","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"Cancelled"]});default:return a.jsx(H,{variant:"secondary","data-id":"e8kdfw5t9","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E})}},y=e.filter(E=>{const J=E.supplier.toLowerCase().includes(d.toLowerCase())||E.delivery_truck_number.toLowerCase().includes(d.toLowerCase())||E.driver_name.toLowerCase().includes(d.toLowerCase())||E.fuel_type.toLowerCase().includes(d.toLowerCase()),na=!m||m==="all"||E.station===m,Q=!w||w==="all"||E.status===w,K=!I||I==="all"||E.fuel_type===I;return J&&na&&Q&&K}),v=y.length,n=y.reduce((E,J)=>E+J.quantity_delivered,0),S=y.reduce((E,J)=>E+J.total_amount,0),U=y.filter(E=>E.status==="Delivered").length;return a.jsxs("div",{className:"space-y-6","data-id":"z122bwuwo","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between","data-id":"e5dhk7zk5","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("div",{"data-id":"33pxtb43x","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center","data-id":"9qn0zen7b","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Da,{className:"w-6 h-6 mr-2 text-blue-600","data-id":"4gixazcie","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"GAS Delivery Inventory"]}),a.jsx("p",{className:"text-gray-600 mt-1","data-id":"679t98rvu","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Track and manage fuel deliveries across all stations"})]}),a.jsxs(k,{onClick:()=>D("/gas-delivery/new"),className:"mt-4 sm:mt-0","data-id":"n4hxszcyh","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(va,{className:"w-4 h-4 mr-2","data-id":"bpnsiw9wm","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"New Delivery"]})]}),a.jsx($,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200","data-id":"0f1wlfhz6","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs(M,{className:"p-6","data-id":"tk6kuk6h0","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between","data-id":"4nwumqeth","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("div",{className:"mb-4 sm:mb-0","data-id":"zkylfeqz8","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1","data-id":"r6pnfno8v","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Select Station"}),a.jsx("p",{className:"text-gray-600 text-sm","data-id":"yj9qvqrrz","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Choose a station to view its gas delivery inventory"})]}),a.jsx("div",{className:"w-full sm:w-80","data-id":"hbjhpl1dy","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs(ia,{value:m,onValueChange:j,"data-id":"mgypp6sqh","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(la,{className:"bg-white border-blue-300 focus:border-blue-500 focus:ring-blue-500","data-id":"a4fi854if","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(pa,{placeholder:"Choose Station","data-id":"n3sc56t0z","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs(ha,{"data-id":"l5p83amdk","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Z,{value:"all","data-id":"t48pucqgh","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"All Stations"}),a.jsx(Z,{value:"MOBIL","data-id":"89nhrjm9e","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"MOBIL"}),a.jsx(Z,{value:"AMOCO ROSEDALE","data-id":"ad6l1ew75","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"AMOCO ROSEDALE"}),a.jsx(Z,{value:"AMOCO BROOKLYN","data-id":"r3rf8lvsh","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"AMOCO BROOKLYN"})]})]})})]}),m&&m!=="all"&&a.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg","data-id":"uu3wxwjz1","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("p",{className:"text-blue-800 font-medium flex items-center","data-id":"fme75qdct","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Da,{className:"w-4 h-4 mr-2","data-id":"jkeh3dy3l","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),"Showing data for: ",a.jsx("span",{className:"ml-1 font-bold","data-id":"fjkm1uqqs","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:m})]})})]})}),a.jsxs($,{"data-id":"qwl7a9g9n","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs(X,{"data-id":"av1pizzv8","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs(aa,{className:"flex items-center text-lg","data-id":"0wxzcgzh0","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(ja,{className:"w-5 h-5 mr-2 text-blue-600","data-id":"y60xb3hib","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),m==="all"?"All Stations Summary":`${m} Summary`]}),a.jsx(ua,{"data-id":"nrt213noo","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:m==="all"?"Overall statistics for all gas delivery operations":`Statistics for ${m} station deliveries`})]}),a.jsx(M,{"data-id":"f7cm4d762","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4","data-id":"wyq0wj5us","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("div",{className:"p-4 bg-blue-50 rounded-lg","data-id":"hawg3zbob","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center","data-id":"tk73tix45","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg","data-id":"le3j41ybt","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(mt,{className:"w-6 h-6 text-blue-600","data-id":"f1z0acuvz","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs("div",{className:"ml-4","data-id":"oiq8r27sm","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"0f7mzod5f","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Total Deliveries"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900","data-id":"bxhle2i9u","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:v})]})]})}),a.jsx("div",{className:"p-4 bg-green-50 rounded-lg","data-id":"gw1bf6ihh","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center","data-id":"u7axxs7ao","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg","data-id":"xbfmp5j4x","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(Da,{className:"w-6 h-6 text-green-600","data-id":"3efksfrnv","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs("div",{className:"ml-4","data-id":"r3jm0t3xk","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"rrnqur1zw","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Total Gallons"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900","data-id":"0zxpqc8so","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:n.toLocaleString()})]})]})}),a.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg","data-id":"zd8pz9lys","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center","data-id":"ke3oxzp9f","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg","data-id":"l6oa7x66v","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(ja,{className:"w-6 h-6 text-yellow-600","data-id":"29hvjliwi","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs("div",{className:"ml-4","data-id":"zekjko3x4","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"d0pcv0q97","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Total Value"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900","data-id":"ktltylkd9","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:["$",S.toLocaleString()]})]})]})}),a.jsx("div",{className:"p-4 bg-purple-50 rounded-lg","data-id":"uganarpxo","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center","data-id":"751xfvu1x","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg","data-id":"vn1fkpfj2","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(Ka,{className:"w-6 h-6 text-purple-600","data-id":"q2u409yia","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs("div",{className:"ml-4","data-id":"j4rir0by0","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600","data-id":"hypm6ewwe","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900","data-id":"fk1pr99fo","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:U})]})]})})]})})]}),a.jsx($,{"data-id":"agoe9sev2","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(M,{className:"p-6","data-id":"imhbsc4rz","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4","data-id":"t8bmm0wsr","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs("div",{className:"relative","data-id":"mg77c1rkb","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Ma,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400","data-id":"rxgltun7k","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),a.jsx(oa,{placeholder:"Search deliveries...",value:d,onChange:E=>h(E.target.value),className:"pl-10","data-id":"kym4ln6mo","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})]}),a.jsxs(ia,{value:w,onValueChange:x,"data-id":"8btcj34u7","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(la,{"data-id":"fkd1nbtug","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(pa,{placeholder:"Filter by Status","data-id":"sa0dz70hv","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs(ha,{"data-id":"5usm1a8am","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Z,{value:"all","data-id":"4x7cks3fn","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"All Statuses"}),a.jsx(Z,{value:"Delivered","data-id":"0vk553410","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Delivered"}),a.jsx(Z,{value:"In Transit","data-id":"lnic6fbca","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"In Transit"}),a.jsx(Z,{value:"Pending","data-id":"nyxj0h3ri","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Pending"}),a.jsx(Z,{value:"Cancelled","data-id":"yozc0xfye","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Cancelled"})]})]}),a.jsxs(ia,{value:I,onValueChange:l,"data-id":"44c52vo8s","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(la,{"data-id":"f42gkweel","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(pa,{placeholder:"Filter by Fuel Type","data-id":"awjtnd96b","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsxs(ha,{"data-id":"b4jy6mn2d","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Z,{value:"all","data-id":"pk6c6v6i2","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"All Fuel Types"}),a.jsx(Z,{value:"Regular (87)","data-id":"m56tcsdo6","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Regular (87)"}),a.jsx(Z,{value:"Premium (93)","data-id":"ywcxf2ood","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Premium (93)"}),a.jsx(Z,{value:"Diesel","data-id":"m53042v5j","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Diesel"})]})]}),a.jsx(k,{variant:"outline",onClick:()=>{h(""),x("all"),l("all")},"data-id":"6t23ob9wj","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Clear Filters"})]})})}),a.jsxs($,{"data-id":"gyhvjowt5","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsxs(X,{"data-id":"kmv3fohzl","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(aa,{"data-id":"460egvsd8","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Gas Delivery Records"}),a.jsx(ua,{"data-id":"raf1ad90u","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Recent fuel deliveries and their status across all stations"})]}),a.jsxs(M,{"data-id":"uy0uswpg5","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[t?a.jsx("div",{className:"flex items-center justify-center py-8","data-id":"ug44dkanu","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600","data-id":"wz4wno6e2","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}):a.jsx("div",{className:"rounded-md border","data-id":"j29phc6c3","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs(Ia,{"data-id":"rfn3eerq5","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(ka,{"data-id":"y06oyvs7z","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs(xa,{"data-id":"q8u87ecyf","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(A,{"data-id":"d1t4cnne6","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Delivery Date"}),a.jsx(A,{"data-id":"v4maabvej","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Station"}),a.jsx(A,{"data-id":"1orlj98i0","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Fuel Type"}),a.jsx(A,{"data-id":"uz8o6tkay","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Quantity (Gal)"}),a.jsx(A,{"data-id":"f2ddyodre","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Supplier"}),a.jsx(A,{"data-id":"dstqu4v7s","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Driver"}),a.jsx(A,{"data-id":"obxdamu0r","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Status"}),a.jsx(A,{"data-id":"y7jzn9vfg","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Total Amount"}),a.jsx(A,{"data-id":"425jaeray","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Actions"})]})}),a.jsx(Ca,{"data-id":"inj5oj3yi","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:y.map(E=>a.jsxs(xa,{"data-id":"f4putjjf0","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(z,{"data-id":"5ocn27uk8","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center","data-id":"dhgefcbke","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Aa,{className:"w-4 h-4 mr-2 text-gray-400","data-id":"822m9oxwz","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),new Date(E.delivery_date).toLocaleDateString()]})}),a.jsx(z,{"data-id":"4txdvzg2g","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(H,{variant:"outline","data-id":"pr2w2o3kx","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E.station})}),a.jsx(z,{"data-id":"sg3tu89k9","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E.fuel_type}),a.jsx(z,{className:"font-medium","data-id":"wp610l0mm","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E.quantity_delivered.toLocaleString()}),a.jsx(z,{"data-id":"m0ms5usug","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E.supplier}),a.jsx(z,{"data-id":"pyvypmx8p","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:E.driver_name}),a.jsx(z,{"data-id":"nnv5azp50","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:p(E.status)}),a.jsxs(z,{className:"font-medium","data-id":"fjwfpzqm8","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:["$",E.total_amount.toLocaleString()]}),a.jsx(z,{"data-id":"0ybuj2s30","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"4kw7hkkdk","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(k,{variant:"ghost",size:"sm","data-id":"7onbeaiuk","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(Qa,{className:"w-4 h-4","data-id":"0paxlnygr","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})}),a.jsx(k,{variant:"ghost",size:"sm","data-id":"jnze0uwsi","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:a.jsx(Ja,{className:"w-4 h-4","data-id":"iknveurhi","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"})})]})})]},E.id))})]})}),!t&&y.length===0&&a.jsxs("div",{className:"text-center py-8","data-id":"3ub86uwdi","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:[a.jsx(Da,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"gf6vceefy","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2","data-id":"bj1oxngmf","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"No deliveries found"}),a.jsx("p",{className:"text-gray-600","data-id":"4hbz2jc7g","data-path":"src/pages/Inventory/GasDeliveryInventory.tsx",children:"Try adjusting your search or filter criteria."})]})]})]})]})},$e=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"}));export{ie as E,$e as G,Ae as I,sa as N,Ee as O,De as P,qe as S,Zt as V,ot as a,Le as b,oe as c,ze as d,Ge as e,gt as f,st as i,ae as u};
