import{r,u as O,j as a}from"./react-vendor-DaFTMQpG.js";import{s as q,K as g,C as R,d as H,e as U,f as K,B as o,g as G,I as J,z as Y,E as Q,F as W,G as i,H as X,J as c,l as P}from"./admin-core-DIkG70u3.js";import{u as Z,V as aa}from"./business-pages-CUHYPFdV.js";import{ax as v,aC as ea,a1 as sa,aT as E,aO as ta,aS as da,aB as ra,an as na,ao as oa}from"./ui-components-ZiW824g0.js";import{m as ia}from"./animations-CtV-9cdB.js";import"./vendor-D3cU5zLX.js";import"./aws-sdk-abEXkGUS.js";import"./supabase-SVDmTrDh.js";import"./admin-security-rNNhKrj0.js";const ja=()=>{const[u,I]=r.useState([]),[T,f]=r.useState(!0),[x,$]=r.useState(""),[n,w]=r.useState(1),[j,D]=r.useState(0),[N,y]=r.useState(null),[M,h]=r.useState(!1),[s,k]=r.useState(null),V=O(),l=10;r.useEffect(()=>{C()},[n,x]);const C=async()=>{try{f(!0);let e=q.from("vendors").select("*",{count:"exact"}).order("vendor_name",{ascending:!0});x&&(e=e.ilike("vendor_name",`%${x}%`));const t=(n-1)*l,d=t+l-1;e=e.range(t,d);const{data:p,count:F,error:_}=await e;if(_)throw _;I(p||[]),D(F||0)}catch(e){console.error("Error loading vendors:",e),g({title:"Error",description:"Failed to load vendors",variant:"destructive"})}finally{f(!1)}},z=e=>{k(e),y(e.ID),h(!0)},b=e=>{V(`/vendors/edit/${e}`)},L=async e=>{if(confirm("Are you sure you want to delete this vendor?"))try{const{error:t}=await q.from("vendors").delete().eq("id",e);if(t)throw t;g({title:"Success",description:"Vendor deleted successfully"}),C(),h(!1)}catch(t){console.error("Error deleting vendor:",t),g({title:"Error",description:"Failed to delete vendor",variant:"destructive"})}},A=()=>{if(!s)return;const e=["Field,Value",`Vendor Name,${s.vendor_name}`,`Contact Person,${s.contact_person}`,`Email,${s.email}`,`Phone,${s.phone}`,`Address,${s.address}`,`Category,${s.category}`,`Payment Terms,${s.payment_terms}`,`Status,${s.is_active?"Active":"Inactive"}`].join(`
`),t=new Blob([e],{type:"text/csv"}),d=window.URL.createObjectURL(t),p=document.createElement("a");p.href=d,p.download=`vendor_${s.vendor_name.replace(/\s+/g,"_")}_details.csv`,p.click(),window.URL.revokeObjectURL(d),g({title:"Success",description:"Vendor details exported successfully"})};Z(N,e=>{const t=u.find(d=>d.ID===e);t&&z(t)},b,L,()=>V("/vendors/new"));const S=e=>({"Fuel Supplier":"bg-blue-500","Food & Beverages":"bg-green-500",Automotive:"bg-orange-500",Maintenance:"bg-purple-500","Office Supplies":"bg-gray-500",Technology:"bg-indigo-500"})[e]||"bg-gray-500",m=Math.ceil(j/l),B=e=>[{key:"vendor_name",label:"Vendor Name",value:e.vendor_name,type:"text",icon:v},{key:"contact_person",label:"Contact Person",value:e.contact_person,type:"text"},{key:"email",label:"Email",value:e.email,type:"email"},{key:"phone",label:"Phone",value:e.phone,type:"phone"},{key:"address",label:"Address",value:e.address,type:"text",icon:E},{key:"category",label:"Category",value:e.category,type:"badge",badgeColor:S(e.category)},{key:"payment_terms",label:"Payment Terms",value:e.payment_terms,type:"text"},{key:"is_active",label:"Status",value:e.is_active,type:"boolean"}];return a.jsxs("div",{className:"space-y-6","data-id":"0ex25eayp","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsxs(R,{"data-id":"eijtox9z9","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(H,{"data-id":"vp4bieem5","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("div",{className:"flex items-center justify-between","data-id":"odpe77wur","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsxs("div",{"data-id":"xajk9qe2o","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsxs(U,{className:"flex items-center space-x-2","data-id":"gzkglal9u","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(v,{className:"w-6 h-6","data-id":"yboy4f7hw","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("span",{"data-id":"wmaf6c4lp","data-path":"src/pages/Vendors/VendorList.tsx",children:"Vendors"})]}),a.jsx(K,{"data-id":"hzw14fsx4","data-path":"src/pages/Vendors/VendorList.tsx",children:"Manage your vendor contacts and information"})]}),a.jsxs(o,{onClick:()=>V("/vendors/new"),className:"flex items-center space-x-2","data-id":"0caea7ew4","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(ea,{className:"w-4 h-4","data-id":"owmll3jle","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("span",{"data-id":"kcpuv2ipl","data-path":"src/pages/Vendors/VendorList.tsx",children:"Add Vendor"})]})]})}),a.jsxs(G,{"data-id":"fb9v2mupm","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-6","data-id":"wrkemffjr","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("div",{className:"relative flex-1 max-w-sm","data-id":"j3tjepgr1","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4","data-id":"zgclsibjd","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx(J,{placeholder:"Search vendors...",value:x,onChange:e=>$(e.target.value),className:"pl-10","data-id":"eo0pu4rq7","data-path":"src/pages/Vendors/VendorList.tsx"})]})}),a.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg","data-id":"qmdgpq588","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("p",{className:"text-sm text-blue-700","data-id":"f0tzwfyhz","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx("strong",{"data-id":"2q6mv101g","data-path":"src/pages/Vendors/VendorList.tsx",children:"Keyboard shortcuts:"})," Select a row, then press ",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs","data-id":"bqeebw590","data-path":"src/pages/Vendors/VendorList.tsx",children:"V"})," to view,",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"k2krkm0ox","data-path":"src/pages/Vendors/VendorList.tsx",children:"E"})," to edit,",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"zeo0nagy2","data-path":"src/pages/Vendors/VendorList.tsx",children:"D"})," to delete, or",a.jsx("kbd",{className:"px-1 py-0.5 bg-blue-100 rounded text-xs ml-1","data-id":"2izk2sxd7","data-path":"src/pages/Vendors/VendorList.tsx",children:"Ctrl+N"})," to create new"]})}),T?a.jsx("div",{className:"space-y-4","data-id":"v2oygv6u1","data-path":"src/pages/Vendors/VendorList.tsx",children:[...Array(5)].map((e,t)=>a.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse","data-id":"1e8x7ahv3","data-path":"src/pages/Vendors/VendorList.tsx"},t))}):u.length===0?a.jsxs("div",{className:"text-center py-8","data-id":"44a9pjagf","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-id":"psqo3evau","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("p",{className:"text-gray-500","data-id":"jfw2h4fgn","data-path":"src/pages/Vendors/VendorList.tsx",children:"No vendors found"}),a.jsx(o,{variant:"outline",className:"mt-4",onClick:()=>V("/vendors/new"),"data-id":"fil8rspu6","data-path":"src/pages/Vendors/VendorList.tsx",children:"Add Your First Vendor"})]}):a.jsx("div",{className:"border rounded-lg overflow-hidden","data-id":"p23uparyd","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs(Y,{"data-id":"ah6an831e","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(Q,{"data-id":"s7wk0hvp9","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs(W,{"data-id":"o5g14ihqk","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(i,{"data-id":"3mmatqpz9","data-path":"src/pages/Vendors/VendorList.tsx",children:"Vendor Name"}),a.jsx(i,{"data-id":"kxowitj6g","data-path":"src/pages/Vendors/VendorList.tsx",children:"Contact Person"}),a.jsx(i,{"data-id":"hw37vfakn","data-path":"src/pages/Vendors/VendorList.tsx",children:"Contact Info"}),a.jsx(i,{"data-id":"bb9luyr9l","data-path":"src/pages/Vendors/VendorList.tsx",children:"Category"}),a.jsx(i,{"data-id":"o9bzvn4ka","data-path":"src/pages/Vendors/VendorList.tsx",children:"Payment Terms"}),a.jsx(i,{"data-id":"0atrmi18g","data-path":"src/pages/Vendors/VendorList.tsx",children:"Status"}),a.jsx(i,{"data-id":"37cir1lcc","data-path":"src/pages/Vendors/VendorList.tsx",children:"Actions"})]})}),a.jsx(X,{"data-id":"4ctwuo99y","data-path":"src/pages/Vendors/VendorList.tsx",children:u.map((e,t)=>a.jsxs(ia.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:`border-b hover:bg-gray-50 transition-colors cursor-pointer ${N===e.ID?"bg-blue-50 border-blue-200":""}`,onClick:()=>y(e.ID),"data-id":"503mhq4ap","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(c,{"data-id":"a4zwf2h2k","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("div",{"data-id":"d0m5fj0r3","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx("p",{className:"font-medium","data-id":"bs03tzdo3","data-path":"src/pages/Vendors/VendorList.tsx",children:e.vendor_name}),e.address&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mt-1","data-id":"jt0scht7n","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(E,{className:"w-3 h-3","data-id":"9bvuw8gsy","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("span",{className:"truncate max-w-xs","data-id":"i5leu8ygx","data-path":"src/pages/Vendors/VendorList.tsx",children:e.address})]})]})}),a.jsx(c,{"data-id":"l7as0451d","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx("p",{className:"font-medium","data-id":"io1x2obhk","data-path":"src/pages/Vendors/VendorList.tsx",children:e.contact_person})}),a.jsx(c,{"data-id":"qraz83dde","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("div",{className:"space-y-1","data-id":"gd1q3860x","data-path":"src/pages/Vendors/VendorList.tsx",children:[e.email&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm","data-id":"43cxkf22f","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(ta,{className:"w-3 h-3","data-id":"1o8lbv8qt","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("span",{"data-id":"nxf43xqh4","data-path":"src/pages/Vendors/VendorList.tsx",children:e.email})]}),e.phone&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm","data-id":"7z61oj6b6","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(da,{className:"w-3 h-3","data-id":"js086lqyz","data-path":"src/pages/Vendors/VendorList.tsx"}),a.jsx("span",{"data-id":"bkmlz67l8","data-path":"src/pages/Vendors/VendorList.tsx",children:e.phone})]})]})}),a.jsx(c,{"data-id":"dt9stoima","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx(P,{className:`text-white ${S(e.category)}`,"data-id":"4dvvtmjqu","data-path":"src/pages/Vendors/VendorList.tsx",children:e.category})}),a.jsx(c,{"data-id":"cq02pe9z6","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx("span",{className:"text-sm","data-id":"drf4ebyqi","data-path":"src/pages/Vendors/VendorList.tsx",children:e.payment_terms||"N/A"})}),a.jsx(c,{"data-id":"adeehyj96","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx(P,{variant:e.is_active?"default":"secondary","data-id":"evq24tx10","data-path":"src/pages/Vendors/VendorList.tsx",children:e.is_active?"Active":"Inactive"})}),a.jsx(c,{"data-id":"v0imuccs9","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsxs("div",{className:"flex items-center space-x-2","data-id":"j5bhn8g16","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(o,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),z(e)},className:"text-blue-600 hover:text-blue-700","data-id":"fsanx8xv3","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx(ra,{className:"w-4 h-4","data-id":"b42pqtef7","data-path":"src/pages/Vendors/VendorList.tsx"})}),a.jsx(o,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),b(e.ID)},"data-id":"euuthcxhd","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx(na,{className:"w-4 h-4","data-id":"5lzwnzmbs","data-path":"src/pages/Vendors/VendorList.tsx"})}),a.jsx(o,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),L(e.ID)},className:"text-red-600 hover:text-red-700","data-id":"dlbhos6x7","data-path":"src/pages/Vendors/VendorList.tsx",children:a.jsx(oa,{className:"w-4 h-4","data-id":"duous25e1","data-path":"src/pages/Vendors/VendorList.tsx"})})]})})]},e.ID))})]})}),m>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6","data-id":"nn20y26ky","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsxs("p",{className:"text-sm text-gray-700","data-id":"fw58gu8fx","data-path":"src/pages/Vendors/VendorList.tsx",children:["Showing ",(n-1)*l+1," to ",Math.min(n*l,j)," of ",j," vendors"]}),a.jsxs("div",{className:"flex items-center space-x-2","data-id":"bk5rtlhp6","data-path":"src/pages/Vendors/VendorList.tsx",children:[a.jsx(o,{variant:"outline",size:"sm",onClick:()=>w(e=>Math.max(e-1,1)),disabled:n===1,"data-id":"jlxalnzlh","data-path":"src/pages/Vendors/VendorList.tsx",children:"Previous"}),a.jsxs("span",{className:"text-sm","data-id":"tlx1w410e","data-path":"src/pages/Vendors/VendorList.tsx",children:["Page ",n," of ",m]}),a.jsx(o,{variant:"outline",size:"sm",onClick:()=>w(e=>Math.min(e+1,m)),disabled:n===m,"data-id":"zmojnsrks","data-path":"src/pages/Vendors/VendorList.tsx",children:"Next"})]})]})]})]}),s&&a.jsx(aa,{isOpen:M,onClose:()=>{h(!1),k(null),y(null)},title:s.vendor_name,subtitle:`Contact: ${s.contact_person} • ${s.category}`,data:s,fields:B(s),onEdit:()=>{h(!1),b(s.ID)},onDelete:()=>L(s.ID),onExport:A,canEdit:!0,canDelete:!0,canExport:!0,"data-id":"4dv16ttvz","data-path":"src/pages/Vendors/VendorList.tsx"})]})};export{ja as default};
