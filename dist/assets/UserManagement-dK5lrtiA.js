import { j as jsxRuntimeExports } from "./ui-BAZ8HTBl.js";
import { r as reactExports, R as React } from "./vendor-Dw3NhmYV.js";
import { c as createLucideIcon, h as Badge, B as Button, u as useToast, s as supabase, S as Shield, C as Card, b as CardHeader, d as CardTitle, f as CardContent, k as AlertTriangle, A as Alert, g as AlertDescription, m as supabase$1, j as AccessDenied, R as RefreshCw, T as Table, n as TableHeader, o as TableRow, p as TableHead, q as TableBody, r as TableCell } from "./index-xgH9wc9T.js";
import { I as Input } from "./input-DS8Y9d9X.js";
import { D as Dialog, a as DialogContent, b as DialogHeader, c as DialogTitle, d as DialogDescription, e as DialogFooter, f as DialogTrigger } from "./dialog-sqCJez4p.js";
import { S as ScrollArea, P as Phone } from "./scroll-area-CwiYysOC.js";
import { S as Separator } from "./separator-4GaFztwx.js";
import { L as Label } from "./label-DtRhp3dR.js";
import { S as Select, a as SelectTrigger, b as SelectValue, c as SelectContent, d as SelectItem } from "./select-D7v6NG_6.js";
import { T as Tabs, a as TabsList, b as TabsTrigger, c as TabsContent, A as Activity } from "./tabs-Q5vjTbSu.js";
import { u as useAdminAccess, a as useBatchSelection, B as BatchActionBar, C as Checkbox, b as BatchDeleteDialog } from "./use-admin-access-DsbUxxaq.js";
import { S as SquarePen } from "./square-pen-9pUwpptK.js";
import { S as Switch } from "./switch-Dyyad0Hw.js";
import { S as Settings } from "./settings-NGOBSZCo.js";
import { U as UserCheck } from "./user-check-ROqncipB.js";
import { B as Building2 } from "./building-2-oB_U8MtX.js";
import { F as FileText } from "./file-text-DwQmg6EU.js";
import { D as Database, X as XCircle } from "./use-smart-auth-BiISLyYS.js";
import { U as Users } from "./users-DzKuefIB.js";
import { D as DollarSign } from "./dollar-sign-DilGTaud.js";
import { B as BarChart3 } from "./bar-chart-3-DZ6x7IzY.js";
import { P as Package } from "./package-HE6lXQ4O.js";
import { E as Eye } from "./eye-DqIgW9kS.js";
import { P as Plus } from "./plus-Dv20HqtF.js";
import { T as Trash2 } from "./trash-2-CZFivf2G.js";
import { L as Loader2 } from "./loader-2-HgtsHnjl.js";
import { R as RotateCcw } from "./rotate-ccw-jweaWBVI.js";
import { S as Search } from "./search-SzCONyLZ.js";
import { S as Save } from "./save-DHkarsQ_.js";
import { C as CheckCircle2 } from "./check-circle-2-DQ0zdMp0.js";
import { C as Calendar } from "./calendar-D2TnzmDG.js";
import { D as Download } from "./download-P-Ks_4cO.js";
import { P as Printer } from "./printer-e3Sex7C9.js";
import { U as User } from "./user-Bq-6DliO.js";
import { M as Mail } from "./mail-DhtIbKd0.js";
import { E as EyeOff } from "./eye-off-DLMoVbty.js";
import { U as UserPlus } from "./user-plus-C8gbCEoR.js";
import { C as Clock } from "./clock-e1m0ravT.js";
import { A as AlertCircle } from "./alert-circle-ByZw3eax.js";
import "./AuthContext-D76ueosG.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Archive = createLucideIcon("Archive", [
  ["rect", { width: "20", height: "5", x: "2", y: "3", rx: "1", key: "1wp1u1" }],
  ["path", { d: "M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8", key: "1s80jp" }],
  ["path", { d: "M10 12h4", key: "a56b0p" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Bell = createLucideIcon("Bell", [
  ["path", { d: "M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9", key: "1qo2s2" }],
  ["path", { d: "M10.3 21a1.94 1.94 0 0 0 3.4 0", key: "qgo35s" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CheckSquare = createLucideIcon("CheckSquare", [
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }],
  ["path", { d: "M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11", key: "1jnkn4" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Copy = createLucideIcon("Copy", [
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Map = createLucideIcon("Map", [
  ["polygon", { points: "3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21", key: "ok2ie8" }],
  ["line", { x1: "9", x2: "9", y1: "3", y2: "18", key: "w34qz5" }],
  ["line", { x1: "15", x2: "15", y1: "6", y2: "21", key: "volv9a" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const MoreHorizontal = createLucideIcon("MoreHorizontal", [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }],
  ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const PenLine = createLucideIcon("PenLine", [
  ["path", { d: "M12 20h9", key: "t2du7b" }],
  ["path", { d: "M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z", key: "ymcmye" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Truck = createLucideIcon("Truck", [
  ["path", { d: "M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2", key: "wrbu53" }],
  ["path", { d: "M15 18H9", key: "1lyqi6" }],
  [
    "path",
    {
      d: "M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",
      key: "lysw3i"
    }
  ],
  ["circle", { cx: "17", cy: "18", r: "2", key: "332jqn" }],
  ["circle", { cx: "7", cy: "18", r: "2", key: "19iecd" }]
]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UserX = createLucideIcon("UserX", [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["line", { x1: "17", x2: "22", y1: "8", y2: "13", key: "3nzzx3" }],
  ["line", { x1: "22", x2: "17", y1: "8", y2: "13", key: "1swrse" }]
]);
const BatchEditDialog = ({
  isOpen,
  onClose,
  onSave,
  selectedCount,
  isLoading = false,
  itemName = "items",
  children
}) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, "data-id": "33dxiz55a", "data-path": "src/components/BatchEditDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-2xl max-h-[90vh] overflow-y-auto", "data-id": "7s33n6491", "data-path": "src/components/BatchEditDialog.tsx", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { "data-id": "rakbtj1bb", "data-path": "src/components/BatchEditDialog.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center gap-2", "data-id": "2ujf26grh", "data-path": "src/components/BatchEditDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-5 w-5", "data-id": "aw7s8gcm1", "data-path": "src/components/BatchEditDialog.tsx" }),
        "Batch Edit ",
        itemName
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogDescription, { "data-id": "p0vyfnq7j", "data-path": "src/components/BatchEditDialog.tsx", children: [
        "Editing",
        " ",
        /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "mx-1", "data-id": "an1h1m5ym", "data-path": "src/components/BatchEditDialog.tsx", children: selectedCount }),
        itemName,
        ". Changes will be applied to all selected items."
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "py-4", "data-id": "6qcaejntg", "data-path": "src/components/BatchEditDialog.tsx", children }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogFooter, { "data-id": "a27fh47gb", "data-path": "src/components/BatchEditDialog.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: onClose, disabled: isLoading, "data-id": "077umshvg", "data-path": "src/components/BatchEditDialog.tsx", children: "Cancel" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: onSave, disabled: isLoading, "data-id": "skgmuchp3", "data-path": "src/components/BatchEditDialog.tsx", children: isLoading ? "Saving..." : `Update ${selectedCount} ${itemName}` })
    ] })
  ] }) });
};
const defaultPagePermission$1 = {
  view: false,
  create: false,
  edit: false,
  delete: false,
  export: false,
  print: false
};
const pageGroups$1 = {
  "Core Operations": [
    { key: "dashboard", label: "Dashboard", icon: BarChart3, color: "text-blue-600", description: "Main overview and analytics dashboard" },
    { key: "products", label: "Products Management", icon: Package, color: "text-green-600", description: "Manage inventory, pricing, and product information" },
    { key: "sales_reports", label: "Sales Reports", icon: FileText, color: "text-orange-600", description: "Daily sales reporting and analytics" }
  ],
  "Human Resources": [
    { key: "employees", label: "Employee Management", icon: Users, color: "text-purple-600", description: "Manage employee records and information" },
    { key: "salary", label: "Salary Management", icon: DollarSign, color: "text-yellow-600", description: "Payroll processing and salary records" }
  ],
  "Business Operations": [
    { key: "vendors", label: "Vendor Management", icon: Building2, color: "text-teal-600", description: "Manage supplier relationships and contacts" },
    { key: "orders", label: "Order Management", icon: Truck, color: "text-indigo-600", description: "Purchase orders and inventory ordering" },
    { key: "delivery", label: "Delivery Management", icon: Truck, color: "text-pink-600", description: "Fuel delivery tracking and management" }
  ],
  "Compliance & Licensing": [
    { key: "licenses", label: "Licenses & Certificates", icon: Shield, color: "text-red-600", description: "Business licenses and regulatory compliance" }
  ],
  "Inventory & Operations": [
    { key: "inventory", label: "Inventory Management", icon: Database, color: "text-cyan-600", description: "Stock levels, alerts, and gas tank monitoring" }
  ],
  "System Administration": [
    { key: "settings", label: "App Settings", icon: Settings, color: "text-gray-600", description: "Application configuration and preferences" },
    { key: "user_management", label: "User Management", icon: UserCheck, color: "text-red-600", description: "User accounts and access control" },
    { key: "site_management", label: "Site Management", icon: Building2, color: "text-blue-600", description: "Multi-station configuration and management" },
    { key: "system_logs", label: "System Logs", icon: FileText, color: "text-gray-600", description: "System activity and audit trails" },
    { key: "security_settings", label: "Security Settings", icon: Shield, color: "text-red-600", description: "Security policies and authentication settings" }
  ]
};
const permissionTypes$1 = [
  { key: "view", label: "View", icon: Eye, description: "Can view and access the content", color: "text-blue-600" },
  { key: "create", label: "Create/Add", icon: Plus, description: "Can create new records using Add buttons", color: "text-green-600" },
  { key: "edit", label: "Edit", icon: SquarePen, description: "Can modify existing records using Edit buttons", color: "text-yellow-600" },
  { key: "delete", label: "Delete", icon: Trash2, description: "Can delete records", color: "text-red-600" },
  { key: "export", label: "Export", icon: FileText, description: "Can export data to files", color: "text-purple-600" },
  { key: "print", label: "Print", icon: FileText, description: "Can print reports and documents", color: "text-indigo-600" }
];
const roleTemplates$1 = {
  Administrator: "Full access to all pages and actions including system administration",
  Management: "Access to operational pages with limited system administration",
  Employee: "Basic access to daily operational pages and reports",
  "Station Manager": "Full access to station operations with limited system access",
  Cashier: "Access to sales reporting and basic inventory viewing",
  "Custom": "Manually configure specific permissions per page"
};
const EnhancedUserPermissionManager = () => {
  const [userProfiles, setUserProfiles] = reactExports.useState([]);
  const [selectedUser, setSelectedUser] = reactExports.useState(null);
  const [permissions, setPermissions] = reactExports.useState({});
  const [loading, setLoading] = reactExports.useState(true);
  const [saving, setSaving] = reactExports.useState(false);
  const [searchTerm, setSearchTerm] = reactExports.useState("");
  const [selectedRole, setSelectedRole] = reactExports.useState("All");
  const [activeTemplate, setActiveTemplate] = reactExports.useState("Custom");
  const [refreshing, setRefreshing] = reactExports.useState(false);
  const { toast } = useToast();
  reactExports.useEffect(() => {
    fetchUserProfiles();
  }, []);
  reactExports.useEffect(() => {
    if (selectedUser) {
      loadUserPermissions(selectedUser);
    }
  }, [selectedUser]);
  const fetchUserProfiles = async () => {
    try {
      setLoading(true);
      console.log("Fetching user profiles from database...");
      const { data, error } = await supabase.from("user_profiles").select("*").eq("is_active", true).order("id", { ascending: false }).limit(100);
      if (error) throw error;
      const profiles = data || [];
      console.log(`Loaded ${profiles.length} active user profiles`);
      setUserProfiles(profiles);
      profiles.forEach((profile) => {
        try {
          const perms = profile.detailed_permissions ? JSON.parse(profile.detailed_permissions) : {};
          const pageCount = Object.keys(perms).length;
          console.log(`User ${profile.employee_id} (${profile.role}): ${pageCount} page permissions configured`);
        } catch (e) {
          console.log(`User ${profile.employee_id} (${profile.role}): No valid permissions configured`);
        }
      });
    } catch (error) {
      console.error("Error fetching user profiles:", error);
      toast({
        title: "Database Error",
        description: `Failed to fetch user profiles: ${error}`,
        variant: "destructive"
      });
    } finally {
      setLoading(false);
    }
  };
  const loadUserPermissions = (user) => {
    try {
      if (user.detailed_permissions) {
        const existingPermissions = JSON.parse(user.detailed_permissions);
        setPermissions(existingPermissions);
        setActiveTemplate("Custom");
      } else {
        applyRoleTemplate(user.role, false);
      }
    } catch (error) {
      console.error("Error parsing permissions:", error);
      applyRoleTemplate(user.role, false);
    }
  };
  const handleUserSelect = (userId) => {
    const user = userProfiles.find((u) => u.id.toString() === userId);
    if (user) {
      setSelectedUser(user);
    }
  };
  const handlePermissionChange = (pageKey, permissionType, value) => {
    setPermissions((prev) => ({
      ...prev,
      [pageKey]: {
        ...prev[pageKey] || defaultPagePermission$1,
        [permissionType]: value
      }
    }));
    setActiveTemplate("Custom");
  };
  const handleBulkPermissionChange = (pageKey, action) => {
    const newPagePermissions = { ...defaultPagePermission$1 };
    switch (action) {
      case "grant_all":
        permissionTypes$1.forEach((type) => {
          newPagePermissions[type.key] = true;
        });
        break;
      case "view_only":
        newPagePermissions.view = true;
        break;
    }
    setPermissions((prev) => ({
      ...prev,
      [pageKey]: newPagePermissions
    }));
    setActiveTemplate("Custom");
  };
  const handleGroupPermissionChange = (groupName, action) => {
    const groupPages = pageGroups$1[groupName] || [];
    const newPermissions = { ...permissions };
    groupPages.forEach((page) => {
      const newPagePermissions = { ...defaultPagePermission$1 };
      switch (action) {
        case "grant_all":
          permissionTypes$1.forEach((type) => {
            newPagePermissions[type.key] = true;
          });
          break;
        case "view_only":
          newPagePermissions.view = true;
          break;
      }
      newPermissions[page.key] = newPagePermissions;
    });
    setPermissions(newPermissions);
    setActiveTemplate("Custom");
  };
  const applyRoleTemplate = (role, showToast = true) => {
    const newPermissions = {};
    Object.values(pageGroups$1).flat().forEach((page) => {
      newPermissions[page.key] = { ...defaultPagePermission$1 };
    });
    switch (role) {
      case "Administrator": {
        Object.keys(newPermissions).forEach((pageKey) => {
          permissionTypes$1.forEach((type) => {
            newPermissions[pageKey][type.key] = true;
          });
        });
        break;
      }
      case "Management": {
        const managementPages = ["dashboard", "products", "employees", "sales_reports", "vendors", "orders", "delivery", "licenses", "inventory", "salary"];
        managementPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            permissionTypes$1.forEach((type) => {
              newPermissions[pageKey][type.key] = true;
            });
          }
        });
        const limitedAdminPages = ["settings", "user_management"];
        limitedAdminPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].edit = true;
          }
        });
        break;
      }
      case "Station Manager": {
        const stationManagerPages = ["dashboard", "products", "sales_reports", "delivery", "inventory"];
        stationManagerPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            permissionTypes$1.forEach((type) => {
              newPermissions[pageKey][type.key] = true;
            });
          }
        });
        const viewOnlyPages = ["employees", "vendors", "orders", "licenses", "salary"];
        viewOnlyPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].export = true;
            newPermissions[pageKey].print = true;
          }
        });
        break;
      }
      case "Employee": {
        const employeePages = ["dashboard", "sales_reports", "delivery"];
        employeePages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].create = true;
            newPermissions[pageKey].edit = true;
          }
        });
        const employeeViewPages = ["products", "inventory"];
        employeeViewPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
          }
        });
        break;
      }
      case "Cashier": {
        newPermissions["dashboard"].view = true;
        newPermissions["sales_reports"].view = true;
        newPermissions["sales_reports"].create = true;
        newPermissions["sales_reports"].edit = true;
        newPermissions["sales_reports"].print = true;
        newPermissions["products"].view = true;
        newPermissions["inventory"].view = true;
        break;
      }
      default: {
        newPermissions["dashboard"].view = true;
        break;
      }
    }
    setPermissions(newPermissions);
    setActiveTemplate(role);
    if (showToast) {
      toast({
        title: "Template Applied",
        description: `${role} permission template has been applied`
      });
    }
  };
  const copyPermissionsFromUser = async (sourceUserId) => {
    const sourceUser = userProfiles.find((u) => u.id === sourceUserId);
    if (sourceUser && sourceUser.detailed_permissions) {
      try {
        const sourcePermissions = JSON.parse(sourceUser.detailed_permissions);
        setPermissions(sourcePermissions);
        setActiveTemplate("Custom");
        toast({
          title: "Permissions Copied",
          description: `Permissions copied from ${sourceUser.employee_id}`
        });
      } catch (error) {
        toast({
          title: "Error",
          description: "Failed to copy permissions",
          variant: "destructive"
        });
      }
    }
  };
  const resetPermissions = () => {
    const resetPerms = {};
    Object.values(pageGroups$1).flat().forEach((page) => {
      resetPerms[page.key] = { ...defaultPagePermission$1 };
    });
    setPermissions(resetPerms);
    setActiveTemplate("Custom");
    toast({
      title: "Permissions Reset",
      description: "All permissions have been reset to default (no access)"
    });
  };
  const savePermissions = async () => {
    if (!selectedUser) {
      toast({
        title: "No User Selected",
        description: "Please select a user first",
        variant: "destructive"
      });
      return;
    }
    setSaving(true);
    try {
      console.log(`Saving permissions for user ${selectedUser.employee_id} (ID: ${selectedUser.id})`);
      console.log("Permissions to save:", permissions);
      const totalPages = Object.keys(permissions).length;
      const pagesWithAccess = Object.values(permissions).filter((p) => p.view).length;
      const permissionsJson = JSON.stringify(permissions);
      const { error } = await supabase.from("user_profiles").update({
        detailed_permissions: permissionsJson
      }).eq("id", selectedUser.id);
      if (error) throw error;
      console.log(`Successfully saved permissions: ${pagesWithAccess}/${totalPages} pages accessible`);
      toast({
        title: "Permissions Saved",
        description: `Updated permissions for ${selectedUser.employee_id}: ${pagesWithAccess}/${totalPages} pages accessible`,
        variant: "default"
      });
      setUserProfiles((prev) => prev.map(
        (user) => user.id === selectedUser.id ? { ...user, detailed_permissions: permissionsJson } : user
      ));
      setSelectedUser((prev) => prev ? { ...prev, detailed_permissions: permissionsJson } : null);
    } catch (error) {
      console.error("Error saving permissions:", error);
      toast({
        title: "Save Failed",
        description: `Failed to save permissions: ${error}`,
        variant: "destructive"
      });
    } finally {
      setSaving(false);
    }
  };
  const getPermissionSummary = (user) => {
    try {
      const userPermissions = user.detailed_permissions ? JSON.parse(user.detailed_permissions) : {};
      const totalPages = Object.values(pageGroups$1).flat().length;
      const pagesWithAccess = Object.values(pageGroups$1).flat().filter(
        (page) => {
          var _a;
          return (_a = userPermissions[page.key]) == null ? void 0 : _a.view;
        }
      ).length;
      const pagesWithEdit = Object.values(pageGroups$1).flat().filter(
        (page) => {
          var _a;
          return (_a = userPermissions[page.key]) == null ? void 0 : _a.edit;
        }
      ).length;
      const pagesWithCreate = Object.values(pageGroups$1).flat().filter(
        (page) => {
          var _a;
          return (_a = userPermissions[page.key]) == null ? void 0 : _a.create;
        }
      ).length;
      return {
        summary: `${pagesWithAccess}/${totalPages} pages`,
        details: `View: ${pagesWithAccess}, Edit: ${pagesWithEdit}, Create: ${pagesWithCreate}`,
        hasAccess: pagesWithAccess > 0
      };
    } catch {
      return {
        summary: "No permissions",
        details: "Invalid permission data",
        hasAccess: false
      };
    }
  };
  const refreshUserData = async () => {
    setRefreshing(true);
    try {
      await fetchUserProfiles();
      toast({
        title: "Data Refreshed",
        description: "User profiles and permissions have been refreshed"
      });
    } catch (error) {
      toast({
        title: "Refresh Failed",
        description: "Failed to refresh user data",
        variant: "destructive"
      });
    } finally {
      setRefreshing(false);
    }
  };
  const filteredUsers = userProfiles.filter((user) => {
    const matchesSearch = user.employee_id.toLowerCase().includes(searchTerm.toLowerCase()) || user.phone.toLowerCase().includes(searchTerm.toLowerCase()) || user.role.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesRole = selectedRole === "All" || user.role === selectedRole;
    return matchesSearch && matchesRole;
  });
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center min-h-64", "data-id": "6fnjevpc9", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-lg", "data-id": "1n1bi5i59", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Loading permission management..." }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-id": "10w8r9gms", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "padav1k3k", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "vdeg5u18n", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-8 h-8 text-blue-600", "data-id": "51kvokg2n", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "umktar53m", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl font-bold text-gray-900", "data-id": "kpk9aj264", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Real-time User Permission Management" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-600", "data-id": "u2nqa0g4n", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Production-level permission management with database integration" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-green-600 font-medium", "data-id": "wnzpptzk2", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            "✓ Connected to live database - ",
            userProfiles.length,
            " active users"
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center space-x-2", "data-id": "xou9lvqty", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          onClick: refreshUserData,
          disabled: refreshing,
          variant: "outline",
          size: "sm",
          "data-id": "s0joddxtz",
          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
          children: [
            refreshing ? /* @__PURE__ */ jsxRuntimeExports.jsx(Loader2, { className: "w-4 h-4 mr-2 animate-spin", "data-id": "ovcvadyyi", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(RotateCcw, { className: "w-4 h-4 mr-2", "data-id": "ceyr6gd0p", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
            refreshing ? "Refreshing..." : "Refresh Data"
          ]
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { "data-id": "n1jdm9k5f", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { "data-id": "ar1wwrpjt", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", "data-id": "qv49bs5rm", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-5 h-5", "data-id": "08xqgbdov", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "rblwgrduz", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Select User & Apply Templates" })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", "data-id": "8i68cb2kv", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", "data-id": "b1bkba8bd", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", "data-id": "8h5fpixkm", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4", "data-id": "1e0dsr6n4", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search users...",
                value: searchTerm,
                onChange: (e) => setSearchTerm(e.target.value),
                className: "pl-10",
                "data-id": "adv8sglcj",
                "data-path": "src/components/EnhancedUserPermissionManager.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedRole, onValueChange: setSelectedRole, "data-id": "75rwvxxg4", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "gd8hwxw8l", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Filter by role", "data-id": "zae5im0x9", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "q2jq592yr", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "All", "data-id": "g9xawfmks", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "All Roles" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Administrator", "data-id": "zykvysf17", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Administrator" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Management", "data-id": "wzsgpgz1d", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Management" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Employee", "data-id": "i0uykngwi", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Employee" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Station Manager", "data-id": "a7iu8uppv", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Station Manager" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Cashier", "data-id": "78zop09aq", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Cashier" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { onValueChange: handleUserSelect, value: (selectedUser == null ? void 0 : selectedUser.id.toString()) || "", "data-id": "kkffvz7fa", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "h7agem55l", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select a user to manage permissions", "data-id": "ski5mdhu3", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "z8hpnejs6", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: filteredUsers.map((user) => {
              const permSummary = getPermissionSummary(user);
              return /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: user.id.toString(), "data-id": "3183hh3bj", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between w-full", "data-id": "k5a68otuy", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col", "data-id": "u8pyviyfl", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { "data-id": "sshos9mux", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                    user.employee_id,
                    " - ",
                    user.role
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-gray-500", "data-id": "4r5z1kr5y", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: user.station })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-end", "data-id": "8f275sa5u", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Badge,
                    {
                      variant: permSummary.hasAccess ? "default" : "secondary",
                      className: "ml-2",
                      "data-id": "3iwchrmbm",
                      "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                      children: permSummary.summary
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-gray-400 mt-1", "data-id": "kvo4a2zo3", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: permSummary.details })
                ] })
              ] }) }, user.id);
            }) })
          ] })
        ] }),
        selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border", "data-id": "clw98lmuz", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "af0zp01ss", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "z056rsvz9", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold text-lg", "data-id": "scjm207ld", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: selectedUser.employee_id }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-600", "data-id": "dtg6sul0s", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              "Role: ",
              selectedUser.role,
              " | Station: ",
              selectedUser.station
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-500 mt-1", "data-id": "rf8bqup0e", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              "User ID: ",
              selectedUser.user_id,
              " | Phone: ",
              selectedUser.phone
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right space-y-2", "data-id": "ep3n5r7cl", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: selectedUser.is_active ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800", "data-id": "dv9vcz2oz", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: selectedUser.is_active ? "Active" : "Inactive" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs text-gray-500", "data-id": "omqnavwp4", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              "Current: ",
              activeTemplate
            ] })
          ] })
        ] }) }),
        selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "1ddkxgsxh", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { className: "text-sm font-medium", "data-id": "3g1b1mal9", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Quick Permission Templates" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2", "data-id": "ewpwmt7y5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: Object.entries(roleTemplates$1).map(
            ([role, description]) => /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: activeTemplate === role ? "default" : "outline",
                size: "sm",
                onClick: () => applyRoleTemplate(role),
                className: "text-xs h-auto py-2 px-3 flex flex-col items-center space-y-1",
                title: description,
                "data-id": "rvhcrc6r8",
                "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", "data-id": "rjtb1t1r7", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: role })
              },
              role
            )
          ) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-wrap gap-2 pt-2 border-t", "data-id": "qu33p9gib", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { onValueChange: (value) => copyPermissionsFromUser(parseInt(value)), "data-id": "fg2vunbxy", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectTrigger, { className: "w-auto", "data-id": "ej26wwbla", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Copy, { className: "w-4 h-4 mr-2", "data-id": "g5nu4jfgy", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Copy from user...", "data-id": "3se1rzkvb", "data-path": "src/components/EnhancedUserPermissionManager.tsx" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "1uzf6w13b", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: userProfiles.filter((u) => u.id !== selectedUser.id).map(
                (user) => /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectItem, { value: user.id.toString(), "data-id": "q5et0urd1", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  user.employee_id,
                  " (",
                  user.role,
                  ")"
                ] }, user.id)
              ) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: resetPermissions,
                className: "text-red-600 hover:text-red-700",
                "data-id": "igi764bpw",
                "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(RotateCcw, { className: "w-4 h-4 mr-2", "data-id": "lkxosp1dl", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                  "Reset All"
                ]
              }
            )
          ] })
        ] })
      ] })
    ] }),
    selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { "data-id": "1dvuxm8a7", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { "data-id": "qrw9e2lb2", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "xnijrxd9r", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", "data-id": "qb27bupt5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-5 h-5", "data-id": "cbpqzsmvf", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { "data-id": "vjbojnuga", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            "Page-Based Permissions for ",
            selectedUser.employee_id
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            onClick: savePermissions,
            disabled: saving || !selectedUser,
            className: "bg-green-600 hover:bg-green-700 disabled:bg-gray-400",
            "data-id": "809hvi7j2",
            "data-path": "src/components/EnhancedUserPermissionManager.tsx",
            children: [
              saving ? /* @__PURE__ */ jsxRuntimeExports.jsx(Loader2, { className: "w-4 h-4 mr-2 animate-spin", "data-id": "mc3qfpe6x", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "w-4 h-4 mr-2", "data-id": "wz1el6h25", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
              saving ? "Saving to Database..." : "Apply & Save Permissions"
            ]
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { "data-id": "p17oa87eq", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Tabs, { defaultValue: "by-groups", className: "w-full", "data-id": "opdz1cm5b", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsList, { className: "grid w-full grid-cols-2", "data-id": "i2itlzw24", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "by-groups", "data-id": "nnkko7gsd", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "By Page Groups" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "matrix-view", "data-id": "a4i9op90g", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Matrix View" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "by-groups", className: "space-y-6", "data-id": "pao2tdj0c", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: Object.entries(pageGroups$1).map(
            ([groupName, pages]) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "border-l-4 border-l-blue-500", "data-id": "fy95pn12k", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { className: "pb-3", "data-id": "8xgc9ymhl", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "n1ij3zwfo", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-lg", "data-id": "gmoyb64h7", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: groupName }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", "data-id": "vnn030err", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(
                    Button,
                    {
                      size: "sm",
                      variant: "outline",
                      onClick: () => handleGroupPermissionChange(groupName, "view_only"),
                      className: "text-blue-600",
                      "data-id": "2tm8n1nto",
                      "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                      children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "w-3 h-3 mr-1", "data-id": "xty9ioqrj", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                        "View Only"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(
                    Button,
                    {
                      size: "sm",
                      variant: "outline",
                      onClick: () => handleGroupPermissionChange(groupName, "grant_all"),
                      className: "text-green-600",
                      "data-id": "78buarcqd",
                      "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                      children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3 mr-1", "data-id": "hwpj4xprb", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                        "Full Access"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(
                    Button,
                    {
                      size: "sm",
                      variant: "outline",
                      onClick: () => handleGroupPermissionChange(groupName, "revoke_all"),
                      className: "text-red-600",
                      "data-id": "v75fnlr25",
                      "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                      children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3 mr-1", "data-id": "zvod5jdx9", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                        "No Access"
                      ]
                    }
                  )
                ] })
              ] }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { "data-id": "d21wl6dzs", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", "data-id": "21a61yren", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: pages.map((page) => {
                const pagePermissions = permissions[page.key] || defaultPagePermission$1;
                return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border rounded-lg p-4", "data-id": "21fxmi61n", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between mb-3", "data-id": "duasnmbqs", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "8gkagaawu", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(page.icon, { className: `w-5 h-5 ${page.color}`, "data-id": "huzaadpj7", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "ipbhkbkdd", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-medium", "data-id": "xzwl0xqrp", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: page.label }),
                        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", "data-id": "b7z3qxg6m", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: page.description })
                      ] })
                    ] }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", "data-id": "s8hfilisx", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleBulkPermissionChange(page.key, "view_only"),
                          className: "text-blue-600 text-xs px-2 py-1",
                          "data-id": "xc0crrn72",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: "View Only"
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleBulkPermissionChange(page.key, "grant_all"),
                          className: "text-green-600 text-xs px-2 py-1",
                          "data-id": "ll5fbw4rz",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3", "data-id": "cvgtp7dxm", "data-path": "src/components/EnhancedUserPermissionManager.tsx" })
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleBulkPermissionChange(page.key, "revoke_all"),
                          className: "text-red-600 text-xs px-2 py-1",
                          "data-id": "32ikpo11g",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3", "data-id": "rw0wpv64k", "data-path": "src/components/EnhancedUserPermissionManager.tsx" })
                        }
                      )
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3", "data-id": "ts6wgbh9a", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: permissionTypes$1.map(
                    (type) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 p-2 border rounded", "data-id": "hisoja0eg", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Switch,
                        {
                          checked: pagePermissions[type.key],
                          onCheckedChange: (checked) => handlePermissionChange(page.key, type.key, checked),
                          id: `${page.key}-${type.key}`,
                          "data-id": "mgi5g9h05",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx"
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Label,
                        {
                          htmlFor: `${page.key}-${type.key}`,
                          className: "text-xs cursor-pointer flex items-center space-x-1",
                          "data-id": "uz6syb1s4",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx(type.icon, { className: `w-3 h-3 ${type.color}`, "data-id": "3q9xcejdu", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "20mwbwuig", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: type.label })
                          ]
                        }
                      )
                    ] }, type.key)
                  ) })
                ] }, page.key);
              }) }) })
            ] }, groupName)
          ) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "matrix-view", "data-id": "8wu1en64l", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "overflow-x-auto", "data-id": "kr8ml6n2a", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", { className: "w-full border-collapse border", "data-id": "hgnqoxn9m", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("thead", { className: "sticky top-0 bg-white z-10", "data-id": "uj4rvjdyb", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b", "data-id": "7o752nmgl", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left p-3 font-semibold bg-white border", "data-id": "dze59nl6l", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Page" }),
              permissionTypes$1.map(
                (type) => /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-center p-3 font-semibold min-w-20 bg-white border", "data-id": "kvgcru78t", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center space-y-1", "data-id": "utr1l7vtj", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(type.icon, { className: `w-4 h-4 ${type.color}`, "data-id": "w89jq4kwo", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs", "data-id": "m2cputfa5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: type.label })
                ] }) }, type.key)
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-center p-3 font-semibold bg-white border", "data-id": "3dzr73pe3", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Quick Actions" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", { "data-id": "swzjp4sxu", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: Object.entries(pageGroups$1).map(
              ([groupName, pages]) => /* @__PURE__ */ jsxRuntimeExports.jsxs(React.Fragment, { "data-id": "736c6gb39", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("tr", { className: "bg-gray-100", "data-id": "koktuu9ze", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("td", { colSpan: permissionTypes$1.length + 2, className: "p-2 font-semibold text-sm border", "data-id": "m7ql1puop", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: groupName }) }),
                pages.map((page) => {
                  const pagePermissions = permissions[page.key] || defaultPagePermission$1;
                  return /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b hover:bg-gray-50", "data-id": "wson7ysnu", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "p-3 border", "data-id": "8y8evko3u", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "niiq2ke0d", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(page.icon, { className: `w-4 h-4 ${page.color}`, "data-id": "76s377sqe", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "nyyo2dvlc", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium text-sm", "data-id": "75es75djg", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: page.label }),
                        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", "data-id": "swv94siap", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: page.description })
                      ] })
                    ] }) }),
                    permissionTypes$1.map(
                      (type) => /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "text-center p-3 border", "data-id": "ysow3myla", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Switch,
                        {
                          checked: pagePermissions[type.key],
                          onCheckedChange: (checked) => handlePermissionChange(page.key, type.key, checked),
                          "data-id": "zgt53qv12",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx"
                        }
                      ) }, type.key)
                    ),
                    /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "text-center p-3 border", "data-id": "6pa4pswm5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-1 justify-center", "data-id": "g6a59hbfm", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleBulkPermissionChange(page.key, "grant_all"),
                          className: "text-green-600 hover:text-green-700",
                          title: "Grant all permissions",
                          "data-id": "gsjoimdvz",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3", "data-id": "qxr82eth3", "data-path": "src/components/EnhancedUserPermissionManager.tsx" })
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleBulkPermissionChange(page.key, "revoke_all"),
                          className: "text-red-600 hover:text-red-700",
                          title: "Revoke all permissions",
                          "data-id": "zzs54gnyn",
                          "data-path": "src/components/EnhancedUserPermissionManager.tsx",
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3", "data-id": "dow5i2bho", "data-path": "src/components/EnhancedUserPermissionManager.tsx" })
                        }
                      )
                    ] }) })
                  ] }, page.key);
                })
              ] }, groupName)
            ) })
          ] }) }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200", "data-id": "5xv2y8uk5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold mb-3 flex items-center", "data-id": "9e91fspzk", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-4 h-4 mr-2 text-green-600", "data-id": "hlsrnqef7", "data-path": "src/components/EnhancedUserPermissionManager.tsx" }),
            "Live Permission Management Status"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 text-sm", "data-id": "o2c127mv9", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "45g1eojbi", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium mb-2 text-green-700", "data-id": "utsji1o28", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Real-time Features:" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "space-y-1 text-gray-600", "data-id": "o45hosy0n", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "0qyip4n8c", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "✓ ",
                  /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "un5jls8u6", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Live Database:" }),
                  " Direct integration with user_profiles table"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "cuuigosg3", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "✓ ",
                  /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "pp4xc83v5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Instant Updates:" }),
                  " Changes applied immediately"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "8nk8s5txu", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "✓ ",
                  /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "p9gftmcr4", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Production Ready:" }),
                  " No fake data or mock content"
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "n8ddzcz1o", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium mb-2 text-blue-700", "data-id": "4cytg8ai6", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Current User:" }),
              selectedUser ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-1", "data-id": "znugouu3d", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "default", className: "mb-1", "data-id": "7pho6k29t", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: selectedUser.employee_id }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "iine48raj", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "Role: ",
                  selectedUser.role
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "rg6zd37g9", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "Station: ",
                  selectedUser.station
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "sl5fg4va2", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  "Template: ",
                  activeTemplate
                ] })
              ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-500 text-xs", "data-id": "mr64qja8x", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "No user selected" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "94v5cevd8", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium mb-2 text-purple-700", "data-id": "rs8ypygtu", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Permission Stats:" }),
              selectedUser ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-1", "data-id": "so1yufab8", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: (() => {
                const summary = getPermissionSummary(selectedUser);
                return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "7rx17hmdd", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "mb-1", "data-id": "rpujmmfh5", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: summary.summary }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-600", "data-id": "higpvnm7y", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: summary.details }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-green-600 mt-1", "data-id": "5zxfqslen", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "✓ Permissions loaded from database" })
                ] });
              })() }) : /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-500 text-xs", "data-id": "bpv99edfn", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Select a user to view permission stats" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 pt-3 border-t border-green-200", "data-id": "kxo2fzg11", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "pkx8mnd25", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "2ytwsqt8w", "data-path": "src/components/EnhancedUserPermissionManager.tsx", children: "Important:" }),
            ' All permission changes are saved directly to the production database. Make sure to click "Apply & Save Permissions" to commit your changes.'
          ] }) })
        ] })
      ] })
    ] })
  ] });
};
const defaultPagePermission = {
  view: false,
  create: false,
  edit: false,
  delete: false,
  export: false,
  print: false,
  approve: false,
  bulk_operations: false,
  advanced_features: false
};
const pageGroups = {
  "Core Operations": [
    {
      key: "dashboard",
      label: "Dashboard",
      icon: BarChart3,
      color: "text-blue-600",
      description: "Main overview, analytics, quick access toolbar",
      features: ["View reports", "Quick actions", "Analytics widgets"]
    },
    {
      key: "products",
      label: "Products Management",
      icon: Package,
      color: "text-green-600",
      description: "Product inventory, pricing, barcode scanning",
      features: ["Add/Edit products", "Barcode scanning", "Price management", "Stock tracking"]
    },
    {
      key: "product_form",
      label: "Product Form",
      icon: SquarePen,
      color: "text-green-500",
      description: "Add and edit individual product records",
      features: ["Product creation", "Information editing", "File uploads"]
    }
  ],
  "Sales & Reporting": [
    {
      key: "sales_reports",
      label: "Sales Reports List",
      icon: FileText,
      color: "text-orange-600",
      description: "Daily sales reporting, enhanced print dialogs",
      features: ["View sales reports", "Print enhanced reports", "Export data"]
    },
    {
      key: "sales_report_form",
      label: "Sales Report Form",
      icon: SquarePen,
      color: "text-orange-500",
      description: "Create and edit daily sales reports",
      features: ["Gas/grocery sales", "Lottery sales", "Expenses", "Document uploads", "Cash collection"]
    }
  ],
  "Human Resources": [
    {
      key: "employees",
      label: "Employee List",
      icon: Users,
      color: "text-purple-600",
      description: "Employee records and information management",
      features: ["View employees", "Add/Edit employees", "Search/Filter"]
    },
    {
      key: "employee_form",
      label: "Employee Form",
      icon: UserCheck,
      color: "text-purple-500",
      description: "Add and edit employee records with file uploads",
      features: ["Employee creation", "Document uploads", "Contact management"]
    },
    {
      key: "salary",
      label: "Salary List",
      icon: DollarSign,
      color: "text-yellow-600",
      description: "Payroll processing and salary records",
      features: ["View salary records", "Pay period management", "Export reports"]
    },
    {
      key: "salary_form",
      label: "Salary Form",
      icon: Calendar,
      color: "text-yellow-500",
      description: "Create and edit salary records",
      features: ["Payroll processing", "Deduction calculations", "Pay period setup"]
    }
  ],
  "Business Operations": [
    {
      key: "vendors",
      label: "Vendor List",
      icon: Building2,
      color: "text-teal-600",
      description: "Supplier relationships and vendor contacts",
      features: ["View vendors", "Add/Edit vendors", "Contact management"]
    },
    {
      key: "vendor_form",
      label: "Vendor Form",
      icon: Building2,
      color: "text-teal-500",
      description: "Add and edit vendor information",
      features: ["Vendor creation", "Contact details", "Payment terms"]
    },
    {
      key: "orders",
      label: "Order List",
      icon: Truck,
      color: "text-indigo-600",
      description: "Purchase orders and inventory ordering",
      features: ["View orders", "Order tracking", "Status management"]
    },
    {
      key: "order_form",
      label: "Order Form",
      icon: Archive,
      color: "text-indigo-500",
      description: "Create and edit purchase orders",
      features: ["Order creation", "Item selection", "Vendor management"]
    }
  ],
  "Delivery & Inventory": [
    {
      key: "delivery",
      label: "Delivery List",
      icon: Truck,
      color: "text-pink-600",
      description: "Fuel delivery tracking with enhanced print dialogs",
      features: ["View deliveries", "Enhanced print reports", "BOL tracking"]
    },
    {
      key: "delivery_form",
      label: "Delivery Form",
      icon: Map,
      color: "text-pink-500",
      description: "Create and edit delivery records",
      features: ["Delivery creation", "Tank volume tracking", "BOL management"]
    },
    {
      key: "inventory_alerts",
      label: "Inventory Alerts",
      icon: Bell,
      color: "text-red-600",
      description: "Stock level alerts and notifications",
      features: ["View alerts", "Stock monitoring", "Alert management"]
    },
    {
      key: "alert_settings",
      label: "Alert Settings",
      icon: Settings,
      color: "text-red-500",
      description: "Configure inventory alert thresholds",
      features: ["Alert configuration", "Threshold settings", "Notification preferences"]
    },
    {
      key: "gas_delivery_inventory",
      label: "Gas Delivery Inventory",
      icon: Database,
      color: "text-cyan-600",
      description: "Gas tank monitoring and delivery tracking",
      features: ["Tank levels", "Delivery tracking", "Volume calculations"]
    }
  ],
  "Compliance & Licensing": [
    {
      key: "licenses",
      label: "License List",
      icon: Shield,
      color: "text-red-600",
      description: "Business licenses and regulatory compliance with enhanced print",
      features: ["View licenses", "Enhanced print dialogs", "Expiry tracking"]
    },
    {
      key: "license_form",
      label: "License Form",
      icon: CheckSquare,
      color: "text-red-500",
      description: "Add and edit license records with file uploads",
      features: ["License creation", "Document uploads", "Expiry management"]
    }
  ],
  "System Administration": [
    {
      key: "settings",
      label: "App Settings",
      icon: Settings,
      color: "text-gray-600",
      description: "Application configuration, image compression, demo features",
      features: ["App configuration", "Image compression settings", "System preferences"]
    },
    {
      key: "user_management",
      label: "User Management",
      icon: UserCheck,
      color: "text-red-600",
      description: "User accounts, permission management, enhanced controls",
      features: ["User accounts", "Permission management", "Enhanced controls"]
    },
    {
      key: "site_management",
      label: "Site Management",
      icon: Building2,
      color: "text-blue-600",
      description: "Multi-station configuration and management",
      features: ["Station configuration", "Site settings", "Multi-location management"]
    },
    {
      key: "system_logs",
      label: "System Logs",
      icon: FileText,
      color: "text-gray-600",
      description: "System activity and audit trails",
      features: ["Activity logs", "Audit trails", "System monitoring"]
    },
    {
      key: "security_settings",
      label: "Security Settings",
      icon: Shield,
      color: "text-red-600",
      description: "Security policies and authentication settings",
      features: ["Security policies", "Authentication settings", "Access controls"]
    }
  ]
};
const permissionTypes = [
  { key: "view", label: "View", icon: Eye, description: "Can view and access the page/content", color: "text-blue-600" },
  { key: "create", label: "Add/Create", icon: Plus, description: "Can use Add buttons and create new records", color: "text-green-600" },
  { key: "edit", label: "Edit/Modify", icon: SquarePen, description: "Can use Edit buttons and modify existing records", color: "text-yellow-600" },
  { key: "delete", label: "Delete", icon: Trash2, description: "Can delete records and use delete buttons", color: "text-red-600" },
  { key: "export", label: "Export", icon: Download, description: "Can export data to files (CSV, Excel, etc.)", color: "text-purple-600" },
  { key: "print", label: "Print", icon: Printer, description: "Can print reports and use enhanced print dialogs", color: "text-indigo-600" },
  { key: "approve", label: "Approve", icon: CheckCircle2, description: "Can approve transactions and records", color: "text-green-700" },
  { key: "bulk_operations", label: "Bulk Ops", icon: MoreHorizontal, description: "Can perform bulk operations on multiple records", color: "text-orange-600" },
  { key: "advanced_features", label: "Advanced", icon: Settings, description: "Can access advanced features and configurations", color: "text-gray-700" }
];
const roleTemplates = {
  Administrator: "Full system access including all pages, buttons, and administrative functions",
  Management: "Full operational access with limited system administration capabilities",
  "Station Manager": "Complete station operations with inventory, sales, and delivery management",
  Employee: "Basic operational access to daily tasks and reporting",
  Cashier: "Sales reporting and basic inventory viewing with limited editing",
  "Custom": "Manually configured permissions for specific business needs"
};
const ComprehensivePermissionDialog = ({
  trigger,
  selectedUserId
}) => {
  const [userProfiles, setUserProfiles] = reactExports.useState([]);
  const [selectedUser, setSelectedUser] = reactExports.useState(null);
  const [permissions, setPermissions] = reactExports.useState({});
  const [loading, setLoading] = reactExports.useState(true);
  const [saving, setSaving] = reactExports.useState(false);
  const [searchTerm, setSearchTerm] = reactExports.useState("");
  const [selectedRole, setSelectedRole] = reactExports.useState("All");
  const [activeTemplate, setActiveTemplate] = reactExports.useState("Custom");
  const [open, setOpen] = reactExports.useState(false);
  const { toast } = useToast();
  reactExports.useEffect(() => {
    if (open) {
      fetchUserProfiles();
    }
  }, [open]);
  reactExports.useEffect(() => {
    if (selectedUser) {
      loadUserPermissions(selectedUser);
    }
  }, [selectedUser]);
  reactExports.useEffect(() => {
    if (selectedUserId && userProfiles.length > 0) {
      const user = userProfiles.find((u) => u.id === selectedUserId);
      if (user) {
        setSelectedUser(user);
      }
    }
  }, [selectedUserId, userProfiles]);
  const fetchUserProfiles = async () => {
    try {
      setLoading(true);
      const { data, error } = await window.ezsite.apis.tablePage(11725, {
        PageNo: 1,
        PageSize: 100,
        OrderByField: "id",
        IsAsc: false,
        Filters: []
      });
      if (error) throw error;
      setUserProfiles((data == null ? void 0 : data.List) || []);
    } catch (error) {
      console.error("Error fetching user profiles:", error);
      toast({
        title: "Error",
        description: `Failed to fetch user profiles: ${error}`,
        variant: "destructive"
      });
    } finally {
      setLoading(false);
    }
  };
  const loadUserPermissions = (user) => {
    try {
      if (user.detailed_permissions) {
        const existingPermissions = JSON.parse(user.detailed_permissions);
        setPermissions(existingPermissions);
        setActiveTemplate("Custom");
      } else {
        applyRoleTemplate(user.role, false);
      }
    } catch (error) {
      console.error("Error parsing permissions:", error);
      applyRoleTemplate(user.role, false);
    }
  };
  const handleUserSelect = (userId) => {
    const user = userProfiles.find((u) => u.id.toString() === userId);
    if (user) {
      setSelectedUser(user);
    }
  };
  const handlePermissionChange = (pageKey, permissionType, value) => {
    setPermissions((prev) => ({
      ...prev,
      [pageKey]: {
        ...prev[pageKey] || defaultPagePermission,
        [permissionType]: value
      }
    }));
    setActiveTemplate("Custom");
  };
  const handleBulkPermissionChange = (pageKey, action) => {
    const newPagePermissions = { ...defaultPagePermission };
    switch (action) {
      case "grant_all":
        permissionTypes.forEach((type) => {
          newPagePermissions[type.key] = true;
        });
        break;
      case "operational":
        newPagePermissions.view = true;
        newPagePermissions.create = true;
        newPagePermissions.edit = true;
        newPagePermissions.export = true;
        newPagePermissions.print = true;
        break;
      case "view_only":
        newPagePermissions.view = true;
        newPagePermissions.export = true;
        break;
    }
    setPermissions((prev) => ({
      ...prev,
      [pageKey]: newPagePermissions
    }));
    setActiveTemplate("Custom");
  };
  const handleGroupPermissionChange = (groupName, action) => {
    const groupPages = pageGroups[groupName] || [];
    const newPermissions = { ...permissions };
    groupPages.forEach((page) => {
      const newPagePermissions = { ...defaultPagePermission };
      switch (action) {
        case "grant_all":
          permissionTypes.forEach((type) => {
            newPagePermissions[type.key] = true;
          });
          break;
        case "operational":
          newPagePermissions.view = true;
          newPagePermissions.create = true;
          newPagePermissions.edit = true;
          newPagePermissions.export = true;
          newPagePermissions.print = true;
          break;
        case "view_only":
          newPagePermissions.view = true;
          newPagePermissions.export = true;
          break;
      }
      newPermissions[page.key] = newPagePermissions;
    });
    setPermissions(newPermissions);
    setActiveTemplate("Custom");
  };
  const applyRoleTemplate = (role, showToast = true) => {
    const newPermissions = {};
    Object.values(pageGroups).flat().forEach((page) => {
      newPermissions[page.key] = { ...defaultPagePermission };
    });
    switch (role) {
      case "Administrator":
        Object.keys(newPermissions).forEach((pageKey) => {
          permissionTypes.forEach((type) => {
            newPermissions[pageKey][type.key] = true;
          });
        });
        break;
      case "Management": {
        const managementPages = [
          "dashboard",
          "products",
          "product_form",
          "employees",
          "employee_form",
          "sales_reports",
          "sales_report_form",
          "vendors",
          "vendor_form",
          "orders",
          "order_form",
          "delivery",
          "delivery_form",
          "licenses",
          "license_form",
          "inventory_alerts",
          "alert_settings",
          "gas_delivery_inventory",
          "salary",
          "salary_form"
        ];
        managementPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            permissionTypes.forEach((type) => {
              newPermissions[pageKey][type.key] = true;
            });
          }
        });
        const limitedAdminPages = ["settings", "user_management"];
        limitedAdminPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].edit = true;
            newPermissions[pageKey].export = true;
          }
        });
        break;
      }
      case "Station Manager": {
        const stationManagerPages = [
          "dashboard",
          "products",
          "product_form",
          "sales_reports",
          "sales_report_form",
          "delivery",
          "delivery_form",
          "inventory_alerts",
          "alert_settings",
          "gas_delivery_inventory"
        ];
        stationManagerPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            permissionTypes.slice(0, 6).forEach((type) => {
              newPermissions[pageKey][type.key] = true;
            });
          }
        });
        const viewOnlyPages = ["employees", "employee_form", "vendors", "vendor_form", "orders", "order_form", "licenses", "license_form", "salary"];
        viewOnlyPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].export = true;
            newPermissions[pageKey].print = true;
          }
        });
        break;
      }
      case "Employee": {
        const employeePages = ["dashboard", "sales_reports", "sales_report_form", "delivery", "delivery_form"];
        employeePages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
            newPermissions[pageKey].create = true;
            newPermissions[pageKey].edit = true;
            newPermissions[pageKey].print = true;
          }
        });
        const employeeViewPages = ["products", "inventory_alerts", "gas_delivery_inventory"];
        employeeViewPages.forEach((pageKey) => {
          if (newPermissions[pageKey]) {
            newPermissions[pageKey].view = true;
          }
        });
        break;
      }
      case "Cashier": {
        newPermissions["dashboard"].view = true;
        newPermissions["sales_reports"].view = true;
        newPermissions["sales_reports"].export = true;
        newPermissions["sales_reports"].print = true;
        newPermissions["sales_report_form"].view = true;
        newPermissions["sales_report_form"].create = true;
        newPermissions["sales_report_form"].edit = true;
        newPermissions["products"].view = true;
        newPermissions["inventory_alerts"].view = true;
        newPermissions["gas_delivery_inventory"].view = true;
        break;
      }
      default: {
        newPermissions["dashboard"].view = true;
        break;
      }
    }
    setPermissions(newPermissions);
    setActiveTemplate(role);
    if (showToast) {
      toast({
        title: "Template Applied",
        description: `${role} permission template has been applied`
      });
    }
  };
  const savePermissions = async () => {
    if (!selectedUser) return;
    setSaving(true);
    try {
      const { error } = await window.ezsite.apis.tableUpdate(11725, {
        id: selectedUser.id,
        detailed_permissions: JSON.stringify(permissions)
      });
      if (error) throw error;
      toast({
        title: "Success",
        description: "User permissions updated successfully"
      });
      setUserProfiles((prev) => prev.map(
        (user) => user.id === selectedUser.id ? { ...user, detailed_permissions: JSON.stringify(permissions) } : user
      ));
    } catch (error) {
      console.error("Error saving permissions:", error);
      toast({
        title: "Error",
        description: `Failed to save permissions: ${error}`,
        variant: "destructive"
      });
    } finally {
      setSaving(false);
    }
  };
  const getPermissionSummary = (user) => {
    try {
      const userPermissions = user.detailed_permissions ? JSON.parse(user.detailed_permissions) : {};
      const totalPages = Object.values(pageGroups).flat().length;
      const pagesWithAccess = Object.values(pageGroups).flat().filter(
        (page) => {
          var _a;
          return (_a = userPermissions[page.key]) == null ? void 0 : _a.view;
        }
      ).length;
      return `${pagesWithAccess}/${totalPages}`;
    } catch {
      return "0";
    }
  };
  const filteredUsers = userProfiles.filter((user) => {
    const matchesSearch = user.employee_id.toLowerCase().includes(searchTerm.toLowerCase()) || user.phone.toLowerCase().includes(searchTerm.toLowerCase()) || user.role.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesRole = selectedRole === "All" || user.role === selectedRole;
    return matchesSearch && matchesRole;
  });
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Dialog, { open, onOpenChange: setOpen, "data-id": "65ijpc519", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTrigger, { asChild: true, "data-id": "w0p2pa39c", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: trigger }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-7xl h-[90vh] overflow-hidden", "data-id": "57swavewo", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { "data-id": "3q72qb9qv", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center space-x-2", "data-id": "miwd1ea8c", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-6 h-6 text-blue-600", "data-id": "17al0u436", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "jruh2d8ww", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Comprehensive User Permission Management" })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1 overflow-hidden", "data-id": "2sjgfn073", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollArea, { className: "h-full", "data-id": "d42nlfv1b", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6 pr-4", "data-id": "rdfabz9dm", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { "data-id": "t64xa0b1n", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { "data-id": "dhcxbs3ge", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", "data-id": "kkrzm8l67", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-5 h-5", "data-id": "a1aotr2ha", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "0ayes67ja", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Select User & Apply Templates" })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "space-y-4", "data-id": "xjkuoqmy1", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-4", "data-id": "i81u1xj05", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Loading users..." }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", "data-id": "cx8swhnw9", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", "data-id": "oo6z6tn8s", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4", "data-id": "tf16uj5b5", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    placeholder: "Search users...",
                    value: searchTerm,
                    onChange: (e) => setSearchTerm(e.target.value),
                    className: "pl-10",
                    "data-id": "m1qq0gdib",
                    "data-path": "src/components/ComprehensivePermissionDialog.tsx"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedRole, onValueChange: setSelectedRole, "data-id": "7uph4xx10", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "j2ezsex0m", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Filter by role", "data-id": "ibg5dgg8z", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "hmdfkprmq", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "All", "data-id": "8ajr5gqng", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "All Roles" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Administrator", "data-id": "10qhcjbcr", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Administrator" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Management", "data-id": "540yf0ibw", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Management" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Station Manager", "data-id": "vfq0gv00q", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Station Manager" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Employee", "data-id": "sqiw8k60h", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Employee" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "Cashier", "data-id": "m1ismj212", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Cashier" })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { onValueChange: handleUserSelect, value: (selectedUser == null ? void 0 : selectedUser.id.toString()) || "", "data-id": "1z0d2krv5", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "bpoyr3pkf", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select user to manage", "data-id": "e05ckscra", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "89ugdlkz6", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: filteredUsers.map(
                  (user) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: user.id.toString(), "data-id": "r9v6xw1f9", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between w-full", "data-id": "i7kxkslmq", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { "data-id": "7ufhbumdf", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      user.employee_id,
                      " - ",
                      user.role
                    ] }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "ml-2", "data-id": "bzw0hdu9q", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: getPermissionSummary(user) })
                  ] }) }, user.id)
                ) })
              ] })
            ] }),
            selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border", "data-id": "vrmad2njy", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "3qatnapuy", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "23a415qib", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold text-lg", "data-id": "3bzgl6siv", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: selectedUser.employee_id }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-600", "data-id": "a54ozgoag", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  "Role: ",
                  selectedUser.role,
                  " | Station: ",
                  selectedUser.station
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right space-y-2", "data-id": "gwc6gfbor", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: selectedUser.is_active ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800", "data-id": "aqq4duvno", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: selectedUser.is_active ? "Active" : "Inactive" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs text-gray-500", "data-id": "ji6s5oo5e", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  "Template: ",
                  activeTemplate
                ] })
              ] })
            ] }) }),
            selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "rpfkktohg", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { className: "text-sm font-medium", "data-id": "ztjbw2uz4", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Quick Permission Templates" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2", "data-id": "ijl9kw5mn", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: Object.entries(roleTemplates).map(
                ([role, description]) => /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    variant: activeTemplate === role ? "default" : "outline",
                    size: "sm",
                    onClick: () => applyRoleTemplate(role),
                    className: "text-xs h-auto py-2 px-3 flex flex-col items-center space-y-1",
                    title: description,
                    "data-id": "lcb8g35zr",
                    "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", "data-id": "0r23yrq60", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: role })
                  },
                  role
                )
              ) })
            ] })
          ] }) })
        ] }),
        selectedUser && /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { "data-id": "m50cf9ils", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { "data-id": "1nyq616tl", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "v194dmy7d", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", "data-id": "mmtj50py7", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-5 h-5", "data-id": "2pkyq4epm", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { "data-id": "42qpmtixd", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                "Detailed Permissions for ",
                selectedUser.employee_id
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                onClick: savePermissions,
                disabled: saving,
                className: "bg-blue-600 hover:bg-blue-700",
                "data-id": "ih2t9uox4",
                "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "w-4 h-4 mr-2", "data-id": "rv3ebknf7", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                  saving ? "Saving..." : "Save Permissions"
                ]
              }
            )
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { "data-id": "5xbl3su13", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Tabs, { defaultValue: "by-groups", className: "w-full", "data-id": "z2owbua49", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsList, { className: "grid w-full grid-cols-2", "data-id": "tulwshqgk", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "by-groups", "data-id": "g8bs793wa", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "By Page Groups" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "matrix-view", "data-id": "ljq0qswwu", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Matrix View" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "by-groups", className: "space-y-6", "data-id": "rwjh785eb", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: Object.entries(pageGroups).map(
                ([groupName, pages]) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "border-l-4 border-l-blue-500", "data-id": "na9jpmpg4", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { className: "pb-3", "data-id": "bkev4dcl5", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "vjouhlp6a", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-lg", "data-id": "fd0j4qppm", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: groupName }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", "data-id": "b7m3lb4f0", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleGroupPermissionChange(groupName, "view_only"),
                          className: "text-blue-600",
                          "data-id": "0eoiyw2pn",
                          "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "w-3 h-3 mr-1", "data-id": "p4m33kjzb", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                            "View Only"
                          ]
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleGroupPermissionChange(groupName, "operational"),
                          className: "text-orange-600",
                          "data-id": "1jl677xrm",
                          "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx(Settings, { className: "w-3 h-3 mr-1", "data-id": "63er8dh1i", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                            "Operational"
                          ]
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleGroupPermissionChange(groupName, "grant_all"),
                          className: "text-green-600",
                          "data-id": "2ywtbeiwj",
                          "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3 mr-1", "data-id": "t1khxcta1", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                            "Full Access"
                          ]
                        }
                      ),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          onClick: () => handleGroupPermissionChange(groupName, "revoke_all"),
                          className: "text-red-600",
                          "data-id": "mjo6qnoyc",
                          "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3 mr-1", "data-id": "ek7vo82yj", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                            "No Access"
                          ]
                        }
                      )
                    ] })
                  ] }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { "data-id": "b9qt7grgh", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", "data-id": "d9p2qu1t2", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: pages.map((page) => {
                    const pagePermissions = permissions[page.key] || defaultPagePermission;
                    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border rounded-lg p-4", "data-id": "amfgv2emn", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between mb-3", "data-id": "vwu5vr6dt", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "5h6m5331o", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(page.icon, { className: `w-5 h-5 ${page.color}`, "data-id": "425c757qk", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "9gklx3f6c", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-medium", "data-id": "fkdwkjvjp", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: page.label }),
                            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", "data-id": "7t2womzw1", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: page.description }),
                            page.features && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-1", "data-id": "x929q0kqd", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: page.features.map(
                              (feature, idx) => /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs mr-1 mb-1", "data-id": "nocf6qsat", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: feature }, idx)
                            ) })
                          ] })
                        ] }),
                        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-1", "data-id": "uttldrycc", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "view_only"),
                              className: "text-blue-600 text-xs px-2 py-1",
                              "data-id": "drea5ej0p",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: "View"
                            }
                          ),
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "operational"),
                              className: "text-orange-600 text-xs px-2 py-1",
                              "data-id": "hiteu6adm",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: "Ops"
                            }
                          ),
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "grant_all"),
                              className: "text-green-600 text-xs px-2 py-1",
                              "data-id": "zezd2358l",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3", "data-id": "wjnc3u6s8", "data-path": "src/components/ComprehensivePermissionDialog.tsx" })
                            }
                          ),
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "revoke_all"),
                              className: "text-red-600 text-xs px-2 py-1",
                              "data-id": "459fs5oxp",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3", "data-id": "y646avx3x", "data-path": "src/components/ComprehensivePermissionDialog.tsx" })
                            }
                          )
                        ] })
                      ] }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-9 gap-3", "data-id": "r2aksgd4v", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: permissionTypes.map(
                        (type) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 p-2 border rounded", "data-id": "97lela3ds", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Switch,
                            {
                              checked: pagePermissions[type.key] || false,
                              onCheckedChange: (checked) => handlePermissionChange(page.key, type.key, checked),
                              id: `${page.key}-${type.key}`,
                              "data-id": "7yntyt1zu",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx"
                            }
                          ),
                          /* @__PURE__ */ jsxRuntimeExports.jsxs(
                            Label,
                            {
                              htmlFor: `${page.key}-${type.key}`,
                              className: "text-xs cursor-pointer flex items-center space-x-1",
                              "data-id": "hbth1zjx7",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: [
                                /* @__PURE__ */ jsxRuntimeExports.jsx(type.icon, { className: `w-3 h-3 ${type.color}`, "data-id": "52115gmps", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "1ke0hot6s", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: type.label })
                              ]
                            }
                          )
                        ] }, type.key)
                      ) })
                    ] }, page.key);
                  }) }) })
                ] }, groupName)
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "matrix-view", "data-id": "2m4m8h65q", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "overflow-x-auto", "data-id": "gm1jgog86", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", { className: "w-full border-collapse border", "data-id": "oclvx4nvd", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("thead", { className: "sticky top-0 bg-white z-10", "data-id": "l97e6jtm6", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b", "data-id": "vhg1dacuc", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left p-3 font-semibold bg-white border min-w-48", "data-id": "ilea1axjs", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Page" }),
                  permissionTypes.map(
                    (type) => /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-center p-3 font-semibold min-w-20 bg-white border", "data-id": "buwz8ws85", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center space-y-1", "data-id": "6n4ljevv7", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(type.icon, { className: `w-4 h-4 ${type.color}`, "data-id": "jxmk61pl0", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs", "data-id": "u01sfky5w", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: type.label })
                    ] }) }, type.key)
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-center p-3 font-semibold bg-white border", "data-id": "z44dq8444", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Quick Actions" })
                ] }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", { "data-id": "jiyb20u9g", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: Object.entries(pageGroups).map(
                  ([groupName, pages]) => /* @__PURE__ */ jsxRuntimeExports.jsxs(React.Fragment, { "data-id": "9ifr6svyw", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("tr", { className: "bg-gray-100", "data-id": "ame0uo5lj", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("td", { colSpan: permissionTypes.length + 2, className: "p-2 font-semibold text-sm border", "data-id": "5ycrcryrk", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: groupName }) }),
                    pages.map((page) => {
                      const pagePermissions = permissions[page.key] || defaultPagePermission;
                      return /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b hover:bg-gray-50", "data-id": "nvvxoe8jm", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "p-3 border", "data-id": "we88sfb8s", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "9foxjqckw", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(page.icon, { className: `w-4 h-4 ${page.color}`, "data-id": "3w6vgxh8w", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "aavaiv7nk", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium text-sm", "data-id": "p3yz4wlxk", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: page.label }),
                            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", "data-id": "o3hxwrc6j", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: page.description })
                          ] })
                        ] }) }),
                        permissionTypes.map(
                          (type) => /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "text-center p-3 border", "data-id": "hd295cxad", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Switch,
                            {
                              checked: pagePermissions[type.key] || false,
                              onCheckedChange: (checked) => handlePermissionChange(page.key, type.key, checked),
                              "data-id": "tvu9zocux",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx"
                            }
                          ) }, type.key)
                        ),
                        /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "text-center p-3 border", "data-id": "d5sdjeo3s", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-1 justify-center", "data-id": "vt741ur4x", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "grant_all"),
                              className: "text-green-600 hover:text-green-700",
                              title: "Grant all permissions",
                              "data-id": "zx1txtzki",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckCircle2, { className: "w-3 h-3", "data-id": "nitlki05w", "data-path": "src/components/ComprehensivePermissionDialog.tsx" })
                            }
                          ),
                          /* @__PURE__ */ jsxRuntimeExports.jsx(
                            Button,
                            {
                              size: "sm",
                              variant: "outline",
                              onClick: () => handleBulkPermissionChange(page.key, "revoke_all"),
                              className: "text-red-600 hover:text-red-700",
                              title: "Revoke all permissions",
                              "data-id": "dgzg4e49t",
                              "data-path": "src/components/ComprehensivePermissionDialog.tsx",
                              children: /* @__PURE__ */ jsxRuntimeExports.jsx(XCircle, { className: "w-3 h-3", "data-id": "z9z3k64lt", "data-path": "src/components/ComprehensivePermissionDialog.tsx" })
                            }
                          )
                        ] }) })
                      ] }, page.key);
                    })
                  ] }, groupName)
                ) })
              ] }) }) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-6 p-4 bg-blue-50 rounded-lg", "data-id": "romfo2syl", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold mb-3 flex items-center", "data-id": "ocpgwi9k8", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(AlertTriangle, { className: "w-4 h-4 mr-2 text-blue-600", "data-id": "nc6feid33", "data-path": "src/components/ComprehensivePermissionDialog.tsx" }),
                "Permission Summary & Add/Edit Button Controls"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 text-sm", "data-id": "pwwle4ecx", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "k5mes00mw", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium mb-2", "data-id": "ekez0lf4s", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Button Controls:" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "space-y-1 text-gray-600", "data-id": "s5batcs6o", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "fv0r1ve3m", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      "• ",
                      /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "k35kp52ld", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Add/Create:" }),
                      ' Controls "Add" buttons throughout the system'
                    ] }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "y754em1vx", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      "• ",
                      /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "y6sn00lcq", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Edit/Modify:" }),
                      ' Controls "Edit" buttons and modification features'
                    ] }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "9uc9syvwq", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      "• ",
                      /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "ao9qwaphl", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Delete:" }),
                      " Controls delete actions and buttons"
                    ] }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { "data-id": "mrvdrmbtu", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                      "• ",
                      /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { "data-id": "v8dvsc207", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Print:" }),
                      " Controls enhanced print dialogs and report printing"
                    ] })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "wqwqyp7vf", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium mb-2", "data-id": "1h43a9kvy", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: "Current Configuration:" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "mb-2", "data-id": "8jugrerrk", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: activeTemplate }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-600 text-xs", "data-id": "u5nw4ctt5", "data-path": "src/components/ComprehensivePermissionDialog.tsx", children: roleTemplates[activeTemplate] || "Custom permissions configured" })
                ] })
              ] })
            ] })
          ] })
        ] })
      ] }) }) })
    ] })
  ] });
};
const CreateUserDialog = ({ isOpen, onClose, onUserCreated }) => {
  const { toast } = useToast();
  const [loading, setLoading] = reactExports.useState(false);
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [formData, setFormData] = reactExports.useState({
    email: "",
    password: "",
    firstName: "",
    lastName: "",
    phone: "",
    role: "Employee",
    station: "MOBIL",
    employee_id: "",
    hire_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
  });
  const roles = ["Administrator", "Management", "Employee"];
  const stations = ["MOBIL", "AMOCO ROSEDALE", "AMOCO BROOKLYN"];
  const generateEmployeeId = () => {
    const prefix = formData.station.split(" ")[0].substring(0, 3).toUpperCase();
    const timestamp = Date.now().toString().slice(-6);
    return `${prefix}-${timestamp}`;
  };
  const generatePassword = () => {
    const length = 12;
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";
    let password = "";
    for (let i = 0; i < length; i++) {
      password += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return password;
  };
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({
      ...prev,
      [field]: value
    }));
  };
  const validateForm = () => {
    if (!formData.email || !formData.email.includes("@")) {
      return "Please enter a valid email address";
    }
    if (!formData.password || formData.password.length < 8) {
      return "Password must be at least 8 characters long";
    }
    if (!formData.firstName.trim()) {
      return "First name is required";
    }
    if (!formData.lastName.trim()) {
      return "Last name is required";
    }
    if (!formData.phone.trim()) {
      return "Phone number is required";
    }
    if (!formData.employee_id.trim()) {
      return "Employee ID is required";
    }
    return null;
  };
  const handleCreateUser = async () => {
    const validationError = validateForm();
    if (validationError) {
      toast({
        title: "Validation Error",
        description: validationError,
        variant: "destructive"
      });
      return;
    }
    setLoading(true);
    try {
      console.warn("Starting user creation process...");
      console.warn("Registering user with email:", formData.email);
      const { error: authError } = await window.ezsite.apis.register({
        email: formData.email,
        password: formData.password
      });
      if (authError) {
        console.error("Authentication registration failed:", authError);
        throw new Error(`Failed to create user account: ${authError}`);
      }
      console.warn("User authentication account created successfully");
      let userInfo;
      let retryCount = 0;
      const maxRetries = 5;
      while (retryCount < maxRetries) {
        try {
          const { data, error: userInfoError } = await window.ezsite.apis.getUserInfo();
          if (!userInfoError && data) {
            userInfo = data;
            break;
          }
          retryCount++;
          if (retryCount < maxRetries) {
            await new Promise((resolve) => setTimeout(resolve, 1e3));
          }
        } catch (error) {
          console.warn(`Retry ${retryCount + 1} failed:`, error);
          retryCount++;
          if (retryCount < maxRetries) {
            await new Promise((resolve) => setTimeout(resolve, 1e3));
          }
        }
      }
      if (!userInfo) {
        console.error("Failed to get user info after registration");
        throw new Error("User was created but profile setup failed. Please try to create the profile manually.");
      }
      console.warn("Retrieved user info:", userInfo);
      const profileData = {
        user_id: userInfo.ID,
        role: formData.role,
        station: formData.station,
        employee_id: formData.employee_id,
        phone: formData.phone,
        hire_date: formData.hire_date,
        is_active: true,
        detailed_permissions: JSON.stringify({
          dashboard: { view: true, create: false, edit: false, delete: false },
          products: { view: formData.role !== "Employee", create: false, edit: false, delete: false },
          employees: { view: formData.role === "Administrator", create: false, edit: false, delete: false },
          sales_reports: { view: true, create: formData.role !== "Employee", edit: formData.role !== "Employee", delete: false },
          vendors: { view: formData.role !== "Employee", create: false, edit: false, delete: false },
          orders: { view: formData.role !== "Employee", create: formData.role !== "Employee", edit: formData.role !== "Employee", delete: false },
          licenses: { view: formData.role !== "Employee", create: false, edit: false, delete: false },
          salary: { view: formData.role === "Administrator", create: formData.role === "Administrator", edit: formData.role === "Administrator", delete: false },
          inventory: { view: true, create: formData.role !== "Employee", edit: formData.role !== "Employee", delete: false },
          delivery: { view: formData.role !== "Employee", create: formData.role !== "Employee", edit: formData.role !== "Employee", delete: false },
          settings: { view: formData.role === "Administrator", create: false, edit: formData.role === "Administrator", delete: false },
          user_management: { view: formData.role === "Administrator", create: formData.role === "Administrator", edit: formData.role === "Administrator", delete: formData.role === "Administrator" },
          site_management: { view: formData.role === "Administrator", create: formData.role === "Administrator", edit: formData.role === "Administrator", delete: formData.role === "Administrator" },
          system_logs: { view: formData.role === "Administrator", create: false, edit: false, delete: false },
          security_settings: { view: formData.role === "Administrator", create: false, edit: formData.role === "Administrator", delete: false }
        })
      };
      console.warn("Creating user profile with data:", profileData);
      const { error: profileError } = await window.ezsite.apis.tableCreate(11725, profileData);
      if (profileError) {
        console.error("Profile creation failed:", profileError);
        throw new Error(`Failed to create user profile: ${profileError}`);
      }
      console.warn("User profile created successfully");
      try {
        const emailContent = `
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <h2 style="color: #1f2937;">Welcome to DFS Manager Portal</h2>
            <p>Hello ${formData.firstName} ${formData.lastName},</p>
            <p>Your account has been successfully created for the DFS Manager Portal.</p>
            
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="color: #374151; margin-top: 0;">Account Details:</h3>
              <p><strong>Email:</strong> ${formData.email}</p>
              <p><strong>Employee ID:</strong> ${formData.employee_id}</p>
              <p><strong>Role:</strong> ${formData.role}</p>
              <p><strong>Station:</strong> ${formData.station}</p>
              <p><strong>Hire Date:</strong> ${new Date(formData.hire_date).toLocaleDateString()}</p>
            </div>
            
            <div style="background-color: #fef3c7; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
              <h4 style="color: #92400e; margin-top: 0;">Login Information:</h4>
              <p style="color: #92400e; margin-bottom: 0;"><strong>Temporary Password:</strong> ${formData.password}</p>
              <p style="color: #92400e; font-size: 14px;"><em>Please change your password after your first login for security purposes.</em></p>
            </div>
            
            <p>You can access the portal at: <a href="${window.location.origin}" style="color: #2563eb;">${window.location.origin}</a></p>
            
            <p>If you have any questions or need assistance, please contact your administrator.</p>
            
            <p>Best regards,<br>DFS Manager Portal Team</p>
          </div>
        `;
        await window.ezsite.apis.sendEmail({
          from: "support@ezsite.ai",
          to: [formData.email],
          subject: "Welcome to DFS Manager Portal - Account Created",
          html: emailContent
        });
        console.warn("Welcome email sent successfully");
      } catch (emailError) {
        console.warn("Failed to send welcome email:", emailError);
      }
      toast({
        title: "Success",
        description: `User account created successfully for ${formData.firstName} ${formData.lastName}. Welcome email sent to ${formData.email}.`
      });
      setFormData({
        email: "",
        password: "",
        firstName: "",
        lastName: "",
        phone: "",
        role: "Employee",
        station: "MOBIL",
        employee_id: "",
        hire_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
      });
      onUserCreated();
      onClose();
    } catch (error) {
      console.error("Error creating user:", error);
      toast({
        title: "Error",
        description: error instanceof Error ? error.message : "Failed to create user account",
        variant: "destructive"
      });
    } finally {
      setLoading(false);
    }
  };
  const handleClose = () => {
    if (!loading) {
      onClose();
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: handleClose, "data-id": "km3gduqdr", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-2xl max-h-[90vh] overflow-y-auto", "data-id": "walnpz9pa", "data-path": "src/components/CreateUserDialog.tsx", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { "data-id": "i6yjwrf14", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center space-x-2", "data-id": "9yqv0sv4y", "data-path": "src/components/CreateUserDialog.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "w-5 h-5 text-blue-600", "data-id": "tqpppjzl3", "data-path": "src/components/CreateUserDialog.tsx" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "pzncp6w5m", "data-path": "src/components/CreateUserDialog.tsx", children: "Create New User" })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-id": "bwqfjiswa", "data-path": "src/components/CreateUserDialog.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "c4urb32v3", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-4", "data-id": "twlth15i0", "data-path": "src/components/CreateUserDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 mb-4", "data-id": "rh2h78y06", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "w-4 h-4 text-blue-600", "data-id": "oemknr39k", "data-path": "src/components/CreateUserDialog.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold", "data-id": "svfs3r66c", "data-path": "src/components/CreateUserDialog.tsx", children: "Account Information" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", "data-id": "rg2l0qreg", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "hmhxyctjb", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "email", "data-id": "ucbh5m6og", "data-path": "src/components/CreateUserDialog.tsx", children: "Email Address *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "email",
                type: "email",
                value: formData.email,
                onChange: (e) => handleInputChange("email", e.target.value),
                placeholder: "user@example.com",
                required: true,
                disabled: loading,
                "data-id": "kekulnv4w",
                "data-path": "src/components/CreateUserDialog.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "vj1auf2q1", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "password", "data-id": "mhw3ttq36", "data-path": "src/components/CreateUserDialog.tsx", children: "Password *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", "data-id": "rd4jc1nyu", "data-path": "src/components/CreateUserDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "password",
                  type: showPassword ? "text" : "password",
                  value: formData.password,
                  onChange: (e) => handleInputChange("password", e.target.value),
                  placeholder: "Enter password",
                  required: true,
                  disabled: loading,
                  "data-id": "aeqerz2rs",
                  "data-path": "src/components/CreateUserDialog.tsx"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  type: "button",
                  variant: "ghost",
                  size: "sm",
                  className: "absolute right-0 top-0 h-full px-3 hover:bg-transparent",
                  onClick: () => setShowPassword(!showPassword),
                  disabled: loading,
                  "data-id": "1s5co5wq3",
                  "data-path": "src/components/CreateUserDialog.tsx",
                  children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "w-4 h-4", "data-id": "y2gfvyrq1", "data-path": "src/components/CreateUserDialog.tsx" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "w-4 h-4", "data-id": "qa1cwiycx", "data-path": "src/components/CreateUserDialog.tsx" })
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex space-x-2 mt-2", "data-id": "pydn71uks", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "outline",
                size: "sm",
                onClick: () => handleInputChange("password", generatePassword()),
                disabled: loading,
                "data-id": "oftfsi1dc",
                "data-path": "src/components/CreateUserDialog.tsx",
                children: "Generate Password"
              }
            ) })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "21owqm65d", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-4", "data-id": "c4k8xe17k", "data-path": "src/components/CreateUserDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 mb-4", "data-id": "j3q11eb15", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "w-4 h-4 text-green-600", "data-id": "pyz15q2zf", "data-path": "src/components/CreateUserDialog.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold", "data-id": "azgqr1hrq", "data-path": "src/components/CreateUserDialog.tsx", children: "Personal Information" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", "data-id": "cqwoqeako", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "y3gtlqx0o", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "firstName", "data-id": "zh4tae56a", "data-path": "src/components/CreateUserDialog.tsx", children: "First Name *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "firstName",
                value: formData.firstName,
                onChange: (e) => handleInputChange("firstName", e.target.value),
                placeholder: "John",
                required: true,
                disabled: loading,
                "data-id": "rh293ncct",
                "data-path": "src/components/CreateUserDialog.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "fgxurblql", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "lastName", "data-id": "sgq2ck4bc", "data-path": "src/components/CreateUserDialog.tsx", children: "Last Name *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "lastName",
                value: formData.lastName,
                onChange: (e) => handleInputChange("lastName", e.target.value),
                placeholder: "Doe",
                required: true,
                disabled: loading,
                "data-id": "4nuig9esw",
                "data-path": "src/components/CreateUserDialog.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "plpprojvp", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "phone", "data-id": "4cuve2h42", "data-path": "src/components/CreateUserDialog.tsx", children: "Phone Number *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "phone",
                type: "tel",
                value: formData.phone,
                onChange: (e) => handleInputChange("phone", e.target.value),
                placeholder: "(555) 123-4567",
                required: true,
                disabled: loading,
                "data-id": "jy2318zb3",
                "data-path": "src/components/CreateUserDialog.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "r0s47fne2", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "hire_date", "data-id": "sni834hm0", "data-path": "src/components/CreateUserDialog.tsx", children: "Hire Date" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "hire_date",
                type: "date",
                value: formData.hire_date,
                onChange: (e) => handleInputChange("hire_date", e.target.value),
                disabled: loading,
                "data-id": "aah2duhbt",
                "data-path": "src/components/CreateUserDialog.tsx"
              }
            )
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "416tr1uza", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-4", "data-id": "hkkna6u17", "data-path": "src/components/CreateUserDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 mb-4", "data-id": "v2e4xm6se", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Building2, { className: "w-4 h-4 text-purple-600", "data-id": "zb1nzua2g", "data-path": "src/components/CreateUserDialog.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold", "data-id": "2mu2gqlk8", "data-path": "src/components/CreateUserDialog.tsx", children: "Work Information" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", "data-id": "g5xvk75tg", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "hhitevevl", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "role", "data-id": "t1sjey12n", "data-path": "src/components/CreateUserDialog.tsx", children: "Role *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Select,
              {
                value: formData.role,
                onValueChange: (value) => handleInputChange("role", value),
                disabled: loading,
                "data-id": "woyjgrury",
                "data-path": "src/components/CreateUserDialog.tsx",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "4se6lhp6e", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select role", "data-id": "5g2tljgma", "data-path": "src/components/CreateUserDialog.tsx" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "ufpi7864f", "data-path": "src/components/CreateUserDialog.tsx", children: roles.map(
                    (role) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: role, "data-id": "0dsd5g89u", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "yyxq1tivo", "data-path": "src/components/CreateUserDialog.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4", "data-id": "s09uo4fx0", "data-path": "src/components/CreateUserDialog.tsx" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "08h3u4qcb", "data-path": "src/components/CreateUserDialog.tsx", children: role })
                    ] }) }, role)
                  ) })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "96acp30ck", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "station", "data-id": "do3kxwxzm", "data-path": "src/components/CreateUserDialog.tsx", children: "Station *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Select,
              {
                value: formData.station,
                onValueChange: (value) => handleInputChange("station", value),
                disabled: loading,
                "data-id": "1f8cpxdyi",
                "data-path": "src/components/CreateUserDialog.tsx",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "o2efe4vbe", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select station", "data-id": "z8jzr6ik1", "data-path": "src/components/CreateUserDialog.tsx" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "itdmpjmpc", "data-path": "src/components/CreateUserDialog.tsx", children: stations.map(
                    (station) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: station, "data-id": "gwyw5iiqf", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "pb0l8621t", "data-path": "src/components/CreateUserDialog.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx(Building2, { className: "w-4 h-4", "data-id": "jxlfdqft7", "data-path": "src/components/CreateUserDialog.tsx" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "yjro0ecdj", "data-path": "src/components/CreateUserDialog.tsx", children: station })
                    ] }) }, station)
                  ) })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "md:col-span-2", "data-id": "jc0arhrkf", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "employee_id", "data-id": "qrya6sf2c", "data-path": "src/components/CreateUserDialog.tsx", children: "Employee ID *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", "data-id": "zgph5pifg", "data-path": "src/components/CreateUserDialog.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "employee_id",
                  value: formData.employee_id,
                  onChange: (e) => handleInputChange("employee_id", e.target.value),
                  placeholder: "EMP-123456",
                  required: true,
                  disabled: loading,
                  "data-id": "zuujtffey",
                  "data-path": "src/components/CreateUserDialog.tsx"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  type: "button",
                  variant: "outline",
                  onClick: () => handleInputChange("employee_id", generateEmployeeId()),
                  disabled: loading,
                  "data-id": "fyobwrhui",
                  "data-path": "src/components/CreateUserDialog.tsx",
                  children: "Generate"
                }
              )
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "vytev6wl5", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-4", "data-id": "6ueuwyesn", "data-path": "src/components/CreateUserDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 mb-4", "data-id": "b7xejz6e2", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4 text-orange-600", "data-id": "0vvvwi73a", "data-path": "src/components/CreateUserDialog.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold", "data-id": "kq78ppwm7", "data-path": "src/components/CreateUserDialog.tsx", children: "Permissions Preview" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", "data-id": "eznimjmhi", "data-path": "src/components/CreateUserDialog.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "4xnbn6l7b", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", "data-id": "bqz1aisvh", "data-path": "src/components/CreateUserDialog.tsx", children: "Dashboard Access" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "default", "data-id": "ppwrzg6zv", "data-path": "src/components/CreateUserDialog.tsx", children: "Granted" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "nqaneqg68", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", "data-id": "sw31aaccd", "data-path": "src/components/CreateUserDialog.tsx", children: "Sales Reports" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: formData.role !== "Employee" ? "default" : "secondary", "data-id": "jms6idu4p", "data-path": "src/components/CreateUserDialog.tsx", children: formData.role !== "Employee" ? "Full Access" : "View Only" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "o2gib9hal", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", "data-id": "qigohkpc4", "data-path": "src/components/CreateUserDialog.tsx", children: "User Management" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: formData.role === "Administrator" ? "default" : "secondary", "data-id": "fx4j18lgp", "data-path": "src/components/CreateUserDialog.tsx", children: formData.role === "Administrator" ? "Full Access" : "No Access" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "qvgrv15x8", "data-path": "src/components/CreateUserDialog.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", "data-id": "sorg0pmox", "data-path": "src/components/CreateUserDialog.tsx", children: "System Administration" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: formData.role === "Administrator" ? "default" : "secondary", "data-id": "dftnuqtd1", "data-path": "src/components/CreateUserDialog.tsx", children: formData.role === "Administrator" ? "Full Access" : "No Access" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Alert, { className: "mt-4", "data-id": "h6x2vgo5w", "data-path": "src/components/CreateUserDialog.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDescription, { className: "text-sm", "data-id": "dp2ezf46d", "data-path": "src/components/CreateUserDialog.tsx", children: "Permissions can be customized after user creation through the User Management interface." }) })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-3 pt-4 border-t", "data-id": "ce49ctu65", "data-path": "src/components/CreateUserDialog.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            variant: "outline",
            onClick: handleClose,
            disabled: loading,
            "data-id": "g08rd8yae",
            "data-path": "src/components/CreateUserDialog.tsx",
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            onClick: handleCreateUser,
            disabled: loading,
            className: "bg-blue-600 hover:bg-blue-700",
            "data-id": "fhce543e0",
            "data-path": "src/components/CreateUserDialog.tsx",
            children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Loader2, { className: "w-4 h-4 mr-2 animate-spin", "data-id": "k1vvppmjq", "data-path": "src/components/CreateUserDialog.tsx" }),
              "Creating User..."
            ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "w-4 h-4 mr-2", "data-id": "oq0o86uzt", "data-path": "src/components/CreateUserDialog.tsx" }),
              "Create User Account"
            ] })
          }
        )
      ] })
    ] })
  ] }) });
};
const UserManagement = () => {
  const { isAdmin } = useAdminAccess();
  const [users, setUsers] = reactExports.useState([]);
  const [userProfiles, setUserProfiles] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(true);
  const [refreshing, setRefreshing] = reactExports.useState(false);
  const [searchTerm, setSearchTerm] = reactExports.useState("");
  const [selectedRole, setSelectedRole] = reactExports.useState("All");
  const [selectedStation, setSelectedStation] = reactExports.useState("All");
  const [isAddDialogOpen, setIsAddDialogOpen] = reactExports.useState(false);
  const [isEditDialogOpen, setIsEditDialogOpen] = reactExports.useState(false);
  const [isBatchEditDialogOpen, setIsBatchEditDialogOpen] = reactExports.useState(false);
  const [isBatchDeleteDialogOpen, setIsBatchDeleteDialogOpen] = reactExports.useState(false);
  const [selectedUserProfile, setSelectedUserProfile] = reactExports.useState(null);
  const [batchActionLoading, setBatchActionLoading] = reactExports.useState(false);
  const [isCreateUserDialogOpen, setIsCreateUserDialogOpen] = reactExports.useState(false);
  const { toast } = useToast();
  const batchSelection = useBatchSelection();
  const [batchEditData, setBatchEditData] = reactExports.useState({
    role: "",
    station: "",
    is_active: true
  });
  const roles = ["Administrator", "Management", "Employee"];
  const stations = ["MOBIL", "AMOCO ROSEDALE", "AMOCO BROOKLYN"];
  const [formData, setFormData] = reactExports.useState({
    user_id: 0,
    role: "Employee",
    station: "MOBIL",
    employee_id: "",
    phone: "",
    hire_date: "",
    is_active: true
  });
  const generateRandomUserId = () => {
    const randomId = Math.floor(Math.random() * 1e6) + 1e5;
    return randomId;
  };
  reactExports.useEffect(() => {
    fetchData();
  }, []);
  const fetchData = async () => {
    setLoading(true);
    await Promise.all([fetchUserProfiles(), fetchUsers()]);
    setLoading(false);
  };
  const refreshData = async () => {
    setRefreshing(true);
    await fetchData();
    setRefreshing(false);
    toast({
      title: "Success",
      description: "Data refreshed successfully"
    });
  };
  const fetchUsers = async () => {
    try {
      console.log("User info now managed through Supabase user profiles");
      setUsers([]);
    } catch (error) {
      console.error("Error fetching current user info:", error);
      setUsers([]);
    }
  };
  const fetchUserProfiles = async () => {
    try {
      console.log("Fetching user profiles from user_profiles table");
      const { data, error } = await supabase$1.from("user_profiles").select("*").order("id", { ascending: false });
      if (error) {
        console.error("API returned error:", error);
        throw error;
      }
      console.log("User profiles data received:", data);
      setUserProfiles(data || []);
    } catch (error) {
      console.error("Error fetching user profiles:", error);
      toast({
        title: "Error",
        description: `Failed to fetch user profiles: ${error}`,
        variant: "destructive"
      });
      setUserProfiles([]);
    }
  };
  const handleCreateProfile = async () => {
    if (!formData.employee_id || !formData.phone) {
      toast({
        title: "Validation Error",
        description: "Employee ID and Phone are required fields",
        variant: "destructive"
      });
      return;
    }
    try {
      const { error } = await supabase$1.from("user_profiles").insert(formData);
      if (error) throw error;
      toast({
        title: "Success",
        description: "User profile created successfully"
      });
      setIsAddDialogOpen(false);
      setFormData({
        user_id: generateRandomUserId(),
        role: "Employee",
        station: "MOBIL",
        employee_id: "",
        phone: "",
        hire_date: "",
        is_active: true
      });
      fetchUserProfiles();
    } catch (error) {
      console.error("Error creating profile:", error);
      toast({
        title: "Error",
        description: `Failed to create user profile: ${error}`,
        variant: "destructive"
      });
    }
  };
  const handleUpdateProfile = async () => {
    if (!selectedUserProfile) return;
    if (!formData.employee_id || !formData.phone) {
      toast({
        title: "Validation Error",
        description: "Employee ID and Phone are required fields",
        variant: "destructive"
      });
      return;
    }
    try {
      const { error } = await supabase$1.from("user_profiles").update(formData).eq("id", selectedUserProfile.id);
      if (error) throw error;
      toast({
        title: "Success",
        description: "User profile updated successfully"
      });
      setIsEditDialogOpen(false);
      setSelectedUserProfile(null);
      fetchUserProfiles();
    } catch (error) {
      console.error("Error updating profile:", error);
      toast({
        title: "Error",
        description: `Failed to update user profile: ${error}`,
        variant: "destructive"
      });
    }
  };
  const handleDeleteProfile = async (profileId) => {
    if (!confirm("Are you sure you want to delete this user profile? This action cannot be undone.")) return;
    try {
      const { error } = await supabase$1.from("user_profiles").delete().eq("id", profileId);
      if (error) throw error;
      toast({
        title: "Success",
        description: "User profile deleted successfully"
      });
      fetchUserProfiles();
    } catch (error) {
      console.error("Error deleting profile:", error);
      toast({
        title: "Error",
        description: `Failed to delete user profile: ${error}`,
        variant: "destructive"
      });
    }
  };
  const handleBatchEdit = () => {
    const selectedData = batchSelection.getSelectedData(filteredProfiles, (profile) => profile.id);
    if (selectedData.length === 0) {
      toast({
        title: "No Selection",
        description: "Please select profiles to edit",
        variant: "destructive"
      });
      return;
    }
    setIsBatchEditDialogOpen(true);
  };
  const handleBatchDelete = () => {
    const selectedData = batchSelection.getSelectedData(filteredProfiles, (profile) => profile.id);
    if (selectedData.length === 0) {
      toast({
        title: "No Selection",
        description: "Please select profiles to delete",
        variant: "destructive"
      });
      return;
    }
    setIsBatchDeleteDialogOpen(true);
  };
  const confirmBatchEdit = async () => {
    setBatchActionLoading(true);
    try {
      const selectedData = batchSelection.getSelectedData(filteredProfiles, (profile) => profile.id);
      const updates = selectedData.map((profile) => ({
        id: profile.id,
        ...batchEditData.role && { role: batchEditData.role },
        ...batchEditData.station && { station: batchEditData.station },
        is_active: batchEditData.is_active
      }));
      for (const update of updates) {
        const { id, ...updateData } = update;
        const { error } = await supabase$1.from("user_profiles").update(updateData).eq("id", id);
        if (error) throw error;
      }
      toast({
        title: "Success",
        description: `Updated ${selectedData.length} user profiles successfully`
      });
      setIsBatchEditDialogOpen(false);
      batchSelection.clearSelection();
      fetchUserProfiles();
    } catch (error) {
      console.error("Error in batch edit:", error);
      toast({
        title: "Error",
        description: `Failed to update profiles: ${error}`,
        variant: "destructive"
      });
    } finally {
      setBatchActionLoading(false);
    }
  };
  const confirmBatchDelete = async () => {
    setBatchActionLoading(true);
    try {
      const selectedData = batchSelection.getSelectedData(filteredProfiles, (profile) => profile.id);
      for (const profile of selectedData) {
        const { error } = await supabase$1.from("user_profiles").delete().eq("id", profile.id);
        if (error) throw error;
      }
      toast({
        title: "Success",
        description: `Deleted ${selectedData.length} user profiles successfully`
      });
      setIsBatchDeleteDialogOpen(false);
      batchSelection.clearSelection();
      fetchUserProfiles();
    } catch (error) {
      console.error("Error in batch delete:", error);
      toast({
        title: "Error",
        description: `Failed to delete profiles: ${error}`,
        variant: "destructive"
      });
    } finally {
      setBatchActionLoading(false);
    }
  };
  const handleEditProfile = (profile) => {
    setSelectedUserProfile(profile);
    setFormData({
      user_id: profile.user_id,
      role: profile.role,
      station: profile.station,
      employee_id: profile.employee_id,
      phone: profile.phone,
      hire_date: profile.hire_date || "",
      is_active: profile.is_active
    });
    setIsEditDialogOpen(true);
  };
  const filteredProfiles = userProfiles.filter((profile) => {
    const matchesSearch = profile.employee_id.toLowerCase().includes(searchTerm.toLowerCase()) || profile.phone.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesRole = selectedRole === "All" || profile.role === selectedRole;
    const matchesStation = selectedStation === "All" || profile.station === selectedStation;
    return matchesSearch && matchesRole && matchesStation;
  });
  const getRoleBadgeColor = (role) => {
    switch (role) {
      case "Administrator":
        return "bg-red-100 text-red-800";
      case "Management":
        return "bg-blue-100 text-blue-800";
      case "Employee":
        return "bg-green-100 text-green-800";
      default:
        return "bg-gray-100 text-gray-800";
    }
  };
  const getStationBadgeColor = (station) => {
    switch (station) {
      case "MOBIL":
        return "bg-purple-100 text-purple-800";
      case "AMOCO ROSEDALE":
        return "bg-orange-100 text-orange-800";
      case "AMOCO BROOKLYN":
        return "bg-teal-100 text-teal-800";
      default:
        return "bg-gray-100 text-gray-800";
    }
  };
  const getPermissionSummary = (profile) => {
    try {
      if (!profile.detailed_permissions) {
        return {
          summary: "No permissions set",
          details: "Permissions not configured",
          hasAccess: false,
          viewCount: 0,
          editCount: 0,
          createCount: 0
        };
      }
      const permissions = JSON.parse(profile.detailed_permissions);
      const contentAreas = [
        "dashboard",
        "products",
        "employees",
        "sales_reports",
        "vendors",
        "orders",
        "licenses",
        "salary",
        "inventory",
        "delivery",
        "settings",
        "user_management",
        "site_management",
        "system_logs",
        "security_settings"
      ];
      const viewCount = contentAreas.filter((area) => {
        var _a;
        return (_a = permissions[area]) == null ? void 0 : _a.view;
      }).length;
      const editCount = contentAreas.filter((area) => {
        var _a;
        return (_a = permissions[area]) == null ? void 0 : _a.edit;
      }).length;
      const createCount = contentAreas.filter((area) => {
        var _a;
        return (_a = permissions[area]) == null ? void 0 : _a.create;
      }).length;
      return {
        summary: `${viewCount}/${contentAreas.length} areas`,
        details: `View: ${viewCount}, Edit: ${editCount}, Create: ${createCount}`,
        hasAccess: viewCount > 0,
        viewCount,
        editCount,
        createCount
      };
    } catch {
      return {
        summary: "Invalid permissions",
        details: "Permission data corrupted",
        hasAccess: false,
        viewCount: 0,
        editCount: 0,
        createCount: 0
      };
    }
  };
  if (!isAdmin) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      AccessDenied,
      {
        feature: "User Management",
        requiredRole: "Administrator",
        "data-id": "8layjxget",
        "data-path": "src/pages/Admin/UserManagement.tsx"
      }
    );
  }
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center min-h-64", "data-id": "4odhdzois", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-lg", "data-id": "wp1fpcaja", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Loading user management..." }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-id": "nkyl8if0t", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", "data-id": "691ou28mp", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "uepgmow91", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-8 h-8 text-blue-600", "data-id": "yr5i1qka1", "data-path": "src/pages/Admin/UserManagement.tsx" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "yzg2jc8di", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl font-bold text-gray-900", "data-id": "g9qdvnxp2", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Real-time User Management" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-green-600 font-medium", "data-id": "csh3upxp2", "data-path": "src/pages/Admin/UserManagement.tsx", children: "✓ Production Database Connected - Live User Data" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "r0u67gvqx", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Badge, { variant: "outline", className: "bg-green-50 text-green-700 border-green-200", "data-id": "kwzxet06g", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          userProfiles.length,
          " Users"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            onClick: refreshData,
            disabled: refreshing,
            variant: "outline",
            className: "flex items-center space-x-2",
            "data-id": "0gwxcz5t1",
            "data-path": "src/pages/Admin/UserManagement.tsx",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, { className: `w-4 h-4 ${refreshing ? "animate-spin" : ""}`, "data-id": "mllr40r1p", "data-path": "src/pages/Admin/UserManagement.tsx" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "jfij4soz6", "data-path": "src/pages/Admin/UserManagement.tsx", children: refreshing ? "Refreshing..." : "Refresh Data" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Tabs, { defaultValue: "profiles", className: "w-full", "data-id": "oqlxxlsu3", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsList, { className: "grid w-full grid-cols-2", "data-id": "bv1u4da2t", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsTrigger, { value: "profiles", className: "flex items-center space-x-2", "data-id": "q47ndxfet", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-4 h-4", "data-id": "ehkxpvyn6", "data-path": "src/pages/Admin/UserManagement.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "cqzn7zuvm", "data-path": "src/pages/Admin/UserManagement.tsx", children: "User Profiles" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsTrigger, { value: "permissions", className: "flex items-center space-x-2", "data-id": "e3p9zqryy", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4", "data-id": "24fer7wrp", "data-path": "src/pages/Admin/UserManagement.tsx" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-id": "84mlt2091", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Permission Management" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsContent, { value: "profiles", className: "space-y-6", "data-id": "ck1onn9zl", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-end space-x-3", "data-id": "61uhhpjbn", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: () => setIsCreateUserDialogOpen(true),
              className: "bg-green-600 hover:bg-green-700",
              "data-id": "nmh54rak7",
              "data-path": "src/pages/Admin/UserManagement.tsx",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(UserPlus, { className: "w-4 h-4 mr-2", "data-id": "dt6apyr4g", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                "Create New User"
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Dialog, { open: isAddDialogOpen, onOpenChange: (open) => {
            if (open) {
              const newUserId = generateRandomUserId();
              setFormData((prev) => ({ ...prev, user_id: newUserId }));
            }
            setIsAddDialogOpen(open);
          }, "data-id": "pjsyzqgiw", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTrigger, { asChild: true, "data-id": "05m56bcr1", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", className: "border-blue-600 text-blue-600 hover:bg-blue-50", "data-id": "nzkwqsj1k", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "w-4 h-4 mr-2", "data-id": "nzznx53nw", "data-path": "src/pages/Admin/UserManagement.tsx" }),
              "Add User Profile Only"
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-lg max-h-[85vh]", "data-id": "xoott60b8", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { "data-id": "d5ag8o875", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { "data-id": "1lqvr6j6n", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Create User Profile" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollArea, { className: "max-h-[calc(85vh-120px)] pr-4", "data-id": "91bhy23l9", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", "data-id": "7fehrpv7v", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "66g7u4e4f", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "user_id", "data-id": "7d34bh0io", "data-path": "src/pages/Admin/UserManagement.tsx", children: "User ID (Auto-generated)" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", "data-id": "7rdl7ei8t", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(
                      Input,
                      {
                        id: "user_id",
                        type: "number",
                        value: formData.user_id,
                        readOnly: true,
                        disabled: true,
                        className: "bg-gray-50 text-gray-700 cursor-not-allowed",
                        placeholder: "Auto-generated ID",
                        "data-id": "cdvcm31sx",
                        "data-path": "src/pages/Admin/UserManagement.tsx"
                      }
                    ),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(
                      Button,
                      {
                        type: "button",
                        variant: "ghost",
                        size: "sm",
                        className: "absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0 hover:bg-gray-200",
                        onClick: () => {
                          const newUserId = generateRandomUserId();
                          setFormData((prev) => ({ ...prev, user_id: newUserId }));
                          toast({
                            title: "Success",
                            description: `New User ID generated: ${newUserId}`
                          });
                        },
                        title: "Generate new random User ID",
                        "data-id": "27fc6ahjv",
                        "data-path": "src/pages/Admin/UserManagement.tsx",
                        children: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, { className: "w-3 h-3", "data-id": "y1dtpho5p", "data-path": "src/pages/Admin/UserManagement.tsx" })
                      }
                    )
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500 mt-1", "data-id": "ghb6rklnt", "data-path": "src/pages/Admin/UserManagement.tsx", children: "User ID is automatically generated. Click the refresh icon to generate a new one." })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "icc1175p6", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "role", "data-id": "ps4tbuzs7", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Role" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: formData.role, onValueChange: (value) => setFormData({ ...formData, role: value }), "data-id": "wvn8xvw9e", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "r6c4dy4y7", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { "data-id": "zbea79y5w", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "rvz1bzvou", "data-path": "src/pages/Admin/UserManagement.tsx", children: roles.map(
                      (role) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: role, "data-id": "6yq33nfkc", "data-path": "src/pages/Admin/UserManagement.tsx", children: role }, role)
                    ) })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "lud54xgr2", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "station", "data-id": "t2p3v5qd5", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: formData.station, onValueChange: (value) => setFormData({ ...formData, station: value }), "data-id": "a6lowa8er", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "7z2jkfy4w", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { "data-id": "sgfuzzhxf", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "ev6u0ui8c", "data-path": "src/pages/Admin/UserManagement.tsx", children: stations.map(
                      (station) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: station, "data-id": "9ug7af0oy", "data-path": "src/pages/Admin/UserManagement.tsx", children: station }, station)
                    ) })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "tj1la3m88", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "employee_id", "data-id": "98uyx2ltr", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Employee ID *" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Input,
                    {
                      id: "employee_id",
                      value: formData.employee_id,
                      onChange: (e) => setFormData({ ...formData, employee_id: e.target.value }),
                      placeholder: "Enter employee ID",
                      required: true,
                      "data-id": "vq4m64cd2",
                      "data-path": "src/pages/Admin/UserManagement.tsx"
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "ahl1b4q28", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "phone", "data-id": "vdyes21vt", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Phone *" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Input,
                    {
                      id: "phone",
                      value: formData.phone,
                      onChange: (e) => setFormData({ ...formData, phone: e.target.value }),
                      placeholder: "Enter phone number",
                      required: true,
                      "data-id": "umgh5irns",
                      "data-path": "src/pages/Admin/UserManagement.tsx"
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "7gwxir2lp", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "hire_date", "data-id": "1usit424l", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Hire Date" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Input,
                    {
                      id: "hire_date",
                      type: "date",
                      value: formData.hire_date,
                      onChange: (e) => setFormData({ ...formData, hire_date: e.target.value }),
                      "data-id": "a603on6jl",
                      "data-path": "src/pages/Admin/UserManagement.tsx"
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "xqb0iodxo", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    "input",
                    {
                      type: "checkbox",
                      id: "is_active",
                      checked: formData.is_active,
                      onChange: (e) => setFormData({ ...formData, is_active: e.target.checked }),
                      "data-id": "k0efnvkz7",
                      "data-path": "src/pages/Admin/UserManagement.tsx"
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "is_active", "data-id": "wjhkpb37h", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Active User" })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: handleCreateProfile, className: "w-full", "data-id": "i7i0qtwvn", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Create Profile" })
              ] }) })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", "data-id": "1txbg5pfz", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "oio01n61q", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "p-4", "data-id": "f4vvmqmt0", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "iwfz2rfev", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-8 h-8 text-blue-600", "data-id": "5pvhabm5j", "data-path": "src/pages/Admin/UserManagement.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "gtdyjs91m", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "r5oy2a1ym", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Total Users" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold", "data-id": "74ygayxpo", "data-path": "src/pages/Admin/UserManagement.tsx", children: userProfiles.length })
            ] })
          ] }) }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "7v3i5xhcr", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "p-4", "data-id": "l9a3y30p2", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "8o8fivv0e", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-8 h-8 text-green-600", "data-id": "b2r31nkjx", "data-path": "src/pages/Admin/UserManagement.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "t3iucc8a5", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "kxb75hn5s", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Administrators" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold", "data-id": "hc9njbfmm", "data-path": "src/pages/Admin/UserManagement.tsx", children: userProfiles.filter((p) => p.role === "Administrator").length })
            ] })
          ] }) }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "1a3bcr513", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "p-4", "data-id": "lal4x5y82", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "kxa2wdc3s", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(UserCheck, { className: "w-8 h-8 text-green-600", "data-id": "pm8pt4x7v", "data-path": "src/pages/Admin/UserManagement.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "zyoknaug9", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "jtw32h1cr", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Active Users" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold", "data-id": "j1viyf1jd", "data-path": "src/pages/Admin/UserManagement.tsx", children: userProfiles.filter((p) => p.is_active).length })
            ] })
          ] }) }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "f6dv557pf", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "p-4", "data-id": "6t29dyq4a", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", "data-id": "rfz32iemf", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(UserX, { className: "w-8 h-8 text-red-600", "data-id": "zka3fn3t8", "data-path": "src/pages/Admin/UserManagement.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "jw54y1otv", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "ivl6601z8", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Inactive Users" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold", "data-id": "yzfdbw7ut", "data-path": "src/pages/Admin/UserManagement.tsx", children: userProfiles.filter((p) => !p.is_active).length })
            ] })
          ] }) }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { "data-id": "vf7u24nal", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "p-4", "data-id": "08zsrzkmd", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", "data-id": "lmumbnm7q", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", "data-id": "13prktmzs", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4", "data-id": "611azm7yl", "data-path": "src/pages/Admin/UserManagement.tsx" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search by employee ID or phone...",
                value: searchTerm,
                onChange: (e) => setSearchTerm(e.target.value),
                className: "pl-10",
                "data-id": "prr3n5iyb",
                "data-path": "src/pages/Admin/UserManagement.tsx"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedRole, onValueChange: setSelectedRole, "data-id": "5w25wy8pt", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "6hehwqmo0", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Filter by role", "data-id": "1n82dnavt", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "pdqvyoyjk", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "All", "data-id": "a81ss632j", "data-path": "src/pages/Admin/UserManagement.tsx", children: "All Roles" }),
              roles.map(
                (role) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: role, "data-id": "e15hpx7yt", "data-path": "src/pages/Admin/UserManagement.tsx", children: role }, role)
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedStation, onValueChange: setSelectedStation, "data-id": "hxc6z4bmf", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "7tff7eg8h", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Filter by station", "data-id": "bahzm0dxm", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "zg5rbjz64", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "All", "data-id": "bt4o0uuos", "data-path": "src/pages/Admin/UserManagement.tsx", children: "All Stations" }),
              stations.map(
                (station) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: station, "data-id": "tbrbbycv6", "data-path": "src/pages/Admin/UserManagement.tsx", children: station }, station)
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              variant: "outline",
              onClick: () => {
                setSearchTerm("");
                setSelectedRole("All");
                setSelectedStation("All");
              },
              "data-id": "rdq0id4jc",
              "data-path": "src/pages/Admin/UserManagement.tsx",
              children: "Clear Filters"
            }
          )
        ] }) }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          BatchActionBar,
          {
            selectedCount: batchSelection.selectedCount,
            onBatchEdit: handleBatchEdit,
            onBatchDelete: handleBatchDelete,
            onClearSelection: batchSelection.clearSelection,
            isLoading: batchActionLoading,
            "data-id": "rrdol99j3",
            "data-path": "src/pages/Admin/UserManagement.tsx"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { "data-id": "ioioxxxsl", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { "data-id": "3x2av8n52", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { "data-id": "sudwwii51", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            "User Profiles (",
            filteredProfiles.length,
            ")"
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { "data-id": "bf1zyh86z", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "overflow-x-auto", "data-id": "bpnvx3rbx", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Table, { "data-id": "xbb11odls", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHeader, { "data-id": "x80yxk15v", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { "data-id": "9nem9ljan", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { className: "w-12", "data-id": "e93kz0m0o", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                Checkbox,
                {
                  checked: filteredProfiles.length > 0 && batchSelection.selectedCount === filteredProfiles.length,
                  onCheckedChange: () => batchSelection.toggleSelectAll(filteredProfiles, (profile) => profile.id),
                  "aria-label": "Select all profiles",
                  "data-id": "8kdm6ro8z",
                  "data-path": "src/pages/Admin/UserManagement.tsx"
                }
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "j0htpwx5t", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Employee ID" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "jd2nkl5uv", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Role" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "zvmj70ten", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "gsg0c2u2k", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Phone" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "fb9vsirp0", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Hire Date" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "zcj1v8mgu", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Status" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "rbvxfxiv7", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Permissions" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { "data-id": "188i3ls14", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Actions" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableBody, { "data-id": "j1egj4yyt", "data-path": "src/pages/Admin/UserManagement.tsx", children: filteredProfiles.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx(TableRow, { "data-id": "q5ovjdywd", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { colSpan: 9, className: "text-center py-8", "data-id": "dzortyijn", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex flex-col items-center space-y-3", "data-id": "ooc5i1p8n", "data-path": "src/pages/Admin/UserManagement.tsx", children: userProfiles.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "w-12 h-12 text-gray-300", "data-id": "7fyna6erk", "data-path": "src/pages/Admin/UserManagement.tsx" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "iiegim614", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-500 font-medium", "data-id": "z28fi5wt7", "data-path": "src/pages/Admin/UserManagement.tsx", children: "No User Profiles Found" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-400", "data-id": "qj61ju19a", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Create your first user profile to get started with the system" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  onClick: () => setIsCreateUserDialogOpen(true),
                  className: "bg-blue-600 hover:bg-blue-700",
                  "data-id": "th4weppbp",
                  "data-path": "src/pages/Admin/UserManagement.tsx",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(UserPlus, { className: "w-4 h-4 mr-2", "data-id": "j1mo6r4fa", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    "Create First User"
                  ]
                }
              )
            ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "w-12 h-12 text-gray-300", "data-id": "azomegurp", "data-path": "src/pages/Admin/UserManagement.tsx" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "fy99r346j", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-500 font-medium", "data-id": "pvnhj0vp3", "data-path": "src/pages/Admin/UserManagement.tsx", children: "No Profiles Match Current Filters" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-400", "data-id": "jdpwbrjqy", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Try adjusting your search criteria or clearing filters" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: "outline",
                  onClick: () => {
                    setSearchTerm("");
                    setSelectedRole("All");
                    setSelectedStation("All");
                  },
                  "data-id": "z21eijd9v",
                  "data-path": "src/pages/Admin/UserManagement.tsx",
                  children: "Clear All Filters"
                }
              )
            ] }) }) }) }) : filteredProfiles.map(
              (profile) => /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { className: batchSelection.isSelected(profile.id) ? "bg-blue-50" : "", "data-id": "a4mgfb0yc", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "c0wukuoj6", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Checkbox,
                  {
                    checked: batchSelection.isSelected(profile.id),
                    onCheckedChange: () => batchSelection.toggleItem(profile.id),
                    "aria-label": `Select profile ${profile.employee_id}`,
                    "data-id": "3sc8hx002",
                    "data-path": "src/pages/Admin/UserManagement.tsx"
                  }
                ) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { className: "font-medium", "data-id": "njc8d11h4", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.employee_id }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "ckfkwuryr", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: getRoleBadgeColor(profile.role), "data-id": "yk8gcc6q4", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.role }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "wqwowa8ct", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: getStationBadgeColor(profile.station), "data-id": "pb5osvn3g", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.station }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "qo2cxnxvb", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.phone }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "bvrmr0ial", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.hire_date ? new Date(profile.hire_date).toLocaleDateString() : "N/A" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "qizee5cu6", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: profile.is_active ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800", "data-id": "74ubejo46", "data-path": "src/pages/Admin/UserManagement.tsx", children: profile.is_active ? "Active" : "Inactive" }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "akluwcb6g", "data-path": "src/pages/Admin/UserManagement.tsx", children: (() => {
                  const permSummary = getPermissionSummary(profile);
                  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-1", "data-id": "ybe2ilbwn", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(
                      Badge,
                      {
                        variant: permSummary.hasAccess ? "default" : "secondary",
                        className: permSummary.hasAccess ? "bg-green-100 text-green-800" : "bg-gray-100 text-gray-600",
                        "data-id": "y7zk3a5dv",
                        "data-path": "src/pages/Admin/UserManagement.tsx",
                        children: permSummary.summary
                      }
                    ),
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", "data-id": "jkneilpl0", "data-path": "src/pages/Admin/UserManagement.tsx", children: permSummary.details })
                  ] });
                })() }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { "data-id": "tf9kholys", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", "data-id": "lb513z80t", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Button,
                    {
                      size: "sm",
                      variant: "outline",
                      onClick: () => handleEditProfile(profile),
                      "data-id": "3oeilyg10",
                      "data-path": "src/pages/Admin/UserManagement.tsx",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(PenLine, { className: "w-4 h-4", "data-id": "9z6x009th", "data-path": "src/pages/Admin/UserManagement.tsx" })
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    ComprehensivePermissionDialog,
                    {
                      selectedUserId: profile.id,
                      trigger: /* @__PURE__ */ jsxRuntimeExports.jsx(
                        Button,
                        {
                          size: "sm",
                          variant: "outline",
                          className: "text-blue-600 hover:text-blue-700",
                          title: "Comprehensive Permission Management",
                          "data-id": "iq16jjtpc",
                          "data-path": "src/pages/Admin/UserManagement.tsx",
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4", "data-id": "0tn5yv54h", "data-path": "src/pages/Admin/UserManagement.tsx" })
                        }
                      ),
                      "data-id": "oujdygdkz",
                      "data-path": "src/pages/Admin/UserManagement.tsx"
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Button,
                    {
                      size: "sm",
                      variant: "outline",
                      onClick: () => handleDeleteProfile(profile.id),
                      className: "text-red-600 hover:text-red-700",
                      "data-id": "ropq6ge7r",
                      "data-path": "src/pages/Admin/UserManagement.tsx",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "w-4 h-4", "data-id": "taytw0tam", "data-path": "src/pages/Admin/UserManagement.tsx" })
                    }
                  )
                ] }) })
              ] }, profile.id)
            ) })
          ] }) }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isEditDialogOpen, onOpenChange: setIsEditDialogOpen, "data-id": "f6dwkfx64", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-6xl max-h-[90vh]", "data-id": "k14a4ecx0", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { "data-id": "w4qdfhpmu", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { "data-id": "06awhvuzs", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Edit User Profile & Permissions" }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(90vh-120px)]", "data-id": "5d2q6dbqg", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "lg:col-span-1", "data-id": "gdtxu7dih", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollArea, { className: "h-full pr-4", "data-id": "wpibjkmlo", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", "data-id": "6i1o92139", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "840zv49cx", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_role", "data-id": "zdxsjbsd6", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Role" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: formData.role, onValueChange: (value) => setFormData({ ...formData, role: value }), "data-id": "jee1bd6ih", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "nlgcfrm2z", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { "data-id": "yj71l3i3v", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "s91152692", "data-path": "src/pages/Admin/UserManagement.tsx", children: roles.map(
                    (role) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: role, "data-id": "niwhntwg3", "data-path": "src/pages/Admin/UserManagement.tsx", children: role }, role)
                  ) })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "nr3zhtwyl", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_station", "data-id": "coki8wxqz", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: formData.station, onValueChange: (value) => setFormData({ ...formData, station: value }), "data-id": "cddqk0lwy", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "08dmgfx0l", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { "data-id": "07f7x1yq3", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { "data-id": "zp3zoi810", "data-path": "src/pages/Admin/UserManagement.tsx", children: stations.map(
                    (station) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: station, "data-id": "nkkp99p0b", "data-path": "src/pages/Admin/UserManagement.tsx", children: station }, station)
                  ) })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "exdtqwk34", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_employee_id", "data-id": "872ii7c5x", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Employee ID *" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "edit_employee_id",
                    value: formData.employee_id,
                    onChange: (e) => setFormData({ ...formData, employee_id: e.target.value }),
                    required: true,
                    "data-id": "ctachhnol",
                    "data-path": "src/pages/Admin/UserManagement.tsx"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "0k6ozek0z", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_phone", "data-id": "a86f47ddu", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Phone *" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "edit_phone",
                    value: formData.phone,
                    onChange: (e) => setFormData({ ...formData, phone: e.target.value }),
                    required: true,
                    "data-id": "qmdqoph0g",
                    "data-path": "src/pages/Admin/UserManagement.tsx"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "oiremmzsk", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_hire_date", "data-id": "jgji4do4f", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Hire Date" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "edit_hire_date",
                    type: "date",
                    value: formData.hire_date,
                    onChange: (e) => setFormData({ ...formData, hire_date: e.target.value }),
                    "data-id": "nceixyoay",
                    "data-path": "src/pages/Admin/UserManagement.tsx"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "f5jnhup3u", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "input",
                  {
                    type: "checkbox",
                    id: "edit_is_active",
                    checked: formData.is_active,
                    onChange: (e) => setFormData({ ...formData, is_active: e.target.checked }),
                    "data-id": "o12jkuady",
                    "data-path": "src/pages/Admin/UserManagement.tsx"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "edit_is_active", "data-id": "krzgeyhxw", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Active User" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: handleUpdateProfile, className: "w-full", "data-id": "6o9t13gav", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Update Profile" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Separator, { "data-id": "l8e6khxqz", "data-path": "src/pages/Admin/UserManagement.tsx" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "10dgx1ufx", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold text-sm flex items-center", "data-id": "8nmf1izru", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4 mr-2", "data-id": "smlnnbudq", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                  "Quick Actions"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    variant: "outline",
                    size: "sm",
                    onClick: () => {
                      const permissionsTab = document.querySelector('[value="permissions"]');
                      if (permissionsTab) {
                        permissionsTab.click();
                      }
                    },
                    className: "w-full",
                    "data-id": "de0c3k61q",
                    "data-path": "src/pages/Admin/UserManagement.tsx",
                    children: "Manage Detailed Permissions"
                  }
                )
              ] })
            ] }) }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4", "data-id": "bcsdov6u6", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { "data-id": "2zytn19nt", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollArea, { className: "h-full", "data-id": "zdbst3chi", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", "data-id": "rnvm4wyej", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "font-semibold text-lg mb-3 flex items-center", "data-id": "t2gyg0uoe", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "w-5 h-5 mr-2 text-blue-600", "data-id": "0t2lphpiv", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                  "User Summary"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "29ukm1v6k", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-gray-50 rounded-lg", "data-id": "zj46avv1z", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "enzqvwc0s", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Employee ID" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", "data-id": "r0nl0uuoa", "data-path": "src/pages/Admin/UserManagement.tsx", children: (selectedUserProfile == null ? void 0 : selectedUserProfile.employee_id) || "N/A" })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-gray-50 rounded-lg", "data-id": "c457iusd1", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "9eeuflj27", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Current Role" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: getRoleBadgeColor((selectedUserProfile == null ? void 0 : selectedUserProfile.role) || ""), "data-id": "cq4fwvmsa", "data-path": "src/pages/Admin/UserManagement.tsx", children: (selectedUserProfile == null ? void 0 : selectedUserProfile.role) || "N/A" })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-gray-50 rounded-lg", "data-id": "9bdoi6uby", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "sn9c6q0ts", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station Assignment" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: getStationBadgeColor((selectedUserProfile == null ? void 0 : selectedUserProfile.station) || ""), "data-id": "03alblvq1", "data-path": "src/pages/Admin/UserManagement.tsx", children: (selectedUserProfile == null ? void 0 : selectedUserProfile.station) || "N/A" })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-gray-50 rounded-lg", "data-id": "7jzgyu18n", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", "data-id": "7vmlea86x", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Status" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: (selectedUserProfile == null ? void 0 : selectedUserProfile.is_active) ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800", "data-id": "cznygp6kv", "data-path": "src/pages/Admin/UserManagement.tsx", children: (selectedUserProfile == null ? void 0 : selectedUserProfile.is_active) ? "Active" : "Inactive" })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Separator, { "data-id": "o1ee52k1w", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold text-md flex items-center", "data-id": "778w3pm6d", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-4 h-4 mr-2 text-green-600", "data-id": "nspkwzqiy", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                  "Permissions Overview"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2", "data-id": "crc6dmavr", "data-path": "src/pages/Admin/UserManagement.tsx", children: (() => {
                  try {
                    const permissions = (selectedUserProfile == null ? void 0 : selectedUserProfile.detailed_permissions) ? JSON.parse(selectedUserProfile.detailed_permissions) : {};
                    const areas = [
                      "dashboard",
                      "products",
                      "employees",
                      "sales_reports",
                      "vendors",
                      "orders",
                      "licenses",
                      "salary",
                      "inventory",
                      "delivery"
                    ];
                    if (Object.keys(permissions).length === 0) {
                      return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-yellow-50 rounded-lg border border-yellow-200", "data-id": "iff916vts", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-yellow-800 font-medium", "data-id": "r7jau2dei", "data-path": "src/pages/Admin/UserManagement.tsx", children: "No Permissions Configured" }),
                        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-yellow-700", "data-id": "0sgpgnziz", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Use the Permissions tab to set up access levels" })
                      ] });
                    }
                    return areas.map((area) => {
                      const areaPerms = permissions[area];
                      const hasView = areaPerms == null ? void 0 : areaPerms.view;
                      const hasEdit = areaPerms == null ? void 0 : areaPerms.edit;
                      const hasCreate = areaPerms == null ? void 0 : areaPerms.create;
                      return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-2 bg-gray-50 rounded-lg", "data-id": "y5crtpfo2", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-1", "data-id": "q8gmlvcgi", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium capitalize", "data-id": "clomrz10q", "data-path": "src/pages/Admin/UserManagement.tsx", children: area.replace("_", " ") }),
                        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-1", "data-id": "s6d2k22gt", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                          hasView && /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs bg-blue-50 text-blue-700", "data-id": "olu1hygzu", "data-path": "src/pages/Admin/UserManagement.tsx", children: "View" }),
                          hasEdit && /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs bg-yellow-50 text-yellow-700", "data-id": "lsq6uu80d", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Edit" }),
                          hasCreate && /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs bg-green-50 text-green-700", "data-id": "2092gja52", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Create" }),
                          !hasView && !hasEdit && !hasCreate && /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "text-xs", "data-id": "b5ukyqzq7", "data-path": "src/pages/Admin/UserManagement.tsx", children: "No Access" })
                        ] })
                      ] }) }, area);
                    });
                  } catch {
                    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 bg-red-50 rounded-lg border border-red-200", "data-id": "jqhwwxy6b", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-red-800 font-medium", "data-id": "xoczz6gtd", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Permission Data Error" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-red-700", "data-id": "4j6wlejb6", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Invalid permission format detected" })
                    ] });
                  }
                })() })
              ] }) }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { "data-id": "2jfd7pi4s", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollArea, { className: "h-full", "data-id": "8owel5fam", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", "data-id": "fkndyvfzw", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "font-semibold text-lg mb-3 flex items-center", "data-id": "ffkcj8r6p", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Activity, { className: "w-5 h-5 mr-2 text-orange-600", "data-id": "i2t3098qa", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                  "Recent Activity"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "40k6p3ssm", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-3 p-3 bg-blue-50 rounded-lg", "data-id": "iiym5398c", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "w-4 h-4 text-blue-600 mt-1", "data-id": "ry68f73wn", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "09lgvplvi", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium", "data-id": "g6w6z1zb0", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Profile Updated" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-600", "data-id": "42paxbxvx", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Last modified today" })
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-3 p-3 bg-green-50 rounded-lg", "data-id": "q60zjznbv", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(UserCheck, { className: "w-4 h-4 text-green-600 mt-1", "data-id": "8b9vkxafw", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "kk725pw7n", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium", "data-id": "i69f6x7bj", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Account Status" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "cshws307t", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                        "Currently ",
                        (selectedUserProfile == null ? void 0 : selectedUserProfile.is_active) ? "active" : "inactive"
                      ] })
                    ] })
                  ] }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-3 p-3 bg-purple-50 rounded-lg", "data-id": "moiblym6a", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Building2, { className: "w-4 h-4 text-purple-600 mt-1", "data-id": "ziemose1p", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "9o8z2crmw", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium", "data-id": "tr191nr97", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station Assignment" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-600", "data-id": "kbebpl5nk", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                        "Assigned to ",
                        selectedUserProfile == null ? void 0 : selectedUserProfile.station
                      ] })
                    ] })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Separator, { "data-id": "w96b1wmqt", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold text-md mb-3 flex items-center", "data-id": "7itw4pcxk", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "w-4 h-4 mr-2 text-indigo-600", "data-id": "iuuik3hhv", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                  "Tips & Help"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", "data-id": "5z4rdubfp", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 bg-yellow-50 rounded-lg border border-yellow-200", "data-id": "3gbmo1jmj", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-2", "data-id": "6l876n7c8", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(AlertCircle, { className: "w-4 h-4 text-yellow-600 mt-1", "data-id": "ayxekkg84", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "qpotp9gxn", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-yellow-800", "data-id": "gcj4kubel", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Role Changes" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-yellow-700", "data-id": "euxkng15h", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Changing roles will affect user permissions immediately" })
                    ] })
                  ] }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 bg-blue-50 rounded-lg border border-blue-200", "data-id": "navsrhltm", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-2", "data-id": "gi0ynf1ps", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Settings, { className: "w-4 h-4 text-blue-600 mt-1", "data-id": "i3tmumzgi", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "tn09pet14", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-blue-800", "data-id": "8txmm9c5u", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station Assignment" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-blue-700", "data-id": "739yx3f3z", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Users can only access data for their assigned station" })
                    ] })
                  ] }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 bg-green-50 rounded-lg border border-green-200", "data-id": "q84ge8exe", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-2", "data-id": "6hnzvxh4c", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Phone, { className: "w-4 h-4 text-green-600 mt-1", "data-id": "8s5f24ley", "data-path": "src/pages/Admin/UserManagement.tsx" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "5z3u2mauz", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-green-800", "data-id": "hn0dp146b", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Contact Information" }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-green-700", "data-id": "ejm80vb59", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Keep phone numbers updated for important notifications" })
                    ] })
                  ] }) })
                ] })
              ] }) }) })
            ] })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "permissions", "data-id": "bp34661vk", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(EnhancedUserPermissionManager, { "data-id": "y1loupfje", "data-path": "src/pages/Admin/UserManagement.tsx" }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      BatchEditDialog,
      {
        isOpen: isBatchEditDialogOpen,
        onClose: () => setIsBatchEditDialogOpen(false),
        onSave: confirmBatchEdit,
        selectedCount: batchSelection.selectedCount,
        isLoading: batchActionLoading,
        itemName: "user profiles",
        "data-id": "081ka6in2",
        "data-path": "src/pages/Admin/UserManagement.tsx",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", "data-id": "5ht9bbq6i", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "75lrkatb9", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "batch_role", "data-id": "yssfey41a", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Role" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: batchEditData.role, onValueChange: (value) => setBatchEditData({ ...batchEditData, role: value }), "data-id": "jn5xqsg3w", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "0y8rr0ddw", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select role to update", "data-id": "4w8ryhdl8", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "yhyxzji2m", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "", "data-id": "51b30htwl", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Keep existing roles" }),
                roles.map(
                  (role) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: role, "data-id": "zoyb33mh8", "data-path": "src/pages/Admin/UserManagement.tsx", children: role }, role)
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { "data-id": "hqyap7tc6", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "batch_station", "data-id": "46hiw7cft", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Station" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: batchEditData.station, onValueChange: (value) => setBatchEditData({ ...batchEditData, station: value }), "data-id": "vshz1qn6q", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { "data-id": "6q3tgf7cy", "data-path": "src/pages/Admin/UserManagement.tsx", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select station to update", "data-id": "7ptzwv7hv", "data-path": "src/pages/Admin/UserManagement.tsx" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { "data-id": "uuwisgvcu", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "", "data-id": "ly8czrq61", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Keep existing stations" }),
                stations.map(
                  (station) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: station, "data-id": "2fs4zafag", "data-path": "src/pages/Admin/UserManagement.tsx", children: station }, station)
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", "data-id": "i9s5b3kdk", "data-path": "src/pages/Admin/UserManagement.tsx", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Checkbox,
              {
                id: "batch_is_active",
                checked: batchEditData.is_active,
                onCheckedChange: (checked) => setBatchEditData({ ...batchEditData, is_active: checked }),
                "data-id": "x553cf0zr",
                "data-path": "src/pages/Admin/UserManagement.tsx"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { htmlFor: "batch_is_active", "data-id": "sd0d6187f", "data-path": "src/pages/Admin/UserManagement.tsx", children: "Set all selected users as active" })
          ] })
        ] })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      BatchDeleteDialog,
      {
        isOpen: isBatchDeleteDialogOpen,
        onClose: () => setIsBatchDeleteDialogOpen(false),
        onConfirm: confirmBatchDelete,
        selectedCount: batchSelection.selectedCount,
        isLoading: batchActionLoading,
        itemName: "user profiles",
        selectedItems: batchSelection.getSelectedData(filteredProfiles, (profile) => profile.id).map((profile) => ({
          id: profile.id,
          name: `${profile.employee_id} - ${profile.role}`
        })),
        "data-id": "6ackh0ag9",
        "data-path": "src/pages/Admin/UserManagement.tsx"
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      CreateUserDialog,
      {
        isOpen: isCreateUserDialogOpen,
        onClose: () => setIsCreateUserDialogOpen(false),
        onUserCreated: () => {
          fetchData();
          toast({
            title: "Success",
            description: "New user account and profile created successfully"
          });
        },
        "data-id": "of4d3cvuv",
        "data-path": "src/pages/Admin/UserManagement.tsx"
      }
    )
  ] });
};
export {
  UserManagement as default
};
//# sourceMappingURL=UserManagement-dK5lrtiA.js.map
