import{r as o,u as G,j as a}from"./react-vendor-DaFTMQpG.js";import{Z as U,u as W,C as H,d as K,e as X,f as Z,g as $,A as J,m as Q,L as P,I as v,B as p,X as V}from"./admin-core-DIkG70u3.js";import{L as Y}from"./index-BESv0EC1.js";import{K as _,ac as aa,aO as N,G as k,aP as C,aB as S,aD as ea,a8 as sa,bO as ta}from"./ui-components-ZiW824g0.js";import"./vendor-D3cU5zLX.js";import"./aws-sdk-abEXkGUS.js";import"./supabase-SVDmTrDh.js";import"./query-C15D-fBj.js";import"./admin-security-rNNhKrj0.js";import"./business-pages-CUHYPFdV.js";import"./animations-CtV-9cdB.js";const ma=()=>{const[c,j]=o.useState(""),[x,h]=o.useState(""),[w,L]=o.useState(""),[s,d]=o.useState("login"),[m,z]=o.useState(!1),[u,q]=o.useState(!1),[y,t]=o.useState(""),[f,i]=o.useState("error"),{signIn:E,signUp:A,resetPassword:F,loading:b}=U(),M=G(),{toast:n}=W(),l=()=>{j(""),h(""),L(""),t("")},D=async r=>{if(r.preventDefault(),!c){t("Please enter your email address"),i("error");return}try{const{error:e}=await F(c);e?(t(e.message),i("error"),n({title:"Error",description:e.message,variant:"destructive"})):(t("Password reset link has been sent to your email address"),i("success"),n({title:"Success",description:"Password reset link sent to your email"}),setTimeout(()=>{d("login"),l()},3e3))}catch(e){const g=e instanceof Error?e.message:"Failed to send reset email";t(g),i("error"),n({title:"Error",description:g,variant:"destructive"})}},T=async r=>{if(r.preventDefault(),t(""),s==="forgot-password")return D(r);if(s==="register"&&x!==w){t("Passwords do not match"),i("error");return}try{if(s==="login"){const{error:e}=await E(c,x);e?(t(e.message),i("error")):(n({title:"Welcome back!",description:"Successfully logged in"}),M("/dashboard"))}else if(s==="register"){const{error:e}=await A(c,x);e?(t(e.message),i("error")):(t("Account created successfully! Please check your email for verification."),i("success"),n({title:"Account Created",description:"Please check your email for verification"}),setTimeout(()=>{d("login"),l()},3e3))}}catch(e){const g=e instanceof Error?e.message:"An error occurred";t(g),i("error"),n({title:"Error",description:g,variant:"destructive"})}},I=()=>{switch(s){case"login":return"Welcome Back";case"register":return"Create Account";case"forgot-password":return"Reset Password";default:return"Sign In"}},B=()=>{switch(s){case"login":return"Enter your credentials to access the portal";case"register":return"Create a new account to get started";case"forgot-password":return"Enter your email to receive a password reset link";default:return""}},R=()=>{if(b)return"Please wait...";switch(s){case"login":return"Sign In";case"register":return"Create Account";case"forgot-password":return"Send Reset Link";default:return"Submit"}},O=()=>{if(b)return a.jsx(ea,{className:"mr-2 h-4 w-4 animate-spin","data-id":"vvzw0qnje","data-path":"src/pages/LoginPage.tsx"});switch(s){case"login":return a.jsx(ta,{className:"mr-2 h-4 w-4","data-id":"7z4t0t8ky","data-path":"src/pages/LoginPage.tsx"});case"register":return a.jsx(sa,{className:"mr-2 h-4 w-4","data-id":"i8zrm8lbg","data-path":"src/pages/LoginPage.tsx"});case"forgot-password":return a.jsx(N,{className:"mr-2 h-4 w-4","data-id":"a44hnevqk","data-path":"src/pages/LoginPage.tsx"});default:return null}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100","data-id":"l2x1li2t5","data-path":"src/pages/LoginPage.tsx",children:a.jsx("div",{className:"flex items-center justify-center p-4 min-h-screen","data-id":"gjn5ll2kk","data-path":"src/pages/LoginPage.tsx",children:a.jsxs("div",{className:"w-full max-w-md","data-id":"jhjfy039g","data-path":"src/pages/LoginPage.tsx",children:[a.jsx("div",{className:"text-center mb-8","data-id":"rq6vbuqss","data-path":"src/pages/LoginPage.tsx",children:a.jsxs("div",{className:"flex flex-col items-center","data-id":"1wp02bgiu","data-path":"src/pages/LoginPage.tsx",children:[a.jsx("div",{className:"mb-4 transform hover:scale-105 transition-transform duration-200","data-id":"4vshqpwf7","data-path":"src/pages/LoginPage.tsx",children:a.jsx(Y,{size:"xl",showText:!1,className:"mb-4","data-id":"zu56lqzhr","data-path":"src/pages/LoginPage.tsx"})}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-800 to-indigo-800 bg-clip-text text-transparent mb-2","data-id":"yu886bozh","data-path":"src/pages/LoginPage.tsx",children:"DFS Manager Portal"}),a.jsx("p",{className:"text-slate-600 font-medium","data-id":"vqlhciznd","data-path":"src/pages/LoginPage.tsx",children:"Gas Station Management System"})]})}),a.jsxs(H,{className:"shadow-2xl border-0 backdrop-blur-sm bg-white/95","data-id":"f0i8rryu3","data-path":"src/pages/LoginPage.tsx",children:[a.jsxs(K,{className:"space-y-1 pb-6","data-id":"6qjh22mrn","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(X,{className:"text-2xl font-bold text-center text-slate-800","data-id":"5ji5apmyx","data-path":"src/pages/LoginPage.tsx",children:I()}),a.jsx(Z,{className:"text-center text-slate-600","data-id":"hcjheekl1","data-path":"src/pages/LoginPage.tsx",children:B()})]}),a.jsxs($,{"data-id":"1c0vgqqv8","data-path":"src/pages/LoginPage.tsx",children:[y&&a.jsxs(J,{className:`mb-4 ${f==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,"data-id":"6wkxm01r6","data-path":"src/pages/LoginPage.tsx",children:[f==="success"?a.jsx(_,{className:"h-4 w-4 text-green-600","data-id":"0byobyvoj","data-path":"src/pages/LoginPage.tsx"}):a.jsx(aa,{className:"h-4 w-4 text-red-600","data-id":"8i1q65grn","data-path":"src/pages/LoginPage.tsx"}),a.jsx(Q,{className:f==="success"?"text-green-800":"text-red-800","data-id":"hv52jqdv3","data-path":"src/pages/LoginPage.tsx",children:y})]}),a.jsxs("form",{onSubmit:T,className:"space-y-4","data-id":"ko5sxb44f","data-path":"src/pages/LoginPage.tsx",children:[a.jsxs("div",{className:"space-y-2","data-id":"wob81wdbs","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(P,{htmlFor:"email",className:"text-slate-700 font-medium","data-id":"c4t9jbvi7","data-path":"src/pages/LoginPage.tsx",children:"Email Address"}),a.jsxs("div",{className:"relative","data-id":"4gkxupm8z","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4","data-id":"52fcjkm2m","data-path":"src/pages/LoginPage.tsx"}),a.jsx(v,{id:"email",type:"email",placeholder:"Enter your email",value:c,onChange:r=>j(r.target.value),required:!0,className:"h-11 pl-10 border-slate-200 focus:border-blue-500 focus:ring-blue-500","data-id":"2xzzs2py7","data-path":"src/pages/LoginPage.tsx"})]})]}),s!=="forgot-password"&&a.jsxs("div",{className:"space-y-2","data-id":"cozmvmhu4","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(P,{htmlFor:"password",className:"text-slate-700 font-medium","data-id":"0giglj74c","data-path":"src/pages/LoginPage.tsx",children:"Password"}),a.jsxs("div",{className:"relative","data-id":"efgorijtx","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4","data-id":"4s89t4v82","data-path":"src/pages/LoginPage.tsx"}),a.jsx(v,{id:"password",type:m?"text":"password",placeholder:"Enter your password",value:x,onChange:r=>h(r.target.value),required:!0,className:"h-11 pl-10 pr-10 border-slate-200 focus:border-blue-500 focus:ring-blue-500","data-id":"c1ass35rn","data-path":"src/pages/LoginPage.tsx"}),a.jsx("button",{type:"button",onClick:()=>z(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600","data-id":"uabn2ylgi","data-path":"src/pages/LoginPage.tsx",children:m?a.jsx(C,{className:"h-4 w-4","data-id":"c52k1mmaj","data-path":"src/pages/LoginPage.tsx"}):a.jsx(S,{className:"h-4 w-4","data-id":"rvyoo10vx","data-path":"src/pages/LoginPage.tsx"})})]})]}),s==="register"&&a.jsxs("div",{className:"space-y-2","data-id":"p7ux041vi","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(P,{htmlFor:"confirmPassword",className:"text-slate-700 font-medium","data-id":"acc0apzqz","data-path":"src/pages/LoginPage.tsx",children:"Confirm Password"}),a.jsxs("div",{className:"relative","data-id":"uui7a7s0l","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4","data-id":"pry3u41id","data-path":"src/pages/LoginPage.tsx"}),a.jsx(v,{id:"confirmPassword",type:u?"text":"password",placeholder:"Confirm your password",value:w,onChange:r=>L(r.target.value),required:!0,className:"h-11 pl-10 pr-10 border-slate-200 focus:border-blue-500 focus:ring-blue-500","data-id":"vvyxbyhz0","data-path":"src/pages/LoginPage.tsx"}),a.jsx("button",{type:"button",onClick:()=>q(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600","data-id":"q8rddb71u","data-path":"src/pages/LoginPage.tsx",children:u?a.jsx(C,{className:"h-4 w-4","data-id":"b1wn8zcnx","data-path":"src/pages/LoginPage.tsx"}):a.jsx(S,{className:"h-4 w-4","data-id":"6sejlsvlj","data-path":"src/pages/LoginPage.tsx"})})]})]}),s==="login"&&a.jsx("div",{className:"text-right","data-id":"hpseh5ri0","data-path":"src/pages/LoginPage.tsx",children:a.jsx(p,{type:"button",variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800 text-sm",onClick:()=>{d("forgot-password"),h(""),t("")},"data-id":"8txeeww12","data-path":"src/pages/LoginPage.tsx",children:"Forgot password?"})}),a.jsxs(p,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium transition-all duration-200 transform hover:scale-[1.02]",disabled:b,"data-id":"ucima2lp4","data-path":"src/pages/LoginPage.tsx",children:[O(),R()]})]}),a.jsxs("div",{className:"mt-6","data-id":"1srgn86ni","data-path":"src/pages/LoginPage.tsx",children:[a.jsx(V,{className:"my-4","data-id":"rv30gigct","data-path":"src/pages/LoginPage.tsx"}),a.jsxs("div",{className:"text-center space-y-2","data-id":"lhuxmwo33","data-path":"src/pages/LoginPage.tsx",children:[s==="login"&&a.jsxs("div",{"data-id":"wt94m5i8c","data-path":"src/pages/LoginPage.tsx",children:[a.jsx("span",{className:"text-sm text-slate-600","data-id":"6t0bdylcu","data-path":"src/pages/LoginPage.tsx",children:"Don't have an account? "}),a.jsx(p,{variant:"link",className:"p-0 h-auto font-semibold text-blue-600 hover:text-blue-800",onClick:()=>{d("register"),l()},"data-id":"prnd21mgl","data-path":"src/pages/LoginPage.tsx",children:"Create one"})]}),s==="register"&&a.jsxs("div",{"data-id":"il0pj01vz","data-path":"src/pages/LoginPage.tsx",children:[a.jsx("span",{className:"text-sm text-slate-600","data-id":"ovynygwin","data-path":"src/pages/LoginPage.tsx",children:"Already have an account? "}),a.jsx(p,{variant:"link",className:"p-0 h-auto font-semibold text-blue-600 hover:text-blue-800",onClick:()=>{d("login"),l()},"data-id":"bgtcwipo4","data-path":"src/pages/LoginPage.tsx",children:"Sign in"})]}),s==="forgot-password"&&a.jsxs("div",{"data-id":"zerql7jsc","data-path":"src/pages/LoginPage.tsx",children:[a.jsx("span",{className:"text-sm text-slate-600","data-id":"rirhb5dcm","data-path":"src/pages/LoginPage.tsx",children:"Remember your password? "}),a.jsx(p,{variant:"link",className:"p-0 h-auto font-semibold text-blue-600 hover:text-blue-800",onClick:()=>{d("login"),l()},"data-id":"7v3409vz4","data-path":"src/pages/LoginPage.tsx",children:"Sign in"})]})]})]})]})]}),a.jsx("div",{className:"text-center mt-6 text-sm text-slate-500","data-id":"uzd26sn75","data-path":"src/pages/LoginPage.tsx",children:a.jsx("p",{"data-id":"bnjw7t0yg","data-path":"src/pages/LoginPage.tsx",children:"© 2024 DFS Management Systems. All rights reserved."})})]})})})};export{ma as default};
