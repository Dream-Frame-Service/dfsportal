const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DLXYiF5u.js","assets/ui-D8yO-OxE.js","assets/vendor-XhsmhKu1.js","assets/LoginPage-0iakm6st.js","assets/input-O-h5M17i.js","assets/label-ByQLJlol.js","assets/separator-CZaaJG51.js","assets/Logo-DB4J759-.js","assets/check-circle-2-DB0FZP1x.js","assets/alert-circle-BtBhanmN.js","assets/mail-eUojE_yv.js","assets/eye-off-CBf48i3l.js","assets/eye-ql1YC_No.js","assets/loader-2-_jRFAYkw.js","assets/user-plus-ByoW7wQ7.js","assets/HomePage-Drssr0bD.js","assets/arrow-right-BEMYEbP8.js","assets/users-B0SoK6Bo.js","assets/bar-chart-3-ClOB5LKJ.js","assets/package-qSLSIT0P.js","assets/settings-DomtpyA4.js","assets/zap-HGA0vdNu.js","assets/NotFound-Rve0BD0U.js","assets/proxy-DT8J3VH7.js","assets/ResetPasswordPage-CTLhZPn8.js","assets/AdminPanel-C43XH_Z3.js","assets/tabs-DvoIQ_jF.js","assets/use-smart-auth-CvYh4qtq.js","assets/AuthContext-Bo8HSNc2.js","assets/user-check-BZAs6qns.js","assets/target-rlMrmTX7.js","assets/check-circle-BiphBZXJ.js","assets/search-CuZ6-xMH.js","assets/file-text-Btezo_YE.js","assets/user-g6VkGec-.js","assets/download-CAI3Hb-E.js","assets/AdminDashboard-Bbz2Ed01.js","assets/databaseService-De-l3oBE.js","assets/clock-BDUEMJJR.js","assets/trending-up-rMf4iF9b.js","assets/UserManagement-CdmtEO3b.js","assets/dialog--irBdw-G.js","assets/scroll-area-Gx4_QwVO.js","assets/select-D0pEHiDr.js","assets/use-admin-access-DB076FtM.js","assets/square-pen-CBuslv3A.js","assets/trash-2-MkbbqPap.js","assets/switch-Cl93K1DX.js","assets/building-2-7eB0amfx.js","assets/dollar-sign-OBnb8nXG.js","assets/plus-BGEVx4a3.js","assets/rotate-ccw-DV9cG8Qf.js","assets/save-C9ClsOGX.js","assets/calendar-QZkL-AVB.js","assets/printer-DWU32MN3.js","assets/SystemLogs-mlXb7-JH.js","assets/ProductList-BPpyvonA.js","assets/ProductForm-DyKY4kp5.js","assets/textarea-B-Q9Uetu.js","assets/SalesReportList-DL5uFQl_.js","assets/receipt-ER4IH60t.js","assets/SalesReportForm-BKhC41lu.js","assets/EnhancedFileUpload-xuzDVd9Q.js","assets/EmployeeList-CvpTtc6W.js","assets/EmployeeForm-BOv74J0S.js"])))=>i.map(i=>d[i]);
var ka=Object.defineProperty;var Qs=r=>{throw TypeError(r)};var Ta=(r,e,t)=>e in r?ka(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var wt=(r,e,t)=>Ta(r,typeof e!="symbol"?e+"":e,t),Kr=(r,e,t)=>e.has(r)||Qs("Cannot "+t);var v=(r,e,t)=>(Kr(r,e,"read from private field"),t?t.call(r):e.get(r)),U=(r,e,t)=>e.has(r)?Qs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),I=(r,e,t,s)=>(Kr(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),ie=(r,e,t)=>(Kr(r,e,"access private method"),t);var dr=(r,e,t,s)=>({set _(n){I(r,e,n,t)},get _(){return v(r,e,s)}});import{j as u,P as De,c as qn,a as ja,u as Ss,B as Aa,b as zn,d as Vn,e as Pe,f as xr,R as Ca,g as Pa,h as Hn,i as Ra,S as Oa,k as Ia}from"./ui-D8yO-OxE.js";import{a as Gn,r as b,u as Wn,R as x,g as Na,c as we,v as Da,d as $a,N as La,B as Ua,e as Fa,f as te}from"./vendor-XhsmhKu1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Kn,Ys=Gn;Kn=Ys.createRoot,Ys.hydrateRoot;const Ma="modulepreload",Ba=function(r){return"/"+r},Xs={},Z=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(l=>{if(l=Ba(l),l in Xs)return;Xs[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":Ma,c||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),c)return new Promise((g,h)=>{p.addEventListener("load",g),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var jr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ar=typeof window>"u"||"Deno"in globalThis;function Te(){}function qa(r,e){return typeof r=="function"?r(e):r}function za(r){return typeof r=="number"&&r>=0&&r!==1/0}function Va(r,e){return Math.max(r+(e||0)-Date.now(),0)}function as(r,e){return typeof r=="function"?r(e):r}function Ha(r,e){return typeof r=="function"?r(e):r}function Zs(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:o}=r;if(a){if(s){if(e.queryHash!==ks(a,e.options))return!1}else if(!tr(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||n&&n!==e.state.fetchStatus||i&&!i(e))}function en(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(er(e.options.mutationKey)!==er(i))return!1}else if(!tr(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function ks(r,e){return((e==null?void 0:e.queryKeyHashFn)||er)(r)}function er(r){return JSON.stringify(r,(e,t)=>os(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function tr(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>tr(r[t],e[t])):!1}function Jn(r,e){if(r===e)return r;const t=tn(r)&&tn(e);if(t||os(r)&&os(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{},l=new Set(s);let c=0;for(let d=0;d<a;d++){const p=t?d:i[d];(!t&&l.has(p)||t)&&r[p]===void 0&&e[p]===void 0?(o[p]=void 0,c++):(o[p]=Jn(r[p],e[p]),o[p]===r[p]&&r[p]!==void 0&&c++)}return n===a&&c===n?r:o}return e}function tn(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function os(r){if(!rn(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!rn(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function rn(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ga(r){return new Promise(e=>{setTimeout(e,r)})}function Wa(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Jn(r,e):e}function Ka(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function Ja(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Ts=Symbol();function Qn(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Ts?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var dt,Ye,At,Nn,Qa=(Nn=class extends jr{constructor(){super();U(this,dt);U(this,Ye);U(this,At);I(this,At,e=>{if(!Ar&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){v(this,Ye)||this.setEventListener(v(this,At))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,Ye))==null||e.call(this),I(this,Ye,void 0))}setEventListener(e){var t;I(this,At,e),(t=v(this,Ye))==null||t.call(this),I(this,Ye,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){v(this,dt)!==e&&(I(this,dt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof v(this,dt)=="boolean"?v(this,dt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dt=new WeakMap,Ye=new WeakMap,At=new WeakMap,Nn),Yn=new Qa,Ct,Xe,Pt,Dn,Ya=(Dn=class extends jr{constructor(){super();U(this,Ct,!0);U(this,Xe);U(this,Pt);I(this,Pt,e=>{if(!Ar&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){v(this,Xe)||this.setEventListener(v(this,Pt))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,Xe))==null||e.call(this),I(this,Xe,void 0))}setEventListener(e){var t;I(this,Pt,e),(t=v(this,Xe))==null||t.call(this),I(this,Xe,e(this.setOnline.bind(this)))}setOnline(e){v(this,Ct)!==e&&(I(this,Ct,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return v(this,Ct)}},Ct=new WeakMap,Xe=new WeakMap,Pt=new WeakMap,Dn),Er=new Ya;function Xa(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function Za(r){return Math.min(1e3*2**r,3e4)}function Xn(r){return(r??"online")==="online"?Er.isOnline():!0}var Zn=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Jr(r){return r instanceof Zn}function ei(r){let e=!1,t=0,s=!1,n;const i=Xa(),a=m=>{var f;s||(g(new Zn(m)),(f=r.abort)==null||f.call(r))},o=()=>{e=!0},l=()=>{e=!1},c=()=>Yn.isFocused()&&(r.networkMode==="always"||Er.isOnline())&&r.canRun(),d=()=>Xn(r.networkMode)&&r.canRun(),p=m=>{var f;s||(s=!0,(f=r.onSuccess)==null||f.call(r,m),n==null||n(),i.resolve(m))},g=m=>{var f;s||(s=!0,(f=r.onError)==null||f.call(r,m),n==null||n(),i.reject(m))},h=()=>new Promise(m=>{var f;n=w=>{(s||c())&&m(w)},(f=r.onPause)==null||f.call(r)}).then(()=>{var m;n=void 0,s||(m=r.onContinue)==null||m.call(r)}),_=()=>{if(s)return;let m;const f=t===0?r.initialPromise:void 0;try{m=f??r.fn()}catch(w){m=Promise.reject(w)}Promise.resolve(m).then(p).catch(w=>{var k;if(s)return;const E=r.retry??(Ar?0:3),y=r.retryDelay??Za,S=typeof y=="function"?y(t,w):y,T=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,w);if(e||!T){g(w);return}t++,(k=r.onFail)==null||k.call(r,t,w),Ga(S).then(()=>c()?void 0:h()).then(()=>{e?g(w):_()})})};return{promise:i,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?_():h().then(_),i)}}var eo=r=>setTimeout(r,0);function to(){let r=[],e=0,t=o=>{o()},s=o=>{o()},n=eo;const i=o=>{e?r.push(o):n(()=>{t(o)})},a=()=>{const o=r;r=[],o.length&&n(()=>{s(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var ue=to(),ut,$n,ti=($n=class{constructor(){U(this,ut)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),za(this.gcTime)&&I(this,ut,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Ar?1/0:5*60*1e3))}clearGcTimeout(){v(this,ut)&&(clearTimeout(v(this,ut)),I(this,ut,void 0))}},ut=new WeakMap,$n),Rt,Ot,be,ht,oe,sr,ft,je,Ue,Ln,ro=(Ln=class extends ti{constructor(e){super();U(this,je);U(this,Rt);U(this,Ot);U(this,be);U(this,ht);U(this,oe);U(this,sr);U(this,ft);I(this,ft,!1),I(this,sr,e.defaultOptions),this.setOptions(e.options),this.observers=[],I(this,ht,e.client),I(this,be,v(this,ht).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,I(this,Rt,no(this.options)),this.state=e.state??v(this,Rt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=v(this,oe))==null?void 0:e.promise}setOptions(e){this.options={...v(this,sr),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&v(this,be).remove(this)}setData(e,t){const s=Wa(this.state.data,e,this.options);return ie(this,je,Ue).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){ie(this,je,Ue).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=v(this,oe))==null?void 0:s.promise;return(n=v(this,oe))==null||n.cancel(e),t?t.then(Te).catch(Te):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(v(this,Rt))}isActive(){return this.observers.some(e=>Ha(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ts||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>as(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Va(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=v(this,oe))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=v(this,oe))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),v(this,be).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(v(this,oe)&&(v(this,ft)?v(this,oe).cancel({revert:!0}):v(this,oe).cancelRetry()),this.scheduleGc()),v(this,be).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ie(this,je,Ue).call(this,{type:"invalidate"})}fetch(e,t){var c,d,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(v(this,oe))return v(this,oe).continueRetry(),v(this,oe).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(h=>h.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,n=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(I(this,ft,!0),s.signal)})},i=()=>{const g=Qn(this.options,t),_=(()=>{const m={client:v(this,ht),queryKey:this.queryKey,meta:this.meta};return n(m),m})();return I(this,ft,!1),this.options.persister?this.options.persister(g,_,this):g(_)},o=(()=>{const g={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:v(this,ht),state:this.state,fetchFn:i};return n(g),g})();(c=this.options.behavior)==null||c.onFetch(o,this),I(this,Ot,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ie(this,je,Ue).call(this,{type:"fetch",meta:(p=o.fetchOptions)==null?void 0:p.meta});const l=g=>{var h,_,m,f;Jr(g)&&g.silent||ie(this,je,Ue).call(this,{type:"error",error:g}),Jr(g)||((_=(h=v(this,be).config).onError)==null||_.call(h,g,this),(f=(m=v(this,be).config).onSettled)==null||f.call(m,this.state.data,g,this)),this.scheduleGc()};return I(this,oe,ei({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var h,_,m,f;if(g===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(w){l(w);return}(_=(h=v(this,be).config).onSuccess)==null||_.call(h,g,this),(f=(m=v(this,be).config).onSettled)==null||f.call(m,g,this.state.error,this),this.scheduleGc()},onError:l,onFail:(g,h)=>{ie(this,je,Ue).call(this,{type:"failed",failureCount:g,error:h})},onPause:()=>{ie(this,je,Ue).call(this,{type:"pause"})},onContinue:()=>{ie(this,je,Ue).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),v(this,oe).start()}},Rt=new WeakMap,Ot=new WeakMap,be=new WeakMap,ht=new WeakMap,oe=new WeakMap,sr=new WeakMap,ft=new WeakMap,je=new WeakSet,Ue=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...so(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Jr(n)&&n.revert&&v(this,Ot)?{...v(this,Ot),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),ue.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),v(this,be).notify({query:this,type:"updated",action:e})})},Ln);function so(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xn(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function no(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Oe,Un,io=(Un=class extends jr{constructor(e={}){super();U(this,Oe);this.config=e,I(this,Oe,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??ks(n,t);let a=this.get(i);return a||(a=new ro({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){v(this,Oe).has(e.queryHash)||(v(this,Oe).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=v(this,Oe).get(e.queryHash);t&&(e.destroy(),t===e&&v(this,Oe).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ue.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return v(this,Oe).get(e)}getAll(){return[...v(this,Oe).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Zs(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Zs(e,s)):t}notify(e){ue.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ue.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ue.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Oe=new WeakMap,Un),Ie,de,pt,Ne,We,Fn,ao=(Fn=class extends ti{constructor(e){super();U(this,Ne);U(this,Ie);U(this,de);U(this,pt);this.mutationId=e.mutationId,I(this,de,e.mutationCache),I(this,Ie,[]),this.state=e.state||oo(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){v(this,Ie).includes(e)||(v(this,Ie).push(e),this.clearGcTimeout(),v(this,de).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){I(this,Ie,v(this,Ie).filter(t=>t!==e)),this.scheduleGc(),v(this,de).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){v(this,Ie).length||(this.state.status==="pending"?this.scheduleGc():v(this,de).remove(this))}continue(){var e;return((e=v(this,pt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,l,c,d,p,g,h,_,m,f,w,E,y,S,T,k,P,L;const t=()=>{ie(this,Ne,We).call(this,{type:"continue"})};I(this,pt,ei({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,q)=>{ie(this,Ne,We).call(this,{type:"failed",failureCount:j,error:q})},onPause:()=>{ie(this,Ne,We).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>v(this,de).canRun(this)}));const s=this.state.status==="pending",n=!v(this,pt).canStart();try{if(s)t();else{ie(this,Ne,We).call(this,{type:"pending",variables:e,isPaused:n}),await((a=(i=v(this,de).config).onMutate)==null?void 0:a.call(i,e,this));const q=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));q!==this.state.context&&ie(this,Ne,We).call(this,{type:"pending",context:q,variables:e,isPaused:n})}const j=await v(this,pt).start();return await((d=(c=v(this,de).config).onSuccess)==null?void 0:d.call(c,j,e,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,j,e,this.state.context)),await((_=(h=v(this,de).config).onSettled)==null?void 0:_.call(h,j,null,this.state.variables,this.state.context,this)),await((f=(m=this.options).onSettled)==null?void 0:f.call(m,j,null,e,this.state.context)),ie(this,Ne,We).call(this,{type:"success",data:j}),j}catch(j){try{throw await((E=(w=v(this,de).config).onError)==null?void 0:E.call(w,j,e,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,j,e,this.state.context)),await((k=(T=v(this,de).config).onSettled)==null?void 0:k.call(T,void 0,j,this.state.variables,this.state.context,this)),await((L=(P=this.options).onSettled)==null?void 0:L.call(P,void 0,j,e,this.state.context)),j}finally{ie(this,Ne,We).call(this,{type:"error",error:j})}}finally{v(this,de).runNext(this)}}},Ie=new WeakMap,de=new WeakMap,pt=new WeakMap,Ne=new WeakSet,We=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ue.batch(()=>{v(this,Ie).forEach(s=>{s.onMutationUpdate(e)}),v(this,de).notify({mutation:this,type:"updated",action:e})})},Fn);function oo(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Be,Ae,nr,Mn,lo=(Mn=class extends jr{constructor(e={}){super();U(this,Be);U(this,Ae);U(this,nr);this.config=e,I(this,Be,new Set),I(this,Ae,new Map),I(this,nr,0)}build(e,t,s){const n=new ao({mutationCache:this,mutationId:++dr(this,nr)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){v(this,Be).add(e);const t=ur(e);if(typeof t=="string"){const s=v(this,Ae).get(t);s?s.push(e):v(this,Ae).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(v(this,Be).delete(e)){const t=ur(e);if(typeof t=="string"){const s=v(this,Ae).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&v(this,Ae).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ur(e);if(typeof t=="string"){const s=v(this,Ae).get(t),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=ur(e);if(typeof t=="string"){const n=(s=v(this,Ae).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ue.batch(()=>{v(this,Be).forEach(e=>{this.notify({type:"removed",mutation:e})}),v(this,Be).clear(),v(this,Ae).clear()})}getAll(){return Array.from(v(this,Be))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>en(t,s))}findAll(e={}){return this.getAll().filter(t=>en(e,t))}notify(e){ue.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ue.batch(()=>Promise.all(e.map(t=>t.continue().catch(Te))))}},Be=new WeakMap,Ae=new WeakMap,nr=new WeakMap,Mn);function ur(r){var e;return(e=r.options.scope)==null?void 0:e.id}function sn(r){return{onFetch:(e,t)=>{var d,p,g,h,_;const s=e.options,n=(g=(p=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],a=((_=e.state.data)==null?void 0:_.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const f=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},w=Qn(e.options,e.fetchOptions),E=async(y,S,T)=>{if(m)return Promise.reject();if(S==null&&y.pages.length)return Promise.resolve(y);const P=(()=>{const K={client:e.client,queryKey:e.queryKey,pageParam:S,direction:T?"backward":"forward",meta:e.options.meta};return f(K),K})(),L=await w(P),{maxPages:j}=e.options,q=T?Ja:Ka;return{pages:q(y.pages,L,j),pageParams:q(y.pageParams,S,j)}};if(n&&i.length){const y=n==="backward",S=y?co:nn,T={pages:i,pageParams:a},k=S(s,T);o=await E(T,k,y)}else{const y=r??i.length;do{const S=l===0?a[0]??s.initialPageParam:nn(s,o);if(l>0&&S==null)break;o=await E(o,S),l++}while(l<y)}return o};e.options.persister?e.fetchFn=()=>{var m,f;return(f=(m=e.options).persister)==null?void 0:f.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function nn(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function co(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var Y,Ze,et,It,Nt,tt,Dt,$t,Bn,uo=(Bn=class{constructor(r={}){U(this,Y);U(this,Ze);U(this,et);U(this,It);U(this,Nt);U(this,tt);U(this,Dt);U(this,$t);I(this,Y,r.queryCache||new io),I(this,Ze,r.mutationCache||new lo),I(this,et,r.defaultOptions||{}),I(this,It,new Map),I(this,Nt,new Map),I(this,tt,0)}mount(){dr(this,tt)._++,v(this,tt)===1&&(I(this,Dt,Yn.subscribe(async r=>{r&&(await this.resumePausedMutations(),v(this,Y).onFocus())})),I(this,$t,Er.subscribe(async r=>{r&&(await this.resumePausedMutations(),v(this,Y).onOnline())})))}unmount(){var r,e;dr(this,tt)._--,v(this,tt)===0&&((r=v(this,Dt))==null||r.call(this),I(this,Dt,void 0),(e=v(this,$t))==null||e.call(this),I(this,$t,void 0))}isFetching(r){return v(this,Y).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return v(this,Ze).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=v(this,Y).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=v(this,Y).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(as(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return v(this,Y).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=v(this,Y).get(s.queryHash),i=n==null?void 0:n.state.data,a=qa(e,i);if(a!==void 0)return v(this,Y).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return ue.batch(()=>v(this,Y).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=v(this,Y).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=v(this,Y);ue.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=v(this,Y);return ue.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=ue.batch(()=>v(this,Y).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(Te).catch(Te)}invalidateQueries(r,e={}){return ue.batch(()=>(v(this,Y).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=ue.batch(()=>v(this,Y).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(Te)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Te)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=v(this,Y).build(this,e);return t.isStaleByTime(as(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Te).catch(Te)}fetchInfiniteQuery(r){return r.behavior=sn(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Te).catch(Te)}ensureInfiniteQueryData(r){return r.behavior=sn(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Er.isOnline()?v(this,Ze).resumePausedMutations():Promise.resolve()}getQueryCache(){return v(this,Y)}getMutationCache(){return v(this,Ze)}getDefaultOptions(){return v(this,et)}setDefaultOptions(r){I(this,et,r)}setQueryDefaults(r,e){v(this,It).set(er(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...v(this,It).values()],t={};return e.forEach(s=>{tr(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){v(this,Nt).set(er(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...v(this,Nt).values()],t={};return e.forEach(s=>{tr(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...v(this,et).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=ks(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ts&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...v(this,et).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){v(this,Y).clear(),v(this,Ze).clear()}},Y=new WeakMap,Ze=new WeakMap,et=new WeakMap,It=new WeakMap,Nt=new WeakMap,tt=new WeakMap,Dt=new WeakMap,$t=new WeakMap,Bn),ho=b.createContext(void 0),fo=({client:r,children:e})=>(b.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),u.jsx(ho.Provider,{value:r,children:e}));const po=1,mo=1e6;let Qr=0;function go(){return Qr=(Qr+1)%Number.MAX_SAFE_INTEGER,Qr.toString()}const Yr=new Map,an=r=>{if(Yr.has(r))return;const e=setTimeout(()=>{Yr.delete(r),Jt({type:"REMOVE_TOAST",toastId:r})},mo);Yr.set(r,e)},yo=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,po)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?an(t):r.toasts.forEach(s=>{an(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},wr=[];let _r={toasts:[]};function Jt(r){_r=yo(_r,r),wr.forEach(e=>{e(_r)})}function vo({...r}){const e=go(),t=n=>Jt({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Jt({type:"DISMISS_TOAST",toastId:e});return Jt({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function js(){const[r,e]=b.useState(_r);return b.useEffect(()=>(wr.push(e),()=>{const t=wr.indexOf(e);t>-1&&wr.splice(t,1)}),[r]),{...r,toast:vo,dismiss:t=>Jt({type:"DISMISS_TOAST",toastId:t})}}var bo=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wo="VisuallyHidden",As=b.forwardRef((r,e)=>u.jsx(De.span,{...r,ref:e,style:{...bo,...r.style}}));As.displayName=wo;var Cs="ToastProvider",[Ps,_o,xo]=ja("Toast"),[ri,uh]=qn("Toast",[xo]),[Eo,Cr]=ri(Cs),si=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:a}=r,[o,l]=b.useState(null),[c,d]=b.useState(0),p=b.useRef(!1),g=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cs}\`. Expected non-empty \`string\`.`),u.jsx(Ps.Provider,{scope:e,children:u.jsx(Eo,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:b.useCallback(()=>d(h=>h+1),[]),onToastRemove:b.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:a})})};si.displayName=Cs;var ni="ToastViewport",So=["F8"],ls="toast.viewportPause",cs="toast.viewportResume",ii=b.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=So,label:n="Notifications ({hotkey})",...i}=r,a=Cr(ni,t),o=_o(t),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),p=b.useRef(null),g=Ss(e,p,a.onViewportChange),h=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=a.toastCount>0;b.useEffect(()=>{const f=w=>{var y;s.length!==0&&s.every(S=>w[S]||w.code===S)&&((y=p.current)==null||y.focus())};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[s]),b.useEffect(()=>{const f=l.current,w=p.current;if(_&&f&&w){const E=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent(ls);w.dispatchEvent(k),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(cs);w.dispatchEvent(k),a.isClosePausedRef.current=!1}},S=k=>{!f.contains(k.relatedTarget)&&y()},T=()=>{f.contains(document.activeElement)||y()};return f.addEventListener("focusin",E),f.addEventListener("focusout",S),f.addEventListener("pointermove",E),f.addEventListener("pointerleave",T),window.addEventListener("blur",E),window.addEventListener("focus",y),()=>{f.removeEventListener("focusin",E),f.removeEventListener("focusout",S),f.removeEventListener("pointermove",E),f.removeEventListener("pointerleave",T),window.removeEventListener("blur",E),window.removeEventListener("focus",y)}}},[_,a.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:f})=>{const E=o().map(y=>{const S=y.ref.current,T=[S,...Lo(S)];return f==="forwards"?T:T.reverse()});return(f==="forwards"?E.reverse():E).flat()},[o]);return b.useEffect(()=>{const f=p.current;if(f){const w=E=>{var T,k,P;const y=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!y){const L=document.activeElement,j=E.shiftKey;if(E.target===f&&j){(T=c.current)==null||T.focus();return}const R=m({tabbingDirection:j?"backwards":"forwards"}),ee=R.findIndex(A=>A===L);Xr(R.slice(ee+1))?E.preventDefault():j?(k=c.current)==null||k.focus():(P=d.current)==null||P.focus()}};return f.addEventListener("keydown",w),()=>f.removeEventListener("keydown",w)}},[o,m]),u.jsxs(Aa,{ref:l,role:"region","aria-label":n.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&u.jsx(ds,{ref:c,onFocusFromOutsideViewport:()=>{const f=m({tabbingDirection:"forwards"});Xr(f)}}),u.jsx(Ps.Slot,{scope:t,children:u.jsx(De.ol,{tabIndex:-1,...i,ref:g})}),_&&u.jsx(ds,{ref:d,onFocusFromOutsideViewport:()=>{const f=m({tabbingDirection:"backwards"});Xr(f)}})]})});ii.displayName=ni;var ai="ToastFocusProxy",ds=b.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,i=Cr(ai,t);return u.jsx(As,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:a=>{var c;const o=a.relatedTarget;!((c=i.viewport)!=null&&c.contains(o))&&s()}})});ds.displayName=ai;var ir="Toast",ko="toast.swipeStart",To="toast.swipeMove",jo="toast.swipeCancel",Ao="toast.swipeEnd",oi=b.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:i,...a}=r,[o,l]=zn({prop:s,defaultProp:n??!0,onChange:i,caller:ir});return u.jsx(Vn,{present:t||o,children:u.jsx(Ro,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:xr(r.onPause),onResume:xr(r.onResume),onSwipeStart:Pe(r.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(r.onSwipeMove,c=>{const{x:d,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:Pe(r.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(r.onSwipeEnd,c=>{const{x:d,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});oi.displayName=ir;var[Co,Po]=ri(ir,{onClose(){}}),Ro=b.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:h,..._}=r,m=Cr(ir,t),[f,w]=b.useState(null),E=Ss(e,A=>w(A)),y=b.useRef(null),S=b.useRef(null),T=n||m.duration,k=b.useRef(0),P=b.useRef(T),L=b.useRef(0),{onToastAdd:j,onToastRemove:q}=m,K=xr(()=>{var J;(f==null?void 0:f.contains(document.activeElement))&&((J=m.viewport)==null||J.focus()),a()}),R=b.useCallback(A=>{!A||A===1/0||(window.clearTimeout(L.current),k.current=new Date().getTime(),L.current=window.setTimeout(K,A))},[K]);b.useEffect(()=>{const A=m.viewport;if(A){const J=()=>{R(P.current),c==null||c()},X=()=>{const re=new Date().getTime()-k.current;P.current=P.current-re,window.clearTimeout(L.current),l==null||l()};return A.addEventListener(ls,X),A.addEventListener(cs,J),()=>{A.removeEventListener(ls,X),A.removeEventListener(cs,J)}}},[m.viewport,T,l,c,R]),b.useEffect(()=>{i&&!m.isClosePausedRef.current&&R(T)},[i,T,m.isClosePausedRef,R]),b.useEffect(()=>(j(),()=>q()),[j,q]);const ee=b.useMemo(()=>f?pi(f):null,[f]);return m.viewport?u.jsxs(u.Fragment,{children:[ee&&u.jsx(Oo,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:ee}),u.jsx(Co,{scope:t,onClose:K,children:Gn.createPortal(u.jsx(Ps.ItemSlot,{scope:t,children:u.jsx(Ca,{asChild:!0,onEscapeKeyDown:Pe(o,()=>{m.isFocusedToastEscapeKeyDownRef.current||K(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,..._,ref:E,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:Pe(r.onKeyDown,A=>{A.key==="Escape"&&(o==null||o(A.nativeEvent),A.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,K()))}),onPointerDown:Pe(r.onPointerDown,A=>{A.button===0&&(y.current={x:A.clientX,y:A.clientY})}),onPointerMove:Pe(r.onPointerMove,A=>{if(!y.current)return;const J=A.clientX-y.current.x,X=A.clientY-y.current.y,re=!!S.current,he=["left","right"].includes(m.swipeDirection),C=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,se=he?C(0,J):0,le=he?0:C(0,X),F=A.pointerType==="touch"?10:2,M={x:se,y:le},z={originalEvent:A,delta:M};re?(S.current=M,hr(To,p,z,{discrete:!1})):on(M,m.swipeDirection,F)?(S.current=M,hr(ko,d,z,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(J)>F||Math.abs(X)>F)&&(y.current=null)}),onPointerUp:Pe(r.onPointerUp,A=>{const J=S.current,X=A.target;if(X.hasPointerCapture(A.pointerId)&&X.releasePointerCapture(A.pointerId),S.current=null,y.current=null,J){const re=A.currentTarget,he={originalEvent:A,delta:J};on(J,m.swipeDirection,m.swipeThreshold)?hr(Ao,h,he,{discrete:!0}):hr(jo,g,he,{discrete:!0}),re.addEventListener("click",C=>C.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),Oo=r=>{const{__scopeToast:e,children:t,...s}=r,n=Cr(ir,e),[i,a]=b.useState(!1),[o,l]=b.useState(!1);return Do(()=>a(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:u.jsx(Pa,{asChild:!0,children:u.jsx(As,{...s,children:i&&u.jsxs(u.Fragment,{children:[n.label," ",t]})})})},Io="ToastTitle",li=b.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return u.jsx(De.div,{...s,ref:e})});li.displayName=Io;var No="ToastDescription",ci=b.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return u.jsx(De.div,{...s,ref:e})});ci.displayName=No;var di="ToastAction",ui=b.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?u.jsx(fi,{altText:t,asChild:!0,children:u.jsx(Rs,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${di}\`. Expected non-empty \`string\`.`),null)});ui.displayName=di;var hi="ToastClose",Rs=b.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=Po(hi,t);return u.jsx(fi,{asChild:!0,children:u.jsx(De.button,{type:"button",...s,ref:e,onClick:Pe(r.onClick,n.onClose)})})});Rs.displayName=hi;var fi=b.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return u.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function pi(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),$o(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...pi(s))}}),e}function hr(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?Ra(n,i):n.dispatchEvent(i)}var on=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),i=s>n;return e==="left"||e==="right"?i&&s>t:!i&&n>t};function Do(r=()=>{}){const e=xr(r);Hn(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function $o(r){return r.nodeType===r.ELEMENT_NODE}function Lo(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Xr(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Uo=si,mi=ii,gi=oi,yi=li,vi=ci,bi=ui,wi=Rs;function _i(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=_i(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function xi(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=_i(r))&&(s&&(s+=" "),s+=e);return s}const ln=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,cn=xi,Pr=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return cn(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,a=Object.keys(n).map(c=>{const d=t==null?void 0:t[c],p=i==null?void 0:i[c];if(d===null)return null;const g=ln(d)||ln(p);return n[c][g]}),o=t&&Object.entries(t).reduce((c,d)=>{let[p,g]=d;return g===void 0||(c[p]=g),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,d)=>{let{class:p,className:g,...h}=d;return Object.entries(h).every(_=>{let[m,f]=_;return Array.isArray(f)?f.includes({...i,...o}[m]):{...i,...o}[m]===f})?[...c,p,g]:c},[]);return cn(r,a,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$e=(r,e)=>{const t=b.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>b.createElement("svg",{ref:d,...Fo,width:n,height:n,stroke:s,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Mo(r)}`,o].join(" "),...c},[...e.map(([p,g])=>b.createElement(p,g)),...Array.isArray(l)?l:[l]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=$e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=$e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=$e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Os="-",Ko=r=>{const e=Qo(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:a=>{const o=a.split(Os);return o[0]===""&&o.length!==1&&o.shift(),Si(o,e)||Jo(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&s[a]?[...l,...s[a]]:l}}},Si=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?Si(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(Os);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},dn=/^\[(.+)\]$/,Jo=r=>{if(dn.test(r)){const e=dn.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Qo=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return Xo(Object.entries(r.classGroups),t).forEach(([i,a])=>{hs(a,s,i,e)}),s},hs=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:un(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(Yo(n)){hs(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,a])=>{hs(a,un(e,i),t,s)})})},un=(r,e)=>{let t=r;return e.split(Os).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},Yo=r=>r.isThemeGetter,Xo=(r,e)=>e?r.map(([t,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,n]}):r,Zo=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){t.has(i)?t.set(i,a):n(i,a)}}},ki="!",el=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],i=e.length,a=o=>{const l=[];let c=0,d=0,p;for(let f=0;f<o.length;f++){let w=o[f];if(c===0){if(w===n&&(s||o.slice(f,f+i)===e)){l.push(o.slice(d,f)),d=f+i;continue}if(w==="/"){p=f;continue}}w==="["?c++:w==="]"&&c--}const g=l.length===0?o:o.substring(d),h=g.startsWith(ki),_=h?g.substring(1):g,m=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:_,maybePostfixModifierPosition:m}};return t?o=>t({className:o,parseClassName:a}):a},tl=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},rl=r=>({cache:Zo(r.cacheSize),parseClassName:el(r),...Ko(r)}),sl=/\s+/,nl=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=r.trim().split(sl);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:d,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:h}=t(c);let _=!!h,m=s(_?g.substring(0,h):g);if(!m){if(!_){o=c+(o.length>0?" "+o:o);continue}if(m=s(g),!m){o=c+(o.length>0?" "+o:o);continue}_=!1}const f=tl(d).join(":"),w=p?f+ki:f,E=w+m;if(i.includes(E))continue;i.push(E);const y=n(m,_);for(let S=0;S<y.length;++S){const T=y[S];i.push(w+T)}o=c+(o.length>0?" "+o:o)}return o};function il(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Ti(e))&&(s&&(s+=" "),s+=t);return s}const Ti=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=Ti(r[s]))&&(t&&(t+=" "),t+=e);return t};function al(r,...e){let t,s,n,i=a;function a(l){const c=e.reduce((d,p)=>p(d),r());return t=rl(c),s=t.cache.get,n=t.cache.set,i=o,o(l)}function o(l){const c=s(l);if(c)return c;const d=nl(l,t);return n(l,d),d}return function(){return i(il.apply(null,arguments))}}const H=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},ji=/^\[(?:([a-z-]+):)?(.+)\]$/i,ol=/^\d+\/\d+$/,ll=new Set(["px","full","screen"]),cl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ul=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Le=r=>Tt(r)||ll.has(r)||ol.test(r),He=r=>Ut(r,"length",_l),Tt=r=>!!r&&!Number.isNaN(Number(r)),Zr=r=>Ut(r,"number",Tt),Vt=r=>!!r&&Number.isInteger(Number(r)),pl=r=>r.endsWith("%")&&Tt(r.slice(0,-1)),D=r=>ji.test(r),Ge=r=>cl.test(r),ml=new Set(["length","size","percentage"]),gl=r=>Ut(r,ml,Ai),yl=r=>Ut(r,"position",Ai),vl=new Set(["image","url"]),bl=r=>Ut(r,vl,El),wl=r=>Ut(r,"",xl),Ht=()=>!0,Ut=(r,e,t)=>{const s=ji.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},_l=r=>dl.test(r)&&!ul.test(r),Ai=()=>!1,xl=r=>hl.test(r),El=r=>fl.test(r),Sl=()=>{const r=H("colors"),e=H("spacing"),t=H("blur"),s=H("brightness"),n=H("borderColor"),i=H("borderRadius"),a=H("borderSpacing"),o=H("borderWidth"),l=H("contrast"),c=H("grayscale"),d=H("hueRotate"),p=H("invert"),g=H("gap"),h=H("gradientColorStops"),_=H("gradientColorStopPositions"),m=H("inset"),f=H("margin"),w=H("opacity"),E=H("padding"),y=H("saturate"),S=H("scale"),T=H("sepia"),k=H("skew"),P=H("space"),L=H("translate"),j=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",D,e],R=()=>[D,e],ee=()=>["",Le,He],A=()=>["auto",Tt,D],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>["start","end","center","between","around","evenly","stretch"],C=()=>["","0",D],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[Tt,D];return{cacheSize:500,separator:":",theme:{colors:[Ht],spacing:[Le,He],blur:["none","",Ge,D],brightness:le(),borderColor:[r],borderRadius:["none","","full",Ge,D],borderSpacing:R(),borderWidth:ee(),contrast:le(),grayscale:C(),hueRotate:le(),invert:C(),gap:R(),gradientColorStops:[r],gradientColorStopPositions:[pl,He],inset:K(),margin:K(),opacity:le(),padding:R(),saturate:le(),scale:le(),sepia:C(),skew:le(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",D]}],container:["container"],columns:[{columns:[Ge]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),D]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vt,D]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",D]}],grow:[{grow:C()}],shrink:[{shrink:C()}],order:[{order:["first","last","none",Vt,D]}],"grid-cols":[{"grid-cols":[Ht]}],"col-start-end":[{col:["auto",{span:["full",Vt,D]},D]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Ht]}],"row-start-end":[{row:["auto",{span:[Vt,D]},D]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",D]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",D]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...he()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...he(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...he(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[f]}],mx:[{mx:[f]}],my:[{my:[f]}],ms:[{ms:[f]}],me:[{me:[f]}],mt:[{mt:[f]}],mr:[{mr:[f]}],mb:[{mb:[f]}],ml:[{ml:[f]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",D,e]}],"min-w":[{"min-w":[D,e,"min","max","fit"]}],"max-w":[{"max-w":[D,e,"none","full","min","max","fit","prose",{screen:[Ge]},Ge]}],h:[{h:[D,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[D,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[D,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[D,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ge,He]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zr]}],"font-family":[{font:[Ht]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",D]}],"line-clamp":[{"line-clamp":["none",Tt,Zr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Le,D]}],"list-image":[{"list-image":["none",D]}],"list-style-type":[{list:["none","disc","decimal",D]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Le,He]}],"underline-offset":[{"underline-offset":["auto",Le,D]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",D]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",D]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),yl]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gl]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bl]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:X()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Le,D]}],"outline-w":[{outline:[Le,He]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Le,He]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Ge,wl]}],"shadow-color":[{shadow:[Ht]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ge,D]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[y]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",D]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",D]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",D]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Vt,D]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",D]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",D]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",D]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Le,He,Zr]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kl=al(Sl);function G(...r){return kl(xi(r))}const Tl=Uo,Ci=b.forwardRef(({className:r,...e},t)=>u.jsx(mi,{ref:t,className:G("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));Ci.displayName=mi.displayName;const jl=Pr("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Pi=b.forwardRef(({className:r,variant:e,...t},s)=>u.jsx(gi,{ref:s,className:G(jl({variant:e}),r),...t}));Pi.displayName=gi.displayName;const Al=b.forwardRef(({className:r,...e},t)=>u.jsx(bi,{ref:t,className:G("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));Al.displayName=bi.displayName;const Ri=b.forwardRef(({className:r,...e},t)=>u.jsx(wi,{ref:t,className:G("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:u.jsx(Wo,{className:"h-4 w-4"})}));Ri.displayName=wi.displayName;const Oi=b.forwardRef(({className:r,...e},t)=>u.jsx(yi,{ref:t,className:G("text-sm font-semibold [&+div]:text-xs",r),...e}));Oi.displayName=yi.displayName;const Ii=b.forwardRef(({className:r,...e},t)=>u.jsx(vi,{ref:t,className:G("text-sm opacity-90",r),...e}));Ii.displayName=vi.displayName;function Cl(){const{toasts:r}=js();return u.jsxs(Tl,{children:[r.map(function({id:e,title:t,description:s,action:n,...i}){return u.jsxs(Pi,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[t&&u.jsx(Oi,{children:t}),s&&u.jsx(Ii,{children:s})]}),n,u.jsx(Ri,{})]},e)}),u.jsx(Ci,{})]})}const ct=class ct{constructor(){wt(this,"logs",[]);wt(this,"maxLogs",100)}static getInstance(){return ct.instance||(ct.instance=new ct),ct.instance}log(e,t="medium",s,n,i){const a={id:this.generateId(),timestamp:new Date,error:e,errorInfo:n,component:s,userId:this.getCurrentUserId(),userAgent:navigator.userAgent,url:window.location.href,severity:t,context:i};this.logs.unshift(a),this.logs.length>this.maxLogs&&this.logs.pop(),this.logToConsole(a),this.persistLogs(),this.sendToErrorService(a)}logToConsole(e){const t=this.getConsoleStyle(e.severity);console.group(`%c Error Boundary Caught Error - ${e.severity.toUpperCase()}`,t),console.error("Error:",e.error),console.log("Component:",e.component||"Unknown"),console.log("Timestamp:",e.timestamp.toISOString()),console.log("URL:",e.url),e.errorInfo&&console.log("Component Stack:",e.errorInfo.componentStack),e.context&&console.log("Context:",e.context),console.groupEnd()}getConsoleStyle(e){return{low:"color: #856404; background: #fff3cd; padding: 2px 4px; border-radius: 3px;",medium:"color: #721c24; background: #f8d7da; padding: 2px 4px; border-radius: 3px;",high:"color: #721c24; background: #f5c6cb; padding: 2px 4px; border-radius: 3px; font-weight: bold;",critical:"color: white; background: #dc3545; padding: 2px 4px; border-radius: 3px; font-weight: bold;"}[e]}persistLogs(){try{const e=this.logs.map(t=>({...t,error:{name:t.error.name,message:t.error.message,stack:t.error.stack}}));localStorage.setItem("dfs_error_logs",JSON.stringify(e))}catch(e){console.warn("Failed to persist error logs:",e)}}sendToErrorService(e){}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getCurrentUserId(){try{return localStorage.getItem("user_id")||void 0}catch{return}}getLogs(){return[...this.logs]}clearLogs(){this.logs=[],localStorage.removeItem("dfs_error_logs")}getLogsSummary(){const e=this.logs.reduce((t,s)=>(t[s.severity]=(t[s.severity]||0)+1,t),{});return{total:this.logs.length,bySeverity:e}}};wt(ct,"instance");let fs=ct;const Pl=Pr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),rt=b.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const a=s?Oa:"button";return u.jsx(a,{className:G(Pl({variant:e,size:t,className:r})),ref:i,...n})});rt.displayName="Button";const Rr=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("rounded-xl border bg-card text-card-foreground shadow",r),...e}));Rr.displayName="Card";const Or=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("flex flex-col space-y-1.5 p-6",r),...e}));Or.displayName="CardHeader";const Ir=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("font-semibold leading-none tracking-tight",r),...e}));Ir.displayName="CardTitle";const Is=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("text-sm text-muted-foreground",r),...e}));Is.displayName="CardDescription";const Nr=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("p-6 pt-0",r),...e}));Nr.displayName="CardContent";const Rl=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("flex items-center p-6 pt-0",r),...e}));Rl.displayName="CardFooter";const Ol=Pr("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Sr({className:r,variant:e,...t}){return u.jsx("div",{className:G(Ol({variant:e}),r),...t})}var Dr="Collapsible",[Il,hh]=qn(Dr),[Nl,Ns]=Il(Dr),Ni=b.forwardRef((r,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:n,disabled:i,onOpenChange:a,...o}=r,[l,c]=zn({prop:s,defaultProp:n??!1,onChange:a,caller:Dr});return u.jsx(Nl,{scope:t,disabled:i,contentId:Ia(),open:l,onOpenToggle:b.useCallback(()=>c(d=>!d),[c]),children:u.jsx(De.div,{"data-state":$s(l),"data-disabled":i?"":void 0,...o,ref:e})})});Ni.displayName=Dr;var Di="CollapsibleTrigger",$i=b.forwardRef((r,e)=>{const{__scopeCollapsible:t,...s}=r,n=Ns(Di,t);return u.jsx(De.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":$s(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...s,ref:e,onClick:Pe(r.onClick,n.onOpenToggle)})});$i.displayName=Di;var Ds="CollapsibleContent",Li=b.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Ns(Ds,r.__scopeCollapsible);return u.jsx(Vn,{present:t||n.open,children:({present:i})=>u.jsx(Dl,{...s,ref:e,present:i})})});Li.displayName=Ds;var Dl=b.forwardRef((r,e)=>{const{__scopeCollapsible:t,present:s,children:n,...i}=r,a=Ns(Ds,t),[o,l]=b.useState(s),c=b.useRef(null),d=Ss(e,c),p=b.useRef(0),g=p.current,h=b.useRef(0),_=h.current,m=a.open||o,f=b.useRef(m),w=b.useRef(void 0);return b.useEffect(()=>{const E=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(E)},[]),Hn(()=>{const E=c.current;if(E){w.current=w.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const y=E.getBoundingClientRect();p.current=y.height,h.current=y.width,f.current||(E.style.transitionDuration=w.current.transitionDuration,E.style.animationName=w.current.animationName),l(s)}},[a.open,s]),u.jsx(De.div,{"data-state":$s(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!m,...i,ref:d,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...r.style},children:m&&n})});function $s(r){return r?"open":"closed"}var $l=Ni;const Ll=$l,Ul=$i,Fl=Li,Ml=({error:r,resetError:e,severity:t="medium",component:s,showDetails:n=!0,showNavigation:i=!0,customMessage:a,customActions:o})=>{const l=Wn(),[c,d]=x.useState(!1),g=(E=>{const y={low:{color:"text-yellow-600",bgColor:"bg-yellow-50 border-yellow-200",badgeVariant:"secondary",icon:Qt,title:"Minor Issue Detected"},medium:{color:"text-orange-600",bgColor:"bg-orange-50 border-orange-200",badgeVariant:"destructive",icon:Qt,title:"Error Occurred"},high:{color:"text-red-600",bgColor:"bg-red-50 border-red-200",badgeVariant:"destructive",icon:Qt,title:"Serious Error"},critical:{color:"text-red-700",bgColor:"bg-red-100 border-red-300",badgeVariant:"destructive",icon:qo,title:"Critical System Error"}};return y[E]||y.medium})(t),h=g.icon,_=()=>{if(a)return a;switch(t){case"low":return"A minor issue occurred, but you can continue using the application.";case"medium":return"An error occurred while processing your request. Please try again.";case"high":return"A serious error occurred. Some features may not work properly.";case"critical":return"A critical system error occurred. Please contact support if this continues.";default:return"Something went wrong. Please try refreshing the page."}},m=()=>{l("/dashboard")},f=()=>{window.location.reload()},w=E=>{var y;return{name:E.name,message:E.message,stack:(y=E.stack)==null?void 0:y.split(`
`).slice(0,10).join(`
`)}};return u.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4","data-id":"qxpwrwel0","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:u.jsxs(Rr,{className:`w-full max-w-2xl ${g.bgColor} border-2`,"data-id":"jfsd90z39","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsxs(Or,{className:"text-center","data-id":"cyv947hr2","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("div",{className:"flex items-center justify-center mb-4","data-id":"g53cxgf07","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:u.jsx("div",{className:`p-3 rounded-full bg-white shadow-md ${g.color}`,"data-id":"ywmk0itai","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:u.jsx(h,{size:32,"data-id":"b1p8vup0g","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"})})}),u.jsx(Ir,{className:`text-xl font-bold ${g.color}`,"data-id":"q54uama4x","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:g.title}),u.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2","data-id":"vwfvixe0n","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx(Sr,{variant:g.badgeVariant,className:"text-sm","data-id":"97oogdqnq","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:t.toUpperCase()}),s&&u.jsx(Sr,{variant:"outline",className:"text-sm","data-id":"u38dvv094","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:s})]})]}),u.jsxs(Nr,{className:"space-y-4","data-id":"xf8t419uk","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("p",{className:"text-gray-700 text-center leading-relaxed","data-id":"iacm2p8cc","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:_()}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center","data-id":"6xy1mkhw6","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsxs(rt,{onClick:e,variant:"default",className:"flex items-center gap-2","data-id":"2z1r7fb9z","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx(us,{size:16,"data-id":"o30vv6smg","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"}),"Try Again"]}),i&&u.jsxs(u.Fragment,{children:[u.jsxs(rt,{onClick:m,variant:"outline",className:"flex items-center gap-2","data-id":"ccoedpd4u","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx(Ei,{size:16,"data-id":"f3wnk9qzx","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"}),"Go to Dashboard"]}),u.jsxs(rt,{onClick:f,variant:"outline",className:"flex items-center gap-2","data-id":"jqv0fa49f","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx(us,{size:16,"data-id":"gc8trphpm","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"}),"Refresh Page"]})]})]}),o&&u.jsx("div",{className:"flex justify-center","data-id":"oh5kvk8u0","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:o}),n&&u.jsxs(Ll,{open:c,onOpenChange:d,className:"mt-6","data-id":"xqp2ljfbn","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx(Ul,{asChild:!0,"data-id":"bjbgp52h9","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:u.jsx(rt,{variant:"ghost",size:"sm",className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-800","data-id":"lf27pmpfq","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:c?u.jsxs(u.Fragment,{children:[u.jsx(Vo,{size:16,"data-id":"ceqo4m5j9","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"}),"Hide Technical Details"]}):u.jsxs(u.Fragment,{children:[u.jsx(zo,{size:16,"data-id":"y8gar1bgv","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx"}),"Show Technical Details"]})})}),u.jsx(Fl,{className:"mt-3","data-id":"prcocxet0","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:u.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-sm font-mono","data-id":"59nxiih8n","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsxs("div",{className:"mb-2","data-id":"lfaw8qoxm","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("strong",{"data-id":"gj451x0bm","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"Error Type:"})," ",w(r).name]}),u.jsxs("div",{className:"mb-2","data-id":"ck5auvd50","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("strong",{"data-id":"pveizacff","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"Message:"})," ",w(r).message]}),w(r).stack&&u.jsxs("div",{"data-id":"qcg9g1zg0","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("strong",{"data-id":"rzsyw92ew","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"Stack Trace:"}),u.jsx("pre",{className:"mt-1 text-xs text-gray-600 whitespace-pre-wrap overflow-x-auto","data-id":"3ytt1u7cg","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:w(r).stack})]}),u.jsxs("div",{className:"mt-2 text-xs text-gray-500","data-id":"1ykzjh440","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("strong",{"data-id":"kdck9a7au","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"Timestamp:"})," ",new Date().toISOString()]})]})})]}),u.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg text-center text-sm text-gray-600","data-id":"25vuylgik","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("p",{"data-id":"7w9t9daat","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"If this error persists, please contact support with the error details above."}),u.jsxs("p",{className:"mt-1","data-id":"wc9sewilr","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:[u.jsx("strong",{"data-id":"k8pdtzrzh","data-path":"src/components/ErrorBoundary/ErrorFallback.tsx",children:"Error ID:"})," ",Date.now().toString(36)]})]})]})]})})};class Bl extends b.Component{constructor(t){super(t);wt(this,"errorLogger");wt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null},this.errorLogger=fs.getInstance()}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,s){this.errorLogger.log(t,"critical","GlobalErrorBoundary",s,{url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),this.setState({error:t,errorInfo:s})}render(){if(this.state.hasError&&this.state.error){if(this.props.fallback){const t=this.props.fallback;return u.jsx(t,{error:this.state.error,resetError:this.handleReset,errorInfo:this.state.errorInfo,"data-id":"jo0qb5hvq","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx"})}return u.jsx("div",{className:"min-h-screen bg-gray-50","data-id":"t75nata25","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx",children:u.jsx(Ml,{error:this.state.error,resetError:this.handleReset,severity:"critical",component:"Application",customMessage:"A critical error occurred that prevented the application from loading properly. This has been automatically reported to our team.",showNavigation:!1,customActions:u.jsxs("div",{className:"space-y-2","data-id":"n6diboci5","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx",children:[u.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors","data-id":"jiwgartxf","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx",children:"Reload Application"}),u.jsx("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors ml-2","data-id":"gc2ev4mp5","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx",children:"Go to Home"})]}),"data-id":"2rpacqz9z","data-path":"src/components/ErrorBoundary/GlobalErrorBoundary.tsx"})})}return this.props.children}}const ql=Pr("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zl=b.forwardRef(({className:r,variant:e,...t},s)=>u.jsx("div",{ref:s,role:"alert",className:G(ql({variant:e}),r),...t}));zl.displayName="Alert";const Vl=b.forwardRef(({className:r,...e},t)=>u.jsx("h5",{ref:t,className:G("mb-1 font-medium leading-none tracking-tight",r),...e}));Vl.displayName="AlertTitle";const Hl=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:G("text-sm [&_p]:leading-relaxed",r),...e}));Hl.displayName="AlertDescription";const Gl=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:t,className:G("w-full caption-bottom text-sm",r),...e})}));Gl.displayName="Table";const Wl=b.forwardRef(({className:r,...e},t)=>u.jsx("thead",{ref:t,className:G("[&_tr]:border-b",r),...e}));Wl.displayName="TableHeader";const Kl=b.forwardRef(({className:r,...e},t)=>u.jsx("tbody",{ref:t,className:G("[&_tr:last-child]:border-0",r),...e}));Kl.displayName="TableBody";const Jl=b.forwardRef(({className:r,...e},t)=>u.jsx("tfoot",{ref:t,className:G("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...e}));Jl.displayName="TableFooter";const Ql=b.forwardRef(({className:r,...e},t)=>u.jsx("tr",{ref:t,className:G("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...e}));Ql.displayName="TableRow";const Yl=b.forwardRef(({className:r,...e},t)=>u.jsx("th",{ref:t,className:G("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e}));Yl.displayName="TableHead";const Xl=b.forwardRef(({className:r,...e},t)=>u.jsx("td",{ref:t,className:G("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e}));Xl.displayName="TableCell";const Zl=b.forwardRef(({className:r,...e},t)=>u.jsx("caption",{ref:t,className:G("mt-4 text-sm text-muted-foreground",r),...e}));Zl.displayName="TableCaption";const ec=({error:r,resetError:e})=>{const t=()=>{window.location.reload()},s=()=>{window.location.href="/"};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-100 p-4",children:u.jsxs(Rr,{className:"w-full max-w-md",children:[u.jsxs(Or,{className:"text-center",children:[u.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100",children:u.jsx(Qt,{className:"h-8 w-8 text-red-600"})}),u.jsx(Ir,{className:"text-2xl font-bold text-gray-900",children:"Something went wrong"}),u.jsx(Is,{className:"text-gray-600",children:"We encountered an unexpected error. Don't worry, we're here to help!"})]}),u.jsxs(Nr,{className:"space-y-4",children:[r&&u.jsxs("div",{className:"rounded-lg bg-red-50 p-4",children:[u.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Error Details:"}),u.jsx("p",{className:"text-sm text-red-700 font-mono break-all",children:r.message||"Unknown error occurred"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(rt,{onClick:e||t,className:"w-full",variant:"default",children:[u.jsx(us,{className:"mr-2 h-4 w-4"}),"Try Again"]}),u.jsxs(rt,{onClick:s,className:"w-full",variant:"outline",children:[u.jsx(Ei,{className:"mr-2 h-4 w-4"}),"Go to Homepage"]})]}),u.jsx("div",{className:"text-center text-sm text-gray-500",children:u.jsx("p",{children:"If this problem persists, please contact support."})})]})]})})},tc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Z(async()=>{const{default:s}=await Promise.resolve().then(()=>Ft);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ls extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class rc extends Ls{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sc extends Ls{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nc extends Ls{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ps;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ps||(ps={}));var ic=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class ac{constructor(e,{headers:t={},customFetch:s,region:n=ps.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=tc(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return ic(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:c}).catch(_=>{throw new rc(_)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new sc(d);if(!d.ok)throw new nc(d);let g=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),h;return g==="application/json"?h=yield d.json():g==="application/octet-stream"?h=yield d.blob():g==="text/event-stream"?h=d:g==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(n){return{data:null,error:n}}})}}var ye={},Us={},$r={},ar={},Lr={},Ur={},oc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lt=oc();const lc=Lt.fetch,Ui=Lt.fetch.bind(Lt),Fi=Lt.Headers,cc=Lt.Request,dc=Lt.Response,Ft=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fi,Request:cc,Response:dc,default:Ui,fetch:lc},Symbol.toStringTag,{value:"Module"})),uc=Na(Ft);var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});let hc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Fr.default=hc;var Mi=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ur,"__esModule",{value:!0});const fc=Mi(uc),pc=Mi(Fr);let mc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let c=null,d=null,p=null,g=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const m=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),f=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&f&&f.length>1&&(p=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,g=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(d=[],c=null,g=200,h="OK")}catch{i.status===404&&m===""?(g=204,h="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,g=200,h="OK"),c&&this.shouldThrowOnError)throw new pc.default(c)}return{error:c,data:d,count:p,status:g,statusText:h}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Ur.default=mc;var gc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lr,"__esModule",{value:!0});const yc=gc(Ur);let vc=class extends yc.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Lr.default=vc;var bc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ar,"__esModule",{value:!0});const wc=bc(Lr);let _c=class extends wc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ar.default=_c;var xc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($r,"__esModule",{value:!0});const Gt=xc(ar);let Ec=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new Gt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Gt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Gt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Gt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Gt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$r.default=Ec;var Mr={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.version=void 0;Br.version="0.0.0-automated";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.DEFAULT_HEADERS=void 0;const Sc=Br;Mr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Sc.version}`};var Bi=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Us,"__esModule",{value:!0});const kc=Bi($r),Tc=Bi(ar),jc=Mr;let Ac=class qi{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},jc.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new kc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qi(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;s||n?(a=s?"HEAD":"GET",Object.entries(t).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{o.searchParams.append(d,p)})):(a="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Tc.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Us.default=Ac;var Mt=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ye,"__esModule",{value:!0});ye.PostgrestError=ye.PostgrestBuilder=ye.PostgrestTransformBuilder=ye.PostgrestFilterBuilder=ye.PostgrestQueryBuilder=ye.PostgrestClient=void 0;const zi=Mt(Us);ye.PostgrestClient=zi.default;const Vi=Mt($r);ye.PostgrestQueryBuilder=Vi.default;const Hi=Mt(ar);ye.PostgrestFilterBuilder=Hi.default;const Gi=Mt(Lr);ye.PostgrestTransformBuilder=Gi.default;const Wi=Mt(Ur);ye.PostgrestBuilder=Wi.default;const Ki=Mt(Fr);ye.PostgrestError=Ki.default;var Cc=ye.default={PostgrestClient:zi.default,PostgrestQueryBuilder:Vi.default,PostgrestFilterBuilder:Hi.default,PostgrestTransformBuilder:Gi.default,PostgrestBuilder:Wi.default,PostgrestError:Ki.default};const{PostgrestClient:Pc,PostgrestQueryBuilder:vh,PostgrestFilterBuilder:bh,PostgrestTransformBuilder:wh,PostgrestBuilder:_h,PostgrestError:xh}=Cc;let ms;typeof window>"u"?ms=require("ws"):ms=window.WebSocket;const Rc="2.11.10",Oc={"X-Client-Info":`realtime-js/${Rc}`},Ic="1.0.0",Ji=1e4,Nc=1e3;var jt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(jt||(jt={}));var ce;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ce||(ce={}));var Ce;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Ce||(Ce={}));var gs;(function(r){r.websocket="websocket"})(gs||(gs={}));var lt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(lt||(lt={}));class Dc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const l=s.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Qi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(V||(V={}));const hn=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=$c(a,r,e,n),i),{})},$c=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?Yi(i,a):ys(a)},Yi=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Mc(e,t)}switch(r){case V.bool:return Lc(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return Uc(e);case V.json:case V.jsonb:return Fc(e);case V.timestamp:return Bc(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return ys(e);default:return ys(e)}},ys=r=>r,Lc=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Uc=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Fc=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Mc=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Yi(e,o))}return r},Bc=r=>typeof r=="string"?r.replace(" ","T"):r,Xi=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class es{constructor(e,t,s={},n=Ji){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fn;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(fn||(fn={}));class Yt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yt.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=Yt.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Yt.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const p=i[c];if(p){const g=d.map(f=>f.presence_ref),h=p.map(f=>f.presence_ref),_=d.filter(f=>h.indexOf(f.presence_ref)<0),m=p.filter(f=>g.indexOf(f.presence_ref)<0);_.length>0&&(o[c]=_),m.length>0&&(l[c]=m)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const p=e[o].map(h=>h.presence_ref),g=d.filter(h=>p.indexOf(h.presence_ref)<0);e[o].unshift(...g)}s(o,d,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),e[o]=c,n(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pn;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(pn||(pn={}));var mn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(mn||(mn={}));var Me;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Me||(Me={}));class Fs{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new es(this,Ce.join,this.params,this.timeout),this.rejoinTimer=new Qi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ce.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Yt(this),this.broadcastEndpointURL=Xi(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(Me.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Me.CLOSED));const l={},c={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Me.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,h=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,_=[];for(let m=0;m<h;m++){const f=g[m],{filter:{event:w,schema:E,table:y,filter:S}}=f,T=d&&d[m];if(T&&T.event===w&&T.schema===E&&T.table===y&&T.filter===S)_.push(Object.assign(Object.assign({},f),{id:T.id}));else{this.unsubscribe(),this.state=ce.errored,e==null||e(Me.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(Me.SUBSCRIBED);return}}).receive("error",d=>{this.state=ce.errored,e==null||e(Me.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Me.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ce.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ce.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new es(this,Ce.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new es(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=Ce;if(s&&[o,l,c,d].indexOf(a)>=0&&s!==this._joinRef())return;let g=this._onMessage(a,t,s);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var _,m,f;return((_=h.filter)===null||_===void 0?void 0:_.event)==="*"||((f=(m=h.filter)===null||m===void 0?void 0:m.event)===null||f===void 0?void 0:f.toLocaleLowerCase())===a}).map(h=>h.callback(g,s)):(i=this.bindings[a])===null||i===void 0||i.filter(h=>{var _,m,f,w,E,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const S=h.id,T=(_=h.filter)===null||_===void 0?void 0:_.event;return S&&((m=t.ids)===null||m===void 0?void 0:m.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((f=t.data)===null||f===void 0?void 0:f.type.toLocaleLowerCase()))}else{const S=(E=(w=h==null?void 0:h.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return S==="*"||S===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:m,table:f,commit_timestamp:w,type:E,errors:y}=_;g=Object.assign(Object.assign({},{schema:m,table:f,commit_timestamp:w,eventType:E,new:{},old:{},errors:y}),this._getPayloadRecords(_))}h.callback(g,s)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Fs.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ce.close,{},e)}_onError(e){this._on(Ce.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=hn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=hn(e.columns,e.old_record)),t}}const gn=()=>{},qc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zc{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Oc,this.params={},this.timeout=Ji,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gn,this.ref=0,this.logger=gn,this.conn=null,this.sendBuffer=[],this.serializer=new Dc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Z(async()=>{const{default:l}=await Promise.resolve().then(()=>Ft);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${gs.websocket}`,this.httpEndpoint=Xi(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ms),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Vc(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ic}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case jt.connecting:return lt.Connecting;case jt.open:return lt.Open;case jt.closing:return lt.Closing;default:return lt.Closed}}isConnected(){return this.connectionState()===lt.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Fs(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(Ce.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Nc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ce.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([qc],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Vc{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=jt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Ms extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Hc extends Ms{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vs extends Ms{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Gc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const Zi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Z(async()=>{const{default:s}=await Promise.resolve().then(()=>Ft);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Wc=()=>Gc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Z(()=>Promise.resolve().then(()=>Ft),void 0)).Response:Response}),bs=r=>{if(Array.isArray(r))return r.map(t=>bs(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=bs(s)}),e};var mt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const ts=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Kc=(r,e,t)=>mt(void 0,void 0,void 0,function*(){const s=yield Wc();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new Hc(ts(n),r.status||500))}).catch(n=>{e(new vs(ts(n),n))}):e(new vs(ts(r),r))}),Jc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function or(r,e,t,s,n,i){return mt(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,Jc(e,s,n,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Kc(l,o,s))})})}function kr(r,e,t,s){return mt(this,void 0,void 0,function*(){return or(r,"GET",e,t,s)})}function Je(r,e,t,s,n){return mt(this,void 0,void 0,function*(){return or(r,"POST",e,s,n,t)})}function Qc(r,e,t,s,n){return mt(this,void 0,void 0,function*(){return or(r,"PUT",e,s,n,t)})}function Yc(r,e,t,s){return mt(this,void 0,void 0,function*(){return or(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function ea(r,e,t,s,n){return mt(this,void 0,void 0,function*(){return or(r,"DELETE",e,s,n,t)})}var pe=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const Xc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Zi(n)}uploadOrUpdate(e,t,s,n){return pe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},yn),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),g=yield p.json();return p.ok?{data:{path:c,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(ne(i))return{data:null,error:i};throw i}})}upload(e,t,s){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return pe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:yn.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const p=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),g=yield p.json();return p.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return pe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Je(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Ms("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}update(e,t,s){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return pe(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}copy(e,t,s){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield Je(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Je(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return pe(this,void 0,void 0,function*(){try{const n=yield Je(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}download(e,t){return pe(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield kr(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ne(o))return{data:null,error:o};throw o}})}info(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield kr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bs(s),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}exists(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Yc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ne(s)&&s instanceof vs){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return pe(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}list(e,t,s){return pe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Xc),t),{prefix:e||""});return{data:yield Je(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ed="2.7.1",td={"X-Client-Info":`storage-js/${ed}`};var _t=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class rd{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},td),t),this.fetch=Zi(s)}listBuckets(){return _t(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ne(e))return{data:null,error:e};throw e}})}getBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return _t(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return _t(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}emptyBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}}class sd extends rd{constructor(e,t={},s){super(e,t,s)}from(e){return new Zc(this.url,this.headers,e,this.fetch)}}const nd="2.50.0";let Kt="";typeof Deno<"u"?Kt="deno":typeof document<"u"?Kt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kt="react-native":Kt="node";const id={"X-Client-Info":`supabase-js-${Kt}/${nd}`},ad={headers:id},od={schema:"public"},ld={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cd={};var dd=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const ud=r=>{let e;return r?e=r:typeof fetch>"u"?e=Ui:e=fetch,(...t)=>e(...t)},hd=()=>typeof Headers>"u"?Fi:Headers,fd=(r,e,t)=>{const s=ud(t),n=hd();return(i,a)=>dd(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:r;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},a),{headers:c}))})};var pd=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};function md(r){return r.endsWith("/")?r:r+"/"}function gd(r,e){var t,s;const{db:n,auth:i,realtime:a,global:o}=r,{db:l,auth:c,realtime:d,global:p}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(t=p==null?void 0:p.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>pd(this,void 0,void 0,function*(){return""})};return r.accessToken?g.accessToken=r.accessToken:delete g.accessToken,g}const ta="2.70.0",kt=30*1e3,ws=3,rs=ws*kt,yd="http://localhost:9999",vd="supabase.auth.token",bd={"X-Client-Info":`gotrue-js/${ta}`},_s="X-Supabase-Api-Version",ra={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wd=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_d=6e5;class Bs extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function N(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class xd extends Bs{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Ed(r){return N(r)&&r.name==="AuthApiError"}class sa extends Bs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class st extends Bs{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ke extends st{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sd(r){return N(r)&&r.name==="AuthSessionMissingError"}class fr extends st{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pr extends st{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mr extends st{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kd(r){return N(r)&&r.name==="AuthImplicitGrantRedirectError"}class vn extends st{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xs extends st{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ss(r){return N(r)&&r.name==="AuthRetryableFetchError"}class bn extends st{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Xt extends st{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wn=` 	
\r=`.split(""),Td=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<wn.length;e+=1)r[wn[e].charCodeAt(0)]=-2;for(let e=0;e<Tr.length;e+=1)r[Tr[e].charCodeAt(0)]=e;return r})();function _n(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Tr[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Tr[s]),e.queuedBits-=6}}function na(r,e,t){const s=Td[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function xn(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{Cd(a,s,t)};for(let a=0;a<r.length;a+=1)na(r.charCodeAt(a),n,i);return e.join("")}function jd(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Ad(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}jd(s,e)}}function Cd(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Pd(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)na(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Rd(r){const e=[];return Ad(r,t=>e.push(t)),new Uint8Array(e)}function Od(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>_n(n,t,s)),_n(null,t,s),e.join("")}function Id(r){return Math.round(Date.now()/1e3)+r}function Nd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ke=()=>typeof window<"u"&&typeof document<"u",at={tested:!1,writable:!1},Zt=()=>{if(!ke())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(at.tested)return at.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),at.tested=!0,at.writable=!0}catch{at.tested=!0,at.writable=!1}return at.writable};function Dd(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const ia=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Z(async()=>{const{default:s}=await Promise.resolve().then(()=>Ft);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},$d=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",aa=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},gr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},yr=async(r,e)=>{await r.removeItem(e)};class qr{constructor(){this.promise=new qr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}qr.promiseConstructor=Promise;function ns(r){const e=r.split(".");if(e.length!==3)throw new Xt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!wd.test(e[s]))throw new Xt("JWT not in base64url format");return{header:JSON.parse(xn(e[0])),payload:JSON.parse(xn(e[1])),signature:Pd(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ld(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ud(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Fd(r){return("0"+r.toString(16)).substr(-2)}function Md(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Fd).join("")}async function Bd(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function qd(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Bd(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xt(r,e,t=!1){const s=Md();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await aa(r,`${e}-code-verifier`,n);const i=await qd(s);return[i,s===i?"plain":"s256"]}const zd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vd(r){const e=r.headers.get(_s);if(!e||!e.match(zd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hd(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Gd(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Et(r){if(!Wd.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Kd=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const ot=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Jd=[502,503,504];async function En(r){var e;if(!$d(r))throw new xs(ot(r),0);if(Jd.includes(r.status))throw new xs(ot(r),r.status);let t;try{t=await r.json()}catch(i){throw new sa(ot(i),i)}let s;const n=Vd(r);if(n&&n.getTime()>=ra["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new bn(ot(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ke}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new bn(ot(t),r.status,t.weak_password.reasons);throw new xd(ot(t),r.status||500,s)}const Qd=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function $(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[_s]||(i[_s]=ra["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Yd(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function Yd(r,e,t,s,n,i){const a=Qd(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new xs(ot(l),0)}if(o.ok||await En(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await En(l)}}function Fe(r){var e;let t=null;tu(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Id(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Sn(r){const e=Fe(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Qe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Xd(r){return{data:r,error:null}}function Zd(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=Kd(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function eu(r){return r}function tu(r){return r.access_token&&r.refresh_token&&r.expires_in}const is=["global","local","others"];var ru=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class su{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=ia(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=is[0]){if(is.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${is.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Qe})}catch(s){if(N(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ru(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Zd,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(N(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qe})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:eu});if(d.error)throw d.error;const p=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(_=>{const m=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),f=JSON.parse(_.split(";")[1].split("=")[1]);c[`${f}Page`]=m}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(N(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Et(e);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qe})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Et(e);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Qe})}catch(s){if(N(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Et(e);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Qe})}catch(s){if(N(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Et(e.userId);try{const{data:t,error:s}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(N(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Et(e.userId),Et(e.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}}const nu={getItem:r=>Zt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Zt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Zt()&&globalThis.localStorage.removeItem(r)}};function kn(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function iu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const St={debug:!!(globalThis&&Zt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oa extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class au extends oa{}async function ou(r,e,t){St.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),St.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){St.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{St.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw St.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new au(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(St.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}iu();const lu={url:yd,storageKey:vd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tn(r,e,t){return await t()}class rr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rr.nextInstanceID,rr.nextInstanceID+=1,this.instanceID>0&&ke()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},lu),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new su({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ia(n.fetch),this.lock=n.lock||Tn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ke()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ou:this.lock=Tn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Zt()?this.storage=nu:(this.memoryStorage={},this.storage=kn(this.memoryStorage)):(this.memoryStorage={},this.storage=kn(this.memoryStorage)),ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ta}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Dd(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),ke()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),kd(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return N(t)?{error:t}:{error:new sa("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Fe}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:p,options:g}=e;let h=null,_=null;this.flowType==="pkce"&&([h,_]=await xt(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:p,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:h,code_challenge_method:_},xform:Fe})}else if("phone"in e){const{phone:d,password:p,options:g}=e;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fe})}else throw new pr("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sn})}else throw new pr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new fr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,a,o,l,c,d,p,g,h;let _,m;if("message"in e)_=e.message,m=e.signature;else{const{chain:f,wallet:w,statement:E,options:y}=e;let S;if(ke())if(typeof w=="object")S=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))S=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const T=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const k=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let P;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")P=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)P=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)_=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),m=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((p=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...y.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const k=await S.signMessage(new TextEncoder().encode(_),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=k}}try{const{data:f,error:w}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Od(m)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Fe});if(w)throw w;return!f||!f.session||!f.user?{data:{user:null,session:null},error:new fr}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign({},f),error:w})}catch(f){if(N(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Fe});if(await yr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(N(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Fe}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new fr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await xt(this.storage,this.storageKey));const{error:p}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new pr("You must provide either an email or phone number.")}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Fe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await xt(this.storage,this.storageKey)),await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Xd})}catch(i){if(N(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ke;const{error:n}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await $(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await $(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new pr("You must provide either an email or phone number and a type")}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<rs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qe}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ke}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Qe})})}catch(t){if(N(t))return Sd(t)&&(await this._removeSession(),await yr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ke;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await xt(this.storage,this.storageKey));const{data:c,error:d}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Qe});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(N(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ke;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:a}=ns(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(N(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ke;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(N(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ke())throw new mr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new vn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vn("No code detected.");const{data:E,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new mr("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let g=d+p;l&&(g=parseInt(l));const h=g-d;h*1e3<=kt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${p}s`);const _=g-p;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,d);const{data:m,error:f}=await this._getUser(i);if(f)throw f;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:p,expires_at:g,refresh_token:a,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(N(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Ed(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await yr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Nd(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await xt(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(N(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,l,c,d;const{data:p,error:g}=i;if(g)throw g;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ke()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(N(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Ud(async n=>(n>0&&await Ld(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fe})),(n,i)=>{const a=200*Math.pow(2,n);return i&&ss(i)&&Date.now()+a-s<kt})}catch(s){if(this._debug(t,"error",s),N(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ke()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await gr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<rs;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${rs}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ss(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ke;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new qr;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ke;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),N(i)){const a={session:null,error:i};return ss(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await aa(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await yr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ke()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/kt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${kt}ms, refresh threshold is ${ws} ticks`),n<=ws&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oa)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ke()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await xt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await $(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(N(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(N(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ns(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s||(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+_d>Date.now()))return s;const{data:n,error:i}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Xt("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(a=>a.kid===e),!s)throw new Xt("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:h,error:_}=await this.getSession();if(_||!h.session)return{data:null,error:_};s=h.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:l}}=ns(s);if(Hd(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:i,header:n,signature:a},error:null}}const c=Gd(n.alg),d=await this.fetchJwk(n.kid,t),p=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,p,a,Rd(`${o}.${l}`)))throw new Xt("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}}}rr.nextInstanceID=0;const cu=rr;class du extends cu{constructor(e){super(e)}}var uu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(p){a(p)}}function l(d){try{c(s.throw(d))}catch(p){a(p)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class hu{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=md(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:od,realtime:cd,auth:Object.assign(Object.assign({},ld),{storageKey:c}),global:ad},p=gd(s??{},d);this.storageKey=(n=p.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=fd(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Pc(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new ac(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sd(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:o,debug:l},c,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new du({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new zc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const la=(r,e,t)=>new hu(r,e,t),ca="https://vetufvhzmawjbsumtplq.supabase.co",da="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZldHVmdmh6bWF3amJzdW10cGxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4NjU2NDgsImV4cCI6MjA2NDQ0MTY0OH0.QZGDjZYO4P9e7ogbORlWCVHhQ92j6enBUEo_KIHb4Wk",fu=ca,pu=da,Re=la(fu,pu,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),mu=ENV_URL??ca??void 0,gu=ENV_ANON_KEY??da??void 0;(!mu||!gu)&&console.error("[DFS-Portal] Supabase credentials missing. Set VITE_SUPABASE_URL / VITE_SUPABASE_ANON_KEY or run 'supabase start'.");const ua=b.createContext(void 0),Eh=()=>{const r=b.useContext(ua);if(r===void 0)throw new Error("useSupabaseAuth must be used within a SupabaseAuthProvider");return r},yu=({children:r})=>{const[e,t]=b.useState(null),[s,n]=b.useState(null),[i,a]=b.useState(!0),{toast:o}=js();b.useEffect(()=>{(async()=>{try{const{data:{session:f},error:w}=await Re.auth.getSession();w?(console.error("Error getting session:",w),o({title:"Authentication Error",description:w.message,variant:"destructive"})):(n(f),t((f==null?void 0:f.user)??null))}catch(f){console.error("Error in getSession:",f)}finally{a(!1)}})();const{data:{subscription:m}}=Re.auth.onAuthStateChange(async(f,w)=>{switch(console.log("Auth state changed:",f,w),n(w),t((w==null?void 0:w.user)??null),a(!1),f){case"SIGNED_IN":o({title:"Welcome!",description:"You have been successfully signed in."});break;case"SIGNED_OUT":o({title:"Signed Out",description:"You have been successfully signed out."});break;case"TOKEN_REFRESHED":console.log("Token refreshed successfully");break;case"USER_UPDATED":o({title:"Profile Updated",description:"Your profile has been updated successfully."});break;case"PASSWORD_RECOVERY":o({title:"Password Recovery",description:"Please check your email for password reset instructions."});break}});return()=>{m.unsubscribe()}},[o]);const h={user:e,session:s,loading:i,signUp:async(_,m)=>{try{a(!0);const{error:f}=await Re.auth.signUp({email:_,password:m,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});return o(f?{title:"Sign Up Error",description:f.message,variant:"destructive"}:{title:"Check Your Email",description:"We sent you a confirmation link. Please check your email."}),{error:f}}catch(f){console.error("Sign up error:",f);const w=f;return o({title:"Sign Up Error",description:w.message||"An unexpected error occurred",variant:"destructive"}),{error:w}}finally{a(!1)}},signIn:async(_,m)=>{try{a(!0);const{error:f}=await Re.auth.signInWithPassword({email:_,password:m});return f&&o({title:"Sign In Error",description:f.message,variant:"destructive"}),{error:f}}catch(f){console.error("Sign in error:",f);const w=f;return o({title:"Sign In Error",description:w.message||"An unexpected error occurred",variant:"destructive"}),{error:w}}finally{a(!1)}},signOut:async()=>{try{a(!0);const{error:_}=await Re.auth.signOut();return _&&o({title:"Sign Out Error",description:_.message,variant:"destructive"}),{error:_}}catch(_){console.error("Sign out error:",_);const m=_;return o({title:"Sign Out Error",description:m.message||"An unexpected error occurred",variant:"destructive"}),{error:m}}finally{a(!1)}},resetPassword:async _=>{try{const{error:m}=await Re.auth.resetPasswordForEmail(_,{redirectTo:`${window.location.origin}/resetpassword`});return o(m?{title:"Password Reset Error",description:m.message,variant:"destructive"}:{title:"Password Reset Email Sent",description:"Please check your email for password reset instructions."}),{error:m}}catch(m){console.error("Password reset error:",m);const f=m;return o({title:"Password Reset Error",description:f.message||"An unexpected error occurred",variant:"destructive"}),{error:f}}},updatePassword:async _=>{try{const{error:m}=await Re.auth.updateUser({password:_});return o(m?{title:"Password Update Error",description:m.message,variant:"destructive"}:{title:"Password Updated",description:"Your password has been updated successfully."}),{error:m}}catch(m){console.error("Password update error:",m);const f=m;return o({title:"Password Update Error",description:f.message||"An unexpected error occurred",variant:"destructive"}),{error:f}}}};return u.jsx(ua.Provider,{value:h,"data-id":"u26fw9fgr","data-path":"src/contexts/SupabaseAuthContext.tsx",children:r})},vu="https://vetufvhzmawjbsumtplq.supabase.co",bu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZldHVmdmh6bWF3amJzdW10cGxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4NjU2NDgsImV4cCI6MjA2NDQ0MTY0OH0.QZGDjZYO4P9e7ogbORlWCVHhQ92j6enBUEo_KIHb4Wk",ae=la(vu,bu,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class Wt{static async getSecuritySettings(){try{const{data:e,error:t}=await ae.from("security_settings").select("*").order("created_at",{ascending:!1}).limit(1).single();return t&&t.code!=="PGRST116"?(console.error("Error fetching security settings:",t),{data:null,error:t.message}):e?{data:e.settings,error:null}:{data:this.getDefaultSecuritySettings(),error:null}}catch(e){return console.error("Error in getSecuritySettings:",e),{data:null,error:"An unexpected error occurred"}}}static async saveSecuritySettings(e){try{const{data:t}=await ae.auth.getUser();if(!t.user)return{error:"User not authenticated"};const s={settings:e,updated_by:t.user.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:n}=await ae.from("security_settings").upsert(s,{onConflict:"id"});return n?(console.error("Error saving security settings:",n),{error:n.message}):(await this.logSecurityEvent({event_type:"security_settings_updated",user_id:t.user.id,username:t.user.email||"unknown",ip_address:await this.getClientIP(),event_timestamp:new Date().toISOString(),event_status:"success",action_performed:"Updated security settings",risk_level:"medium",additional_data:JSON.stringify({settingsUpdated:Object.keys(e)})}),{error:null})}catch(t){return console.error("Error in saveSecuritySettings:",t),{error:"An unexpected error occurred"}}}static async addIPToWhitelist(e){var t,s;try{const{data:n,error:i}=await this.getSecuritySettings();if(i||!n)return{error:i||"Failed to get current settings"};if(!n.systemSecurity.ipWhitelist.includes(e)){n.systemSecurity.ipWhitelist.push(e);const{error:a}=await this.saveSecuritySettings(n);return a||await this.logSecurityEvent({event_type:"ip_whitelist_updated",user_id:(t=(await ae.auth.getUser()).data.user)==null?void 0:t.id,username:((s=(await ae.auth.getUser()).data.user)==null?void 0:s.email)||"unknown",ip_address:await this.getClientIP(),event_timestamp:new Date().toISOString(),event_status:"success",action_performed:`Added IP ${e} to whitelist`,risk_level:"low",additional_data:JSON.stringify({addedIP:e})}),{error:a}}return{error:null}}catch(n){return console.error("Error adding IP to whitelist:",n),{error:"An unexpected error occurred"}}}static async removeIPFromWhitelist(e){var t,s;try{const{data:n,error:i}=await this.getSecuritySettings();if(i||!n)return{error:i||"Failed to get current settings"};n.systemSecurity.ipWhitelist=n.systemSecurity.ipWhitelist.filter(o=>o!==e);const{error:a}=await this.saveSecuritySettings(n);return a||await this.logSecurityEvent({event_type:"ip_whitelist_updated",user_id:(t=(await ae.auth.getUser()).data.user)==null?void 0:t.id,username:((s=(await ae.auth.getUser()).data.user)==null?void 0:s.email)||"unknown",ip_address:await this.getClientIP(),event_timestamp:new Date().toISOString(),event_status:"success",action_performed:`Removed IP ${e} from whitelist`,risk_level:"medium",additional_data:JSON.stringify({removedIP:e})}),{error:a}}catch(n){return console.error("Error removing IP from whitelist:",n),{error:"An unexpected error occurred"}}}static async getSecurityEvents(e={}){try{const{page:t=1,pageSize:s=50,severity:n,type:i}=e;let a=ae.from("security_events").select("*",{count:"exact"}).order("timestamp",{ascending:!1});n&&(a=a.eq("severity",n)),i&&(a=a.eq("type",i));const o=(t-1)*s,l=o+s-1;a=a.range(o,l);const{data:c,count:d,error:p}=await a;return p?(console.error("Error fetching security events:",p),{data:null,count:null,error:p.message}):{data:c,count:d,error:null}}catch(t){return console.error("Error in getSecurityEvents:",t),{data:null,count:null,error:"An unexpected error occurred"}}}static async deleteSecurityEvents(e){var t,s;try{const{error:n}=await ae.from("security_events").delete().in("id",e);return n?(console.error("Error deleting security events:",n),{error:n.message}):(await this.logSecurityEvent({event_type:"security_events_deleted",user_id:(t=(await ae.auth.getUser()).data.user)==null?void 0:t.id,username:((s=(await ae.auth.getUser()).data.user)==null?void 0:s.email)||"unknown",ip_address:await this.getClientIP(),event_timestamp:new Date().toISOString(),event_status:"success",action_performed:`Deleted ${e.length} security events`,risk_level:"low",additional_data:JSON.stringify({deletedEventIds:e})}),{error:null})}catch(n){return console.error("Error in deleteSecurityEvents:",n),{error:"An unexpected error occurred"}}}static async logSecurityEvent(e){try{const{error:t}=await ae.from("audit_logs").insert({...e,user_agent:navigator.userAgent||"unknown"});return t?(console.error("Error logging security event:",t),{error:t.message}):{error:null}}catch(t){return console.error("Error in logSecurityEvent:",t),{error:"An unexpected error occurred"}}}static async validateSession(){try{const{data:{user:e},error:t}=await ae.auth.getUser();if(t)return{valid:!1,user:null,error:t.message};if(!e)return{valid:!1,user:null,error:"No user session found"};const{data:s}=await this.getSecuritySettings();if(s){const n=s.accountSecurity.sessionTimeout*60*1e3,i=localStorage.getItem("lastActivity");if(i&&Date.now()-parseInt(i)>n)return await ae.auth.signOut(),{valid:!1,user:null,error:"Session expired due to inactivity"}}return localStorage.setItem("lastActivity",Date.now().toString()),{valid:!0,user:e,error:null}}catch(e){return console.error("Error validating session:",e),{valid:!1,user:null,error:"An unexpected error occurred"}}}static async trackFailedLogin(e,t){try{const{data:s}=await this.getSecuritySettings();if(!s)return{shouldLockout:!1,error:"Failed to get security settings"};const n=new Date(Date.now()-60*60*1e3).toISOString(),{data:i,error:a}=await ae.from("failed_login_attempts").select("*").eq("email",e).gte("attempted_at",n).order("attempted_at",{ascending:!1});if(a)return console.error("Error checking failed attempts:",a),{shouldLockout:!1,error:a.message};await ae.from("failed_login_attempts").insert({email:e,ip_address:t,attempted_at:new Date().toISOString()});const o=((i==null?void 0:i.length)||0)+1,l=o>=s.accountSecurity.maxFailedAttempts;return l&&await this.logSecurityEvent({event_type:"account_lockout",username:e,ip_address:t,event_timestamp:new Date().toISOString(),event_status:"success",action_performed:`Account locked due to ${o} failed login attempts`,risk_level:"high",additional_data:JSON.stringify({failedAttempts:o,lockoutDuration:s.accountSecurity.lockoutDuration})}),{shouldLockout:l,error:null}}catch(s){return console.error("Error tracking failed login:",s),{shouldLockout:!1,error:"An unexpected error occurred"}}}static async getClientIP(){try{return"client-ip-placeholder"}catch{return"unknown"}}static getDefaultSecuritySettings(){return{passwordPolicy:{minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!0,passwordExpiry:90,preventReuse:12},accountSecurity:{maxFailedAttempts:5,lockoutDuration:30,requireEmailVerification:!0,requireTwoFactor:!1,sessionTimeout:60,allowMultipleSessions:!1},systemSecurity:{enableSSL:!0,enableFirewall:!0,enableIPWhitelist:!1,ipWhitelist:["192.168.1.0/24"],enableAuditLogging:!0,enableDataEncryption:!0,enableBackupEncryption:!0},accessControl:{enableRoleBasedAccess:!0,requireApprovalForNewUsers:!0,defaultUserRole:"Employee",enableGuestAccess:!1,maxConcurrentUsers:50}}}static calculateSecurityScore(e){let t=0;const s=20;return e.passwordPolicy.minLength>=8&&t++,e.passwordPolicy.requireUppercase&&t++,e.passwordPolicy.requireNumbers&&t++,e.passwordPolicy.requireSpecialChars&&t++,e.passwordPolicy.passwordExpiry<=90&&t++,e.accountSecurity.maxFailedAttempts<=5&&t++,e.accountSecurity.lockoutDuration>=15&&t++,e.accountSecurity.requireEmailVerification&&t++,e.accountSecurity.requireTwoFactor&&(t+=2),e.accountSecurity.sessionTimeout<=60&&t++,e.systemSecurity.enableSSL&&(t+=2),e.systemSecurity.enableFirewall&&(t+=2),e.systemSecurity.enableAuditLogging&&t++,e.systemSecurity.enableDataEncryption&&(t+=2),e.systemSecurity.enableBackupEncryption&&t++,e.accessControl.enableRoleBasedAccess&&t++,e.accessControl.requireApprovalForNewUsers&&t++,e.accessControl.enableGuestAccess||t++,Math.round(t/s*100)}}var wu=r=>{switch(r){case"success":return Eu;case"info":return ku;case"warning":return Su;case"error":return Tu;default:return null}},_u=Array(12).fill(0),xu=({visible:r,className:e})=>x.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},x.createElement("div",{className:"sonner-spinner"},_u.map((t,s)=>x.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Eu=x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},x.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Su=x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},x.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ku=x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},x.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Tu=x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},x.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ju=x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},x.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Au=()=>{let[r,e]=x.useState(document.hidden);return x.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},Es=1,Cu=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...s}=r,n=typeof(r==null?void 0:r.id)=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:Es++,i=this.toasts.find(o=>o.id===n),a=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),i?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...r,id:n,title:t}),{...o,...r,id:n,dismissible:a,title:t}):o):this.addToast({title:t,...s,dismissible:a,id:n}),n},this.dismiss=r=>(this.dismissedToasts.add(r),r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=r instanceof Promise?r:r(),n=t!==void 0,i,a=s.then(async l=>{if(i=["resolve",l],x.isValidElement(l))n=!1,this.create({id:t,type:"default",message:l});else if(Ru(l)&&!l.ok){n=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:d})}else if(e.success!==void 0){n=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){n=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:d})}}).finally(()=>{var l;n&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,c)=>a.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(r,e)=>{let t=(e==null?void 0:e.id)||Es++;return this.create({jsx:r(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ge=new Cu,Pu=(r,e)=>{let t=(e==null?void 0:e.id)||Es++;return ge.addToast({title:r,...e,id:t}),t},Ru=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",Ou=Pu,Iu=()=>ge.toasts,Nu=()=>ge.getActiveToasts(),vr=Object.assign(Ou,{success:ge.success,info:ge.info,warning:ge.warning,error:ge.error,custom:ge.custom,message:ge.message,promise:ge.promise,dismiss:ge.dismiss,loading:ge.loading},{getHistory:Iu,getToasts:Nu});function Du(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}Du(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function br(r){return r.label!==void 0}var $u=3,Lu="32px",Uu="16px",jn=4e3,Fu=356,Mu=14,Bu=20,qu=200;function Se(...r){return r.filter(Boolean).join(" ")}function zu(r){let[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var Vu=r=>{var e,t,s,n,i,a,o,l,c,d,p;let{invert:g,toast:h,unstyled:_,interacting:m,setHeights:f,visibleToasts:w,heights:E,index:y,toasts:S,expanded:T,removeToast:k,defaultRichColors:P,closeButton:L,style:j,cancelButtonStyle:q,actionButtonStyle:K,className:R="",descriptionClassName:ee="",duration:A,position:J,gap:X,loadingIcon:re,expandByDefault:he,classNames:C,icons:se,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:F}=r,[M,z]=x.useState(null),[fe,gt]=x.useState(null),[Q,zr]=x.useState(!1),[Bt,lr]=x.useState(!1),[qt,Vr]=x.useState(!1),[qs,ha]=x.useState(!1),[fa,zs]=x.useState(!1),[pa,Hr]=x.useState(0),[ma,Vs]=x.useState(0),zt=x.useRef(h.duration||A||jn),Hs=x.useRef(null),nt=x.useRef(null),ga=y===0,ya=y+1<=w,ve=h.type,yt=h.dismissible!==!1,va=h.className||"",ba=h.descriptionClassName||"",cr=x.useMemo(()=>E.findIndex(O=>O.toastId===h.id)||0,[E,h.id]),wa=x.useMemo(()=>{var O;return(O=h.closeButton)!=null?O:L},[h.closeButton,L]),Gs=x.useMemo(()=>h.duration||A||jn,[h.duration,A]),Gr=x.useRef(0),vt=x.useRef(0),Ws=x.useRef(0),bt=x.useRef(null),[_a,xa]=J.split("-"),Ks=x.useMemo(()=>E.reduce((O,B,W)=>W>=cr?O:O+B.height,0),[E,cr]),Js=Au(),Ea=h.invert||g,Wr=ve==="loading";vt.current=x.useMemo(()=>cr*X+Ks,[cr,Ks]),x.useEffect(()=>{zt.current=Gs},[Gs]),x.useEffect(()=>{zr(!0)},[]),x.useEffect(()=>{let O=nt.current;if(O){let B=O.getBoundingClientRect().height;return Vs(B),f(W=>[{toastId:h.id,height:B,position:h.position},...W]),()=>f(W=>W.filter(_e=>_e.toastId!==h.id))}},[f,h.id]),x.useLayoutEffect(()=>{if(!Q)return;let O=nt.current,B=O.style.height;O.style.height="auto";let W=O.getBoundingClientRect().height;O.style.height=B,Vs(W),f(_e=>_e.find(xe=>xe.toastId===h.id)?_e.map(xe=>xe.toastId===h.id?{...xe,height:W}:xe):[{toastId:h.id,height:W,position:h.position},..._e])},[Q,h.title,h.description,f,h.id]);let qe=x.useCallback(()=>{lr(!0),Hr(vt.current),f(O=>O.filter(B=>B.toastId!==h.id)),setTimeout(()=>{k(h)},qu)},[h,k,f,vt]);x.useEffect(()=>{if(h.promise&&ve==="loading"||h.duration===1/0||h.type==="loading")return;let O;return T||m||F&&Js?(()=>{if(Ws.current<Gr.current){let B=new Date().getTime()-Gr.current;zt.current=zt.current-B}Ws.current=new Date().getTime()})():zt.current!==1/0&&(Gr.current=new Date().getTime(),O=setTimeout(()=>{var B;(B=h.onAutoClose)==null||B.call(h,h),qe()},zt.current)),()=>clearTimeout(O)},[T,m,h,ve,F,Js,qe]),x.useEffect(()=>{h.delete&&qe()},[qe,h.delete]);function Sa(){var O,B,W;return se!=null&&se.loading?x.createElement("div",{className:Se(C==null?void 0:C.loader,(O=h==null?void 0:h.classNames)==null?void 0:O.loader,"sonner-loader"),"data-visible":ve==="loading"},se.loading):re?x.createElement("div",{className:Se(C==null?void 0:C.loader,(B=h==null?void 0:h.classNames)==null?void 0:B.loader,"sonner-loader"),"data-visible":ve==="loading"},re):x.createElement(xu,{className:Se(C==null?void 0:C.loader,(W=h==null?void 0:h.classNames)==null?void 0:W.loader),visible:ve==="loading"})}return x.createElement("li",{tabIndex:0,ref:nt,className:Se(R,va,C==null?void 0:C.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,C==null?void 0:C.default,C==null?void 0:C[ve],(t=h==null?void 0:h.classNames)==null?void 0:t[ve]),"data-sonner-toast":"","data-rich-colors":(s=h.richColors)!=null?s:P,"data-styled":!(h.jsx||h.unstyled||_),"data-mounted":Q,"data-promise":!!h.promise,"data-swiped":fa,"data-removed":Bt,"data-visible":ya,"data-y-position":_a,"data-x-position":xa,"data-index":y,"data-front":ga,"data-swiping":qt,"data-dismissible":yt,"data-type":ve,"data-invert":Ea,"data-swipe-out":qs,"data-swipe-direction":fe,"data-expanded":!!(T||he&&Q),style:{"--index":y,"--toasts-before":y,"--z-index":S.length-y,"--offset":`${Bt?pa:vt.current}px`,"--initial-height":he?"auto":`${ma}px`,...j,...h.style},onDragEnd:()=>{Vr(!1),z(null),bt.current=null},onPointerDown:O=>{Wr||!yt||(Hs.current=new Date,Hr(vt.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(Vr(!0),bt.current={x:O.clientX,y:O.clientY}))},onPointerUp:()=>{var O,B,W,_e;if(qs||!yt)return;bt.current=null;let xe=Number(((O=nt.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ze=Number(((B=nt.current)==null?void 0:B.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),it=new Date().getTime()-((W=Hs.current)==null?void 0:W.getTime()),Ee=M==="x"?xe:ze,Ve=Math.abs(Ee)/it;if(Math.abs(Ee)>=Bu||Ve>.11){Hr(vt.current),(_e=h.onDismiss)==null||_e.call(h,h),gt(M==="x"?xe>0?"right":"left":ze>0?"down":"up"),qe(),ha(!0),zs(!1);return}Vr(!1),z(null)},onPointerMove:O=>{var B,W,_e,xe;if(!bt.current||!yt||((B=window.getSelection())==null?void 0:B.toString().length)>0)return;let ze=O.clientY-bt.current.y,it=O.clientX-bt.current.x,Ee=(W=r.swipeDirections)!=null?W:zu(J);!M&&(Math.abs(it)>1||Math.abs(ze)>1)&&z(Math.abs(it)>Math.abs(ze)?"x":"y");let Ve={x:0,y:0};M==="y"?(Ee.includes("top")||Ee.includes("bottom"))&&(Ee.includes("top")&&ze<0||Ee.includes("bottom")&&ze>0)&&(Ve.y=ze):M==="x"&&(Ee.includes("left")||Ee.includes("right"))&&(Ee.includes("left")&&it<0||Ee.includes("right")&&it>0)&&(Ve.x=it),(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&zs(!0),(_e=nt.current)==null||_e.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(xe=nt.current)==null||xe.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},wa&&!h.jsx?x.createElement("button",{"aria-label":le,"data-disabled":Wr,"data-close-button":!0,onClick:Wr||!yt?()=>{}:()=>{var O;qe(),(O=h.onDismiss)==null||O.call(h,h)},className:Se(C==null?void 0:C.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(i=se==null?void 0:se.close)!=null?i:ju):null,h.jsx||b.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:x.createElement(x.Fragment,null,ve||h.icon||h.promise?x.createElement("div",{"data-icon":"",className:Se(C==null?void 0:C.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Sa():null,h.type!=="loading"?h.icon||(se==null?void 0:se[ve])||wu(ve):null):null,x.createElement("div",{"data-content":"",className:Se(C==null?void 0:C.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},x.createElement("div",{"data-title":"",className:Se(C==null?void 0:C.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?x.createElement("div",{"data-description":"",className:Se(ee,ba,C==null?void 0:C.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),b.isValidElement(h.cancel)?h.cancel:h.cancel&&br(h.cancel)?x.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||q,onClick:O=>{var B,W;br(h.cancel)&&yt&&((W=(B=h.cancel).onClick)==null||W.call(B,O),qe())},className:Se(C==null?void 0:C.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,b.isValidElement(h.action)?h.action:h.action&&br(h.action)?x.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||K,onClick:O=>{var B,W;br(h.action)&&((W=(B=h.action).onClick)==null||W.call(B,O),!O.defaultPrevented&&qe())},className:Se(C==null?void 0:C.actionButton,(p=h==null?void 0:h.classNames)==null?void 0:p.actionButton)},h.action.label):null))};function An(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function Hu(r,e){let t={};return[r,e].forEach((s,n)=>{let i=n===1,a=i?"--mobile-offset":"--offset",o=i?Uu:Lu;function l(c){["top","right","bottom","left"].forEach(d=>{t[`${a}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?t[`${a}-${c}`]=o:t[`${a}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(o)}),t}b.forwardRef(function(r,e){let{invert:t,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:p,duration:g,style:h,visibleToasts:_=$u,toastOptions:m,dir:f=An(),gap:w=Mu,loadingIcon:E,icons:y,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:T}=r,[k,P]=x.useState([]),L=x.useMemo(()=>Array.from(new Set([s].concat(k.filter(F=>F.position).map(F=>F.position)))),[k,s]),[j,q]=x.useState([]),[K,R]=x.useState(!1),[ee,A]=x.useState(!1),[J,X]=x.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=x.useRef(null),he=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=x.useRef(null),se=x.useRef(!1),le=x.useCallback(F=>{P(M=>{var z;return(z=M.find(fe=>fe.id===F.id))!=null&&z.delete||ge.dismiss(F.id),M.filter(({id:fe})=>fe!==F.id)})},[]);return x.useEffect(()=>ge.subscribe(F=>{if(F.dismiss){P(M=>M.map(z=>z.id===F.id?{...z,delete:!0}:z));return}setTimeout(()=>{Da.flushSync(()=>{P(M=>{let z=M.findIndex(fe=>fe.id===F.id);return z!==-1?[...M.slice(0,z),{...M[z],...F},...M.slice(z+1)]:[F,...M]})})})}),[]),x.useEffect(()=>{if(d!=="system"){X(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;let F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:M})=>{X(M?"dark":"light")})}catch{F.addListener(({matches:z})=>{try{X(z?"dark":"light")}catch(fe){console.error(fe)}})}},[d]),x.useEffect(()=>{k.length<=1&&R(!1)},[k]),x.useEffect(()=>{let F=M=>{var z,fe;n.every(gt=>M[gt]||M.code===gt)&&(R(!0),(z=re.current)==null||z.focus()),M.code==="Escape"&&(document.activeElement===re.current||(fe=re.current)!=null&&fe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[n]),x.useEffect(()=>{if(re.current)return()=>{C.current&&(C.current.focus({preventScroll:!0}),C.current=null,se.current=!1)}},[re.current]),x.createElement("section",{ref:e,"aria-label":`${S} ${he}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((F,M)=>{var z;let[fe,gt]=F.split("-");return k.length?x.createElement("ol",{key:F,dir:f==="auto"?An():f,tabIndex:-1,ref:re,className:o,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":fe,"data-lifted":K&&k.length>1&&!i,"data-x-position":gt,style:{"--front-toast-height":`${((z=j[0])==null?void 0:z.height)||0}px`,"--width":`${Fu}px`,"--gap":`${w}px`,...h,...Hu(l,c)},onBlur:Q=>{se.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(se.current=!1,C.current&&(C.current.focus({preventScroll:!0}),C.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||se.current||(se.current=!0,C.current=Q.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{ee||R(!1)},onDragEnd:()=>R(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},k.filter(Q=>!Q.position&&M===0||Q.position===F).map((Q,zr)=>{var Bt,lr;return x.createElement(Vu,{key:Q.id,icons:y,index:zr,toast:Q,defaultRichColors:p,duration:(Bt=m==null?void 0:m.duration)!=null?Bt:g,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:t,visibleToasts:_,closeButton:(lr=m==null?void 0:m.closeButton)!=null?lr:a,interacting:ee,position:F,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:le,toasts:k.filter(qt=>qt.position==Q.position),heights:j.filter(qt=>qt.position==Q.position),setHeights:q,expandByDefault:i,gap:w,loadingIcon:E,expanded:K,pauseWhenPageIsHidden:T,swipeDirections:r.swipeDirections})})):null}))});const Gu=(r={})=>{const{timeoutMinutes:e=30,warningMinutes:t=5,checkIntervalSeconds:s=60,onTimeout:n,onWarning:i,resetOnActivity:a=!0}=r,[o,l]=b.useState({isActive:!0,remainingTime:e,isWarningShown:!1,lastActivity:new Date}),c=b.useRef(null),d=b.useRef(null),p=b.useCallback(()=>{l(f=>({...f,remainingTime:e,isWarningShown:!1,lastActivity:new Date})),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(f=>({...f,isActive:!1})),n==null||n(),vr.error("Session expired due to inactivity")},e*60*1e3)},[e,n]),g=b.useCallback(()=>{a&&p()},[a,p]),h=b.useCallback(()=>{l(f=>{const E=(new Date().getTime()-f.lastActivity.getTime())/(1e3*60),y=Math.max(0,e-E);return y<=t&&!f.isWarningShown&&y>0?(i==null||i(Math.ceil(y)),vr.warning(`Session will expire in ${Math.ceil(y)} minutes`),{...f,remainingTime:y,isWarningShown:!0}):y<=0&&f.isActive?(n==null||n(),vr.error("Session expired due to inactivity"),{...f,isActive:!1,remainingTime:0}):{...f,remainingTime:y}})},[e,t,n,i]);b.useEffect(()=>{p(),c.current=setInterval(h,s*1e3);const f=["mousedown","mousemove","keypress","scroll","touchstart","click"];return f.forEach(w=>{document.addEventListener(w,g,{passive:!0})}),()=>{c.current&&clearInterval(c.current),d.current&&clearTimeout(d.current),f.forEach(w=>{document.removeEventListener(w,g)})}},[p,h,g,s]);const _=b.useCallback((f=e)=>{l(w=>({...w,remainingTime:w.remainingTime+f,isWarningShown:!1,lastActivity:new Date})),vr.success(`Session extended by ${f} minutes`)},[e]),m=b.useCallback(()=>{l(f=>({...f,isActive:!1,remainingTime:0})),n==null||n()},[n]);return{isActive:o.isActive,remainingTime:Math.ceil(o.remainingTime),isWarningShown:o.isWarningShown,lastActivity:o.lastActivity,resetTimer:p,extendSession:_,endSession:m}},Wu=({feature:r="this feature",requiredRole:e="Administrator",showBackButton:t=!0,className:s=""})=>{const n=Wn();return u.jsx("div",{className:`flex items-center justify-center min-h-64 ${s}`,"data-id":"9xskset4d","data-path":"src/components/AccessDenied.tsx",children:u.jsxs(Rr,{className:"max-w-md w-full border-2 border-red-200 bg-red-50","data-id":"lngj14q45","data-path":"src/components/AccessDenied.tsx",children:[u.jsxs(Or,{className:"text-center","data-id":"blam2ya1d","data-path":"src/components/AccessDenied.tsx",children:[u.jsx("div",{className:"flex justify-center mb-4","data-id":"5wesgp6lh","data-path":"src/components/AccessDenied.tsx",children:u.jsx("div",{className:"p-4 bg-red-100 rounded-full","data-id":"eev8gt51c","data-path":"src/components/AccessDenied.tsx",children:u.jsx(Go,{className:"h-12 w-12 text-red-600","data-id":"ott9wt521","data-path":"src/components/AccessDenied.tsx"})})}),u.jsxs(Ir,{className:"text-red-800 flex items-center justify-center gap-2","data-id":"r0o4zxcdj","data-path":"src/components/AccessDenied.tsx",children:[u.jsx(Ho,{className:"h-5 w-5","data-id":"32qejhqm9","data-path":"src/components/AccessDenied.tsx"}),"Access Denied"]}),u.jsxs(Is,{className:"text-red-700","data-id":"fvpqf5awk","data-path":"src/components/AccessDenied.tsx",children:["You don't have permission to access ",r]})]}),u.jsxs(Nr,{className:"text-center space-y-4","data-id":"rqsqp3qdn","data-path":"src/components/AccessDenied.tsx",children:[u.jsxs("div",{className:"bg-red-100 p-4 rounded-lg","data-id":"d2x957195","data-path":"src/components/AccessDenied.tsx",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2","data-id":"q7vj47i9h","data-path":"src/components/AccessDenied.tsx",children:[u.jsx(Qt,{className:"h-5 w-5 text-red-600","data-id":"3r8jofh35","data-path":"src/components/AccessDenied.tsx"}),u.jsx("span",{className:"font-semibold text-red-800","data-id":"5b2olpy68","data-path":"src/components/AccessDenied.tsx",children:"Administrator Access Required"})]}),u.jsxs("p",{className:"text-sm text-red-700","data-id":"b45t0ixre","data-path":"src/components/AccessDenied.tsx",children:["This feature requires ",e," privileges for security and compliance reasons."]})]}),u.jsxs("div",{className:"space-y-2","data-id":"vix61zbpp","data-path":"src/components/AccessDenied.tsx",children:[u.jsx(Sr,{variant:"destructive",className:"w-full py-2","data-id":"3q5t8zdu2","data-path":"src/components/AccessDenied.tsx",children:"Current Role: Non-Administrator"}),u.jsxs(Sr,{variant:"outline",className:"w-full py-2 border-red-300 text-red-700","data-id":"x5k9a0g9a","data-path":"src/components/AccessDenied.tsx",children:["Required Role: ",e]})]}),u.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded border border-red-200","data-id":"7miaetzp6","data-path":"src/components/AccessDenied.tsx",children:[u.jsx("p",{className:"font-medium mb-1","data-id":"za7zjsoir","data-path":"src/components/AccessDenied.tsx",children:"Need access?"}),u.jsxs("p",{"data-id":"8jt6bmebb","data-path":"src/components/AccessDenied.tsx",children:["Contact your system administrator to request ",e," privileges."]})]}),t&&u.jsx("div",{className:"pt-4","data-id":"du3n7tbzv","data-path":"src/components/AccessDenied.tsx",children:u.jsxs(rt,{variant:"outline",onClick:()=>n(-1),className:"w-full border-red-300 text-red-700 hover:bg-red-100","data-id":"gaobsnn26","data-path":"src/components/AccessDenied.tsx",children:[u.jsx(Bo,{className:"h-4 w-4 mr-2","data-id":"hk3xuvotg","data-path":"src/components/AccessDenied.tsx"}),"Go Back"]})})]})]})})},me=({children:r,requiredRole:e,requiredPermissions:t=[],requireEmailVerification:s=!1})=>{var T;const[n,i]=b.useState(!0),[a,o]=b.useState(!1),[l,c]=b.useState(null),[d,p]=b.useState(null),[g,h]=b.useState(null),[_,m]=b.useState({denied:!1,reason:""}),f=$a(),{toast:w}=js();Gu({timeoutMinutes:((T=g==null?void 0:g.accountSecurity)==null?void 0:T.sessionTimeout)||60,warningMinutes:5,onTimeout:async()=>{w({title:"Session Expired",description:"Your session has expired due to inactivity.",variant:"destructive"}),await Re.auth.signOut()}});const E=(k,P=[])=>{if(k==="Administrator")return!0;if(e){const L=["Employee","Management","Administrator"],j=L.indexOf(k),q=L.indexOf(e);if(j<q)return!1}return t.length>0?t.every(L=>P.includes(L)):!0},y=async k=>{var L;if(!((L=g==null?void 0:g.systemSecurity)!=null&&L.enableIPWhitelist))return!0;const P=g.systemSecurity.ipWhitelist||[];return P.length===0?!0:P.some(j=>{if(j.includes("/")){const[q]=j.split("/");return k.startsWith(q.substring(0,q.lastIndexOf(".")))}return k===j})},S=async(k,P)=>{try{await Wt.logSecurityEvent({event_type:k,user_id:l==null?void 0:l.id,username:(l==null?void 0:l.email)||"unknown",ip_address:await Wt.getClientIP(),event_timestamp:new Date().toISOString(),event_status:"success",action_performed:`Route access: ${f.pathname}`,risk_level:"low",additional_data:JSON.stringify(P)})}catch(L){console.error("Failed to log security event:",L)}};return b.useEffect(()=>{const k=async()=>{var L;try{i(!0);const{data:j}=await Wt.getSecuritySettings();h(j);const{valid:q,user:K,error:R}=await Wt.validateSession();if(!q||!K){console.log("Session validation failed:",R),o(!1),i(!1);return}c(K),o(!0);const{data:ee,error:A}=await Re.from("user_profiles").select("*").eq("user_id",K.id).single();if(A){console.error("Error fetching user profile:",A),m({denied:!0,reason:"Failed to load user profile"}),i(!1);return}if(!ee){m({denied:!0,reason:"User profile not found"}),i(!1);return}if(p(ee),!ee.is_active){m({denied:!0,reason:"Account is deactivated"}),await S("access_denied",{reason:"inactive_account"}),i(!1);return}if(s&&!K.email_confirmed_at){m({denied:!0,reason:"Email verification required"}),await S("access_denied",{reason:"email_not_verified"}),i(!1);return}if(!E(ee.role,[])){m({denied:!0,reason:`Insufficient permissions. Required role: ${e||"Not specified"}`}),await S("access_denied",{reason:"insufficient_permissions",userRole:ee.role,requiredRole:e}),i(!1);return}const J=await Wt.getClientIP();if(!await y(J)){m({denied:!0,reason:"IP address not in whitelist"}),await S("access_denied",{reason:"ip_not_whitelisted",userIP:J}),i(!1);return}(L=j==null?void 0:j.accessControl)!=null&&L.maxConcurrentUsers,await S("route_access_granted",{route:f.pathname,userRole:ee.role,requiredRole:e})}catch(j){console.error("Auth check error:",j),o(!1),m({denied:!0,reason:"Authentication error occurred"})}finally{i(!1)}};k();const{data:{subscription:P}}=Re.auth.onAuthStateChange(async(L,j)=>{console.log("Auth state changed:",L,j),L==="SIGNED_OUT"||!j?(o(!1),c(null),p(null),m({denied:!1,reason:""})):L==="SIGNED_IN"&&j&&k()});return()=>P.unsubscribe()},[f.pathname,e,s]),n?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Validating access..."})]})}):a?_.denied?u.jsx(Wu,{feature:`Route: ${f.pathname}`,requiredRole:e,currentRole:d==null?void 0:d.role,reason:_.reason}):u.jsx(u.Fragment,{children:r}):u.jsx(La,{to:"/login",state:{from:f},replace:!0})},Ku=x.lazy(()=>Z(()=>import("./Dashboard-DLXYiF5u.js"),__vite__mapDeps([0,1,2]))),Ju=x.lazy(()=>Z(()=>import("./LoginPage-0iakm6st.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14]))),Qu=x.lazy(()=>Z(()=>import("./HomePage-Drssr0bD.js"),__vite__mapDeps([15,1,2,16,17,18,19,20,21]))),Yu=x.lazy(()=>Z(()=>import("./NotFound-Rve0BD0U.js"),__vite__mapDeps([22,1,2,23]))),Cn=x.lazy(()=>Z(()=>import("./ResetPasswordPage-CTLhZPn8.js"),__vite__mapDeps([24,1,2,4,5,7,8,9,11,12,13]))),Xu=x.lazy(()=>Z(()=>import("./AdminPanel-C43XH_Z3.js"),__vite__mapDeps([25,1,2,4,26,27,28,8,17,29,30,18,31,32,20,33,21,34,14,35,9]))),Zu=x.lazy(()=>Z(()=>import("./AdminDashboard-Bbz2Ed01.js"),__vite__mapDeps([36,1,2,26,27,28,37,30,17,9,38,8,18,39]))),eh=x.lazy(()=>Z(()=>import("./UserManagement-CdmtEO3b.js"),__vite__mapDeps([40,1,2,4,41,42,43,6,5,26,44,45,46,27,28,47,20,29,48,33,17,49,18,19,12,50,13,51,32,52,8,37,53,35,54,34,10,11,14,38,9]))),th=x.lazy(()=>Z(()=>import("./SystemLogs-mlXb7-JH.js"),__vite__mapDeps([55,1,2,4,43,44,45,46,27,28,33,35,32,38,34,31]))),rh=x.lazy(()=>Z(()=>import("./ProductList-BPpyvonA.js"),__vite__mapDeps([56,1,2,4,28,37,41,19,16,39,49,53,33,13,52,46,50,32]))),Pn=x.lazy(()=>Z(()=>import("./ProductForm-DyKY4kp5.js"),__vite__mapDeps([57,1,2,4,58,5,43,41,28,52,6,35,49]))),sh=x.lazy(()=>Z(()=>import("./SalesReportList-DL5uFQl_.js"),__vite__mapDeps([59,1,2,4,28,41,6,60,54,49,39,9,53,50,32,45,46]))),Rn=x.lazy(()=>Z(()=>import("./SalesReportForm-BKhC41lu.js"),__vite__mapDeps([61,1,2,4,5,58,43,28,48,60,37,50,46,62,41,13,21,51,33,9,31,49,39,52]))),nh=x.lazy(()=>Z(()=>import("./EmployeeList-CvpTtc6W.js"),__vite__mapDeps([63,1,2,4,43,41,6,42,23,12,38,35,46,45,33,10,49,53,17,50,32,34]))),On=x.lazy(()=>Z(()=>import("./EmployeeForm-BOv74J0S.js"),__vite__mapDeps([64,1,2,4,58,5,43,47,62,41,13,21,51,33,17,52]))),ih=new uo({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:(r,e)=>r<2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),In=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}),ah=()=>{const[r,e]=b.useState(!1),[t,s]=b.useState(null);return b.useEffect(()=>{(async()=>{try{console.log(" Initializing DFS Manager Portal...");const i="https://vetufvhzmawjbsumtplq.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZldHVmdmh6bWF3amJzdW10cGxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4NjU2NDgsImV4cCI6MjA2NDQ0MTY0OH0.QZGDjZYO4P9e7ogbORlWCVHhQ92j6enBUEo_KIHb4Wk";console.log(" Environment variables validated"),console.log(" Supabase configuration found");const o=document.getElementById("loading-screen");o&&(o.style.display="none"),document.body.classList.add("app-loaded"),e(!0),console.log(" App initialization complete")}catch(i){console.error(" App initialization failed:",i),s(i instanceof Error?i.message:"Unknown initialization error")}})()},[]),{isInitialized:r,initError:t}},oh=()=>{const{isInitialized:r,initError:e}=ah();return e?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-100",children:u.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-lg max-w-md",children:[u.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Initialization Error"}),u.jsx("p",{className:"text-gray-600 mb-4",children:e}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Reload Application"})]})}):r?u.jsx(Bl,{fallback:ec,children:u.jsx(fo,{client:ih,children:u.jsx(yu,{children:u.jsx(Ua,{children:u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(b.Suspense,{fallback:u.jsx(In,{}),children:u.jsxs(Fa,{children:[u.jsx(te,{path:"/",element:u.jsx(Qu,{})}),u.jsx(te,{path:"/login",element:u.jsx(Ju,{})}),u.jsx(te,{path:"/reset-password",element:u.jsx(Cn,{})}),u.jsx(te,{path:"/resetpassword",element:u.jsx(Cn,{})}),u.jsx(te,{path:"/dashboard",element:u.jsx(me,{children:u.jsx(Ku,{})})}),u.jsx(te,{path:"/admin",element:u.jsx(me,{requiredRole:"Administrator",children:u.jsx(Xu,{})})}),u.jsx(te,{path:"/admin/dashboard",element:u.jsx(me,{requiredRole:"Administrator",children:u.jsx(Zu,{})})}),u.jsx(te,{path:"/admin/users",element:u.jsx(me,{requiredRole:"Administrator",children:u.jsx(eh,{})})}),u.jsx(te,{path:"/admin/logs",element:u.jsx(me,{requiredRole:"Administrator",children:u.jsx(th,{})})}),u.jsx(te,{path:"/products",element:u.jsx(me,{children:u.jsx(rh,{})})}),u.jsx(te,{path:"/products/new",element:u.jsx(me,{children:u.jsx(Pn,{})})}),u.jsx(te,{path:"/products/edit/:id",element:u.jsx(me,{children:u.jsx(Pn,{})})}),u.jsx(te,{path:"/sales",element:u.jsx(me,{children:u.jsx(sh,{})})}),u.jsx(te,{path:"/sales/new",element:u.jsx(me,{children:u.jsx(Rn,{})})}),u.jsx(te,{path:"/sales/edit/:id",element:u.jsx(me,{children:u.jsx(Rn,{})})}),u.jsx(te,{path:"/employees",element:u.jsx(me,{children:u.jsx(nh,{})})}),u.jsx(te,{path:"/employees/new",element:u.jsx(me,{children:u.jsx(On,{})})}),u.jsx(te,{path:"/employees/edit/:id",element:u.jsx(me,{children:u.jsx(On,{})})}),u.jsx(te,{path:"*",element:u.jsx(Yu,{})})]})}),u.jsx(Cl,{})]})})})})}):u.jsx(In,{})};console.log(" Starting DFS Manager Portal...");console.log("Environment:","production");console.log("Supabase URL:","Configured ");console.log("Supabase Key:","Configured ");window.addEventListener("error",r=>{console.error("Global error:",r.error)});window.addEventListener("unhandledrejection",r=>{console.error("Unhandled promise rejection:",r.reason)});try{const r=document.getElementById("root");if(!r)throw new Error("Root element not found");Kn(r).render(u.jsx(x.StrictMode,{children:u.jsx(oh,{})})),console.log(" App rendered successfully")}catch(r){console.error(" App initialization failed:",r);const e=document.getElementById("root")||document.body;e.innerHTML=`
    <div style="
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
      min-height: 100vh; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      text-align: center;
      padding: 20px;
    ">
      <h1 style="font-size: 2rem; margin-bottom: 1rem;">DFS Manager Portal</h1>
      <p style="font-size: 1.1rem; margin-bottom: 1rem;">Initialization Error</p>
      <p style="font-size: 0.9rem; margin-bottom: 2rem; opacity: 0.9;">
        ${r instanceof Error?r.message:"Unknown error occurred"}
      </p>
      <button onclick="window.location.reload()" style="
        background: rgba(255,255,255,0.2); 
        border: 2px solid white; 
        color: white; 
        padding: 12px 24px; 
        border-radius: 8px; 
        font-size: 1rem; 
        cursor: pointer;
        transition: all 0.3s ease;
      " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
         onmouseout="this.style.background='rgba(255,255,255,0.2)'">
        Reload Application
      </button>
    </div>
  `}export{zl as A,rt as B,Rr as C,fs as E,Ho as L,us as R,Go as S,Gl as T,bo as V,Wo as X,Eh as a,Or as b,$e as c,Ir as d,Is as e,Nr as f,Hl as g,Sr as h,Bo as i,Wu as j,Qt as k,G as l,ae as m,Wl as n,Ql as o,Yl as p,Kl as q,Xl as r,Re as s,Pl as t,js as u,vo as v,Pr as w,zo as x,Vo as y};
//# sourceMappingURL=index-DRBMqcxT.js.map
